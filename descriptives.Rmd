---
title: "Descriptive Statistics"
author: "Martin Schweinberger"
date: "2 Dezember 2018"
output: html_document
---

Statistics can be divided into two main areas. *Descriptive Statistics* deals with the description of data and their visualization, while  *Inference statistics* deals with testing assumptions about correlations between variables (<www.slcladal.slcladal.github.io>). The following section focuses on describing data, especially with *measures of central tendency* and *measures of variability*.

# Measures of central tendency

In linguistics three measures of central tendency are of particular relevance: the *mean*, the *median* and the *mode*. Which measure is appropriate depends on the type of variables and the data distribution one is dealing with and what is the intended aim of the data summary.

## Mean
The mean is used when the data is numeric and normally distributed. The mean is calculated by applying the formula shown below.

\begin{equation}
\bar{x}=\frac{1}{n} \sum_{i=1}^n x_i = \frac{x_{1}+x_{2}+ \dots + x_{n}}{n}
\label{eq:mittel}
\end{equation}

To calculate the mean, sum up all values and divide by the number of valuaes. See the example below for clarification.  Consider, we are interested in the mean length of sentences ina short text, then the first thing we could do would be to list the sentences and their length ina table.


```{r echo = F, results = 'asis'}
library(knitr)
Sentences <- c("Call me Ishmael", "Some years ago -- never mind how long precisely -- having little or no money in my purse, and nothing particular to interest me on shore, I thought I would sail about a little and see the watery part of the world.", "It is a way I have of driving off the spleen, and regulating the circulation.", "Whenever I find myself growing grim about the mouth; whenever it is a damp, drizzly November in my soul; whenever I find myself involuntarily pausing before coffin warehouses, and bringing up the rear of every funeral I meet; and especially whenever my hypos get such an upper hand of me, that it requires a strong moral principle to prevent me from deliberately stepping into the street, and methodically knocking people's hats off--then, I account it high time to get to sea as soon as I can.")
Words <- c(3, 40, 15, 87)
df <- data.frame(Sentences, Words)
kable(df, caption = "Sentences of the first paragraph of Herman Melville's *Moby Dick* and the number of words in each sentence.")
```


To calculate the mean, we need to divide the sum of the number of words per sentence  (145) by the number of sentences (7) (cf. equation (\ref{eq:mittel2})).

\begin{equation}
\frac{3+40+15+87}{4} = \frac{145}{4} = 36.25
\label{eq:mittel2}
\end{equation}

The mean sentences leght in our example is 36.25 words

Das arithmetische Mittel wird in \verb!R! wie folgt berechnet.
\begin{lstlisting}
# erstellen eines vektors mit zahlen
zahlen <- c(3, 40, 15, 87)
# berechnen des arithmetische mittels
mean(zahlen)
\end{lstlisting}

## Median

The median is typically used hwen dealing with ordinal variables, i.e. variables that are ordered but not truely numeric. The median is the central value in a de- or increasing ordering of values in a vector. In other words, 50% of values are above and 50% of values are below  the median in a given vector.

If the vector contains an even number of elements, then the two central values are summed up and divided by 2. If the vector contains an uneven number of elements, the median represents the central value.

\begin{equation}
\med x=
\begin{cases}
x_{\frac{n+1}{2}} & n\text{ ungerade} \\
\frac{1}{2}\bigl(x_{\frac{n}{2}}+x_{\frac{n+1}{2}}\bigr) & n\text{ gerade}
\end{cases}
\label{eq:median}
\end{equation}

Verdeutlichen wir dies an einem Beispiel. Nehmen wir an, Sie sind daran interessiert, wie die Altersstruktur der privaten Dialoge in der irischen Komponente des \textit{International Corpus of English} (ICE) aussieht und sie erhalten folgende Verteilung.

\begin{table}[H]
\begin{minipage}{\textwidth}
\begin{center}
\begin{footnotesize}
\begin{tabular}{l r}
\hline
Altersgruppe & Anzahl (Sprecher) \\
\hline
0--10 & 9\\
19--25 & 160\\
26--33 & 70 \\
34--41 & 15 \\
42--49 & 9 \\
50+ & 57 \\
\hline
\end{tabular}
\end{footnotesize}
\caption{Tabelle der Alterstruktur der Sprecher in der irischen Komponente des ICE (private Dialoge)}
\label{tab:modalwert1}
\end{center}
\end{minipage}
\end{table}

\begin{figure}[H]
\centering
\includegraphics[width=.75\textwidth]{images/median1.png}\\[.25cm]
\caption{Visualisierung von der Altersstruktur der Sprecher in der irischen Komponente des ICE (private Dialoge)}
\label{fig:modalwert1}
\end{figure}

Die Altersgruppen bilden eine Rangfolge. Wenn Sie nun die Sprecher nach Altersgruppenzugehörigkeit ordnen und in eine aufsteigende Ordnung bringen (A1: \textit{0-18}, B2: \textit{19-25}, etc.) erhalten sie einen Vektor mit 320 Elementen. Wenn sie dann den mittleren Wert entnehmen (der 160te Sprecher), haben Sie den Median der Altersstruktur der Sprecher in der irischen Komponente des ICE (private Dialoge). Der Median der Altersstruktur der Sprecher ist Altersgruppe 2, d.h. \textit{19-25}.

In R, the median is calculated like below.

```{r median}
# create a vector consisting out of ranks
# erstellen eines vektors mit raengen
rangdaten <- c(rep(1, 9), rep(2, 160), rep(3, 70), rep(4, 15), rep(5, 9), rep(6, 57))
# calculate  median
median(rangdaten)
```


## Mode

The mode is typically used when dealing with categorical variables and it reports which level of a factor or a categorical variable is the most frequent. Here is an example to illustrate the mode. Consider you are interested where most speakers in the private dialogie section of the Irish component of the International Corpus of English are currently residing and you get the fowllowing distribution.

\begin{table}[H]
\begin{minipage}{\textwidth}
\begin{center}
\begin{footnotesize}
\begin{tabular}{l r}
\hline
Current residence & Anzahl (Sprecher) \\
\hline
Belfast & 98\\
Down & 20 \\
Dublin (city) & 110 \\
Limerick & 13 \\
Tipperary & 19 \\
\hline
\end{tabular}
\end{footnotesize}
\caption{Tabelle der Alterstruktur der Sprecher in der irischen Komponente des ICE (private Dialoge)}
\label{tab:modalwert1}
\end{center}
\end{minipage}
\end{table}

```{r fig.width=10, fig.height=8, echo=FALSE, warning=FALSE}
library(png)
ima <- readPNG("resources/modalwert1.png")
plot(c(100, 250), c(300, 450), type = "n", xlab = "", ylab = "", xaxt = "n",yaxt = "n")
lim <- par()
rasterImage(ima, lim$usr[1], lim$usr[3], lim$usr[2], lim$usr[4])
```

![Visualisierung von der gegenwärtigen Residenz der Sprecher in der irischen Komponente des ICE (private Dialoge).](/resources/modalwert1.png)



Aus Tabelle (\ref{tab:modalwert1}) und Grafik (\ref{fig:modalwert1}) geht hervor, dass der Modalwert "Dublin (City)" ist, da insgesamt 110 der Sprecher dort gegenwärtig leben und diese Gruppe somit die häufigste Kategorie darstellt. Wir können also festhalten, das der \textquote{durchschnittliche} Sprecher privater Dialoge in der irischen Komponente des ICE ein Dubliner ist.

In \verb!R! the mode is calculated liek below:

```{r mode}
# create a factor with different levels
kategorien <- c(rep("Belfast", 98), rep("Down", 20), rep("Dublin (city)", 110), rep("Limerick", 13), rep("Tipperary", 19))
# calculate mode
names(which.max(table(kategorien)))
```

A word of warning is in order here as only the frist(!) maximal value is provided by R even if several categories have the same frequency. 


## Notes on measures of central tendency 

Man kann sich nun fragen, warum es drei unterschiedliche Maße der zentralen Tendenz gibt und warum diese notwendig sind. Anhand eines fiktiven Beispiels soll dies erläutert werden. Nehmen wir an, sie untersuchen die Häufigkeit des Gebrauchs von Diskurspartikeln in zwei kleinen Korpora, die dieselben Sprecher enthalten, aber in unterschiedlichen Gesprächssituationen. Sie berechnen für jeden Sprecher die relative Häufigkeit von Diskurspartikeln pro 1,000 Wörtern pro Korpus und berichten anschließend einen Mittelwert von 13.4 für beide Korpora. Es scheint also so zu sein, dass sich die beiden Korpora hinsichtlich des Gebrauchs von Diskurspartikeln nicht unterscheiden. Wenn man allerdings Tabelle (\ref{tab:zent1}) und Grafik (\ref{fig:zent2}) betrachtet, so fällt sofort auf, dass die Angabe des arithmetischen Mittels keine gute Abbildung der Datenstruktur darstellt.


\begin{table}[H]
\begin{minipage}{\textwidth}
\begin{center}
\begin{footnotesize}
\begin{tabular}{l c r}
\hline
Korpus & Sprecher & relative Häufigkeit (pro 1,000 Wörter) \\
\hline
K1 & A & 5.2\\
K1 & B & 11.4 \\
K1 & C & 27.1 \\
K1 & D & 13.7 \\
K1 & F & 9.6 \\
\hline
K2 & A & 0.2\\
K2 & B & 0.0 \\
K2 & C & 1.1 \\
K2 & D & 93.7 \\
K2 & F & 0.4 \\
\hline
\end{tabular}
\end{footnotesize}
\caption{Tabelle der relativen Häufigkeit von Diskurspartikeln pro Sprecher in zwei Korpora}
\label{tab:zent1}
\end{center}
\end{minipage}
\end{table}
\begin{figure}[H]
\centering
\includegraphics[width=.8\textwidth]{images/zent2.png}\\[.25cm]
\caption{Visualisierung relativen Häufigkeit von Diskurspartikeln in zwei unterschiedlichen Gesprächssituationen}
\label{fig:zent2}
\end{figure}

Es wird deutlich, dass sich die Diskurspartikeln in Korpus 1 relativ gleichmäßig über die Sprecher verteilen, während vier der fünf Sprecher in Korpus 2 extrem wenige Diskurspartikeln verwenden und nun ein einzelner Sprecher für den hohen Mittelwert verantwortlich ist. In solchen Fällen ist es günstig neben dem arithmetischen Mittel noch den Median anzugeben, da so deutlich wird, dass sich die Verteilungen klar unterscheiden. In anderen Worten: Auch bei numerischen Variablen kann die Berechnung des Medians, als Maß der zentralen Tendenz sinnvoll sein, wenn die Verteilung der Daten einer Normalverteilung sehr unähnlich ist. Man würde dies etwa wie folgt zusammenfassen: Die Verteilung der relativen Häufigkeiten von Diskurspartikeln in Korpus 1 (arithmetisches Mittel: 13.7, Median: 11.4) unterscheiden sich deutlich von der Verteilung der Häufigkeiten in Korpus 2 (arithmetisches Mittel: 13.7, Median: 0.4).

Abschließend ist zu sagen, dass -- ähnlich wie bei Variablen -- die verschiedenen Maße der zentralen Tendenz zwar aufwärts- aber nicht abwärtskompatibel sind. Dies bedeutet, dass auch bei numerischen Variablen der Modus und Median berechnet werden kann, das arithmetische Mittel darf man jedoch nur mit numerischen Variablen berechnet werden. Wir werden nun auf eine andere Möglichkeit eingehen den Unterschied zwischen Korpus 1 und Korpus 2 zu verdeutlichen: Streuungsmaße.

# Measures of variability

Streuungsmaße geben Aufschluss darüber, wie die Datenpunkte verteilt sind, d.h. ob die Werte der Datenpunkte relative homogen sind und wenig voneinander abweichen, oder ob sie sehr heterogen sind und stark voneinander abweichen. Wir werden im Folgenden zwei Streuungsmaße behandeln: die \textit{Varianz} und die \textit{Standardabweichung}. Auch hier soll zu Beginn ein Beispiel den Nutzen dieser Streuungsmaße aufzeigen. Nehmen wir an, wir haben es mit zwei Städten zu tun, deren Jahresdurchschnittstemperatur identisch ist, die sich allerdings, wie aus Tabelle (\ref{tab:streu1}) Grafik (\ref{fig:str1}) ersichtlich, dennoch erheblich unterscheiden.


\begin{table}[H]
\begin{minipage}{\textwidth}
\begin{center}
\begin{footnotesize}
\begin{tabular}{l c r}
\hline
Monat & Stadt A & Stadt B \\
\hline
Januar & -5 & 7 \\
Februar & -12 & 7 \\
März & 5 & 8 \\
April & 12 & 9 \\
Mai & 15 & 10 \\
Juni & 18 & 13 \\
Juli & 22 & 15 \\
August & 23 & 15 \\
September & 20 & 13 \\
Oktober & 16 & 11 \\
November & 8 & 8 \\
Dezember & 1 & 7 \\
\hline
Mittelwert & 10.25 & 10.25 \\
\hline
\end{tabular}
\end{footnotesize}
\caption{Tabelle der Temperaturen zweier Städte}
\label{tab:streu1}
\end{center}
\end{minipage}
\end{table}
\begin{figure}[H]
\centering
\includegraphics[width=1\textwidth]{images/str1.png}\\[.25cm]
\caption{Temperaturen zweier Städte}
\label{fig:str1}
\end{figure}


Im Folgenden werden wir nun die verschiedenen Streuungsmaße für die Jahrestemperatur dieser zwei Städte berechnen.

## Variance

Die Varianz berechnet sich nach Formel (\ref{eq:varianz}), d.h. jeder Wert wird von dem arithmetischen Mittel abgezogen und das Ergebnis wird dann quadriert. Diese quadrierten Werte werden addiert und durch die Größe der Stichprobe minus 1 geteilt.

\begin{equation}
s = \sigma^2 = \frac{1}{n-1} \sum_{i=1}^{n} (x_i - \bar{x})^{2}
\label{eq:varianz}
\end{equation}

For our example, the equaltion provides a value of 123.6591 for city A and a value of 9.477273 for city B.

In R, the variance is calculated like below:

```{r variance}
# create a numeric vector
cityA <- c(-5, -12, 5, 12, 15, 18, 22, 23, 20, 16, 8, 1)
# calculate variance
sd(cityA)^2
```


## Standard deviation 

The standard deviation (abbreviated with capital $sigma$ $\sigma$) is calculated according to equation  (\ref{eq:sd1}) or, alternatively, according to equation (\ref{eq:sd2}) and it is the square root of the squared variance.

\begin{equation}
\sigma = \sqrt{s} = \sqrt{\frac{1}{n-1} \sum_{i=1}^{n} (x_i - \bar{x})^2}
\label{eq:sd1}
\end{equation}
\begin{equation}
\sigma = \sqrt{\frac{ \sum_{i=1}^{n} (x_i - \bar{x})^2}{n-1}}
\label{eq:sd2}
\end{equation}

Für unser Beispiel ergeben sich nach Formel (\ref{eq:sd1}) für Stadt A eine Standardabweichung von 11.12 und für Stadt B eine Standardabweichung von 3.08.

The standard devaition is calculated like below in \verb!R!.

```{r sd}
# create a numeric vector
CityA <- c(-5, -12, 5, 12, 15, 18, 22, 23, 20, 16, 8, 1)
# calculate standard deviation
sd(CityA)
```


## Measures of variability for non-normal data

Bislang haben wir nicht beachtet, wie die Daten, die wir betrachten normalverteilt sind oder nicht. Im Folgenden werden wir auf Möglichkeiten eingehen nicht normalverteilte Daten zu beschreiben. Im ersten Schritt erstellen wir Beispieldaten und bestimmen anschließend, ob die Daten normalverteilt sind oder nicht. Hierzu nutzen wir den Shapiro-Wilk Test, welcher darüber Auskunft gibt, ob die Zahlenreihe signifikant von der Normalverteilung abweicht oder nicht.


```{r shapiro}
# anmerkungen
k1 <- c(9.2, 11.4, 27.1, 13.7, 9.6)
k2 <- c(0.7, 0.0, 1.1, 68.7, 0.5)
# apply shapiro-wilk test
shapiro.test(k1) # p < .05 = non-normal

shapiro.test(k2) # p < .05 = non-normal
```


The Shapiro-Wilk test shows that the distribution in the data differs significantly froma normal distribution. However, the  Shapiro-Wilk test has been found to be too generous with small samples and too harsh when dealing with large samples. For this erason, it is recommended that the test should always be accompanied by additional eye-balling of the data.



## Quantile

When dealing with non-normal data, the best option to provide a summary of the distribution is to report the quantiles. 



# Excercises

1. Calculate the mean, median, and mode as well as the standrad deviation for the follwoing two vactors.

A: 1, 3, 6, 2, 1, 1, 6, 8, 4, 2, 3, 5, 0, 0, 2, 1, 2, 1, 0 

B: 3, 2, 5, 1, 1, 4, 0, 0, 2, 3, 0, 3, 0, 5, 4, 5, 3, 3, 4 


mean:

median:

mode:

standard deviation:

2. Find a partner and discuss which meaure of central tendency is sppropriate when dealing with grades. Then, find another partner and see whether they hve come to teh same conclusion or discuss why if not. Finally, discuss the advantages and disadvantages of calculateing themmean when dealing with grades.

3. Where are mean, median, and mode when dealing with normal data?

4. Sie erhalten bei drei Untersuchungen mit jeweils zwei Gruppen einmal nahezu identische Steuungen, aber unterschiedliche Mittelwerte, einmal nahezu identische Mittelwerte, aber unterschiedliche Steuungen, und in der letzten Untersuchung sowohl unterschiedliche Mittelwerte und unterschiedliche Streuungen. \\
Wie interpretieren Sie diese drei Ergebnisse?

5. Suchen Sie sich nun einen Partner und diskutieren Sie zusammen, was es auf der konzeptionellen und nicht auf der statistischen Ebene bedeuten könnte, dass zwei Gruppen unterschiedliche Streuungen aufweisen. (Vorsicht: Dies ist nicht so trivial, wie es auf den ersten Blick wirken könnte!)
