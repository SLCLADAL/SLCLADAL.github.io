<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />
<link rel="icon" 
      type="image/x-icon" 
      href="favicon.ico" />


<meta name="author" content="Dattatreya Majumdar and Martin Schweinberger" />

<meta name="date" content="2021-01-23" />

<title>Computational Literary Stylistics with R</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="site_libs/anchor-sections-1.0/anchor-sections.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>





<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>


<!-- added by SKC for LADAL Style -->
<link rel="stylesheet" href="styles.css">
</head>

<body>


<div class="container-fluid main-container">





<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">



<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  
  <!-- Added by SKC - LADAL image and thicker top with   -->
  <div class="container-fluid navbar-top" >
    <a href="index.html"> <!-- Make entire top row and text clickable home link  -->
        <div class="row">
            <div class="navbar-brand col-md-12">
              <img src="ladal_icon_cas_tran_white_trimed.png" class="navbar-icon" alt="LADAL"/>
              <span class="navbar-title-note navbar-collapse collapse" >Language Technology and Data Analysis Laboratory</span>
            </div>
        </div>
    </a>
  </div>
  
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <!-- SKC removed  navbar brand -->
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">HOME</a>
</li>
<li>
  <a href="people.html">OUR PEOPLE</a>
</li>
<li>
  <a href="news.html">NEWS</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    DATA SCIENCE BASICS
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Introduction to Data Science</li>
    <li>
      <a href="comp.html">Working with Computers: Tips and Tricks</a>
    </li>
    <li>
      <a href="repro.html">Data Management, Version Control, and Reproducibility</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Quantitative Research</li>
    <li>
      <a href="introquant.html">Introduction to Quantitative Reasoning</a>
    </li>
    <li>
      <a href="basicquant.html">Basic Concepts in Quantitative Research</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Introduction to R</li>
    <li>
      <a href="intror.html">Getting started</a>
    </li>
    <li>
      <a href="string.html">String Processing</a>
    </li>
    <li>
      <a href="regex.html">Regular Expressions</a>
    </li>
    <li>
      <a href="table.html">Handling tables in R</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    TUTORIALS
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Data Visualization</li>
    <li>
      <a href="introviz.html">Introduction to Data Viz</a>
    </li>
    <li>
      <a href="dviz.html">Data Visualization with R</a>
    </li>
    <li>
      <a href="maps.html">Displaying Geo-Spatial Data</a>
    </li>
    <li>
      <a href="motion.html">Interactive Charts</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Statistics</li>
    <li>
      <a href="dstats.html">Descriptive Statistics</a>
    </li>
    <li>
      <a href="basicstatz.html">Basic Inferential Statistics</a>
    </li>
    <li>
      <a href="regression.html">Regression Analysis</a>
    </li>
    <li>
      <a href="tree.html">Tree-Based Models</a>
    </li>
    <li>
      <a href="clust.html">Cluster and Correspondence Analysis</a>
    </li>
    <li>
      <a href="lexsim.html">Introduction to Lexical Similarity</a>
    </li>
    <li>
      <a href="svm.html">Semantic Vector Space Models</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Text Analytics</li>
    <li>
      <a href="textanalysis.html">Text Analysis and Distant Reading</a>
    </li>
    <li>
      <a href="kwics.html">Concordancing (keywords-in-context)</a>
    </li>
    <li>
      <a href="net.html">Network Analysis</a>
    </li>
    <li>
      <a href="coll.html">Co-occurrence and Collocation Analysis</a>
    </li>
    <li>
      <a href="topicmodels.html">Topic Modeling</a>
    </li>
    <li>
      <a href="sentiment.html">Sentiment Analysis</a>
    </li>
    <li>
      <a href="tagging.html">Tagging and Parsing</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    FOCUS &amp; CASE STUDIES
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="lex.html">Lexicography with R: Generating Dictionaries</a>
    </li>
    <li>
      <a href="surveys.html">Questionnaires and Surveys: Analyses with R</a>
    </li>
    <li>
      <a href="corplingr.html">Corpus Linguistics with R: Swearing in Irish English</a>
    </li>
    <li>
      <a href="vc.html">Phonetics: Creating Vowel Charts with Praat and R</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Useful How-To Tutorials</li>
    <li>
      <a href="convertpdf2txt.html">Converting PDFs to txt</a>
    </li>
    <li>
      <a href="webcrawling.html">Web Crawling using R</a>
    </li>
    <li>
      <a href="gutenberg.html">Downloading Texts from Project Gutenberg</a>
    </li>
  </ul>
</li>
<li>
  <a href="services.html">SERVICES &amp; CONTACT</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Computational Literary Stylistics with R</h1>
<h4 class="author">Dattatreya Majumdar and Martin Schweinberger</h4>
<h4 class="date">2021-01-23</h4>

</div>



<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-130562131-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-130562131-1');
</script>

<p><img src="https://slcladal.github.io/images/uq1.jpg" width="100%" /></p>
<div id="introduction" class="section level1 unnumbered">
<h1>Introduction</h1>
<p>This tutorial focuses on computational literary stylistics (also digital literary stylistics) and exemplifies how computational literary stylistic analyses can be done in R. This tutorial builds on and expands <span class="citation">Silge and Robinson (<a href="#ref-silge2017text" role="doc-biblioref">2017</a>)</span> (see <a href="https://www.tidytextmining.com/">here</a>) and the entire code for the sections below can be downloaded <a href="https://slcladal.github.io/litsty.Rmd">here</a>.</p>
<p><strong>Literary stylistics</strong></p>
<p>Literary stylistics refers to analyses of the language of literary texts by computational means using linguistic concepts and categories, with the goal of finding patters among the literary texts under investigation and explaining how literary meanings are created by specific language choices and patterning, the linguistic foregrounding, in the text.</p>
<p>Before we continue, we need to define certain terms of concepts that rae related to literary stylistics and that we will use repeatedly in this tutorials and that we need to define so that the analysis shown below makes sense.</p>
<p><em>Term Frequency</em> is the measure of importance of a word in a document or how frequently it appears in that document. However there are some words such as “the”,“is”, “of”, etc. which appear frequently even though they might not be important. An approach of using a list of stop-words and removing them before analysis can be useful but in case of some documents these words might be highly relevant.</p>
<p><em>Inverse Document Frequency</em> decreases the weight for most used words and increases the weight for words that are not much used in a collection of documents. This together with the Term Frequency can be used to calculate a term’s <em>tf-idf</em> (the multiplication of both the terms) which adjusts the frequency of the term based on how rarely it is used. Mathematically <em>idf</em> can be expressed as follows:</p>
<p><span class="math display">\[\begin{equation}
  idf_{(term)}=  ln (\frac{n_{documents}}{n_{documents\; containing\; term}})
\end{equation}\]</span></p>
<p>For this tutorial we will analyze the data set pertaining to Jane Austen’s novels.</p>
<div id="preparation-and-session-set-up" class="section level2 unnumbered">
<h2>Preparation and session set up</h2>
<p>This tutorial is based on R. If you have not installed R or are new to it, you will find an introduction to and more information how to use R <a href="https://slcladal.github.io/IntroR_workshop.html">here</a>. For this tutorials, we need to install certain <em>packages</em> from an R <em>library</em> so that the scripts shown below are executed without errors. Before turning to the code below, please install the packages by running the code below this paragraph. If you have already installed the packages mentioned below, then you can skip ahead ignore this section. To install the necessary packages, simply run the following code - it may take some time (between 1 and 5 minutes to install all of the libraries so you do not need to worry if it takes some time).</p>
<pre class="r"><code># clean current workspace
rm(list=ls(all=T))
# set options
options(stringsAsFactors = F)
# install libraries
install.packages(c(&quot;tidytext&quot;,&quot;janeaustenr&quot;,&quot;tidyverse&quot;))</code></pre>
<p>Once you have installed R and RStudio and initiated the session by executing the code shown above, you are good to go.</p>
</div>
</div>
<div id="getting-started" class="section level1 unnumbered">
<h1>Getting started</h1>
<p>For this tutorial we will be primarily requiring 3 packages: <em>tidytext</em>, <em>janeaustenr</em> and <em>tidyverse</em>. The <em>tidytext</em> package provides functions and supporting data sets to allow conversion of text to and from tidy formats, and to switch seamlessly between tidy tools and existing text mining packages. The <em>janeaustenr</em> package is used to load the collection of novels by Jane Austen. The <em>tidyverse</em> package provides functions for data processing and visualization.</p>
<p>We will start by loading the required packages.</p>
<pre class="r"><code>library(tidyverse)
library(janeaustenr)
library(tidytext)
library(forcats)
library(quanteda)</code></pre>
</div>
<div id="extracting-words" class="section level1 unnumbered">
<h1>Extracting words</h1>
<pre class="r"><code>austen_texts &lt;- austen_books() %&gt;%
  dplyr::filter(book == &quot;Pride &amp; Prejudice&quot;) %&gt;%
  dplyr::summarise(text = paste0(text, collapse = &quot; &quot;)) %&gt;%
  stringr::str_squish()
names(austen_texts)  &lt;- &quot;Pride &amp; Prejudice&quot;
pride &lt;- quanteda::kwic(austen_texts, &quot;pride&quot;) %&gt;%
  as.data.frame()
# inspect data
head(pride)</code></pre>
<pre><code>##             docname from   to                          pre keyword
## 1 Pride &amp; Prejudice    1    1                                PRIDE
## 2 Pride &amp; Prejudice 6073 6073            he is eat up with   pride
## 3 Pride &amp; Prejudice 6179 6179                him . &quot; &quot; His   pride
## 4 Pride &amp; Prejudice 6194 6194       offend _me_ so much as   pride
## 5 Pride &amp; Prejudice 6266 6266 I could easily forgive _his_   pride
## 6 Pride &amp; Prejudice 6277 6277       mortified _mine_ . &quot; &quot;   Pride
##                           post pattern
## 1 AND PREJUDICE By Jane Austen   pride
## 2             , and I dare say   pride
## 3          , &quot; said Miss Lucas   pride
## 4   often does , because there   pride
## 5              , if he had not   pride
## 6          , &quot; observed Mary ,   pride</code></pre>
</div>
<div id="identifying-keywords" class="section level1 unnumbered">
<h1>Identifying Keywords</h1>
<p>The problem underlying the identification of keywords is to figure out the importance of words in each document. We can assign weights to words that are more characteristic for a text if these terms are used more frequently than expected in a given text. We can then show terms ordered by their relative weight. Using the <em>bind_tf_idf()</em> function from the <em>tidytext</em> package, we can extract <em>tf-idf</em> scores which represent these relative weights and we can also report other parameters such as number of occurrences of that word, total number of words and term frequency.</p>
<pre class="r"><code>book_words &lt;- austen_books() %&gt;%
  tidytext::unnest_tokens(word, text) %&gt;%
  dplyr::count(book, word, sort = TRUE) %&gt;% 
  dplyr::group_by(book) %&gt;% 
  dplyr::mutate(total = sum(n))
book_tf_idf &lt;- book_words %&gt;%
  tidytext::bind_tf_idf(word, book, n)
# inspect data
book_tf_idf</code></pre>
<pre><code>## # A tibble: 40,379 x 7
## # Groups:   book [6]
##    book              word      n  total     tf   idf tf_idf
##    &lt;fct&gt;             &lt;chr&gt; &lt;int&gt;  &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
##  1 Mansfield Park    the    6206 160460 0.0387     0      0
##  2 Mansfield Park    to     5475 160460 0.0341     0      0
##  3 Mansfield Park    and    5438 160460 0.0339     0      0
##  4 Emma              to     5239 160996 0.0325     0      0
##  5 Emma              the    5201 160996 0.0323     0      0
##  6 Emma              and    4896 160996 0.0304     0      0
##  7 Mansfield Park    of     4778 160460 0.0298     0      0
##  8 Pride &amp; Prejudice the    4331 122204 0.0354     0      0
##  9 Emma              of     4291 160996 0.0267     0      0
## 10 Pride &amp; Prejudice to     4162 122204 0.0341     0      0
## # ... with 40,369 more rows</code></pre>
<p>From the above table it is evident that the extremely common words have a very low inverse document frequency and thus a low tf-idf score. The inverse document frequency will be a higher number for words that occur in fewer documents in the collection of novels.</p>
<pre class="r"><code>book_tf_idf %&gt;%
  dplyr::select(-total) %&gt;%
  dplyr::arrange(desc(tf_idf))</code></pre>
<pre><code>## # A tibble: 40,379 x 6
## # Groups:   book [6]
##    book                word          n      tf   idf  tf_idf
##    &lt;fct&gt;               &lt;chr&gt;     &lt;int&gt;   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
##  1 Sense &amp; Sensibility elinor      623 0.00519  1.79 0.00931
##  2 Sense &amp; Sensibility marianne    492 0.00410  1.79 0.00735
##  3 Mansfield Park      crawford    493 0.00307  1.79 0.00551
##  4 Pride &amp; Prejudice   darcy       373 0.00305  1.79 0.00547
##  5 Persuasion          elliot      254 0.00304  1.79 0.00544
##  6 Emma                emma        786 0.00488  1.10 0.00536
##  7 Northanger Abbey    tilney      196 0.00252  1.79 0.00452
##  8 Emma                weston      389 0.00242  1.79 0.00433
##  9 Pride &amp; Prejudice   bennet      294 0.00241  1.79 0.00431
## 10 Persuasion          wentworth   191 0.00228  1.79 0.00409
## # ... with 40,369 more rows</code></pre>
<p>For better visualisation of the words having high tf-idf scores in Jane Austen’s novels the following plots will be helpful.</p>
<pre class="r"><code>book_tf_idf %&gt;%
  dplyr::group_by(book) %&gt;%
  slice_max(tf_idf, n = 15) %&gt;%
  dplyr::ungroup() %&gt;%
  ggplot(aes(tf_idf, fct_reorder(word, tf_idf), fill = book)) +
  geom_col(show.legend = FALSE) +
  facet_wrap(~book, ncol = 2, scales = &quot;free&quot;) +
  labs(x = &quot;tf-idf&quot;, y = NULL)</code></pre>
<div class="figure">
<img src="litsty_files/figure-html/high_tf_idfplot-1.png" alt="Highest tf-idf words in each of Jane Austen's Novels" width="576" />
<p class="caption">
Highest tf-idf words in each of Jane Austen’s Novels
</p>
</div>
<p>As you can see, the method has indeed extracted words (and by extension concepts) that are characteristic of the texts.</p>
</div>
<div id="extracting-structural-features" class="section level1 unnumbered">
<h1>Extracting Structural Features</h1>
<p>Extracting structural features of texts is a very common and has a wide range of applications.</p>
<div id="word-frequency-distributions" class="section level2 unnumbered">
<h2>Word-Frequency Distributions</h2>
<p>Next, we load Jane Austen’s novels and determine term-frequency and then determine idf.</p>
<pre class="r"><code>book_words &lt;- austen_books() %&gt;%
  tidytext::unnest_tokens(word, text) %&gt;%
  dplyr::count(book, word, sort = TRUE)  %&gt;% 
  dplyr::group_by(book) %&gt;% 
  dplyr::mutate(total = sum(n))
# inspect data
head(book_words)</code></pre>
<pre><code>## # A tibble: 6 x 4
## # Groups:   book [2]
##   book           word      n  total
##   &lt;fct&gt;          &lt;chr&gt; &lt;int&gt;  &lt;int&gt;
## 1 Mansfield Park the    6206 160460
## 2 Mansfield Park to     5475 160460
## 3 Mansfield Park and    5438 160460
## 4 Emma           to     5239 160996
## 5 Emma           the    5201 160996
## 6 Emma           and    4896 160996</code></pre>
<p>From the above table it is evident that the usual suspects “the”, “and” ,“to” and so-forth are leading in terms of their usage in that book. Now let us look at the distribution of <em>n/total</em> for each novel, which actually is the term frequency.</p>
<pre class="r"><code>ggplot(book_words, aes(n/total, fill = book)) +
  geom_histogram(show.legend = FALSE) +
  xlim(NA, 0.0009) +
  facet_wrap(~book, ncol = 2, scales = &quot;free_y&quot;)</code></pre>
<div class="figure">
<img src="litsty_files/figure-html/tfplot-1.png" alt="Term frequency distribution in Jane Austen's novels" width="576" />
<p class="caption">
Term frequency distribution in Jane Austen’s novels
</p>
</div>
<p>From the plots it is clear that there many words which occur rarely and fewer words that occur frequently.</p>
</div>
<div id="zipfs-law" class="section level2 unnumbered">
<h2>Zipf’s Law</h2>
<p>Zipf’s Law represents an empirical power law or power function that was established in the 1930s and it is the most fundamental law in linguistics <span class="citation">(see Zipf <a href="#ref-george1935zipf" role="doc-biblioref">1935</a>)</span>. This law states that the frequency that a word is inversely proportional to its rank in a text or collection of texts.</p>
<p>Let * N be the number of elements in a text (or collection of texts); * k be their rank; * s be the value of the exponent characterizing the distribution.</p>
<p>Zipf’s law then predicts that out of a population of N elements, the normalized frequency of the element of rank k, f(k;s,N), is:</p>
<p><span class="math display">\[\begin{equation}
f(k;s,N)={\frac {1/k^{s}}{\sum \limits _{n=1}^{N}(1/n^{s})}} 
\end{equation}\]</span></p>
<p>In the code chunk below, we check if Zipf’s Law applies to the words that occur in Jane Austen’s novels.</p>
<pre class="r"><code>freq_by_rank &lt;- book_words %&gt;% 
  dplyr::group_by(book) %&gt;% 
  dplyr::mutate(rank = row_number(), 
         `term frequency` = n/total) %&gt;%
  dplyr::ungroup()
# inspect data
freq_by_rank</code></pre>
<pre><code>## # A tibble: 40,379 x 6
##    book              word      n  total  rank `term frequency`
##    &lt;fct&gt;             &lt;chr&gt; &lt;int&gt;  &lt;int&gt; &lt;int&gt;            &lt;dbl&gt;
##  1 Mansfield Park    the    6206 160460     1           0.0387
##  2 Mansfield Park    to     5475 160460     2           0.0341
##  3 Mansfield Park    and    5438 160460     3           0.0339
##  4 Emma              to     5239 160996     1           0.0325
##  5 Emma              the    5201 160996     2           0.0323
##  6 Emma              and    4896 160996     3           0.0304
##  7 Mansfield Park    of     4778 160460     4           0.0298
##  8 Pride &amp; Prejudice the    4331 122204     1           0.0354
##  9 Emma              of     4291 160996     4           0.0267
## 10 Pride &amp; Prejudice to     4162 122204     2           0.0341
## # ... with 40,369 more rows</code></pre>
<p>To get a better understating of Zipf’s law, let us visualize the distribution by plotting on the logged rank of elements on the x-axis and logged frequency of the terms on the y-axis.</p>
<pre class="r"><code>freq_by_rank %&gt;% 
  ggplot(aes(rank, `term frequency`, color = book)) + 
  geom_line(size = 1.1, alpha = 0.8, show.legend = FALSE) + 
  scale_x_log10() +
  scale_y_log10()</code></pre>
<div class="figure">
<img src="litsty_files/figure-html/fr-1.png" alt="Zipf's law for Jane Austen's novels" width="480" />
<p class="caption">
Zipf’s law for Jane Austen’s novels
</p>
</div>
<p>We can see that the plot has a negative slope which corroborates the inverse relationship of rank with respect to term frequency which shows that the words in Jane Austin’s novels follow Zipf’s law.</p>
</div>
<div id="lexical-diversity" class="section level2 unnumbered">
<h2>Lexical Diversity</h2>
<p>Lexical diversity is a complexity measure that provides information about the lexicon size of a text, i.e. how many different words occur in a text given the size of the text. Typically higher values indicate higher lexical diversity. For example, the Type-Token-Ratio (TTR) provides information about the number of word tokens (individual instances of a word) divided by the number of different word types (word forms).</p>
<p>To elaborate, the sentence <em>The dog chased the cat</em> contains five tokens but only 4 types because <em>the</em> occurs twice. More complex texts or more advanced learners of a language commonly have higher TTRs compared to simpler texts or less advanced language learners.</p>
<p>In the following example, we calculate the TTRs for the novels of Jane Austen.</p>
<pre class="r"><code>austen_books &lt;- austen_books() %&gt;%
  dplyr::group_by(book) %&gt;%
  dplyr::summarise(text = paste(text, collapse = &quot; &quot;))
austen &lt;- austen_books %&gt;%
  dplyr::pull(text)
names(austen) &lt;- austen_books %&gt;%
  dplyr::pull(book)
tokens_austen &lt;- austen %&gt;%
  quanteda::corpus() %&gt;%
  quanteda::tokens()
# inspect data
head(tokens_austen)</code></pre>
<pre><code>## Tokens consisting of 6 documents.
## Sense &amp; Sensibility :
##  [1] &quot;SENSE&quot;       &quot;AND&quot;         &quot;SENSIBILITY&quot; &quot;by&quot;          &quot;Jane&quot;       
##  [6] &quot;Austen&quot;      &quot;(&quot;           &quot;1811&quot;        &quot;)&quot;           &quot;CHAPTER&quot;    
## [11] &quot;1&quot;           &quot;The&quot;        
## [ ... and 141,483 more ]
## 
## Pride &amp; Prejudice :
##  [1] &quot;PRIDE&quot;     &quot;AND&quot;       &quot;PREJUDICE&quot; &quot;By&quot;        &quot;Jane&quot;      &quot;Austen&quot;   
##  [7] &quot;Chapter&quot;   &quot;1&quot;         &quot;It&quot;        &quot;is&quot;        &quot;a&quot;         &quot;truth&quot;    
## [ ... and 143,845 more ]
## 
## Mansfield Park :
##  [1] &quot;MANSFIELD&quot; &quot;PARK&quot;      &quot;(&quot;         &quot;1814&quot;      &quot;)&quot;         &quot;By&quot;       
##  [7] &quot;Jane&quot;      &quot;Austen&quot;    &quot;CHAPTER&quot;   &quot;I&quot;         &quot;About&quot;     &quot;thirty&quot;   
## [ ... and 186,754 more ]
## 
## Emma :
##  [1] &quot;EMMA&quot;      &quot;By&quot;        &quot;Jane&quot;      &quot;Austen&quot;    &quot;VOLUME&quot;    &quot;I&quot;        
##  [7] &quot;CHAPTER&quot;   &quot;I&quot;         &quot;Emma&quot;      &quot;Woodhouse&quot; &quot;,&quot;         &quot;handsome&quot; 
## [ ... and 193,269 more ]
## 
## Northanger Abbey :
##  [1] &quot;NORTHANGER&quot;    &quot;ABBEY&quot;         &quot;by&quot;            &quot;Jane&quot;         
##  [5] &quot;Austen&quot;        &quot;(&quot;             &quot;1803&quot;          &quot;)&quot;            
##  [9] &quot;ADVERTISEMENT&quot; &quot;BY&quot;            &quot;THE&quot;           &quot;AUTHORESS&quot;    
## [ ... and 91,497 more ]
## 
## Persuasion :
##  [1] &quot;Persuasion&quot; &quot;by&quot;         &quot;Jane&quot;       &quot;Austen&quot;     &quot;(&quot;         
##  [6] &quot;1818&quot;       &quot;)&quot;          &quot;Chapter&quot;    &quot;1&quot;          &quot;Sir&quot;       
## [11] &quot;Walter&quot;     &quot;Elliot&quot;    
## [ ... and 97,409 more ]</code></pre>
<pre class="r"><code>dfm(tokens_austen, remove = stopwords(&quot;en&quot;)) %&gt;%
  quanteda::textstat_lexdiv(measure = &quot;all&quot;) %&gt;%
  tidyr::gather(Measure, Value, TTR:lgeV0) %&gt;%
  dplyr::mutate(Measure = factor(Measure)) %&gt;%
  dplyr::filter(Measure %in% c(&quot;TTR&quot;)) %&gt;%
  ggplot(aes(x = Value, y = reorder(document, Value))) + 
  geom_point() +
  xlab(&quot;Type-Token-Ratio (TTR)&quot;) +
  ylab(&quot;&quot;)</code></pre>
<p><img src="litsty_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<div id="average-sentence-length" class="section level3 unnumbered">
<h3>Average Sentence Length</h3>
<pre class="r"><code>library(lexRankr)
austen_sentences &lt;- austen_books() %&gt;%
  dplyr::group_by(book) %&gt;%
  dplyr::summarise(text = paste(text, collapse = &quot; &quot;)) %&gt;%
  lexRankr::unnest_sentences(sentence, text)
# inspect data
head(austen_sentences)</code></pre>
<pre><code>##                  book sent_id
## 1 Sense &amp; Sensibility       1
## 2 Sense &amp; Sensibility       2
## 3 Sense &amp; Sensibility       3
## 4 Sense &amp; Sensibility       4
## 5 Sense &amp; Sensibility       5
## 6 Sense &amp; Sensibility       6
##                                                                                                                                                                                                                                                                                                      sentence
## 1                                                                                                                                                                                       SENSE AND SENSIBILITY  by Jane Austen  (1811)     CHAPTER 1   The family of Dashwood had long been settled in Sussex.
## 2                                                           Their estate was large, and their residence was at Norland Park, in the centre of their property, where, for many generations, they had lived in so respectable a manner as to engage the general good opinion of their surrounding acquaintance.
## 3                                                                                                                               The late owner of this estate was a single man, who lived to a very advanced age, and who for many years of his life, had a constant companion and housekeeper in his sister.
## 4  But her death, which happened ten years before his own, produced a great alteration in his home; for to supply her loss, he invited and received into his house the family of his nephew Mr. Henry Dashwood, the legal inheritor of the Norland estate, and the person to whom he intended to bequeath it.
## 5                                                                                                                                                                                                In the society of his nephew and niece, and their children, the old Gentleman&#39;s days were comfortably spent.
## 6                                                                                                                                                                                                                                                                       His attachment to them all increased.</code></pre>
<pre class="r"><code>austen_sentences %&gt;%
  dplyr::mutate(sentlength = stringr::str_count(sentence, &#39;\\w+&#39;)) %&gt;%
  ggplot(aes(x = sentlength, y = book, group = book)) +
  stat_summary(fun = mean, geom = &quot;point&quot;)   +          
  stat_summary(fun.data = mean_cl_boot, geom = &quot;errorbar&quot;, width = 0.2) +
  xlab(&quot;Average Sentence Length (ASL)&quot;) +
  ylab(&quot;&quot;)</code></pre>
<p><img src="litsty_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
</div>
</div>
<div id="similarity-among-literary-texts" class="section level2 unnumbered">
<h2>Similarity among literary texts</h2>
<pre class="r"><code>feature_mat &lt;- austen %&gt;%
  quanteda::corpus() %&gt;%
  quanteda::dfm(remove_punct = TRUE, remove_url = TRUE, remove_symbols = TRUE) %&gt;% 
  quanteda::dfm_remove(pattern = stopwords(&quot;en&quot;))
# inspect data
ndoc(feature_mat)</code></pre>
<pre><code>## [1] 6</code></pre>
<pre class="r"><code>topfeatures(feature_mat)</code></pre>
<pre><code>##    mr   mrs  must  said  much  miss   one every think  well 
##  3015  2446  2071  2041  1935  1855  1822  1455  1440  1420</code></pre>
<pre class="r"><code>austen_dist &lt;- as.dist(textstat_dist(feature_mat))
austen_clust &lt;- hclust(austen_dist)
plot(austen_clust)</code></pre>
<p><img src="litsty_files/figure-html/sim03-1.png" width="672" /></p>
</div>
<div id="networks-of-personas" class="section level2 unnumbered">
<h2>Networks of Personas</h2>
<pre class="r"><code># load data
romeo &lt;- read.delim(&quot;https://slcladal.github.io/data/romeo.txt&quot;, sep = &quot;\t&quot;)
# convert into feature co-occurrence matrix
romeo_fcm &lt;- as.fcm(as.matrix(romeo))
# inspect data
romeo_fcm</code></pre>
<pre><code>## Feature co-occurrence matrix of: 23 by 23 features.
##                features
## features        Abraham Benvolio LordCapulet Gregory LadyCapulet LadyMontague
##   Abraham             1        1           1       1           1            1
##   Benvolio            1        7           3       1           2            1
##   LordCapulet         1        3           9       1           7            1
##   Gregory             1        1           1       1           1            1
##   LadyCapulet         1        2           7       1          10            1
##   LadyMontague        1        1           1       1           1            1
##   LordMontague        1        2           2       1           3            1
##   PrinceEscalus       1        2           2       1           3            1
##   Romeo               1        7           5       1           4            1
##   Sampson             1        1           1       1           1            1
##                features
## features        LordMontague PrinceEscalus Romeo Sampson
##   Abraham                  1             1     1       1
##   Benvolio                 2             2     7       1
##   LordCapulet              2             2     5       1
##   Gregory                  1             1     1       1
##   LadyCapulet              3             3     4       1
##   LadyMontague             1             1     1       1
##   LordMontague             3             3     3       1
##   PrinceEscalus            3             3     3       1
##   Romeo                    3             3    14       1
##   Sampson                  1             1     1       1
## [ reached max_feat ... 13 more features, reached max_nfeat ... 13 more features ]</code></pre>
<pre class="r"><code>textplot_network(romeo_fcm, min_freq = 0.1, edge_alpha = 0.1, edge_size = 5)</code></pre>
<p><img src="litsty_files/figure-html/net_05-1.png" width="672" /></p>
</div>
</div>
<div id="citation-session-info" class="section level1 unnumbered">
<h1>Citation &amp; Session Info</h1>
<p>Majumdar, Dattatreya and Martin Schweinberger. 2021. <em>Literary Stylistics with R</em>. Brisbane: The University of Queensland. url: <a href="https://slcladal.github.io/litsty.html" class="uri">https://slcladal.github.io/litsty.html</a> (Version 2021.01.23).</p>
<pre><code>@manual{Majumdar2021ta,
  author = {Majumdar, Dattatreya and Martin Schweinberger},
  title = {Literary Stylistics with R},
  note = {https://slcladal.github.io/litsty.html},
  year = {2021},
  organization = &quot;The University of Queensland, Australia. School of Languages and Cultures},
  address = {Brisbane},
  edition = {2021.01.23}
}</code></pre>
<pre class="r"><code>sessionInfo()</code></pre>
<pre><code>## R version 4.0.3 (2020-10-10)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## Running under: Windows 10 x64 (build 19041)
## 
## Matrix products: default
## 
## locale:
## [1] LC_COLLATE=German_Germany.1252  LC_CTYPE=German_Germany.1252   
## [3] LC_MONETARY=German_Germany.1252 LC_NUMERIC=C                   
## [5] LC_TIME=German_Germany.1252    
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] lexRankr_0.5.2    quanteda_2.1.2    tidytext_0.2.6    janeaustenr_0.1.5
##  [5] forcats_0.5.0     stringr_1.4.0     dplyr_1.0.2       purrr_0.3.4      
##  [9] readr_1.4.0       tidyr_1.1.2       tibble_3.0.4      ggplot2_3.3.2    
## [13] tidyverse_1.3.0  
## 
## loaded via a namespace (and not attached):
##  [1] fs_1.5.0             usethis_1.6.3        lubridate_1.7.9     
##  [4] RColorBrewer_1.1-2   httr_1.4.2           SnowballC_0.7.0     
##  [7] tools_4.0.3          backports_1.1.10     utf8_1.1.4          
## [10] R6_2.5.0             rpart_4.1-15         Hmisc_4.4-1         
## [13] DBI_1.1.0            colorspace_1.4-1     nnet_7.3-14         
## [16] withr_2.3.0          tidyselect_1.1.0     gridExtra_2.3       
## [19] proxyC_0.1.5         compiler_4.0.3       cli_2.1.0           
## [22] rvest_0.3.6          htmlTable_2.1.0      network_1.16.1      
## [25] xml2_1.3.2           labeling_0.4.2       scales_1.1.1        
## [28] checkmate_2.0.0      digest_0.6.27        foreign_0.8-80      
## [31] rmarkdown_2.5        base64enc_0.1-3      jpeg_0.1-8.1        
## [34] pkgconfig_2.0.3      htmltools_0.5.0      dbplyr_2.0.0        
## [37] highr_0.8            htmlwidgets_1.5.2    rlang_0.4.8         
## [40] readxl_1.3.1         rstudioapi_0.11      farver_2.0.3        
## [43] generics_0.1.0       jsonlite_1.7.1       statnet.common_4.4.1
## [46] tokenizers_0.2.1     magrittr_1.5         Formula_1.2-4       
## [49] Matrix_1.2-18        Rcpp_1.0.5           munsell_0.5.0       
## [52] fansi_0.4.1          lifecycle_0.2.0      stringi_1.5.3       
## [55] yaml_2.2.1           grid_4.0.3           ggrepel_0.8.2       
## [58] crayon_1.3.4         lattice_0.20-41      haven_2.3.1         
## [61] splines_4.0.3        hms_0.5.3            sna_2.6             
## [64] knitr_1.30           pillar_1.4.6         stopwords_2.0       
## [67] rle_0.9.2            fastmatch_1.1-0      reprex_0.3.0        
## [70] glue_1.4.2           evaluate_0.14        latticeExtra_0.6-29 
## [73] data.table_1.13.2    RcppParallel_5.0.2   modelr_0.1.8        
## [76] vctrs_0.3.4          png_0.1-7            cellranger_1.1.0    
## [79] gtable_0.3.0         assertthat_0.2.1     xfun_0.19           
## [82] broom_0.7.2          coda_0.19-4          survival_3.2-7      
## [85] cluster_2.1.0        ellipsis_0.3.1</code></pre>
<hr />
<p><a href="#introduction">Back to top</a></p>
<p><a href="https://slcladal.github.io/index.html">Back to HOME</a></p>
<hr />
</div>
<div id="references" class="section level1 unnumbered">
<h1>References</h1>
<div id="refs" class="references">
<div id="ref-silge2017text">
<p>Silge, Julia, and David Robinson. 2017. <em>Text Mining with R: A Tidy Approach</em>. " O’Reilly Media, Inc.".</p>
</div>
<div id="ref-george1935zipf">
<p>Zipf, K, George. 1935. <em>The Psychobiology of Language</em>. Houghton-Mifflin.</p>
</div>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>


</body>
</html>
