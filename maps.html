<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Martin Schweinberger" />

<meta name="date" content="2020-09-25" />

<title>Displaying Geo-Spatial Data with R</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">LADAL</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="people.html">OUR PEOPLE</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    NEWS
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="news.html">News &amp; Announcements</a>
    </li>
    <li>
      <a href="conferences.html">Events &amp; Presentations</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    DATA SCIENCE BASICS
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Introduction to Data Science</li>
    <li>
      <a href="introcomputer.html">Working with Computers: Tips and Tricks</a>
    </li>
    <li>
      <a href="reproducibility.html">Data Management, Version Control, and Reproducibility</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Quantitative Research</li>
    <li>
      <a href="introquant.html">Introduction to Quantitative Reasoning</a>
    </li>
    <li>
      <a href="basicquant.html">Basic Concepts in Quantitative Research</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Introduction to R</li>
    <li>
      <a href="IntroR_workshop.html">Getting started</a>
    </li>
    <li>
      <a href="stringprocessing.html">String Processing</a>
    </li>
    <li>
      <a href="regularexpressions.html">Regular Expressions</a>
    </li>
    <li>
      <a href="introtables.html">Working with Tables</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    TUTORIALS
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Data Visualization</li>
    <li>
      <a href="introviz.html">Introduction to Data Viz</a>
    </li>
    <li>
      <a href="basicgraphs.html">Common Visualization Types</a>
    </li>
    <li>
      <a href="basicgraphs.html">Advanced Visualization Methods</a>
    </li>
    <li>
      <a href="maps.html">Displaying Geo-Spatial Data</a>
    </li>
    <li>
      <a href="motion.html">Interactive Charts</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Statistics</li>
    <li>
      <a href="descriptivestatz.html">Descriptive Statistics</a>
    </li>
    <li>
      <a href="basicstatz.html">Basic Inferential Statistics</a>
    </li>
    <li>
      <a href="regression.html">Regression Analysis</a>
    </li>
    <li>
      <a href="advancedstatztrees.html">Tree-Based Models</a>
    </li>
    <li>
      <a href="groupingstatz.html">Cluster and Correspondence Analysis</a>
    </li>
    <li>
      <a href="svm.html">Semantic Vector Space Models</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Text Analytics</li>
    <li>
      <a href="textanalysis.html">Text Analysis and Distant Reading</a>
    </li>
    <li>
      <a href="kwics.html">Concordancing (keywords-in-context)</a>
    </li>
    <li>
      <a href="basicnetwork.html">Network Analysis</a>
    </li>
    <li>
      <a href="collocations.html">Co-occurrence and Collocation Analysis</a>
    </li>
    <li>
      <a href="topicmodels.html">Topic Modeling</a>
    </li>
    <li>
      <a href="sentiment.html">Sentiment Analysis</a>
    </li>
    <li>
      <a href="tagging.html">Tagging and Parsing</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    FOCUS &amp; CASE STUDIES
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="surveys.html">R for analyzing questionnaire and surveys</a>
    </li>
    <li>
      <a href="corplingr.html">Swear words in Irish English</a>
    </li>
    <li>
      <a href="convertpdf2txt.html">Converting PDFs to txt</a>
    </li>
    <li>
      <a href="webcrawling.html">Web Crawling using R</a>
    </li>
  </ul>
</li>
<li>
  <a href="services.html">SERVICES &amp; CONTACT</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Displaying Geo-Spatial Data with R</h1>
<h4 class="author">Martin Schweinberger</h4>
<h4 class="date">2020-09-25</h4>

</div>


<p><img src="images/uq1.jpg" width="100%" /></p>
<div id="introduction" class="section level1 unnumbered">
<h1>Introduction</h1>
<p>This tutorial introduces geo-spatial data visualization in R. The entire R markdown document for this tutorial can be downloaded <a href="https://slcladal.github.io/maps.Rdm">here</a>.</p>
<p>This tutorial is based on R. If you have not installed R or are new to it, you will find an introduction to and more information how to use R <a href="https://slcladal.github.io/IntroR_workshop.html">here</a>. For this tutorials, we need to install certain <em>packages</em> from an R <em>library</em> so that the scripts shown below are executed without errors. Before turning to the code below, please install the packages by running the code below this paragraph. If you have already installed the packages mentioned below, then you can skip ahead ignore this section. To install the necessary packages, simply run the following code - it may take some time (between 1 and 5 minutes to install all of the libraries so you do not need to worry if it takes some time).</p>
<pre class="r"><code># clean current workspace
rm(list=ls(all=T))
# set options
options(stringsAsFactors = F)         # no automatic data transformation
options(&quot;scipen&quot; = 100, &quot;digits&quot; = 4) # suppress math annotation
# install libraries
install.packages(c(&quot;RgoogleMaps&quot;, &quot;ggmap&quot;, &quot;mapproj&quot;, &quot;sf&quot;,
                   &quot;dplyr&quot;, &quot;OpenStreetMap&quot;, &quot;devtools&quot;))
# install package from github
devtools::install_github(&quot;dkahle/ggmap&quot;, ref = &quot;tidyup&quot;)</code></pre>
<p>Depending on the maps that are used in the visualization, it may also be necessary to access other data bases. One very useful data base for maps is, of course, Google Maps. However, to access Google Maps materials, installation and setting up other pieces of software is necessary. How to get access to Google’s data is discussed below. In the following section, methods that do not require installation of software other than R.</p>
</div>
<div id="getting-started-with-maps" class="section level1">
<h1><span class="header-section-number">1</span> Getting started with maps</h1>
<p>The most basic way to display geospatial data is to simply download and display a map. In order to do that, we load the libraries neccessary for extracting and plotting the map, before we can go ahead and actually extracting and plotting the map.</p>
<p>The package “OpenStreetMap” offers a range of maps with different features. To access the OpenStreetMap data base, it is necessary to install the package. Once the package is installed, we can simply extract the map and define the region we want to plot by defining the longitude and latitude of the upper left and lower right corner of the region we want to display. The argument “minNumTiles” defines the accuracy of the map, the higher the number of tiles, the higher the resolution. The type of map is defined by the “type” argument. The type argument defines from which server the map is extracted. Once we have extracted a map, we can plot it using the “plot” function.</p>
<pre class="r"><code># load library
library(OpenStreetMap)
# extract map
AustraliaMap &lt;- openmap(c(-8,110),
    c(-45,160),
#   type = &quot;osm&quot;,
#   type = &quot;esri&quot;,
    type = &quot;nps&quot;,
    minNumTiles=7)
# plot map
plot(AustraliaMap)</code></pre>
<p><img src="maps_files/figure-html/map1-1.png" width="672" /></p>
<p>In order to obtain different map types, we change the “type” argument. The following options are available for type: “osm”, “osm-bw”,“maptoolkit-topo”, “waze”, “bing”, “stamen-toner”, “stamen-terrain”, “stamen-watercolor”, “osm-german”, “osm-wanderreitkarte”, “mapbox”, “esri”, “esri-topo”, “nps”, “apple-iphoto”, “skobbler”, “hillshade”, “opencyclemap”, “osm-transport”, “osm-public-transport”, “osm-bbike”, “osm-bbike-german”. Unfortunately, not all options work. If they do not work, then an error message is shown telling us that the number of tiles is not supported.</p>
<p>We can zoom in or out by either changing the “zoom” or the “minNumTiles” arguments - in both cases, the higher the number, the more fine-grained the dispalyed map. Let’s check out some examples for maps of Queensland.</p>
<pre class="r"><code># extract map
queensland1 &lt;- openmap(c(-8,135),
    c(-30,160),
    type = &quot;osm&quot;,
    minNumTiles=6)
queensland2 &lt;- openmap(c(-8,135),
    c(-30,160),
    type = &quot;esri&quot;,
    minNumTiles=6)
# plot maps
par(mfrow = c(1, 2)) # display plots in 1 row/2 columns
plot(queensland1); plot(queensland2); par(mfrow = c(1, 1)) # restore original settings</code></pre>
<p><img src="maps_files/figure-html/map2-1.png" width="672" /></p>
<p>The “leaflet” function from the “leaflet” package creates a Leaflet map widget using html-widgets. The widget can be rendered on HTML pages generated from R Markdown, Shiny, or other applications. The advantage in using this function lies in the fact that it offers very detailed maps which enable zooming in to very specific locations.</p>
<pre class="r"><code># load library
library(leaflet)
# load library
m &lt;- leaflet() %&gt;% setView(lng = 153.05, lat = -27.45, zoom = 12)
# display map
m %&gt;% addTiles()</code></pre>
<p><img src="images/Brisbane.png" width="100%" /></p>
<p>Another data base that is very useful when certaing maps is the “rworldmap” package. The “worldmap” package contains the shape files for countries but also more fine grained-shape files that display the states of selected countries. The most basic data, however, simply represents the shapes of the countries in the world.</p>
<p>Using the “worldmap” package has the advantage that one is not dependent on third parties and their servers but can operate within “R” wihtout being denyed access due to e.g. copy right issues or server maintenance.</p>
<pre class="r"><code># load library
library(rworldmap)
# get map
worldmap &lt;- getMap(resolution = &quot;coarse&quot;)
# plot worldmap
plot(worldmap, col = &quot;lightgrey&quot;, 
     fill = T, border = &quot;darkgray&quot;,
     xlim = c(-180, 180), ylim = c(-90, 90),
     bg = &quot;aliceblue&quot;,
     asp = 1, wrap=c(-180,180))</code></pre>
<p><img src="maps_files/figure-html/map5-1.png" width="672" /></p>
<p>The basic map shown above can then be modified and enriched with color coding to convey geospatial data. The following shows how to customize the world map.</p>
<pre class="r"><code># load library
library(maps)
# plot maps
par(mfrow = c(1, 2)) # display plots in 1 row/3 columns
# show map with Latitude 200 as center
map(&#39;world&#39;, xlim = c(100, 300))
# add axes
map.axes()
# show filled map with Latitude 200 as center
ww2 &lt;- map(&#39;world&#39;, wrap=c(0,360), plot=FALSE, fill=TRUE)
map(ww2, xlim = c(100, 300), fill=TRUE)</code></pre>
<p><img src="maps_files/figure-html/map6-1.png" width="672" /></p>
<pre class="r"><code>par(mfrow = c(1, 1)) # restore original settings</code></pre>
</div>
<div id="customizing-maps" class="section level1">
<h1><span class="header-section-number">2</span> Customizing Maps</h1>
<p>Displaying basic maps is usually less interesting because, typically, we want to add different layers to a map. In order to add layers to a map, we need to have a shape file, i.e. a file which contains information about borders or locations that can then be displayed in different colors. In other words, we need to have a shape object to add information to the map.</p>
<p>We load the “airports” data set which contains the longitude and latitude of airports across the world.</p>
<pre class="r"><code># load data
airports &lt;- read.delim(&quot;https://slcladal.github.io/data/airports.txt&quot;, 
                       sep = &quot;\t&quot;, header = T)
# inspect data
head(airports)</code></pre>
<pre><code>##   ID                                        Name         City          Country
## 1  1                              Goroka Airport       Goroka Papua New Guinea
## 2  2                              Madang Airport       Madang Papua New Guinea
## 3  3                Mount Hagen Kagamuga Airport  Mount Hagen Papua New Guinea
## 4  4                              Nadzab Airport       Nadzab Papua New Guinea
## 5  5 Port Moresby Jacksons International Airport Port Moresby Papua New Guinea
## 6  6                 Wewak International Airport        Wewak Papua New Guinea
##    Latitude Longitude
## 1 -6.081690   145.392
## 2 -5.207080   145.789
## 3 -5.826790   144.296
## 4 -6.569803   146.726
## 5 -9.443380   147.220
## 6 -3.583830   143.669</code></pre>
<p>To display the locations of airports on a map, we first plot the map and then add a layer of points to indicate the location of airports. In addition, the “plot” functions offers various arguments for customizing the display, e.g. by changing the backgroundcolor (bg), defining the color of borders (borders), defining the color of the shapes (fill and col).</p>
<pre class="r"><code># plot data on world map
plot(worldmap, xlim = c(-80, 160), ylim = c(-50, 100), 
     asp = 1, bg = &quot;lightblue&quot;, col = &quot;black&quot;, fill = T)
# add points
points(airports$Longitude, airports$Latitude, 
       col = &quot;red&quot;, cex = .01)</code></pre>
<p><img src="maps_files/figure-html/cus2-1.png" width="672" /></p>
<p>It is, of course, also possible to highlight individual countries.</p>
<pre class="r"><code># create data frame with iso3 country codes and number of visits
countriesvisited &lt;- data.frame(country = c(&quot;AUS&quot;, &quot;JPN&quot;, &quot;FIN&quot;, 
                                           &quot;CZE&quot;, &quot;POL&quot;, &quot;AUT&quot;, 
                                           &quot;USA&quot;, &quot;GBR&quot;, &quot;IRL&quot;, 
                                           &quot;DEU&quot;, &quot;DNK&quot;, &quot;FRA&quot;, 
                                           &quot;NDL&quot;, &quot;BEL&quot;, &quot;ESP&quot;,
                                           &quot;HRV&quot;, &quot;SVN&quot;, &quot;NOR&quot;, 
                                           &quot;ITA&quot;, &quot;HUN&quot;, &quot;ROU&quot;, 
                                           &quot;BGR&quot;, &quot;GRC&quot;, &quot;TUR&quot;, 
                                           &quot;CHE&quot;, &quot;ARE&quot;),
  visited = c(5, 1, 2, 1, 1, 3, 4, 4, 5, 11, 1, 1, 2, 2, 4, 4, 
              1, 1, 3, 1, 1, 2, 1, 1, 3, 2))
# inspect data
head(countriesvisited)</code></pre>
<pre><code>##   country visited
## 1     AUS       5
## 2     JPN       1
## 3     FIN       2
## 4     CZE       1
## 5     POL       1
## 6     AUT       3</code></pre>
<pre class="r"><code># combine data frame with map
visitedMap &lt;- joinCountryData2Map(countriesvisited, 
                                  joinCode = &quot;ISO3&quot;,
                                  nameJoinColumn = &quot;country&quot;)</code></pre>
<pre><code>## 25 codes from your data successfully matched countries in the map
## 1 codes from your data failed to match with a country code in the map
## 218 codes from the map weren&#39;t represented in your data</code></pre>
<pre class="r"><code># def. map parameters, e.g. def. colors
mapParams &lt;- mapCountryData(visitedMap, 
                            nameColumnToPlot=&quot;visited&quot;,
                            oceanCol = &quot;azure2&quot;,
                            catMethod = &quot;categorical&quot;,
                            missingCountryCol = gray(.8),
                            colourPalette = c(&quot;coral&quot;,
                                              &quot;coral2&quot;,
                                              &quot;coral3&quot;, &quot;orangered&quot;, 
                                              &quot;orangered3&quot;, &quot;orangered4&quot;),
                            addLegend = F,
                            mapTitle = &quot;&quot;,
                            border = NA)
# add legend and display map
do.call(addMapLegendBoxes, c(mapParams,
                             x = &#39;bottom&#39;,
                             title = &quot;No. of visits&quot;,
                             horiz = TRUE,
                             bg = &quot;transparent&quot;,
                             bty = &quot;n&quot;))</code></pre>
<p><img src="maps_files/figure-html/cus4-1.png" width="672" /></p>
<p>It is, of course also possible to show only a part of the map by defining the x- and y-axes limits of the plot window.</p>
<pre class="r"><code># get map
newmap &lt;- getMap(resolution = &quot;low&quot;)
# plot map
plot(newmap, xlim = c(-20, 59), ylim = c(35, 71), 
     asp = 1, fill = T, border = &quot;darkgray&quot;, 
     col = &quot;wheat2&quot;, bg = &quot;gray95&quot;)
# add points
points(airports$Longitude, airports$Latitude, col = &quot;red&quot;, cex = .5, pch = 20)</code></pre>
<p><img src="maps_files/figure-html/cus5-1.png" width="672" /></p>
<p>This is of course also possible to show Australian airports.</p>
<pre class="r"><code># plot data on world map
plot(worldmap, xlim = c(110, 160), ylim = c(-45, -10), 
     asp = 1, bg = &quot;azure2&quot;, border = &quot;lightgrey&quot;, col = &quot;wheat1&quot;, 
     fill = T, wrap=c(-180,180))
points(airports$Longitude, airports$Latitude, 
       col = &quot;darkblue&quot;, cex = .5, pch = 20)</code></pre>
<p><img src="maps_files/figure-html/cus6-1.png" width="672" /></p>
<p>In addition to the location of airports, it is also possible to show how many flights arrive at an airport. As this information is not provided in the airport data, we load the routes data which contains information about the routes that airlines fly.</p>
<pre class="r"><code># read in routes data
routes &lt;- read.delim(&quot;https://slcladal.github.io/data/routes.txt&quot;, 
                     sep = &quot;\t&quot;, header=T)
# inspect first 6 lines of routes data
head(routes)</code></pre>
<pre><code>##   airline airlineID sourceAirport sourceAirportID destinationAirport
## 1      2B       410           AER            2965                KZN
## 2      2B       410           ASF            2966                KZN
## 3      2B       410           ASF            2966                MRV
## 4      2B       410           CEK            2968                KZN
## 5      2B       410           CEK            2968                OVB
## 6      2B       410           DME            4029                KZN
##   destinationAirportID
## 1                 2990
## 2                 2990
## 3                 2962
## 4                 2990
## 5                 4078
## 6                 2990</code></pre>
<p>To show the number of arrivals at an airport (only in terms of how mayn routes end at that airport), we extract the number of routes that end in each airport.</p>
<pre class="r"><code># load library
library(plyr)
# extract number of arrivals
arrivals &lt;- ddply(routes, .(destinationAirportID), &quot;nrow&quot;)
names(arrivals)[2] &lt;- &quot;flights&quot;
# inspect data
head(arrivals)</code></pre>
<pre><code>##   destinationAirportID flights
## 1                  \\N     221
## 2                    1       5
## 3                   10       2
## 4                  100      44
## 5                 1001       4
## 6                 1004       7</code></pre>
<p>We can now merge the airports and the arrival data set to combine the information about the location with the information about the number of routes that end at each airport.</p>
<pre class="r"><code># create arrival  table
airportA &lt;- merge(airports, arrivals, by.x = &quot;ID&quot;, by.y = &quot;destinationAirportID&quot;)
# inspect arrival table
head(airportA)</code></pre>
<pre><code>##   ID                                        Name         City          Country
## 1  1                              Goroka Airport       Goroka Papua New Guinea
## 2  2                              Madang Airport       Madang Papua New Guinea
## 3  3                Mount Hagen Kagamuga Airport  Mount Hagen Papua New Guinea
## 4  4                              Nadzab Airport       Nadzab Papua New Guinea
## 5  5 Port Moresby Jacksons International Airport Port Moresby Papua New Guinea
## 6  6                 Wewak International Airport        Wewak Papua New Guinea
##    Latitude Longitude flights
## 1 -6.081690   145.392       5
## 2 -5.207080   145.789       8
## 3 -5.826790   144.296      12
## 4 -6.569803   146.726      11
## 5 -9.443380   147.220      50
## 6 -3.583830   143.669       6</code></pre>
<p>This table allows us to plot not only the location of airports but also the number of routes that end there.</p>
<pre class="r"><code># get map
australia &lt;- getMap(resolution = &quot;low&quot;)
# plot data on world map
plot(australia, xlim = c(110, 160), ylim = c(-45, -10), 
     asp = 1, bg = &quot;azure1&quot;, border = &quot;darkgrey&quot;, 
     col = &quot;wheat2&quot;, fill = T)
# add points
points(airportA$Longitude, airportA$Latitude,
       # define colors as transparent
       col = rgb(red = 0, green = 0, blue = 1, alpha = 0.3),
       # define size as number of flights div. by 50
       cex = airportA$flights/50, pch = 20)</code></pre>
<p><img src="maps_files/figure-html/cus10-1.png" width="672" /></p>
<p>The same map can also be created using the “ggplot2” package which offers a very high degree of flexibility and allows for easy customization.</p>
<pre class="r"><code># load ggplot2 library
library(ggplot2)
# create a layer of borders
AustralianAirports &lt;- ggplot() +   
  borders(&quot;world&quot;, colour=NA, fill=&quot;wheat1&quot;)  +
  geom_point(aes(x=airportA$Longitude, y= airportA$Latitude), 
             color=&quot;blue&quot;, alpha = .2, size=airportA$flights/20) +
  scale_x_continuous(name=&quot;Longitude&quot;, limits=c(110, 160)) +
  scale_y_continuous(name=&quot;Latitude&quot;, limits=c(-45, -10)) +
  theme(panel.background = element_rect(fill = &quot;azure1&quot;,
                                colour = &quot;azure1&quot;),
        panel.grid.major = element_blank(), 
        panel.grid.minor = element_blank(),
        axis.line=element_blank(),
        axis.text.x=element_blank(),
        axis.text.y=element_blank(),
        axis.ticks=element_blank(),
        axis.title.x=element_blank(),
        axis.title.y=element_blank())
AustralianAirports</code></pre>
<p><img src="maps_files/figure-html/cus11-1.png" width="672" /></p>
<p>In addition, it may be useful to overlay an area with</p>
<pre class="r"><code># create map with density layer
AustralianAirportsDensity &lt;- ggplot() +   
  borders(&quot;world&quot;, colour=NA, fill=&quot;antiquewhite&quot;)  +
  stat_density2d(aes(x = airportA$Longitude, y= airportA$Latitude, 
                     fill = ..level..,  alpha = I(.2)),
                 size = 1, bins = 5, data = airportA,
                 geom = &quot;polygon&quot;) +
  geom_point(aes(x=airportA$Longitude, y= airportA$Latitude), 
             color=&quot;red&quot;, alpha = .2, size=airportA$flights/20) +
  geom_point(aes(x=airportA$Longitude, y= airportA$Latitude), 
             color=&quot;red&quot;, alpha = .2, size=airportA$flights/20, pch = 1) +
  # define color of density polygons
  scale_fill_gradient(low = &quot;grey50&quot;, high = &quot;grey20&quot;) +
  scale_x_continuous(name=&quot;Longitude&quot;, limits=c(110, 160)) +
  scale_y_continuous(name=&quot;Latitude&quot;, limits=c(-47, -10)) +
  theme(panel.background = element_rect(fill = &quot;lightblue&quot;,
                                colour = &quot;lightblue&quot;),
        panel.grid.major = element_blank(), 
        panel.grid.minor = element_blank(),
        # surpress legend
        legend.position = &quot;none&quot;,
        axis.line=element_blank(),
        axis.text.x=element_blank(),
        axis.text.y=element_blank(),
        axis.ticks=element_blank(),
        axis.title.x=element_blank(),
        axis.title.y=element_blank())
AustralianAirportsDensity</code></pre>
<p><img src="maps_files/figure-html/cus12-1.png" width="672" /></p>
<pre class="r"><code># load library
library(ggmap)
# define box
sbbox &lt;- make_bbox(lon = c(115, 155), lat = c(-12.5, -42), f = .1)
# get map
ausbg = get_map(location=sbbox, zoom=4,
#                source = &quot;google&quot;,
                source = &quot;osm&quot;,
#                source = &quot;stamen&quot;,
                color = &quot;bw&quot;,
#                color = &quot;color&quot;,
#               maptype=&quot;terrain&quot;)
#               maptype=&quot;terrain-background&quot;)
                maptype=&quot;satellite&quot;)
#               maptype=&quot;hybrid&quot;)
#               maptype=&quot;toner&quot;)
#               maptype=&quot;hybrid&quot;)
#               maptype=&quot;terrain-labels&quot;)
#               maptype=&quot;roadmap&quot;)
# create map
ausbg = ggmap(ausbg)
# display map
ausbg +
  stat_density2d(data = airportA, aes(x = Longitude, y= Latitude, 
                     fill = ..level..,  alpha = I(.2)),
                 size = 1, bins = 5, geom = &quot;polygon&quot;) +
  geom_point(data = airportA, mapping = aes(x=Longitude, y= Latitude), 
             color=&quot;gray20&quot;, alpha = .2, size=airportA$flights/20) +
  # define color of density polygons
  scale_fill_gradient(low = &quot;grey50&quot;, high = &quot;grey20&quot;) +
  theme(axis.line=element_blank(),
        axis.text.x=element_blank(),
        axis.text.y=element_blank(),
        axis.ticks=element_blank(),
        axis.title.x=element_blank(),
        axis.title.y=element_blank(),
        panel.background = element_rect(fill = &quot;aliceblue&quot;,
                                colour = &quot;aliceblue&quot;),
        panel.grid.major = element_blank(), 
        panel.grid.minor = element_blank(),
        # surpress legend
        legend.position = &quot;none&quot;)</code></pre>
<p><img src="maps_files/figure-html/cus13-1.png" width="672" /></p>
<pre class="r"><code># define box
sbbox &lt;- make_bbox(lon = c(152.8, 153.4), lat = c(-27.1, -27.7), f = .1)
# get map
brisbane = get_map(location=sbbox, zoom=10,
               maptype=&quot;terrain&quot;)
# create map
brisbanemap = ggmap(brisbane)
# display map
brisbanemap +
  geom_point(data = airportA, mapping = aes(x = Longitude, y = Latitude), 
               color = &quot;red&quot;) +
  geom_text(data = airportA, 
            mapping = aes(x = Longitude+0.1,
                          y = Latitude,
                          label = &quot;Brisbane Airport&quot;),
            size = 2, color = &quot;gray20&quot;, 
            fontface = &quot;bold&quot;, 
            check_overlap = T) </code></pre>
<p><img src="maps_files/figure-html/cus14-1.png" width="672" /></p>
</div>
<div id="color-coding-geospatial-information" class="section level1">
<h1><span class="header-section-number">3</span> Color Coding Geospatial Information</h1>
<p>We can also use color coding of countries to convey information about different features of countries such as their population size (or results of political elections, etc.).</p>
<p>We use the data provided in the “rnaturalearthdata” and “rnaturalearth” packages, which contain information about the population size of countries, to color code and thus visualize differences in population size by country.</p>
<pre class="r"><code># load libraries
library(&quot;rnaturalearth&quot;)
library(&quot;rnaturalearthdata&quot;)
# extract world data
world &lt;- ne_countries(scale = &quot;medium&quot;, returnclass = &quot;sf&quot;)
# create cut off points in Population
world$pop_estC &lt;- base::cut(world$pop_est,
                        breaks = c(0, 500000, 1000000, 10000000, 
                                   100000000, 200000000, 500000000,
                                   10000000000), 
                        labels = 1:7, right = F, ordered_result = T)
# load library
library(RColorBrewer)
# define colors
palette = colorRampPalette(brewer.pal(n=7, name=&#39;Oranges&#39;))(7)
palette = c(&quot;white&quot;, palette)
# create map
worldpopmap &lt;- ggplot() +
  geom_sf(data = world, aes(fill = pop_estC)) +
  scale_fill_manual(values = palette) +
  # customize legend title
  labs(fill = &quot;Population Size&quot;) +
  theme(panel.grid.major = element_blank(), 
        panel.grid.minor = element_blank(),
        # surpress legend
        legend.position = &quot;none&quot;)
# display map
worldpopmap</code></pre>
<p><img src="maps_files/figure-html/col1-1.png" width="672" /></p>
<pre class="r"><code># start plot
ggplot(data = world) +
    geom_sf(aes(fill = pop_est)) +
  scale_fill_viridis_c(option = &quot;plasma&quot;, trans = &quot;sqrt&quot;) +
  # customize legend title
  labs(fill = &quot;Population Size&quot;)</code></pre>
<p><img src="maps_files/figure-html/col2-1.png" width="672" /></p>
<p>It is relatively easy to combine color coding with points. However, it is also relatively easy to color countries if all countries have values. If this is not the case (as in the example below), we need to include an additional step so that countries that are not mentioned also receive a color coding. In this example, the data contain countries and cities that I have visited along with their latitude and longitude.</p>
<pre class="r"><code># load data
visited &lt;- read.delim(&quot;https://slcladal.github.io/data/visited.txt&quot;, 
                      sep = &quot;\t&quot;, header = T)
# inspect data
head(visited)</code></pre>
<pre><code>##     Country ISO3      City Latitude Longitude
## 1 Australia  AUS  Adelaide -34.9350  138.6000
## 2 Australia  AUS  Brisbane -27.4550  153.0351
## 3 Australia  AUS  Canberra -35.2830  149.1290
## 4 Australia  AUS Melbourne -37.8200  144.9750
## 5 Australia  AUS    Sydney -33.9200  151.1852
## 6   Austria  AUT Innsbruck  47.2804   11.4100</code></pre>
<p>After loading the data, we determine how many cities I have visited in a given country and add this frequency to the data set.</p>
<pre class="r"><code># determine how often a country was visited
ncountry &lt;- as.data.frame(table(visited$ISO3))
colnames(ncountry)[1] &lt;- &quot;ISO3&quot; 
# add frequency to visited
visited &lt;- merge(visited, ncountry, by = &quot;ISO3&quot;)
# inspect data
head(visited)</code></pre>
<pre><code>##   ISO3              Country      City Latitude Longitude Freq
## 1  ARE United Arab Emirates Abu Dhabi  24.4667   54.3666    2
## 2  ARE United Arab Emirates     Dubai  25.2300   55.2800    2
## 3  AUS            Australia  Adelaide -34.9350  138.6000    5
## 4  AUS            Australia  Brisbane -27.4550  153.0351    5
## 5  AUS            Australia  Canberra -35.2830  149.1290    5
## 6  AUS            Australia Melbourne -37.8200  144.9750    5</code></pre>
<p>The next part is tricky as we do not only need to determine the color for the countries I have visited but also the color for those that I have not visited. In order to do that, we load the data set that underlies the world map that will be displayed.</p>
<pre class="r"><code># load library
library(maptools)
# load world data for plotting 
data(wrld_simpl)
# def. color (bias for contrast)
pal &lt;- colorRampPalette(brewer.pal(6, &#39;Greens&#39;), 
                        bias = 10)(length(visited$Freq))
pal &lt;- pal[with(visited, findInterval(Freq, sort(unique(Freq))))]
# define color for countries not in visited
countrycolor &lt;- rep(&quot;white&quot;, length(wrld_simpl@data$NAME))
# define colors for countries in visited
countrycolor[match(visited$Country, wrld_simpl@data$NAME)] &lt;- pal</code></pre>
<p>After assigning colors to all countries, we can proceed by plotting the color coded map along with points for the locations of the cities I have visited.</p>
<pre class="r"><code># plot map
plot(wrld_simpl, ylim=c(-40, 85), xlim = c(-180, 180),
     mar=c(0,0,0,0), bg=&quot;gray40&quot;, border = NA, 
     col=countrycolor)
# add points
points(visited$Longitude, visited$Latitude, col=&quot;red&quot;, pch=20, cex = .5)</code></pre>
<p><img src="maps_files/figure-html/col8-1.png" width="672" /></p>
<p>A slightly more elegent way to achive the same goal is to plot the information using the “ggplot2” package.</p>
<pre class="r"><code># use the contry name instead of 3-letter ISO as id
wrld_simpl@data$id &lt;- wrld_simpl@data$NAME
wrld &lt;- fortify(wrld_simpl, region=&quot;id&quot;)
# remove Antarctica from map
wrld &lt;- subset(wrld, id != &quot;Antarctica&quot;) 
# change column names of visited
colnames(visited) &lt;- ifelse(colnames(visited) == &quot;Country&quot;, 
                            &quot;id&quot;, 
                            colnames(visited))
# combine visited and wrld
worlddata &lt;- join(wrld, visited, by = &quot;id&quot;)
# change NA to 0
worlddata$Freq &lt;- ifelse(is.na(worlddata$Freq) == T, 0, worlddata$Freq)
# convert freq into factor
worlddata$Freq &lt;- as.factor(worlddata$Freq)
# start plotting
ggmapplot &lt;- ggplot() + 
  geom_map(data=worlddata, map=worlddata, 
           aes(map_id=id, x=long, y=lat, 
           fill=Freq), color=NA, size=0.25) + 
  geom_point(data = visited,
             aes(x = Longitude, y = Latitude), 
             col = &quot;red&quot;, size = .75) +
  scale_fill_manual(values=c(&quot;white&quot;, &quot;gray80&quot;, &quot;gray75&quot;, 
                             &quot;gray70&quot;,  &quot;gray65&quot;, &quot;gray60&quot;, &quot;gray55&quot;), 
                    name=&quot;No. cities visited&quot;) + 
#  coord_map(&quot;gilbert&quot;) +  # spherical
  coord_map() +           # for normal Mercator projection
  labs(x=&quot;&quot;, y=&quot;&quot;) + 
  theme(plot.background = element_rect(fill = &quot;grey40&quot;, colour = NA),
                   panel.border = element_blank(),
                   panel.background = 
          element_rect(fill = &quot;transparent&quot;, colour = NA),
                   panel.grid = element_blank(),
                   axis.text = element_blank(),
                   axis.ticks = element_blank(),
                   legend.position = &quot;right&quot;)
ggmapplot</code></pre>
<p><img src="maps_files/figure-html/col9-1.png" width="672" /></p>
</div>
<div id="interactive-maps" class="section level1">
<h1><span class="header-section-number">4</span> Interactive Maps</h1>
<p>An easy way to create interactice maps is to use the “googleVis” package. An example showing the population size by country provided by an in-built data set is shown.</p>
<pre class="r"><code># load library
library(googleVis)
# create motion chart object
Geo=gvisGeoMap(Population, locationvar=&quot;Country&quot;, numvar=&quot;Population&quot;, 
               options = list(height=350, daatMode=&#39;regions&#39;))
# display motion chart
plot(Geo)</code></pre>
<p>A browser window should open and and if you accept and execute Adobe Flash, then the following interactive map showing the population size by country should pop up. You can hoover over any country and see its population size.</p>
<p><img src="images/motionchart_worldpopulation.png" width="100%" /></p>
<p>You can also use the “googleVis” package to create customized maps. To customize an interactive map, we need to load a data set.</p>
<pre class="r"><code># load data 
gapminderdata &lt;- read.delim(&quot;https://slcladal.github.io/data/gapminder.txt&quot;,
                            header = T, sep = &quot;\t&quot;)
# create map
Map &lt;- data.frame(gapminderdata$country, 
                  gapminderdata$year, gapminderdata$lifeExp)
# def. column names
names(Map) &lt;- c(&quot;Country&quot;, &quot;Year&quot;, &quot;LifeExpectancy&quot;)
# inspect data
head(Map)</code></pre>
<pre><code>##       Country Year LifeExpectancy
## 1 Afghanistan 1952         28.801
## 2 Afghanistan 1957         30.332
## 3 Afghanistan 1962         31.997
## 4 Afghanistan 1967         34.020
## 5 Afghanistan 1972         36.088
## 6 Afghanistan 1977         38.438</code></pre>
<p>We will only use the latest data (from 2007) and exclude all other data points and create the interactive map as we did above.</p>
<p><img src="images/motionchart_lifeexpectancy.png" width="100%" /></p>
</div>
<div id="creating-maps-with-tmap-and-shape-files" class="section level1">
<h1><span class="header-section-number">5</span> Creating Maps with tmap and Shape Files</h1>
<p>When creating more sophisticated maps, it is common to use shape files. Shape files define the edges of polygons and can be very complex depending on the number of edges of a polygon.</p>
<pre class="r"><code># load libraries
library(sf)
library(tmap) 
# load shape file
ausstates &lt;- sf::st_read(&quot;D:\\Uni\\UQ\\SLC\\LADAL\\SLCLADAL.github.io\\data\\shapes/AshmoreAndCartierIslands.shp&quot;, stringsAsFactors = F)</code></pre>
<pre><code>## Reading layer `AshmoreAndCartierIslands&#39; from data source `D:\Uni\UQ\SLC\LADAL\SLCLADAL.github.io\data\shapes\AshmoreAndCartierIslands.shp&#39; using driver `ESRI Shapefile&#39;
## Simple feature collection with 15 features and 14 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: 72.57811 ymin: -54.77708 xmax: 167.9966 ymax: -9.140693
## geographic CRS: WGS 84</code></pre>
<pre class="r"><code># plot australian admin shape file
tm_shape(ausstates) +
  tm_fill() +
  tm_borders()</code></pre>
<p><img src="maps_files/figure-html/shp1-1.png" width="672" /></p>
<pre class="r"><code># load library
library(rgdal)
# load shape files
ausstates &lt;- readOGR(dsn = &quot;D:\\Uni\\UQ\\SLC\\LADAL\\SLCLADAL.github.io\\data\\shapes/AshmoreAndCartierIslands.shp&quot;, stringsAsFactors = F)</code></pre>
<pre><code>## OGR data source with driver: ESRI Shapefile 
## Source: &quot;D:\Uni\UQ\SLC\LADAL\SLCLADAL.github.io\data\shapes\AshmoreAndCartierIslands.shp&quot;, layer: &quot;AshmoreAndCartierIslands&quot;
## with 15 features
## It has 14 fields</code></pre>
<pre class="r"><code>ausstatesadmin &lt;- readOGR(dsn = &quot;D:\\Uni\\UQ\\SLC\\LADAL\\SLCLADAL.github.io\\data\\shapes/Australia_admin_6.shp&quot;, stringsAsFactors = F)</code></pre>
<pre><code>## OGR data source with driver: ESRI Shapefile 
## Source: &quot;D:\Uni\UQ\SLC\LADAL\SLCLADAL.github.io\data\shapes\Australia_admin_6.shp&quot;, layer: &quot;Australia_admin_6&quot;
## with 252 features
## It has 68 fields
## Integer64 fields read as strings:  z_order</code></pre>
<pre class="r"><code># plot australia and queensland
ozmap &lt;- ggplot() + 
  geom_polygon(data = ausstates, 
               aes(x = long, y = lat, group = group),
               colour = &quot;black&quot;, fill = NA) +
  geom_polygon(data = ausstatesadmin, 
                 aes(x = long, y = lat, group = group), 
                 colour = &quot;red&quot;, fill = NA) +
  theme_void()
# plot map
ozmap</code></pre>
<p><img src="maps_files/figure-html/shp3-1.png" width="672" /></p>
<pre class="r"><code># inspect shape file
summary(ausstates@data)</code></pre>
<pre><code>##        id            country              name              enname         
##  Min.   :  82636   Length:15          Length:15          Length:15         
##  1st Qu.:2316594   Class :character   Class :character   Class :character  
##  Median :2316598   Mode  :character   Mode  :character   Mode  :character  
##  Mean   :2251865                                                           
##  3rd Qu.:2363491                                                           
##  Max.   :3225677                                                           
##    locname            offname            boundary           adminlevel
##  Length:15          Length:15          Length:15          Min.   :4   
##  Class :character   Class :character   Class :character   1st Qu.:4   
##  Mode  :character   Mode  :character   Mode  :character   Median :4   
##                                                           Mean   :4   
##                                                           3rd Qu.:4   
##                                                           Max.   :4   
##    wikidata          wikimedia          timestamp             note          
##  Length:15          Length:15          Length:15          Length:15         
##  Class :character   Class :character   Class :character   Class :character  
##  Mode  :character   Mode  :character   Mode  :character   Mode  :character  
##                                                                             
##                                                                             
##                                                                             
##     rpath            ISO3166_2        
##  Length:15          Length:15         
##  Class :character   Class :character  
##  Mode  :character   Mode  :character  
##                                       
##                                       
## </code></pre>
<pre class="r"><code>table(ausstates@data$name)</code></pre>
<pre><code>## 
##       Ashmore and Cartier Islands      Australian Capital Territory 
##                                 1                                 1 
##                  Christmas Island           Cocos (Keeling) Islands 
##                                 1                                 1 
##       Coral Sea Islands Territory Heard Island and McDonald Islands 
##                                 1                                 1 
##              Jervis Bay Territory                   New South Wales 
##                                 1                                 1 
##                    Norfolk Island                Northern Territory 
##                                 1                                 1 
##                        Queensland                   South Australia 
##                                 1                                 1 
##                          Tasmania                          Victoria 
##                                 1                                 1 
##                 Western Australia 
##                                 1</code></pre>
<pre class="r"><code>ausstates_df &lt;- broom::tidy(ausstates, region = &quot;name&quot;)</code></pre>
<pre class="r"><code># extract names of states
cnames &lt;- aggregate(cbind(long, lat) ~ id, data=ausstates_df, FUN=mean)
# define colors
# Define the number of colors you want
library(RColorBrewer)
nb.cols &lt;- 15
newcolors &lt;- colorRampPalette(brewer.pal(8, &quot;Oranges&quot;))(nb.cols)
# plot australian admin shape file
ausadminmap &lt;- ggplot() +
  # plot australian state shapes
  geom_polygon(data = ausstates_df, 
               aes(x = long, y = lat, group = group, fill = id), 
               asp = 1, colour = NA) +
  geom_text(data = cnames, aes(x = long, y = lat, label = id), 
            size = 2, color = &quot;gray20&quot;, fontface = &quot;bold&quot;, 
            check_overlap = T) +
  # def. manual colors
  scale_fill_manual(values = newcolors) +
  # use empty theme
  theme_void() +
  scale_x_continuous(name=&quot;Longitude&quot;, limits=c(112, 155)) +
  scale_y_continuous(name=&quot;Latitude&quot;, limits=c(-45, -10)) +
  # def. background color
  theme(panel.background = element_rect(fill = &quot;slategray1&quot;,
                                colour = &quot;slategray1&quot;,
                                size = 0.5, linetype = &quot;solid&quot;),
        legend.position = &quot;none&quot;)
# plot map
ausadminmap</code></pre>
<p><img src="maps_files/figure-html/shp5-1.png" width="672" /></p>
<pre class="r"><code># create data frame with longitude and latitude values
Latitude &lt;- c(-25, -27.5, -25, -30, -30, -35, -25)
Longitude &lt;- c(150, 140, 130, 135, 140, 147.5, 150)
mypolygon &lt;- as.data.frame(cbind(Longitude,Latitude))
# inspect data
mypolygon</code></pre>
<pre><code>##   Longitude Latitude
## 1     150.0    -25.0
## 2     140.0    -27.5
## 3     130.0    -25.0
## 4     135.0    -30.0
## 5     140.0    -30.0
## 6     147.5    -35.0
## 7     150.0    -25.0</code></pre>
<pre class="r"><code># plot australian admin shape file
ausadminmap &lt;- ggplot() +
# plot state shapes
  geom_polygon(data = ausstates_df, 
               aes(x = long, y = lat, group = group), 
               asp = 1,
               fill = &quot;wheat1&quot;, 
               colour = &quot;wheat3&quot;) +
  ggplot2::geom_text(data = cnames, aes(x = long, y = lat, label = id), 
            size = 2, color = &quot;gray20&quot;, 
            fontface = &quot;bold&quot;, 
            check_overlap = T) +
  # add customized polygon
  geom_polygon(data=mypolygon,aes(x=Longitude,y=Latitude),
               alpha=0.5,colour=&quot;darkgray&quot;,fill=&quot;red&quot;) +
  annotate(&quot;text&quot;, x = mean(Longitude),y = mean(Latitude),
           label = &quot;My Polygon Area&quot;, colour=&quot;white&quot;, size=3) +
  # def. manual colors
  scale_fill_manual(values = newcolors) +
  # add north arrow
  ggsn::north(ausstates_df, scale = .1) +
  # use empty theme
  theme_void() +
  scale_x_continuous(name=&quot;Longitude&quot;, limits=c(112, 155)) +
  scale_y_continuous(name=&quot;Latitude&quot;, limits=c(-45, -10)) +
  # def. background color
  theme(panel.background = element_rect(fill = &quot;slategray1&quot;,
                                colour = &quot;slategray1&quot;,
                                size = 0.5, linetype = &quot;solid&quot;))
# plot map
ausadminmap</code></pre>
<p><img src="maps_files/figure-html/shp7-1.png" width="672" /></p>
</div>
<div id="citation-session-info" class="section level1 unnumbered">
<h1>Citation &amp; Session Info</h1>
<p>Schweinberger, Martin. 2020. <em>Displaying Geo-Spatial Data with R</em>. Brisbane: The University of Queensland. url: <a href="https://slcladal.github.io/maps.html" class="uri">https://slcladal.github.io/maps.html</a> (Version 2020.09.25).</p>
<pre><code>@manual{schweinberger2020tree,
  author = {Schweinberger, Martin},
  title = {Displaying Geo-Spatial Data with R},
  note = {https://slcladal.github.io/maps.html},
  year = {2020},
  organization = &quot;The University of Queensland, Australia. School of Languages and Cultures},
  address = {Brisbane},
  edition = {2020/09/25}
}</code></pre>
<pre class="r"><code>sessionInfo()</code></pre>
<pre><code>## R version 4.0.2 (2020-06-22)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## Running under: Windows 10 x64 (build 18362)
## 
## Matrix products: default
## 
## locale:
## [1] LC_COLLATE=German_Germany.1252  LC_CTYPE=German_Germany.1252   
## [3] LC_MONETARY=German_Germany.1252 LC_NUMERIC=C                   
## [5] LC_TIME=German_Germany.1252    
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] rgdal_1.5-16            tmap_3.2                sf_0.9-6               
##  [4] maptools_1.0-2          RColorBrewer_1.1-2      rnaturalearthdata_0.1.0
##  [7] rnaturalearth_0.1.0     ggmap_3.0.0             ggplot2_3.3.2          
## [10] plyr_1.8.6              maps_3.3.0              rworldmap_1.3-6        
## [13] sp_1.4-2                OpenStreetMap_0.3.4    
## 
## loaded via a namespace (and not attached):
##  [1] httr_1.4.2          tidyr_1.1.2         viridisLite_0.3.0  
##  [4] dotCall64_1.0-0     ggsn_0.5.0          yaml_2.2.1         
##  [7] backports_1.1.10    pillar_1.4.6        lattice_0.20-41    
## [10] glue_1.4.2          digest_0.6.25       colorspace_1.4-1   
## [13] htmltools_0.5.0     XML_3.99-0.5        pkgconfig_2.0.3    
## [16] broom_0.7.0         raster_3.3-13       stars_0.4-3        
## [19] purrr_0.3.4         scales_1.1.1        jpeg_0.1-8.1       
## [22] tibble_3.0.3        generics_0.0.2      farver_2.0.3       
## [25] ellipsis_0.3.1      withr_2.3.0         leafsync_0.1.0     
## [28] magrittr_1.5        crayon_1.3.4        evaluate_0.14      
## [31] MASS_7.3-51.6       lwgeom_0.2-5        foreign_0.8-80     
## [34] class_7.3-17        tools_4.0.2         RgoogleMaps_1.4.5.3
## [37] lifecycle_0.2.0     stringr_1.4.0       munsell_0.5.0      
## [40] isoband_0.2.2       compiler_4.0.2      e1071_1.7-3        
## [43] rlang_0.4.7         tmaptools_3.1       classInt_0.4-3     
## [46] units_0.6-7         grid_4.0.2          dichromat_2.0-0    
## [49] rjson_0.2.20        htmlwidgets_1.5.1   spam_2.5-1         
## [52] crosstalk_1.1.0.1   base64enc_0.1-3     leafem_0.1.3       
## [55] bitops_1.0-6        labeling_0.3        rmarkdown_2.3      
## [58] gtable_0.3.0        codetools_0.2-16    abind_1.4-5        
## [61] DBI_1.1.0           curl_4.3            R6_2.4.1           
## [64] knitr_1.30          dplyr_1.0.2         rgeos_0.5-5        
## [67] KernSmooth_2.23-17  rJava_0.9-13        stringi_1.5.3      
## [70] parallel_4.0.2      Rcpp_1.0.5          fields_11.4        
## [73] vctrs_0.3.4         mapproj_1.2.7       png_0.1-7          
## [76] leaflet_2.0.3       tidyselect_1.1.0    xfun_0.16</code></pre>
<hr />
<p><a href="https://slcladal.github.io/index.html">Main page</a></p>
<hr />
</div>
<div id="references" class="section level1 unnumbered">
<h1>References</h1>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
