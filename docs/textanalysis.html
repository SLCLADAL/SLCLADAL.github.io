<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.165">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Martin Schweinberger">
<meta name="dcterms.date" content="2022-08-31">

<title>Practical Overview of Selected Text Analytics Methods</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-VSGK4KYDQZ"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-VSGK4KYDQZ', { 'anonymize_ip': true});
</script>
<script src="site_libs/clipboard-1.7.1/clipboard.min.js"></script>
<link href="site_libs/primer-tooltips-1.4.0/build.css" rel="stylesheet">
<link href="site_libs/klippy-0.0.0.9500/css/klippy.min.css" rel="stylesheet">
<script src="site_libs/klippy-0.0.0.9500/js/klippy.min.js"></script>
<link href="site_libs/tabwid-1.0.0/tabwid.css" rel="stylesheet">
<link href="site_libs/tabwid-1.0.0/scrool.css" rel="stylesheet">


</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./ladal_icon_cas_tran_white_trimed.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Language Technology and Data Analysis Laboratory</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">HOME</a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-about-ladal" role="button" data-bs-toggle="dropdown" aria-expanded="false">ABOUT LADAL</a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-about-ladal">    
        <li>
    <a class="dropdown-item" href="./people.html">
 <span class="dropdown-text">People | Collabs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./news.html">
 <span class="dropdown-text">News</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-events" role="button" data-bs-toggle="dropdown" aria-expanded="false">EVENTS</a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-events">    
        <li>
    <a class="dropdown-item" href="./workshops.html">
 <span class="dropdown-text">Workshops</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./compthinking.html">
 <span class="dropdown-text">Computational Thinking in HASS</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./webinars2022.html">
 <span class="dropdown-text">LADAL Webinar Series 2022</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./opening.html">
 <span class="dropdown-text">LADAL Webinar Series 2021</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./atapevents.html">
 <span class="dropdown-text">ATAP Events</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./tutorials.html">TUTORIALS</a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-resources" role="button" data-bs-toggle="dropdown" aria-expanded="false">RESOURCES</a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-resources">    
        <li>
    <a class="dropdown-item" href="./links.html">
 <span class="dropdown-text">Links</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./base.html">
 <span class="dropdown-text">Tutorial stylesheet</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./contact.html">CONTACT</a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#concordancing" id="toc-concordancing" class="nav-link" data-scroll-target="#concordancing">Concordancing</a></li>
  <li><a href="#word-frequency" id="toc-word-frequency" class="nav-link" data-scroll-target="#word-frequency">Word Frequency</a>
  <ul class="collapse">
  <li><a href="#wordclouds" id="toc-wordclouds" class="nav-link" data-scroll-target="#wordclouds">Wordclouds</a></li>
  <li><a href="#frequency-changes" id="toc-frequency-changes" class="nav-link" data-scroll-target="#frequency-changes">Frequency changes</a></li>
  <li><a href="#dispersion-plots" id="toc-dispersion-plots" class="nav-link" data-scroll-target="#dispersion-plots">Dispersion plots</a></li>
  <li><a href="#over--and-underuse" id="toc-over--and-underuse" class="nav-link" data-scroll-target="#over--and-underuse">Over- and underuse</a></li>
  </ul></li>
  <li><a href="#n-grams-collocations-and-keyness" id="toc-n-grams-collocations-and-keyness" class="nav-link" data-scroll-target="#n-grams-collocations-and-keyness">N-grams, Collocations, and Keyness</a>
  <ul class="collapse">
  <li><a href="#finding-collocations" id="toc-finding-collocations" class="nav-link" data-scroll-target="#finding-collocations">Finding collocations</a></li>
  <li><a href="#visualizing-collocation-networks" id="toc-visualizing-collocation-networks" class="nav-link" data-scroll-target="#visualizing-collocation-networks">Visualizing Collocation Networks</a></li>
  <li><a href="#keyness" id="toc-keyness" class="nav-link" data-scroll-target="#keyness">Keyness</a></li>
  </ul></li>
  <li><a href="#text-classification" id="toc-text-classification" class="nav-link" data-scroll-target="#text-classification">Text Classification</a></li>
  <li><a href="#part-of-speech-tagging" id="toc-part-of-speech-tagging" class="nav-link" data-scroll-target="#part-of-speech-tagging">Part-of-Speech tagging</a></li>
  <li><a href="#names-entity-recognition" id="toc-names-entity-recognition" class="nav-link" data-scroll-target="#names-entity-recognition">Names Entity Recognition</a></li>
  <li><a href="#dependency-parsing-using-udpipe" id="toc-dependency-parsing-using-udpipe" class="nav-link" data-scroll-target="#dependency-parsing-using-udpipe">Dependency Parsing Using UDPipe</a></li>
  <li><a href="#citation-session-info" id="toc-citation-session-info" class="nav-link" data-scroll-target="#citation-session-info">Citation &amp; Session Info</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Practical Overview of Selected Text Analytics Methods</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Martin Schweinberger </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">August 31, 2022</p>
    </div>
  </div>
    
  </div>
  

</header>

<div class="cell">
<div class="cell-output-display">
<p><img src="https://slcladal.github.io/images/uq1.jpg" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<section id="introduction" class="level1 unnumbered">
<h1 class="unnumbered">Introduction</h1>
<div class="cell">
<div class="cell-output-display">
<p><img src="https://slcladal.github.io/images/gy_chili.jpg" class="img-fluid" style="float:right; padding:10px;width:15.0%"></p>
</div>
</div>
<p>This tutorial introduces Text Analysis <span class="citation" data-cites="bernard1998text kabanoff1997introduction popping2000computer">[see <a href="#ref-bernard1998text" role="doc-biblioref">1</a>, <a href="#ref-kabanoff1997introduction" role="doc-biblioref">2</a>, <a href="#ref-popping2000computer" role="doc-biblioref">3</a>]</span>, i.e.&nbsp;computer-based analysis of language data or the (semi-)automated extraction of information from text. This tutorial shows beginner and intermediate users of R how to perform basic text analytic procedures. The aim is not to provide a fully-fledged analysis but rather to show and exemplify selected useful methods associated with text analysis and distant reading.</p>
<div class="warning" style="padding:0.1em; background-color:#f2f2f2; color:#51247a">
<span>
<p style="margin-top:1em; text-align:center">
The entire R Notebook for the tutorial can be downloaded <a href="https://slcladal.github.io/content/textanalysis.Rmd"><strong>here</strong></a>. If you want to render the R Notebook on your machine, i.e.&nbsp;knitting the document to html or a pdf, you need to make sure that you have R and RStudio installed and you also need to download the <a href="https://slcladal.github.io/content/bibliography.bib"><strong>bibliography file</strong></a> and store it in the same folder where you store the Rmd file. <br><br> <strong><a href="https://colab.research.google.com/drive/19vvWkulL2nOCV0RvAX4RBuHfLdNnPw1u?usp=sharing">Here</a></strong> is a <strong>link to an interactive version of this tutorial on Google Colab</strong>. The interactive tutorial is based on a Jupyter notebook of this tutorial. This interactive Jupyter notebook allows you to execute code yourself and - if you copy the Jupyter notebook - you can also change and edit the notebook, e.g.&nbsp;you can change code and upload your own data.<br>
</p>
<p style="margin-left:1em;">
</p>
<p></p>
</span></div>
<p><br></p>
<p>Most of the applications of Text Analysis are based upon a relatively limited number of key procedures or concepts (e.g.&nbsp;concordancing, word frequencies, annotation or tagging, parsing, collocation, text classification, Sentiment Analysis, Entity Extraction, Topic Modeling, etc.). In the following, we will explore these procedures and introduce some basic tools that help you perform the introduced tasks.</p>
<p><strong>Preparation and session set up</strong></p>
<p>This tutorial is based on R. If you have not installed R or are new to it, you will find an introduction to and more information how to use R <a href="https://slcladal.github.io/intror.html">here</a>. For this tutorials, we need to install certain <em>packages</em> from an R <em>library</em> so that the scripts shown below are executed without errors. Before turning to the code below, please install the packages by running the code below this paragraph. If you have already installed the packages mentioned below, then you can skip ahead and ignore this section. To install the necessary packages, simply run the following code - it may take some time (between 1 and 5 minutes to install all of the packages so you do not need to worry if it takes some time).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"quanteda"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"stringr"</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"ggplot2"</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tm"</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"udpipe"</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tidytext"</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"wordcloud2"</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"quanteda.textstats"</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"quanteda.textplots"</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"flextable"</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co"># install klippy for copy-to-clipboard button in code chunks</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"remotes"</span>)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"rlesur/klippy"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now that we have installed the packages, we can activate them as shown below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load packages</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(flextable)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tm)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(udpipe)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(wordcloud2)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(flextable)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textstats)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co"># activate klippy for copy-to-clipboard button</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>klippy<span class="sc">::</span><span class="fu">klippy</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<script>
  addClassKlippyTo("pre.r, pre.markdown");
  addKlippy('left', 'top', 'auto', '1', 'Copy code', 'Copied!');
</script>
</div>
</div>
<p>Once you have installed R and RStudio and once you have also initiated the session by executing the code shown above, you are good to go.</p>
</section>
<section id="concordancing" class="level1 unnumbered">
<h1 class="unnumbered">Concordancing</h1>
<p>In Text Analysis, concordancing refers to the extraction of words from a given text or texts <span class="citation" data-cites="lindquist2009corpus">[<a href="#ref-lindquist2009corpus" role="doc-biblioref">4</a>]</span>. Commonly, concordances are displayed in the form of key-word in contexts (KWIC) where the search term is shown with some preceding and following context. Thus, such displays are referred to as key word in context concordances. A more elaborate tutorial on how to perform concordancing with R is available <a href="https://slcladal.github.io/kwics.html">here</a>.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="https://slcladal.github.io/images/AntConcConcordance.png" class="img-fluid" style="float:right; padding:10px;width:60.0%"></p>
</div>
</div>
<p>Concordancing is helpful for seeing how the term is used in the data, for inspecting how often a given word occurs in a text or a collection of texts, for extracting examples, and it also represents a basic procedure and often the first step in more sophisticated analyses of language data.</p>
<p>In the following, we will use R to create KWICs displays of the term <em>organism</em> and the phrase <em>natural selection</em> using Charles Darwin’s <em>On the origin of species by means of natural selection</em>.</p>
<p>We begin by loading the data which represents the text of Charles Darwin’s <em>On the Origin of Species</em>. For the present tutorial, we load data that is available on the LADAL GitHUb repository. If you want to know how to load your own data, have a look at <a href="https://slcladal.github.io/intror.html#Working_with_text">this tutorial</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load text</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>darwin <span class="ot">&lt;-</span> base<span class="sc">::</span><span class="fu">readRDS</span>(<span class="fu">url</span>(<span class="st">"https://slcladal.github.io/data/darwin.rda"</span>, <span class="st">"rb"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div class="tabwid"><style>.cl-ee5f7ea4{table-layout:auto;width:75%;}.cl-ee59b0be{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-ee59b0c8{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-ee59c770{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-ee59f934{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ee59f93e{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ee59f948{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ee59f952{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class="cl-ee5f7ea4">
<caption class="Table Caption">
<p>First 10 text elements of Charles Darwin’s Origin</p>
</caption>

<thead><tr style="overflow-wrap:break-word;"><td class="cl-ee59f952"><p class="cl-ee59c770"><span class="cl-ee59b0be">.</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-ee59f934"><p class="cl-ee59c770"><span class="cl-ee59b0c8">THE ORIGIN OF SPECIES </span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ee59f948"><p class="cl-ee59c770"><span class="cl-ee59b0c8">BY </span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ee59f934"><p class="cl-ee59c770"><span class="cl-ee59b0c8">CHARLES DARWIN </span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ee59f948"><p class="cl-ee59c770"><span class="cl-ee59b0c8">AN HISTORICAL SKETCH </span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ee59f934"><p class="cl-ee59c770"><span class="cl-ee59b0c8">OF THE PROGRESS OF OPINION ON </span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ee59f948"><p class="cl-ee59c770"><span class="cl-ee59b0c8">THE ORIGIN OF SPECIES </span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ee59f934"><p class="cl-ee59c770"><span class="cl-ee59b0c8">INTRODUCTION </span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ee59f948"><p class="cl-ee59c770"><span class="cl-ee59b0c8">When on board H.M.S. 'Beagle,' as naturalist, I was much struck </span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ee59f934"><p class="cl-ee59c770"><span class="cl-ee59b0c8">with certain facts in the distribution of the organic beings in- </span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ee59f93e"><p class="cl-ee59c770"><span class="cl-ee59b0c8">habiting South America, and in the geological relations of the </span></p></td></tr></tbody></table></div>
</div>
</div>
<p>The data still consists of short text snippets which is why we collapse these snippets and then split the collapsed data into chapters.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># combine and split into chapters</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>darwin_chapters <span class="ot">&lt;-</span> darwin <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># paste all texts together into one long text</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="at">collapse =</span> <span class="st">" "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># replace Chapter I to Chapter XVI with qwertz </span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">"(CHAPTER [XVI]{1,7}</span><span class="sc">\\</span><span class="st">.{0,1}) "</span>, <span class="st">"qwertz</span><span class="sc">\\</span><span class="st">1"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convert text to lower case</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tolower</span>() <span class="sc">%&gt;%</span>  </span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># split the long text into chapters</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_split</span>(<span class="st">"qwertz"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># unlist the result (convert into simple vector)</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div class="tabwid"><style>.cl-ee76b290{table-layout:auto;width:95%;}.cl-ee726f6e{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-ee726f78{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-ee727cd4{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-ee7299da{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ee7299e4{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ee7299e5{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ee7299ee{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class="cl-ee76b290">
<caption class="Table Caption">
<p>First 500 characters of the first 5 chapters of Charles Darwin’s Origin</p>
</caption>

<thead><tr style="overflow-wrap:break-word;"><td class="cl-ee7299ee"><p class="cl-ee727cd4"><span class="cl-ee726f6e">.</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-ee7299da"><p class="cl-ee727cd4"><span class="cl-ee726f78">the origin of species  by  charles darwin  an historical sketch  of the progress of opinion on  the origin of species  introduction  when on board h.m.s. 'beagle,' as naturalist, i was much struck  with certain facts in the distribution of the organic beings in-  habiting south america, and in the geological relations of the  present to the past inhabitants of that continent. these facts, as  will be seen in the latter chapters of this volume, seemed to throw  some light on the origin of species</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ee7299e4"><p class="cl-ee727cd4"><span class="cl-ee726f78">chapter i variation under domestication  causes of variability — effects of habit and the use or disuse of parts-  correlated variation — inheritance — character of domestic varie-  ties — difificulty of distinguishing between varieties and species —  origin of domestic varieties from one or more species — domestic  pigeons, their differences and origin — principles of selection, an-  ciently followed, their efifects — methodical and unconscious  selection — unknown origin of our domestic produc</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ee7299da"><p class="cl-ee727cd4"><span class="cl-ee726f78">chapter ii variation under nature  variability — individual differences — doubtful species — wide ranging,  much diffused, and common species, vary most — species of the  larger genera in each country vary more frequently than the  species of the smaller genera — many of the species of the larger  genera resemble varieties in being very closely, but unequally,  related to each other, and in having restricted ranges.  b  efore applying the principles arrived at in the last  chapter to organic bei</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ee7299e4"><p class="cl-ee727cd4"><span class="cl-ee726f78">chapter iii struggle for existence  its bearing on natural selection — the term used in a wide sense —  geometrical ratio of increase — rapid increase of naturalized  animals and plants — nature of the checks to increase — competi-  tion universal — effects of climate — protection from the number  of individuals — complex relations of all animals and plants  throughout nature — struggle for life most severe between indi-  viduals and varieties of the same species : often severe between  species </span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ee7299e5"><p class="cl-ee727cd4"><span class="cl-ee726f78">chapter iv natural selection ; or the survival of the fittest  natural selection — its power compared with man's selection — its  power on characters of trifling importance — its power at all ages  and on both sexes — sexual selection — on the generality of inter-  crosses between individuals of the same species — circumstances  favourable and unfavourable to the results of natural selection,  namely, intercrossing, isolation, number of individuals — slow  action — extinction caused by natural s</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Once we have split the data into chapters, we perform the concordancing and extract the KWICs. To create these kwics, we use the <code>kwic</code> function from the <code>quanteda</code> package. This function takes the data (x), the search pattern (pattern), and the window size as its main arguments.</p>
<p>To start with, we generate kwics for the term <em>organism</em> as shown below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create kwic</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>kwic_o <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">kwic</span>(<span class="at">x =</span> darwin_chapters, <span class="co"># define text(s) </span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>                         <span class="co"># define pattern</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">pattern =</span> <span class="st">"organism"</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>                         <span class="co"># define window size</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>                          <span class="at">window =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convert into a data frame</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove superfluous columns</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>to, <span class="sc">-</span>from, <span class="sc">-</span>pattern)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div class="tabwid"><style>.cl-ef5b4982{table-layout:auto;width:95%;}.cl-ef56880c{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-ef568820{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-ef569e8c{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-ef56cac4{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ef56cace{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ef56cacf{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ef56cad8{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ef56cad9{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ef56cae2{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ef56caec{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ef56caed{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ef56caee{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ef56caf6{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ef56caf7{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ef56cb00{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class="cl-ef5b4982">
<caption class="Table Caption">
<p>First 10 concordances of organism in Charles Darwin’s Origin</p>
</caption>

<thead><tr style="overflow-wrap:break-word;"><td class="cl-ef56caf6"><p class="cl-ef569e8c"><span class="cl-ef56880c">docname</span></p></td><td class="cl-ef56cb00"><p class="cl-ef569e8c"><span class="cl-ef56880c">pre</span></p></td><td class="cl-ef56cb00"><p class="cl-ef569e8c"><span class="cl-ef56880c">keyword</span></p></td><td class="cl-ef56caf7"><p class="cl-ef569e8c"><span class="cl-ef56880c">post</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-ef56cac4"><p class="cl-ef569e8c"><span class="cl-ef568820">text2</span></p></td><td class="cl-ef56cace"><p class="cl-ef569e8c"><span class="cl-ef568820">on record of a variable</span></p></td><td class="cl-ef56cace"><p class="cl-ef569e8c"><span class="cl-ef568820">organism</span></p></td><td class="cl-ef56cacf"><p class="cl-ef569e8c"><span class="cl-ef568820">ceasing to vary wnder cultivation</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ef56caee"><p class="cl-ef569e8c"><span class="cl-ef568820">text2</span></p></td><td class="cl-ef56caec"><p class="cl-ef569e8c"><span class="cl-ef568820">, the nature of the</span></p></td><td class="cl-ef56caec"><p class="cl-ef569e8c"><span class="cl-ef568820">organism</span></p></td><td class="cl-ef56caed"><p class="cl-ef569e8c"><span class="cl-ef568820">, and the nature of</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ef56cac4"><p class="cl-ef569e8c"><span class="cl-ef568820">text2</span></p></td><td class="cl-ef56cace"><p class="cl-ef569e8c"><span class="cl-ef568820">of life on each individual</span></p></td><td class="cl-ef56cace"><p class="cl-ef569e8c"><span class="cl-ef568820">organism</span></p></td><td class="cl-ef56cacf"><p class="cl-ef569e8c"><span class="cl-ef568820">, in nearly the same</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ef56caee"><p class="cl-ef569e8c"><span class="cl-ef568820">text2</span></p></td><td class="cl-ef56caec"><p class="cl-ef569e8c"><span class="cl-ef568820">with the nature of the</span></p></td><td class="cl-ef56caec"><p class="cl-ef569e8c"><span class="cl-ef568820">organism</span></p></td><td class="cl-ef56caed"><p class="cl-ef569e8c"><span class="cl-ef568820">in determining each particular form</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ef56cac4"><p class="cl-ef569e8c"><span class="cl-ef568820">text3</span></p></td><td class="cl-ef56cace"><p class="cl-ef569e8c"><span class="cl-ef568820">of the nature of the</span></p></td><td class="cl-ef56cace"><p class="cl-ef569e8c"><span class="cl-ef568820">organism</span></p></td><td class="cl-ef56cacf"><p class="cl-ef569e8c"><span class="cl-ef568820">and of the different physical</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ef56caee"><p class="cl-ef569e8c"><span class="cl-ef568820">text4</span></p></td><td class="cl-ef56caec"><p class="cl-ef569e8c"><span class="cl-ef568820">genus - the relation of</span></p></td><td class="cl-ef56caec"><p class="cl-ef569e8c"><span class="cl-ef568820">organism</span></p></td><td class="cl-ef56caed"><p class="cl-ef569e8c"><span class="cl-ef568820">to organism the most important</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ef56cac4"><p class="cl-ef569e8c"><span class="cl-ef568820">text4</span></p></td><td class="cl-ef56cace"><p class="cl-ef569e8c"><span class="cl-ef568820">the relation of organism to</span></p></td><td class="cl-ef56cace"><p class="cl-ef569e8c"><span class="cl-ef568820">organism</span></p></td><td class="cl-ef56cacf"><p class="cl-ef569e8c"><span class="cl-ef568820">the most important of all</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ef56caee"><p class="cl-ef569e8c"><span class="cl-ef568820">text5</span></p></td><td class="cl-ef56caec"><p class="cl-ef569e8c"><span class="cl-ef568820">to the nature of the</span></p></td><td class="cl-ef56caec"><p class="cl-ef569e8c"><span class="cl-ef568820">organism</span></p></td><td class="cl-ef56caed"><p class="cl-ef569e8c"><span class="cl-ef568820">and the nature of the</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ef56cac4"><p class="cl-ef569e8c"><span class="cl-ef568820">text5</span></p></td><td class="cl-ef56cace"><p class="cl-ef569e8c"><span class="cl-ef568820">to the constitution of each</span></p></td><td class="cl-ef56cace"><p class="cl-ef569e8c"><span class="cl-ef568820">organism</span></p></td><td class="cl-ef56cacf"><p class="cl-ef569e8c"><span class="cl-ef568820">. if we turn to</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ef56cad9"><p class="cl-ef569e8c"><span class="cl-ef568820">text5</span></p></td><td class="cl-ef56cad8"><p class="cl-ef569e8c"><span class="cl-ef568820">as soon as simple unicellular</span></p></td><td class="cl-ef56cad8"><p class="cl-ef569e8c"><span class="cl-ef568820">organism</span></p></td><td class="cl-ef56cae2"><p class="cl-ef569e8c"><span class="cl-ef568820">came by growth or division</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>We can also use regular expressions in our search to extract not only <em>organism</em> but also <em>organisms</em> and <em>organic</em>. When using a regular expression in the <code>pattern</code> argument, we need to specify the <code>valuetype</code> as <code>regex</code> (as shown below).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create kwic</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>kwic_os <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">kwic</span>(<span class="at">x =</span> darwin_chapters, </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">pattern =</span> <span class="st">"organi.*"</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">window =</span> <span class="dv">5</span>,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">valuetype =</span> <span class="st">"regex"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convert into a data frame</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove superfluous columns</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>to, <span class="sc">-</span>from, <span class="sc">-</span>pattern)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div class="tabwid"><style>.cl-f05a765a{table-layout:auto;width:95%;}.cl-f055b782{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-f055b78c{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-f055c4ca{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-f055ea18{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f055ea22{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f055ea36{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f055ea37{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f055ea40{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f055ea41{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f055ea4a{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f055ea4b{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f055ea54{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f055ea55{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f055ea5e{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f055ea5f{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class="cl-f05a765a">
<caption class="Table Caption">
<p>First 10 cleaned Concordances of organism in Charles Darwin’s Origin</p>
</caption>

<thead><tr style="overflow-wrap:break-word;"><td class="cl-f055ea55"><p class="cl-f055c4ca"><span class="cl-f055b782">docname</span></p></td><td class="cl-f055ea5f"><p class="cl-f055c4ca"><span class="cl-f055b782">pre</span></p></td><td class="cl-f055ea5f"><p class="cl-f055c4ca"><span class="cl-f055b782">keyword</span></p></td><td class="cl-f055ea5e"><p class="cl-f055c4ca"><span class="cl-f055b782">post</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-f055ea18"><p class="cl-f055c4ca"><span class="cl-f055b78c">text2</span></p></td><td class="cl-f055ea22"><p class="cl-f055c4ca"><span class="cl-f055b78c">on record of a variable</span></p></td><td class="cl-f055ea22"><p class="cl-f055c4ca"><span class="cl-f055b78c">organism</span></p></td><td class="cl-f055ea36"><p class="cl-f055c4ca"><span class="cl-f055b78c">ceasing to vary wnder cultivation</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f055ea54"><p class="cl-f055c4ca"><span class="cl-f055b78c">text2</span></p></td><td class="cl-f055ea4a"><p class="cl-f055c4ca"><span class="cl-f055b78c">, the nature of the</span></p></td><td class="cl-f055ea4a"><p class="cl-f055c4ca"><span class="cl-f055b78c">organism</span></p></td><td class="cl-f055ea4b"><p class="cl-f055c4ca"><span class="cl-f055b78c">, and the nature of</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f055ea18"><p class="cl-f055c4ca"><span class="cl-f055b78c">text2</span></p></td><td class="cl-f055ea22"><p class="cl-f055c4ca"><span class="cl-f055b78c">of life on each individual</span></p></td><td class="cl-f055ea22"><p class="cl-f055c4ca"><span class="cl-f055b78c">organism</span></p></td><td class="cl-f055ea36"><p class="cl-f055c4ca"><span class="cl-f055b78c">, in nearly the same</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f055ea54"><p class="cl-f055c4ca"><span class="cl-f055b78c">text2</span></p></td><td class="cl-f055ea4a"><p class="cl-f055c4ca"><span class="cl-f055b78c">with the nature of the</span></p></td><td class="cl-f055ea4a"><p class="cl-f055c4ca"><span class="cl-f055b78c">organism</span></p></td><td class="cl-f055ea4b"><p class="cl-f055c4ca"><span class="cl-f055b78c">in determining each particular form</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f055ea18"><p class="cl-f055c4ca"><span class="cl-f055b78c">text3</span></p></td><td class="cl-f055ea22"><p class="cl-f055c4ca"><span class="cl-f055b78c">of the nature of the</span></p></td><td class="cl-f055ea22"><p class="cl-f055c4ca"><span class="cl-f055b78c">organism</span></p></td><td class="cl-f055ea36"><p class="cl-f055c4ca"><span class="cl-f055b78c">and of the different physical</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f055ea54"><p class="cl-f055c4ca"><span class="cl-f055b78c">text4</span></p></td><td class="cl-f055ea4a"><p class="cl-f055c4ca"><span class="cl-f055b78c">genus - the relation of</span></p></td><td class="cl-f055ea4a"><p class="cl-f055c4ca"><span class="cl-f055b78c">organism</span></p></td><td class="cl-f055ea4b"><p class="cl-f055c4ca"><span class="cl-f055b78c">to organism the most important</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f055ea18"><p class="cl-f055c4ca"><span class="cl-f055b78c">text4</span></p></td><td class="cl-f055ea22"><p class="cl-f055c4ca"><span class="cl-f055b78c">the relation of organism to</span></p></td><td class="cl-f055ea22"><p class="cl-f055c4ca"><span class="cl-f055b78c">organism</span></p></td><td class="cl-f055ea36"><p class="cl-f055c4ca"><span class="cl-f055b78c">the most important of all</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f055ea54"><p class="cl-f055c4ca"><span class="cl-f055b78c">text5</span></p></td><td class="cl-f055ea4a"><p class="cl-f055c4ca"><span class="cl-f055b78c">to the nature of the</span></p></td><td class="cl-f055ea4a"><p class="cl-f055c4ca"><span class="cl-f055b78c">organism</span></p></td><td class="cl-f055ea4b"><p class="cl-f055c4ca"><span class="cl-f055b78c">and the nature of the</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f055ea18"><p class="cl-f055c4ca"><span class="cl-f055b78c">text5</span></p></td><td class="cl-f055ea22"><p class="cl-f055c4ca"><span class="cl-f055b78c">to the constitution of each</span></p></td><td class="cl-f055ea22"><p class="cl-f055c4ca"><span class="cl-f055b78c">organism</span></p></td><td class="cl-f055ea36"><p class="cl-f055c4ca"><span class="cl-f055b78c">. if we turn to</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f055ea40"><p class="cl-f055c4ca"><span class="cl-f055b78c">text5</span></p></td><td class="cl-f055ea37"><p class="cl-f055c4ca"><span class="cl-f055b78c">as soon as simple unicellular</span></p></td><td class="cl-f055ea37"><p class="cl-f055c4ca"><span class="cl-f055b78c">organism</span></p></td><td class="cl-f055ea41"><p class="cl-f055c4ca"><span class="cl-f055b78c">came by growth or division</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>When search for expressions that represent phrase and that consists out of several elements such as <em>natural selection</em>, we also need to specify that we are looking for a phrase in the pattern argument.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create kwic</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>kwic_ns <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">kwic</span>(<span class="at">x =</span> darwin_chapters, </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">pattern =</span> quanteda<span class="sc">::</span><span class="fu">phrase</span>(<span class="st">"natural selection"</span>),</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">window =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convert into a data frame</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove superfluous columns</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>to, <span class="sc">-</span>from, <span class="sc">-</span>pattern)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div class="tabwid"><style>.cl-f13f2b6a{table-layout:auto;width:95%;}.cl-f13a3fce{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-f13a3fe2{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-f13a4f00{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-f13a7aa2{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f13a7aac{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f13a7ab6{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f13a7ab7{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f13a7ac0{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f13a7ac1{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f13a7aca{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f13a7acb{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f13a7ad4{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f13a7ad5{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f13a7ad6{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f13a7ade{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class="cl-f13f2b6a">
<caption class="Table Caption">
<p>First 10 cleaned Concordances of the phrase natural selection in Charles Darwin’s Origin</p>
</caption>

<thead><tr style="overflow-wrap:break-word;"><td class="cl-f13a7ad5"><p class="cl-f13a4f00"><span class="cl-f13a3fce">docname</span></p></td><td class="cl-f13a7ade"><p class="cl-f13a4f00"><span class="cl-f13a3fce">pre</span></p></td><td class="cl-f13a7ade"><p class="cl-f13a4f00"><span class="cl-f13a3fce">keyword</span></p></td><td class="cl-f13a7ad6"><p class="cl-f13a4f00"><span class="cl-f13a3fce">post</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-f13a7aa2"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">text1</span></p></td><td class="cl-f13a7aac"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">. this fundamental subject of</span></p></td><td class="cl-f13a7aac"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">natural selection</span></p></td><td class="cl-f13a7ab6"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">will be treated at some</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f13a7ad4"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">text1</span></p></td><td class="cl-f13a7aca"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">we shall then see how</span></p></td><td class="cl-f13a7aca"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">natural selection</span></p></td><td class="cl-f13a7acb"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">almost inevitably causes much extinction</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f13a7aa2"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">text1</span></p></td><td class="cl-f13a7aac"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">, i am convinced that</span></p></td><td class="cl-f13a7aac"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">natural selection</span></p></td><td class="cl-f13a7ab6"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">has been the most important</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f13a7ad4"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">text2</span></p></td><td class="cl-f13a7aca"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">by a process of "</span></p></td><td class="cl-f13a7aca"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">natural selection</span></p></td><td class="cl-f13a7acb"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">, " as will hereafter</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f13a7aa2"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">text3</span></p></td><td class="cl-f13a7aac"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">they thus aft'ord materials for</span></p></td><td class="cl-f13a7aac"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">natural selection</span></p></td><td class="cl-f13a7ab6"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">to act on and accumulate</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f13a7ad4"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">text3</span></p></td><td class="cl-f13a7aca"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">on and rendered definite by</span></p></td><td class="cl-f13a7aca"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">natural selection</span></p></td><td class="cl-f13a7acb"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">, as hereafter to be</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f13a7aa2"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">text3</span></p></td><td class="cl-f13a7aac"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">to the cumulative action of</span></p></td><td class="cl-f13a7aac"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">natural selection</span></p></td><td class="cl-f13a7ab6"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">, hereafter to be explained</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f13a7ad4"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">text4</span></p></td><td class="cl-f13a7aca"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">for existence its bearing on</span></p></td><td class="cl-f13a7aca"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">natural selection</span></p></td><td class="cl-f13a7acb"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">- the term used in</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f13a7aa2"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">text4</span></p></td><td class="cl-f13a7aac"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">struggle for existence bears on</span></p></td><td class="cl-f13a7aac"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">natural selection</span></p></td><td class="cl-f13a7ab6"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">. it has been seen</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f13a7ac0"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">text4</span></p></td><td class="cl-f13a7ab7"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">preserved , by the term</span></p></td><td class="cl-f13a7ab7"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">natural selection</span></p></td><td class="cl-f13a7ac1"><p class="cl-f13a4f00"><span class="cl-f13a3fe2">, in order to mark</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>We could now continue and analyze how Darwin used the phrase <em>natural selection</em> or we could go about investigating how Darwin has used the term <em>organism</em>.</p>
</section>
<section id="word-frequency" class="level1 unnumbered">
<h1 class="unnumbered">Word Frequency</h1>
<p>Almost all methods used in text analytics rely on frequency information. Thus, fending out out frequent words are in a text is a fundamental technique in text analytics. In fact, frequency information lies at the very core of Text Analysis. Such frequency information often comes in the form of word frequency lists, i.e.&nbsp;lists of word forms and their frequency in a given text or collection of texts.</p>
<p>As extracting word frequency lists is very important, we will now We will now extract a frequency list from a corpus.</p>
<p>In a first step, we load a corpus, convert everything to lower case, remove non-word symbols (including punctuation), and split the corpus data into individual words.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load and process corpus</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>darwin_words <span class="ot">&lt;-</span> darwin  <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convert everything to lower case</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tolower</span>() <span class="sc">%&gt;%</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove non-word characters</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="st">"[^[:alpha:][:space:]]*"</span>, <span class="st">""</span>)  <span class="sc">%&gt;%</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  tm<span class="sc">::</span><span class="fu">removePunctuation</span>() <span class="sc">%&gt;%</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_squish</span>() <span class="sc">%&gt;%</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_split</span>(<span class="st">" "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div class="tabwid"><style>.cl-f16f5128{table-layout:auto;width:50%;}.cl-f16a79d2{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-f16a79e6{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-f16a883c{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-f16ab0b4{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f16ab0be{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f16ab0c8{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f16ab0c9{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class="cl-f16f5128">
<caption class="Table Caption">
<p>First 15 words in Charles Darwin’s Origin</p>
</caption>

<thead><tr style="overflow-wrap:break-word;"><td class="cl-f16ab0c9"><p class="cl-f16a883c"><span class="cl-f16a79d2">.</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-f16ab0b4"><p class="cl-f16a883c"><span class="cl-f16a79e6">the</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f16ab0be"><p class="cl-f16a883c"><span class="cl-f16a79e6">origin</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f16ab0b4"><p class="cl-f16a883c"><span class="cl-f16a79e6">of</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f16ab0be"><p class="cl-f16a883c"><span class="cl-f16a79e6">species</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f16ab0b4"><p class="cl-f16a883c"><span class="cl-f16a79e6">by</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f16ab0be"><p class="cl-f16a883c"><span class="cl-f16a79e6">charles</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f16ab0b4"><p class="cl-f16a883c"><span class="cl-f16a79e6">darwin</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f16ab0be"><p class="cl-f16a883c"><span class="cl-f16a79e6">an</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f16ab0b4"><p class="cl-f16a883c"><span class="cl-f16a79e6">historical</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f16ab0be"><p class="cl-f16a883c"><span class="cl-f16a79e6">sketch</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f16ab0b4"><p class="cl-f16a883c"><span class="cl-f16a79e6">of</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f16ab0be"><p class="cl-f16a883c"><span class="cl-f16a79e6">the</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f16ab0b4"><p class="cl-f16a883c"><span class="cl-f16a79e6">progress</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f16ab0be"><p class="cl-f16a883c"><span class="cl-f16a79e6">of</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f16ab0c8"><p class="cl-f16a883c"><span class="cl-f16a79e6">opinion</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Now that we have a vector of words, we can easily create a table representing a word frequency list (as shown below).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create table</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>wfreq <span class="ot">&lt;-</span> darwin_words <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Freq)) <span class="sc">%&gt;%</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">word =</span> <span class="dv">1</span>,</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">frequency =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div class="tabwid"><style>.cl-f188fcd6{table-layout:auto;width:50%;}.cl-f1841338{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-f1841342{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-f184236e{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-f1842378{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-f18450a0{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f18450aa{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f18450b4{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f18450be{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f18450c8{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f18450d2{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f18450dc{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f18450e6{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class="cl-f188fcd6">
<caption class="Table Caption">
<p>Top 15 words in Charles Darwin’s Origin by frequency.</p>
</caption>

<thead><tr style="overflow-wrap:break-word;"><td class="cl-f18450e6"><p class="cl-f184236e"><span class="cl-f1841338">word</span></p></td><td class="cl-f18450dc"><p class="cl-f1842378"><span class="cl-f1841338">frequency</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-f18450aa"><p class="cl-f184236e"><span class="cl-f1841342">the</span></p></td><td class="cl-f18450a0"><p class="cl-f1842378"><span class="cl-f1841342">13,498</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f18450be"><p class="cl-f184236e"><span class="cl-f1841342">of</span></p></td><td class="cl-f18450b4"><p class="cl-f1842378"><span class="cl-f1841342">9,234</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f18450aa"><p class="cl-f184236e"><span class="cl-f1841342">and</span></p></td><td class="cl-f18450a0"><p class="cl-f1842378"><span class="cl-f1841342">5,548</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f18450be"><p class="cl-f184236e"><span class="cl-f1841342">in</span></p></td><td class="cl-f18450b4"><p class="cl-f1842378"><span class="cl-f1841342">5,139</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f18450aa"><p class="cl-f184236e"><span class="cl-f1841342">to</span></p></td><td class="cl-f18450a0"><p class="cl-f1842378"><span class="cl-f1841342">4,539</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f18450be"><p class="cl-f184236e"><span class="cl-f1841342">a</span></p></td><td class="cl-f18450b4"><p class="cl-f1842378"><span class="cl-f1841342">3,159</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f18450aa"><p class="cl-f184236e"><span class="cl-f1841342">that</span></p></td><td class="cl-f18450a0"><p class="cl-f1842378"><span class="cl-f1841342">2,661</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f18450be"><p class="cl-f184236e"><span class="cl-f1841342">as</span></p></td><td class="cl-f18450b4"><p class="cl-f1842378"><span class="cl-f1841342">2,164</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f18450aa"><p class="cl-f184236e"><span class="cl-f1841342">be</span></p></td><td class="cl-f18450a0"><p class="cl-f1842378"><span class="cl-f1841342">2,143</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f18450be"><p class="cl-f184236e"><span class="cl-f1841342">have</span></p></td><td class="cl-f18450b4"><p class="cl-f1842378"><span class="cl-f1841342">2,070</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f18450aa"><p class="cl-f184236e"><span class="cl-f1841342">is</span></p></td><td class="cl-f18450a0"><p class="cl-f1842378"><span class="cl-f1841342">1,994</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f18450be"><p class="cl-f184236e"><span class="cl-f1841342">species</span></p></td><td class="cl-f18450b4"><p class="cl-f1842378"><span class="cl-f1841342">1,755</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f18450aa"><p class="cl-f184236e"><span class="cl-f1841342">by</span></p></td><td class="cl-f18450a0"><p class="cl-f1842378"><span class="cl-f1841342">1,672</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f18450be"><p class="cl-f184236e"><span class="cl-f1841342">which</span></p></td><td class="cl-f18450b4"><p class="cl-f1842378"><span class="cl-f1841342">1,655</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f18450d2"><p class="cl-f184236e"><span class="cl-f1841342">are</span></p></td><td class="cl-f18450c8"><p class="cl-f1842378"><span class="cl-f1841342">1,553</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>The most frequent words are all function words which are often not meaningful or useful for an analysis. Thus, we now remove these function words (also called <em>stopwords</em>) from the frequency list and inspect the list without stopwords.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create table wo stopwords</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>wfreq_wostop <span class="ot">&lt;-</span> wfreq <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words, <span class="at">by =</span> <span class="st">"word"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div class="tabwid"><style>.cl-f19c0baa{table-layout:auto;width:50%;}.cl-f1971942{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-f1971956{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-f19729be{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-f19729c8{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-f19759a2{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19759b6{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19759c0{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19759c1{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19759ca{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19759d4{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19759de{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f19759e8{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class="cl-f19c0baa">
<caption class="Table Caption">
<p>Top 15 lexical words in Charles Darwin’s Origin by frequency.</p>
</caption>

<thead><tr style="overflow-wrap:break-word;"><td class="cl-f19759e8"><p class="cl-f19729be"><span class="cl-f1971942">word</span></p></td><td class="cl-f19759de"><p class="cl-f19729c8"><span class="cl-f1971942">frequency</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-f19759b6"><p class="cl-f19729be"><span class="cl-f1971956">species</span></p></td><td class="cl-f19759a2"><p class="cl-f19729c8"><span class="cl-f1971956">1,755</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f19759c1"><p class="cl-f19729be"><span class="cl-f1971956">forms</span></p></td><td class="cl-f19759c0"><p class="cl-f19729c8"><span class="cl-f1971956">524</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f19759b6"><p class="cl-f19729be"><span class="cl-f1971956">natural</span></p></td><td class="cl-f19759a2"><p class="cl-f19729c8"><span class="cl-f1971956">513</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f19759c1"><p class="cl-f19729be"><span class="cl-f1971956">selection</span></p></td><td class="cl-f19759c0"><p class="cl-f19729c8"><span class="cl-f1971956">505</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f19759b6"><p class="cl-f19729be"><span class="cl-f1971956">varieties</span></p></td><td class="cl-f19759a2"><p class="cl-f19729c8"><span class="cl-f1971956">409</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f19759c1"><p class="cl-f19729be"><span class="cl-f1971956">plants</span></p></td><td class="cl-f19759c0"><p class="cl-f19729c8"><span class="cl-f1971956">396</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f19759b6"><p class="cl-f19729be"><span class="cl-f1971956">animals</span></p></td><td class="cl-f19759a2"><p class="cl-f19729c8"><span class="cl-f1971956">362</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f19759c1"><p class="cl-f19729be"><span class="cl-f1971956">life</span></p></td><td class="cl-f19759c0"><p class="cl-f19729c8"><span class="cl-f1971956">330</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f19759b6"><p class="cl-f19729be"><span class="cl-f1971956">distinct</span></p></td><td class="cl-f19759a2"><p class="cl-f19729c8"><span class="cl-f1971956">326</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f19759c1"><p class="cl-f19729be"><span class="cl-f1971956">nature</span></p></td><td class="cl-f19759c0"><p class="cl-f19729c8"><span class="cl-f1971956">301</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f19759b6"><p class="cl-f19729be"><span class="cl-f1971956">conditions</span></p></td><td class="cl-f19759a2"><p class="cl-f19729c8"><span class="cl-f1971956">268</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f19759c1"><p class="cl-f19729be"><span class="cl-f1971956">structure</span></p></td><td class="cl-f19759c0"><p class="cl-f19729c8"><span class="cl-f1971956">249</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f19759b6"><p class="cl-f19729be"><span class="cl-f1971956">period</span></p></td><td class="cl-f19759a2"><p class="cl-f19729c8"><span class="cl-f1971956">246</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f19759c1"><p class="cl-f19729be"><span class="cl-f1971956">time</span></p></td><td class="cl-f19759c0"><p class="cl-f19729c8"><span class="cl-f1971956">240</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-f19759d4"><p class="cl-f19729be"><span class="cl-f1971956">common</span></p></td><td class="cl-f19759ca"><p class="cl-f19729c8"><span class="cl-f1971956">231</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Such word frequency lists can be visualized in various ways. The most common way to visualize word frequency lists is in the form of bargraphs.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>wfreq_wostop <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(word, <span class="sc">-</span>frequency, mean), <span class="at">y =</span> frequency)) <span class="sc">+</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"10 most frequent non-stop words in </span><span class="sc">\n</span><span class="st">Charles Darwin's Origin of Species"</span>,</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">size =</span> <span class="dv">12</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="textanalysis_files/figure-html/wf6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="wordclouds" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="wordclouds">Wordclouds</h2>
<p>Alternatively, word frequency lists can be visualized, although less informative, as word clouds.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create wordcloud</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co">#wordcloud2(wfreq_wostop[1:100,],</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co">#           shape = "diamond",</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">#           color = scales::viridis_pal()(8)</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co">#          )</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Another variant of word clouds, so-called <em>comparison clouds</em>, Word lists can be used to determine differences between texts. For instance, we can load different texts and check whether they differ with respect to word frequencies. To show this, we load Herman Melville’s <em>Moby Dick</em>, George Orwell’s <em>1984</em>, and we also use Darwin’s <em>Origin</em>.</p>
<p>In a first step, we load these texts and collapse them into single documents.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load data</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>orwell_sep <span class="ot">&lt;-</span> base<span class="sc">::</span><span class="fu">readRDS</span>(<span class="fu">url</span>(<span class="st">"https://slcladal.github.io/data/orwell.rda"</span>, <span class="st">"rb"</span>))</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>orwell <span class="ot">&lt;-</span> orwell_sep <span class="sc">%&gt;%</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="at">collapse =</span> <span class="st">" "</span>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>melville_sep <span class="ot">&lt;-</span> base<span class="sc">::</span><span class="fu">readRDS</span>(<span class="fu">url</span>(<span class="st">"https://slcladal.github.io/data/melville.rda"</span>, <span class="st">"rb"</span>))</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>melville <span class="ot">&lt;-</span> melville_sep <span class="sc">%&gt;%</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="at">collapse =</span> <span class="st">" "</span>)</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>darwin_sep <span class="ot">&lt;-</span> darwin</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>darwin <span class="ot">&lt;-</span> <span class="fu">paste0</span>(darwin_sep, <span class="at">collapse =</span> <span class="st">" "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, we generate a corpus object from these texts and create a variable with the author name.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>corp_dom <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">corpus</span>(<span class="fu">c</span>(darwin, orwell, melville)) </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(corp_dom, <span class="st">"docvars"</span>)<span class="sc">$</span>Author <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Darwin"</span>, <span class="st">"Orwell"</span>, <span class="st">"Melville"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, we can remove so-called <em>stopwords</em> (non-lexical function words) and punctuation and generate the comparison cloud.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>corp_dom  <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    quanteda<span class="sc">::</span><span class="fu">tokens</span>(<span class="at">remove_punct =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    quanteda<span class="sc">::</span><span class="fu">tokens_remove</span>(<span class="fu">stopwords</span>(<span class="st">"english"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    quanteda<span class="sc">::</span><span class="fu">dfm</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    quanteda<span class="sc">::</span><span class="fu">dfm_group</span>(<span class="at">groups =</span> corp_dom<span class="sc">$</span>Author) <span class="sc">%&gt;%</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    quanteda<span class="sc">::</span><span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">200</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    quanteda.textplots<span class="sc">::</span><span class="fu">textplot_wordcloud</span>(<span class="at">comparison =</span> <span class="cn">TRUE</span>, </span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">max_words =</span> <span class="dv">100</span>,</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">max_size =</span> <span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="textanalysis_files/figure-html/wc4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="frequency-changes" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="frequency-changes">Frequency changes</h2>
<p>We can also investigate the use of the term <em>organism</em> across chapters in Darwin’s <em>Origin</em>. In a first step, we extract the number of words in each chapter.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract number of words per chapter</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>Words <span class="ot">&lt;-</span> darwin_chapters <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_split</span>(<span class="st">" "</span>)  <span class="sc">%&gt;%</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lengths</span>()</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>Words</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1856 14065  7456  7136 22317 13916 17781 19055 15847 14741 13313 12996
[13] 13753  9817 20967 12987</code></pre>
</div>
</div>
<p>Next, we extract the number of matches in each chapter.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract number of matches per chapter</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>Matches <span class="ot">&lt;-</span> darwin_chapters <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_count</span>(<span class="st">"organism[s]{0,1}"</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect the number of matches per chapter</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>Matches</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  0  5  3  3  9  3  3  3  0  1  6  6 10  5  8  7</code></pre>
</div>
</div>
<p>Now, we extract the names of the chapters and create a table with the chapter names and the relative frequency of matches per 1,000 words.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract chapters</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>Chapters <span class="ot">&lt;-</span> darwin_chapters <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">"(chapter [xvi]{1,7})</span><span class="sc">\\</span><span class="st">.{0,1} .*"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">1"</span>)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>Chapters <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(<span class="fu">nchar</span>(Chapters) <span class="sc">&gt;</span> <span class="dv">50</span> <span class="sc">~</span> <span class="st">"chapter 0"</span>, <span class="cn">TRUE</span> <span class="sc">~</span> Chapters)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>Chapters</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "chapter 0"    "chapter i"    "chapter ii"   "chapter iii"  "chapter iv"  
 [6] "chapter v"    "chapter vi"   "chapter vii"  "chapter viii" "chapter ix"  
[11] "chapter x"    "chapter xi"   "chapter xii"  "chapter xiii" "chapter xiv" 
[16] "chapter xv"  </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create table of results</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>tb <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(Chapters, Matches, Words) <span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">Frequency =</span> <span class="fu">round</span>(Matches<span class="sc">/</span>Words<span class="sc">*</span><span class="dv">1000</span>, <span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div class="tabwid"><style>.cl-06387706{table-layout:auto;width:50%;}.cl-0630d2e4{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-0630d2ee{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-0630e3e2{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-0630e3ec{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-06312546{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0631255a{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0631255b{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06312564{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06312565{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0631256e{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06312578{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06312579{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06312582{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06312583{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0631258c{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06312596{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class="cl-06387706">
<caption class="Table Caption">
<p>Words and their (relative) freqeuncy across in Charles Darwin’s Origin by frequency.</p>
</caption>

<thead><tr style="overflow-wrap:break-word;"><td class="cl-06312583"><p class="cl-0630e3e2"><span class="cl-0630d2e4">Chapters</span></p></td><td class="cl-0631258c"><p class="cl-0630e3ec"><span class="cl-0630d2e4">Matches</span></p></td><td class="cl-0631258c"><p class="cl-0630e3ec"><span class="cl-0630d2e4">Words</span></p></td><td class="cl-06312596"><p class="cl-0630e3ec"><span class="cl-0630d2e4">Frequency</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-0631255b"><p class="cl-0630e3e2"><span class="cl-0630d2ee">chapter 0</span></p></td><td class="cl-06312546"><p class="cl-0630e3ec"><span class="cl-0630d2ee">0</span></p></td><td class="cl-06312546"><p class="cl-0630e3ec"><span class="cl-0630d2ee">1,856</span></p></td><td class="cl-0631255a"><p class="cl-0630e3ec"><span class="cl-0630d2ee">0.00</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-06312564"><p class="cl-0630e3e2"><span class="cl-0630d2ee">chapter i</span></p></td><td class="cl-06312565"><p class="cl-0630e3ec"><span class="cl-0630d2ee">5</span></p></td><td class="cl-06312565"><p class="cl-0630e3ec"><span class="cl-0630d2ee">14,065</span></p></td><td class="cl-0631256e"><p class="cl-0630e3ec"><span class="cl-0630d2ee">0.36</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0631255b"><p class="cl-0630e3e2"><span class="cl-0630d2ee">chapter ii</span></p></td><td class="cl-06312546"><p class="cl-0630e3ec"><span class="cl-0630d2ee">3</span></p></td><td class="cl-06312546"><p class="cl-0630e3ec"><span class="cl-0630d2ee">7,456</span></p></td><td class="cl-0631255a"><p class="cl-0630e3ec"><span class="cl-0630d2ee">0.40</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-06312564"><p class="cl-0630e3e2"><span class="cl-0630d2ee">chapter iii</span></p></td><td class="cl-06312565"><p class="cl-0630e3ec"><span class="cl-0630d2ee">3</span></p></td><td class="cl-06312565"><p class="cl-0630e3ec"><span class="cl-0630d2ee">7,136</span></p></td><td class="cl-0631256e"><p class="cl-0630e3ec"><span class="cl-0630d2ee">0.42</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0631255b"><p class="cl-0630e3e2"><span class="cl-0630d2ee">chapter iv</span></p></td><td class="cl-06312546"><p class="cl-0630e3ec"><span class="cl-0630d2ee">9</span></p></td><td class="cl-06312546"><p class="cl-0630e3ec"><span class="cl-0630d2ee">22,317</span></p></td><td class="cl-0631255a"><p class="cl-0630e3ec"><span class="cl-0630d2ee">0.40</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-06312564"><p class="cl-0630e3e2"><span class="cl-0630d2ee">chapter v</span></p></td><td class="cl-06312565"><p class="cl-0630e3ec"><span class="cl-0630d2ee">3</span></p></td><td class="cl-06312565"><p class="cl-0630e3ec"><span class="cl-0630d2ee">13,916</span></p></td><td class="cl-0631256e"><p class="cl-0630e3ec"><span class="cl-0630d2ee">0.22</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0631255b"><p class="cl-0630e3e2"><span class="cl-0630d2ee">chapter vi</span></p></td><td class="cl-06312546"><p class="cl-0630e3ec"><span class="cl-0630d2ee">3</span></p></td><td class="cl-06312546"><p class="cl-0630e3ec"><span class="cl-0630d2ee">17,781</span></p></td><td class="cl-0631255a"><p class="cl-0630e3ec"><span class="cl-0630d2ee">0.17</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-06312564"><p class="cl-0630e3e2"><span class="cl-0630d2ee">chapter vii</span></p></td><td class="cl-06312565"><p class="cl-0630e3ec"><span class="cl-0630d2ee">3</span></p></td><td class="cl-06312565"><p class="cl-0630e3ec"><span class="cl-0630d2ee">19,055</span></p></td><td class="cl-0631256e"><p class="cl-0630e3ec"><span class="cl-0630d2ee">0.16</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0631255b"><p class="cl-0630e3e2"><span class="cl-0630d2ee">chapter viii</span></p></td><td class="cl-06312546"><p class="cl-0630e3ec"><span class="cl-0630d2ee">0</span></p></td><td class="cl-06312546"><p class="cl-0630e3ec"><span class="cl-0630d2ee">15,847</span></p></td><td class="cl-0631255a"><p class="cl-0630e3ec"><span class="cl-0630d2ee">0.00</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-06312564"><p class="cl-0630e3e2"><span class="cl-0630d2ee">chapter ix</span></p></td><td class="cl-06312565"><p class="cl-0630e3ec"><span class="cl-0630d2ee">1</span></p></td><td class="cl-06312565"><p class="cl-0630e3ec"><span class="cl-0630d2ee">14,741</span></p></td><td class="cl-0631256e"><p class="cl-0630e3ec"><span class="cl-0630d2ee">0.07</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0631255b"><p class="cl-0630e3e2"><span class="cl-0630d2ee">chapter x</span></p></td><td class="cl-06312546"><p class="cl-0630e3ec"><span class="cl-0630d2ee">6</span></p></td><td class="cl-06312546"><p class="cl-0630e3ec"><span class="cl-0630d2ee">13,313</span></p></td><td class="cl-0631255a"><p class="cl-0630e3ec"><span class="cl-0630d2ee">0.45</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-06312564"><p class="cl-0630e3e2"><span class="cl-0630d2ee">chapter xi</span></p></td><td class="cl-06312565"><p class="cl-0630e3ec"><span class="cl-0630d2ee">6</span></p></td><td class="cl-06312565"><p class="cl-0630e3ec"><span class="cl-0630d2ee">12,996</span></p></td><td class="cl-0631256e"><p class="cl-0630e3ec"><span class="cl-0630d2ee">0.46</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0631255b"><p class="cl-0630e3e2"><span class="cl-0630d2ee">chapter xii</span></p></td><td class="cl-06312546"><p class="cl-0630e3ec"><span class="cl-0630d2ee">10</span></p></td><td class="cl-06312546"><p class="cl-0630e3ec"><span class="cl-0630d2ee">13,753</span></p></td><td class="cl-0631255a"><p class="cl-0630e3ec"><span class="cl-0630d2ee">0.73</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-06312564"><p class="cl-0630e3e2"><span class="cl-0630d2ee">chapter xiii</span></p></td><td class="cl-06312565"><p class="cl-0630e3ec"><span class="cl-0630d2ee">5</span></p></td><td class="cl-06312565"><p class="cl-0630e3ec"><span class="cl-0630d2ee">9,817</span></p></td><td class="cl-0631256e"><p class="cl-0630e3ec"><span class="cl-0630d2ee">0.51</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-06312582"><p class="cl-0630e3e2"><span class="cl-0630d2ee">chapter xiv</span></p></td><td class="cl-06312578"><p class="cl-0630e3ec"><span class="cl-0630d2ee">8</span></p></td><td class="cl-06312578"><p class="cl-0630e3ec"><span class="cl-0630d2ee">20,967</span></p></td><td class="cl-06312579"><p class="cl-0630e3ec"><span class="cl-0630d2ee">0.38</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>We can now visualize the relative frequencies of our search word per chapter.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create plot</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tb, <span class="fu">aes</span>(<span class="at">x =</span> Chapters, <span class="at">y =</span> Frequency, <span class="at">group =</span> <span class="dv">1</span>)) <span class="sc">+</span> </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">color =</span> <span class="st">"purple"</span>) <span class="sc">+</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"darkgray"</span>) <span class="sc">+</span>         </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color=</span><span class="fu">guide_legend</span>(<span class="at">override.aes=</span><span class="fu">list</span>(<span class="at">fill=</span><span class="cn">NA</span>))) <span class="sc">+</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span><span class="st">"Relative Frequency (per 1,000 words)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="textanalysis_files/figure-html/wf18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="dispersion-plots" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="dispersion-plots">Dispersion plots</h2>
<p>To show when in a text or in a collection of texts certain terms occur, we can use <em>dispersion plots</em>. The <code>quanteda</code> package offers a very easy-to-use function <code>textplot_xray</code> to generate dispersion plots.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># add chapter names</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(darwin_chapters) <span class="ot">&lt;-</span> Chapters</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co"># generate corpus from chapters</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>darwin_corpus <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">corpus</span>(darwin_chapters)</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co"># generate dispersion plots</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>quanteda.textplots<span class="sc">::</span><span class="fu">textplot_xray</span>(<span class="fu">kwic</span>(darwin_corpus, <span class="at">pattern =</span> <span class="st">"organism"</span>),</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>                                  <span class="fu">kwic</span>(darwin_corpus, <span class="at">pattern =</span> <span class="st">"selection"</span>),</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">sort =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="textanalysis_files/figure-html/dp-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We can modify the plot by saving it into an object and then use <code>ggplot</code> to modify it appearance.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># generate and save dispersion plots</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>dp <span class="ot">&lt;-</span> quanteda.textplots<span class="sc">::</span><span class="fu">textplot_xray</span>(<span class="fu">kwic</span>(darwin_corpus, <span class="at">pattern =</span> <span class="st">"organism"</span>),</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>                                        <span class="fu">kwic</span>(darwin_corpus, <span class="at">pattern =</span> <span class="st">"selection"</span>))</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co"># modify plot</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>dp <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">color =</span> keyword) <span class="sc">+</span> </span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">'red'</span>, <span class="st">'blue'</span>)) <span class="sc">+</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="textanalysis_files/figure-html/dp2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="over--and-underuse" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="over--and-underuse">Over- and underuse</h2>
<p>Frequency information can also tell us something about the nature of a text. For instance, private dialogues will typically contain higher rates of second person pronouns compared with more format text types, such as, for instance, scripted monologues like speeches. For this reason, word frequency lists can be used in text classification and to determine the formality of texts.</p>
<p>As an example, below you find the number of the second person pronouns <em>you</em> and <em>your</em> and the number of all words except for these second person pronouns in private dialogues compared with scripted monologues in the Irish component of the <em>International Corpus of English</em> (ICE). In addition, the tables shows the percentage of second person pronouns in both text types to enable seeing whether private dialogues contain more of these second person pronouns than scripted monologues (i.e.&nbsp;speeches).</p>
<div class="cell" data-paged.print="false">

</div>
<div class="cell">
<div class="cell-output-display">

<div class="tabwid"><style>.cl-0b50876a{table-layout:auto;width:50%;}.cl-0b4b3170{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-0b4b3184{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-0b4b421e{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-0b4b68fc{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0b4b68fd{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0b4b6906{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0b4b6910{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0b4b691a{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0b4b691b{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0b4b692e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0b4b692f{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0b4b6938{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0b4b6939{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0b4b6942{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0b4b694c{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class="cl-0b50876a">
<caption class="Table Caption">
<p>Use of 2nd person pronouns (and all other words) in ICE Ireland.</p>
</caption>

<thead><tr style="overflow-wrap:break-word;"><td class="cl-0b4b6939"><p class="cl-0b4b421e"><span class="cl-0b4b3170">.</span></p></td><td class="cl-0b4b6942"><p class="cl-0b4b421e"><span class="cl-0b4b3170">Private dialogues</span></p></td><td class="cl-0b4b694c"><p class="cl-0b4b421e"><span class="cl-0b4b3170">Scripted monologues</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-0b4b6906"><p class="cl-0b4b421e"><span class="cl-0b4b3184">you, your</span></p></td><td class="cl-0b4b68fc"><p class="cl-0b4b421e"><span class="cl-0b4b3184">6761</span></p></td><td class="cl-0b4b68fd"><p class="cl-0b4b421e"><span class="cl-0b4b3184">659</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0b4b691b"><p class="cl-0b4b421e"><span class="cl-0b4b3184">Other words</span></p></td><td class="cl-0b4b691a"><p class="cl-0b4b421e"><span class="cl-0b4b3184">259625</span></p></td><td class="cl-0b4b6910"><p class="cl-0b4b421e"><span class="cl-0b4b3184">105295</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0b4b692f"><p class="cl-0b4b421e"><span class="cl-0b4b3184">Percent</span></p></td><td class="cl-0b4b6938"><p class="cl-0b4b421e"><span class="cl-0b4b3184">2.60</span></p></td><td class="cl-0b4b692e"><p class="cl-0b4b421e"><span class="cl-0b4b3184">0.63</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>This simple example shows that second person pronouns make up 2.6 percent of all words that are used in private dialogues while they only amount to 0.63 percent in scripted speeches. A handy way to present such differences visually are association and mosaic plots.</p>
<div class="cell" data-paged.print="false">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">6761</span>, <span class="dv">659</span>, <span class="dv">259625</span>, <span class="dv">105295</span>), <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">byrow =</span> T)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(d) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"D"</span>, <span class="st">"M"</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(d) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"you, your"</span>, <span class="st">"Other words"</span>)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="fu">assocplot</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="textanalysis_files/figure-html/ou2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Bars above the dashed line indicate relative overuse while bars below the line suggest relative under-use. Therefore, the association plot indicates under-use of <em>you</em> and <em>your</em> and overuse of <em>other words</em> in monologues while the opposite trends holds true for dialogues, i.e.&nbsp;overuse of <em>you</em> and <em>your</em> and under-use of <em>Other words</em>.</p>
</section>
</section>
<section id="n-grams-collocations-and-keyness" class="level1 unnumbered">
<h1 class="unnumbered">N-grams, Collocations, and Keyness</h1>
<p>Collocation refers to the co-occurrence of words. A typical example of a collocation is <em>Merry Christmas</em> because the words merry and Christmas occur together more frequently together than would be expected by chance, if words were just randomly stringed together.</p>
<p>N-grams are related to collocates in that they represent words that occur together (bi-grams are two words that occur together, tri-grams three words and so on). Fortunately, creating N-gram lists is very easy. We will use the <em>Origin</em> to create a bi-gram list. We can simply take each word and combine it with the following word.</p>
<div class="cell" data-paged.print="false">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create data frame</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>darwin_bigrams <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(darwin_words[<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(darwin_words)<span class="sc">-</span><span class="dv">1</span>], </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>                       darwin_words[<span class="dv">2</span><span class="sc">:</span><span class="fu">length</span>(darwin_words)]) <span class="sc">%&gt;%</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">Word1 =</span> <span class="dv">1</span>,</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">Word2 =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">Bigram =</span> <span class="fu">paste0</span>(Word1, <span class="st">" "</span>, Word2)) <span class="sc">%&gt;%</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(Bigram) <span class="sc">%&gt;%</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">Frequency =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="sc">-</span>Frequency)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div class="tabwid"><style>.cl-0c34f968{table-layout:auto;width:50%;}.cl-0c2f736c{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-0c2f7380{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-0c2f86ae{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-0c2f86b8{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-0c2fbd68{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0c2fbd72{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0c2fbd7c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0c2fbd86{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0c2fbd90{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0c2fbd91{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0c2fbd92{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0c2fbd9a{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class="cl-0c34f968">
<caption class="Table Caption">
<p>Top 10 most frequent bigrams and their (relative) freqeuncy in Charles Darwin’s Origin.</p>
</caption>

<thead><tr style="overflow-wrap:break-word;"><td class="cl-0c2fbd92"><p class="cl-0c2f86ae"><span class="cl-0c2f736c">Bigram</span></p></td><td class="cl-0c2fbd9a"><p class="cl-0c2f86b8"><span class="cl-0c2f736c">Frequency</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-0c2fbd68"><p class="cl-0c2f86ae"><span class="cl-0c2f7380">of the</span></p></td><td class="cl-0c2fbd72"><p class="cl-0c2f86b8"><span class="cl-0c2f7380">2,673</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c2fbd7c"><p class="cl-0c2f86ae"><span class="cl-0c2f7380">in the</span></p></td><td class="cl-0c2fbd86"><p class="cl-0c2f86b8"><span class="cl-0c2f7380">1,440</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c2fbd68"><p class="cl-0c2f86ae"><span class="cl-0c2f7380">the same</span></p></td><td class="cl-0c2fbd72"><p class="cl-0c2f86b8"><span class="cl-0c2f7380">959</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c2fbd7c"><p class="cl-0c2f86ae"><span class="cl-0c2f7380">to the</span></p></td><td class="cl-0c2fbd86"><p class="cl-0c2f86b8"><span class="cl-0c2f7380">791</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c2fbd68"><p class="cl-0c2f86ae"><span class="cl-0c2f7380">on the</span></p></td><td class="cl-0c2fbd72"><p class="cl-0c2f86b8"><span class="cl-0c2f7380">744</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c2fbd7c"><p class="cl-0c2f86ae"><span class="cl-0c2f7380">have been</span></p></td><td class="cl-0c2fbd86"><p class="cl-0c2f86b8"><span class="cl-0c2f7380">624</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c2fbd68"><p class="cl-0c2f86ae"><span class="cl-0c2f7380">that the</span></p></td><td class="cl-0c2fbd72"><p class="cl-0c2f86b8"><span class="cl-0c2f7380">574</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c2fbd7c"><p class="cl-0c2f86ae"><span class="cl-0c2f7380">it is</span></p></td><td class="cl-0c2fbd86"><p class="cl-0c2f86b8"><span class="cl-0c2f7380">500</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c2fbd68"><p class="cl-0c2f86ae"><span class="cl-0c2f7380">natural selection</span></p></td><td class="cl-0c2fbd72"><p class="cl-0c2f86b8"><span class="cl-0c2f7380">367</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c2fbd7c"><p class="cl-0c2f86ae"><span class="cl-0c2f7380">and the</span></p></td><td class="cl-0c2fbd86"><p class="cl-0c2f86b8"><span class="cl-0c2f7380">351</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c2fbd68"><p class="cl-0c2f86ae"><span class="cl-0c2f7380">from the</span></p></td><td class="cl-0c2fbd72"><p class="cl-0c2f86b8"><span class="cl-0c2f7380">346</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c2fbd7c"><p class="cl-0c2f86ae"><span class="cl-0c2f7380">in a</span></p></td><td class="cl-0c2fbd86"><p class="cl-0c2f86b8"><span class="cl-0c2f7380">339</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c2fbd68"><p class="cl-0c2f86ae"><span class="cl-0c2f7380">of a</span></p></td><td class="cl-0c2fbd72"><p class="cl-0c2f86b8"><span class="cl-0c2f7380">337</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c2fbd7c"><p class="cl-0c2f86ae"><span class="cl-0c2f7380">with the</span></p></td><td class="cl-0c2fbd86"><p class="cl-0c2f86b8"><span class="cl-0c2f7380">336</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c2fbd90"><p class="cl-0c2f86ae"><span class="cl-0c2f7380">to be</span></p></td><td class="cl-0c2fbd91"><p class="cl-0c2f86b8"><span class="cl-0c2f7380">329</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Both N-grams and collocations are not only an important concept in language teaching but they are also fundamental in Text Analysis and many other research areas working with language data. Unfortunately, words that collocate do not have to be immediately adjacent but can also encompass several slots which makes it harder to retrieve of collocates that are not adjacent- We will find out how to identify non-adjacent collocates in the next section.</p>
<section id="finding-collocations" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="finding-collocations">Finding collocations</h2>
<p>There are various techniques for identifying collocations. To identify collocations without having a pre-defined target term, we can use the <code>textstat_collocations</code> function from the <code>quanteda.textstats</code> package.</p>
<p>However, before we can apply that function and start identifying collocations, we need to process the data to which we want to apply this function. In the present case, we will apply that function to the sentences in Charles Darwin’s <em>Origin</em> which we extract in the code chunk below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>darwin_sentences <span class="ot">&lt;-</span> darwin <span class="sc">%&gt;%</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tolower</span>() <span class="sc">%&gt;%</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="at">collapse=</span> <span class="st">" "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_split</span>(<span class="fu">fixed</span>(<span class="st">"."</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">%&gt;%</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  tm<span class="sc">::</span><span class="fu">removePunctuation</span>() <span class="sc">%&gt;%</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_squish</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div class="tabwid"><style>.cl-0c572aba{table-layout:auto;width:95%;}.cl-0c5220a6{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-0c5220ba{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-0c523154{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-0c5258e6{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0c5258fa{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0c5258fb{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0c525904{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class="cl-0c572aba">
<caption class="Table Caption">
<p>First 10 sentences in Charles Darwin’s Origin.</p>
</caption>

<thead><tr style="overflow-wrap:break-word;"><td class="cl-0c525904"><p class="cl-0c523154"><span class="cl-0c5220a6">.</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-0c5258e6"><p class="cl-0c523154"><span class="cl-0c5220ba">the origin of species by charles darwin an historical sketch of the progress of opinion on the origin of species introduction when on board h</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c5258fa"><p class="cl-0c523154"><span class="cl-0c5220ba">m</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c5258e6"><p class="cl-0c523154"><span class="cl-0c5220ba">s</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c5258fa"><p class="cl-0c523154"><span class="cl-0c5220ba">beagle as naturalist i was much struck with certain facts in the distribution of the organic beings in habiting south america and in the geological relations of the present to the past inhabitants of that continent</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c5258e6"><p class="cl-0c523154"><span class="cl-0c5220ba">these facts as will be seen in the latter chapters of this volume seemed to throw some light on the origin of species — that mystery of mysteries as it has been called by one of our greatest philosophers</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c5258fa"><p class="cl-0c523154"><span class="cl-0c5220ba">on my return home it occurred to me in 1837 that something might perhaps be made out on this question by patiently accumulating and reflecting on all sorts of facts which could possibly have any bearing on it</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c5258e6"><p class="cl-0c523154"><span class="cl-0c5220ba">after five years work i allowed myself to specu late on the subject and drew up some short notes these i enlarged in 1844 into a sketch of the conclusions which then seemed to me probable from that period to the present day i have steadily pursued the same object</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c5258fa"><p class="cl-0c523154"><span class="cl-0c5220ba">i hope that i may be excused for entering on these personal details as i give them to show that i have not been hasty in coming to a decision</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c5258e6"><p class="cl-0c523154"><span class="cl-0c5220ba">my work is now 1859 nearly finished but as it will take me many more years to complete it and as my health is far from strong i have been urged to publish this abstract</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c5258fa"><p class="cl-0c523154"><span class="cl-0c5220ba">i have more especially been induced to do this as mr</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c5258e6"><p class="cl-0c523154"><span class="cl-0c5220ba">wallace who is now studying the natural history of the malay archipelago has arrived at almost exactly the same general conclusions that i have on the origin of species</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c5258fa"><p class="cl-0c523154"><span class="cl-0c5220ba">in 1858 he sent me a memoir on this subject with a request that i would forward it to sir charles lyell who sent it to the linnean society and it is published in the third volume of the journal of that society</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c5258e6"><p class="cl-0c523154"><span class="cl-0c5220ba">sir c</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c5258fa"><p class="cl-0c523154"><span class="cl-0c5220ba">lyell and dr</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0c5258fb"><p class="cl-0c523154"><span class="cl-0c5220ba">hooker who both knew of my work— the latter having read my sketch of 1844 — honoured me by thinking it advisable to publish with mr</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>From the output shown above, we also see that splitting texts simply by full stops is not optimal as it produces some unwarranted artifacts like the “sentences” that consist of single characters (due to the name of the H.M.S. Beagle - the ship on which Darwin traveled when he explored the southern hemisphere). Fortunately, these errors do not really matter in the case of our example.</p>
<p>Now that we have split Darwin’s <em>Origin</em> into sentences, we can tokenize these sentences and apply the <code>textstat_collocations</code> function which identifies collocations.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a token object</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>darwin_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(darwin_sentences, <span class="at">remove_punct =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_remove</span>(<span class="fu">stopwords</span>(<span class="st">"english"</span>))</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="co"># extract collocations</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>darwin_coll <span class="ot">&lt;-</span> <span class="fu">textstat_collocations</span>(darwin_tokens, <span class="at">size =</span> <span class="dv">2</span>, <span class="at">min_count =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div class="tabwid"><style>.cl-0cbb580a{table-layout:auto;width:50%;}.cl-0cb55d38{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-0cb55d42{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-0cb56fd0{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-0cb56fda{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-0cb5b3b4{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0cb5b3be{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0cb5b3bf{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0cb5b3c8{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0cb5b3dc{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0cb5b3e6{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0cb5b3f0{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0cb5b3fa{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0cb5b3fb{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0cb5b404{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0cb5b405{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0cb5b40e{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class="cl-0cbb580a">
<caption class="Table Caption">
<p>Top 10 collocations in Charles Darwin’s Origin.</p>
</caption>

<thead><tr style="overflow-wrap:break-word;"><td class="cl-0cb5b404"><p class="cl-0cb56fd0"><span class="cl-0cb55d38">collocation</span></p></td><td class="cl-0cb5b405"><p class="cl-0cb56fda"><span class="cl-0cb55d38">count</span></p></td><td class="cl-0cb5b405"><p class="cl-0cb56fda"><span class="cl-0cb55d38">count_nested</span></p></td><td class="cl-0cb5b405"><p class="cl-0cb56fda"><span class="cl-0cb55d38">length</span></p></td><td class="cl-0cb5b405"><p class="cl-0cb56fda"><span class="cl-0cb55d38">lambda</span></p></td><td class="cl-0cb5b40e"><p class="cl-0cb56fda"><span class="cl-0cb55d38">z</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-0cb5b3bf"><p class="cl-0cb56fd0"><span class="cl-0cb55d42">natural selection</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">367</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">0</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">2</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">7.442662</span></p></td><td class="cl-0cb5b3be"><p class="cl-0cb56fda"><span class="cl-0cb55d42">57.36943</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0cb5b3e6"><p class="cl-0cb56fd0"><span class="cl-0cb55d42">conditions life</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">107</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">0</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">2</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">5.807671</span></p></td><td class="cl-0cb5b3dc"><p class="cl-0cb56fda"><span class="cl-0cb55d42">39.91801</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0cb5b3bf"><p class="cl-0cb56fd0"><span class="cl-0cb55d42">organic beings</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">105</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">0</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">2</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">8.179323</span></p></td><td class="cl-0cb5b3be"><p class="cl-0cb56fda"><span class="cl-0cb55d42">37.34842</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0cb5b3e6"><p class="cl-0cb56fd0"><span class="cl-0cb55d42">closely allied</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">64</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">0</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">2</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">6.561562</span></p></td><td class="cl-0cb5b3dc"><p class="cl-0cb56fda"><span class="cl-0cb55d42">33.85212</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0cb5b3bf"><p class="cl-0cb56fd0"><span class="cl-0cb55d42">south america</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">41</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">0</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">2</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">7.415450</span></p></td><td class="cl-0cb5b3be"><p class="cl-0cb56fda"><span class="cl-0cb55d42">28.81440</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0cb5b3e6"><p class="cl-0cb56fd0"><span class="cl-0cb55d42">widely different</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">49</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">0</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">2</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">5.317774</span></p></td><td class="cl-0cb5b3dc"><p class="cl-0cb56fda"><span class="cl-0cb55d42">28.29759</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0cb5b3bf"><p class="cl-0cb56fd0"><span class="cl-0cb55d42">modified descendants</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">40</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">0</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">2</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">6.092974</span></p></td><td class="cl-0cb5b3be"><p class="cl-0cb56fda"><span class="cl-0cb55d42">27.68700</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0cb5b3e6"><p class="cl-0cb56fd0"><span class="cl-0cb55d42">state nature</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">45</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">0</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">2</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">5.331289</span></p></td><td class="cl-0cb5b3dc"><p class="cl-0cb56fda"><span class="cl-0cb55d42">27.38031</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0cb5b3bf"><p class="cl-0cb56fd0"><span class="cl-0cb55d42">theory natural</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">54</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">0</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">2</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">4.864304</span></p></td><td class="cl-0cb5b3be"><p class="cl-0cb56fda"><span class="cl-0cb55d42">27.35902</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0cb5b3e6"><p class="cl-0cb56fd0"><span class="cl-0cb55d42">distinct species</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">102</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">0</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">2</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">3.307347</span></p></td><td class="cl-0cb5b3dc"><p class="cl-0cb56fda"><span class="cl-0cb55d42">26.97796</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0cb5b3bf"><p class="cl-0cb56fd0"><span class="cl-0cb55d42">north america</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">31</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">0</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">2</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">7.091204</span></p></td><td class="cl-0cb5b3be"><p class="cl-0cb56fda"><span class="cl-0cb55d42">26.01263</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0cb5b3e6"><p class="cl-0cb56fd0"><span class="cl-0cb55d42">forms life</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">57</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">0</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">2</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">3.844558</span></p></td><td class="cl-0cb5b3dc"><p class="cl-0cb56fda"><span class="cl-0cb55d42">25.11312</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0cb5b3bf"><p class="cl-0cb56fd0"><span class="cl-0cb55d42">struggle existence</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">27</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">0</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">2</span></p></td><td class="cl-0cb5b3b4"><p class="cl-0cb56fda"><span class="cl-0cb55d42">6.889213</span></p></td><td class="cl-0cb5b3be"><p class="cl-0cb56fda"><span class="cl-0cb55d42">25.08157</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0cb5b3e6"><p class="cl-0cb56fd0"><span class="cl-0cb55d42">individual differences</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">30</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">0</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">2</span></p></td><td class="cl-0cb5b3c8"><p class="cl-0cb56fda"><span class="cl-0cb55d42">5.922674</span></p></td><td class="cl-0cb5b3dc"><p class="cl-0cb56fda"><span class="cl-0cb55d42">24.97534</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0cb5b3fa"><p class="cl-0cb56fd0"><span class="cl-0cb55d42">united states</span></p></td><td class="cl-0cb5b3f0"><p class="cl-0cb56fda"><span class="cl-0cb55d42">29</span></p></td><td class="cl-0cb5b3f0"><p class="cl-0cb56fda"><span class="cl-0cb55d42">0</span></p></td><td class="cl-0cb5b3f0"><p class="cl-0cb56fda"><span class="cl-0cb55d42">2</span></p></td><td class="cl-0cb5b3f0"><p class="cl-0cb56fda"><span class="cl-0cb55d42">8.330146</span></p></td><td class="cl-0cb5b3fb"><p class="cl-0cb56fda"><span class="cl-0cb55d42">24.94125</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>The resulting table shows collocations in Darwin’s <em>Origin</em> descending by collocation strength.</p>
</section>
<section id="visualizing-collocation-networks" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="visualizing-collocation-networks">Visualizing Collocation Networks</h2>
<p>Network graphs are a very useful and flexible tool for visualizing relationships between elements such as words, personas, or authors. This section shows how to generate a network graph for collocations of the term <em>organism</em> using the <code>quanteda</code> package.</p>
<p>In a first step, we generate a document-feature matrix based on the sentence sin Charles Darwin’s <em>Origin</em>. A document-feature matrix shows how often elements (here these elements are the words that occur in the <em>Origin</em>) occur in a selection of documents (here these documents are the sentences in the <em>Origin</em>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create document-feature matrix</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>darwin_dfm <span class="ot">&lt;-</span> darwin_sentences <span class="sc">%&gt;%</span> </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    quanteda<span class="sc">::</span><span class="fu">dfm</span>(<span class="at">remove =</span> <span class="fu">stopwords</span>(<span class="st">'english'</span>), <span class="at">remove_punct =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    quanteda<span class="sc">::</span><span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">10</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div class="tabwid"><style>.cl-0d12482c{table-layout:auto;width:50%;}.cl-0d0c805e{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-0d0c8072{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-0d0c927e{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-0d0c9292{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-0d0cc8ca{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0d0cc8d4{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0d0cc8de{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0d0cc8e8{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0d0cc8f2{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0d0cc8f3{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0d0cc8fc{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0d0cc906{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0d0cc910{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0d0cc91a{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0d0cc91b{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0d0cc92e{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class="cl-0d12482c">
<caption class="Table Caption">
<p>First 6 rows and columns of the document-feature matrix.</p>
</caption>

<thead><tr style="overflow-wrap:break-word;"><td class="cl-0d0cc91b"><p class="cl-0d0c927e"><span class="cl-0d0c805e">doc_id</span></p></td><td class="cl-0d0cc91a"><p class="cl-0d0c9292"><span class="cl-0d0c805e">origin</span></p></td><td class="cl-0d0cc91a"><p class="cl-0d0c9292"><span class="cl-0d0c805e">species</span></p></td><td class="cl-0d0cc91a"><p class="cl-0d0c9292"><span class="cl-0d0c805e">charles</span></p></td><td class="cl-0d0cc91a"><p class="cl-0d0c9292"><span class="cl-0d0c805e">progress</span></p></td><td class="cl-0d0cc91a"><p class="cl-0d0c9292"><span class="cl-0d0c805e">opinion</span></p></td><td class="cl-0d0cc92e"><p class="cl-0d0c9292"><span class="cl-0d0c805e">h</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-0d0cc8de"><p class="cl-0d0c927e"><span class="cl-0d0c8072">text1</span></p></td><td class="cl-0d0cc8ca"><p class="cl-0d0c9292"><span class="cl-0d0c8072">2</span></p></td><td class="cl-0d0cc8ca"><p class="cl-0d0c9292"><span class="cl-0d0c8072">2</span></p></td><td class="cl-0d0cc8ca"><p class="cl-0d0c9292"><span class="cl-0d0c8072">1</span></p></td><td class="cl-0d0cc8ca"><p class="cl-0d0c9292"><span class="cl-0d0c8072">1</span></p></td><td class="cl-0d0cc8ca"><p class="cl-0d0c9292"><span class="cl-0d0c8072">1</span></p></td><td class="cl-0d0cc8d4"><p class="cl-0d0c9292"><span class="cl-0d0c8072">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0d0cc8e8"><p class="cl-0d0c927e"><span class="cl-0d0c8072">text2</span></p></td><td class="cl-0d0cc8f2"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td><td class="cl-0d0cc8f2"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td><td class="cl-0d0cc8f2"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td><td class="cl-0d0cc8f2"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td><td class="cl-0d0cc8f2"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td><td class="cl-0d0cc8f3"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0d0cc8de"><p class="cl-0d0c927e"><span class="cl-0d0c8072">text3</span></p></td><td class="cl-0d0cc8ca"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td><td class="cl-0d0cc8ca"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td><td class="cl-0d0cc8ca"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td><td class="cl-0d0cc8ca"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td><td class="cl-0d0cc8ca"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td><td class="cl-0d0cc8d4"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0d0cc8e8"><p class="cl-0d0c927e"><span class="cl-0d0c8072">text4</span></p></td><td class="cl-0d0cc8f2"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td><td class="cl-0d0cc8f2"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td><td class="cl-0d0cc8f2"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td><td class="cl-0d0cc8f2"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td><td class="cl-0d0cc8f2"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td><td class="cl-0d0cc8f3"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0d0cc8de"><p class="cl-0d0c927e"><span class="cl-0d0c8072">text5</span></p></td><td class="cl-0d0cc8ca"><p class="cl-0d0c9292"><span class="cl-0d0c8072">1</span></p></td><td class="cl-0d0cc8ca"><p class="cl-0d0c9292"><span class="cl-0d0c8072">1</span></p></td><td class="cl-0d0cc8ca"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td><td class="cl-0d0cc8ca"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td><td class="cl-0d0cc8ca"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td><td class="cl-0d0cc8d4"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0d0cc906"><p class="cl-0d0c927e"><span class="cl-0d0c8072">text6</span></p></td><td class="cl-0d0cc8fc"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td><td class="cl-0d0cc8fc"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td><td class="cl-0d0cc8fc"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td><td class="cl-0d0cc8fc"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td><td class="cl-0d0cc8fc"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td><td class="cl-0d0cc910"><p class="cl-0d0c9292"><span class="cl-0d0c8072">0</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>As we want to generate a network graph of words that collocate with the term <em>organism</em>, we use the <code>calculateCoocStatistics</code> function to determine which words most strongly collocate with our target term (<em>organism</em>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load function for co-occurrence calculation</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"https://slcladal.github.io/rscripts/calculateCoocStatistics.R"</span>)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="co"># define term</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>coocTerm <span class="ot">&lt;-</span> <span class="st">"organism"</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate co-occurrence statistics</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>coocs <span class="ot">&lt;-</span> <span class="fu">calculateCoocStatistics</span>(coocTerm, darwin_dfm, <span class="at">measure=</span><span class="st">"LOGLIK"</span>)</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect results</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>coocs[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> conditions      nature    relation   relations    physical      action 
  56.666499   34.485146   25.478537   22.836815   21.740633   20.608922 
       life     bearing   important        many      direct   colonists 
  18.807464   16.246065   15.812686   13.488588   12.705077   11.300306 
competition      nearly     welfare     require     altered   different 
  11.140540   10.945131   10.886868   10.514045   10.174698    9.774481 
improvement     rapidly 
   9.576033    9.576033 </code></pre>
</div>
</div>
<p>We now reduce the document-feature matrix to contain only the top 20 collocates of <em>organism</em> (plus our target word <em>organism</em>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>redux_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_select</span>(darwin_dfm, </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">pattern =</span> <span class="fu">c</span>(<span class="fu">names</span>(coocs)[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>], <span class="st">"organism"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div class="tabwid"><style>.cl-0db0977a{table-layout:auto;width:50%;}.cl-0daadfc4{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-0daadfd8{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-0daaf0cc{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-0daaf0d6{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-0dab259c{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0dab25a6{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0dab25ba{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0dab25bb{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0dab25c4{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0dab25ce{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0dab25d8{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0dab25e2{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0dab25e3{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0dab25ec{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0dab25ed{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0dab2600{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class="cl-0db0977a">
<caption class="Table Caption">
<p>First 6 rows and columns of the reduced feature co-occurrence matrix.</p>
</caption>

<thead><tr style="overflow-wrap:break-word;"><td class="cl-0dab2600"><p class="cl-0daaf0cc"><span class="cl-0daadfc4">doc_id</span></p></td><td class="cl-0dab25ec"><p class="cl-0daaf0d6"><span class="cl-0daadfc4">relations</span></p></td><td class="cl-0dab25ec"><p class="cl-0daaf0d6"><span class="cl-0daadfc4">bearing</span></p></td><td class="cl-0dab25ec"><p class="cl-0daaf0d6"><span class="cl-0daadfc4">nearly</span></p></td><td class="cl-0dab25ec"><p class="cl-0daaf0d6"><span class="cl-0daadfc4">many</span></p></td><td class="cl-0dab25ec"><p class="cl-0daaf0d6"><span class="cl-0daadfc4">conditions</span></p></td><td class="cl-0dab25ed"><p class="cl-0daaf0d6"><span class="cl-0daadfc4">important</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-0dab25a6"><p class="cl-0daaf0cc"><span class="cl-0daadfd8">text1</span></p></td><td class="cl-0dab259c"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab259c"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab259c"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab259c"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab259c"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab25ba"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0dab25c4"><p class="cl-0daaf0cc"><span class="cl-0daadfd8">text2</span></p></td><td class="cl-0dab25bb"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab25bb"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab25bb"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab25bb"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab25bb"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab25ce"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0dab25a6"><p class="cl-0daaf0cc"><span class="cl-0daadfd8">text3</span></p></td><td class="cl-0dab259c"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab259c"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab259c"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab259c"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab259c"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab25ba"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0dab25c4"><p class="cl-0daaf0cc"><span class="cl-0daadfd8">text4</span></p></td><td class="cl-0dab25bb"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">1</span></p></td><td class="cl-0dab25bb"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab25bb"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab25bb"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab25bb"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab25ce"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0dab25a6"><p class="cl-0daaf0cc"><span class="cl-0daadfd8">text5</span></p></td><td class="cl-0dab259c"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab259c"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab259c"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab259c"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab259c"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab25ba"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0dab25e3"><p class="cl-0daaf0cc"><span class="cl-0daadfd8">text6</span></p></td><td class="cl-0dab25d8"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab25d8"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">1</span></p></td><td class="cl-0dab25d8"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab25d8"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab25d8"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td><td class="cl-0dab25e2"><p class="cl-0daaf0d6"><span class="cl-0daadfd8">0</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Now, we can transform the document-feature matrix into a feature-co-occurrence matrix as shown below. A feature-co-occurrence matrix shows how often each element in that matrix co-occurs with every other element in that matrix.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>tag_fcm <span class="ot">&lt;-</span> <span class="fu">fcm</span>(redux_dfm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div class="tabwid"><style>.cl-0dcc9b5a{table-layout:auto;width:50%;}.cl-0dc6fc36{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-0dc6fc54{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-0dc70cd0{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-0dc70cda{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-0dc743b2{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0dc743c6{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0dc743d0{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0dc743da{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0dc743db{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0dc743e4{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0dc743ee{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0dc743ef{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0dc743f8{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0dc743f9{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0dc74402{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0dc7440c{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class="cl-0dcc9b5a">
<caption class="Table Caption">
<p>First 6 rows and columns of the feature co-occurrence matrix.</p>
</caption>

<thead><tr style="overflow-wrap:break-word;"><td class="cl-0dc7440c"><p class="cl-0dc70cd0"><span class="cl-0dc6fc36">doc_id</span></p></td><td class="cl-0dc743f9"><p class="cl-0dc70cda"><span class="cl-0dc6fc36">relations</span></p></td><td class="cl-0dc743f9"><p class="cl-0dc70cda"><span class="cl-0dc6fc36">bearing</span></p></td><td class="cl-0dc743f9"><p class="cl-0dc70cda"><span class="cl-0dc6fc36">nearly</span></p></td><td class="cl-0dc743f9"><p class="cl-0dc70cda"><span class="cl-0dc6fc36">many</span></p></td><td class="cl-0dc743f9"><p class="cl-0dc70cda"><span class="cl-0dc6fc36">conditions</span></p></td><td class="cl-0dc74402"><p class="cl-0dc70cda"><span class="cl-0dc6fc36">important</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-0dc743c6"><p class="cl-0dc70cd0"><span class="cl-0dc6fc54">relations</span></p></td><td class="cl-0dc743b2"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">3</span></p></td><td class="cl-0dc743b2"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">2</span></p></td><td class="cl-0dc743b2"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">2</span></p></td><td class="cl-0dc743b2"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">6</span></p></td><td class="cl-0dc743b2"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">11</span></p></td><td class="cl-0dc743d0"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">6</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0dc743db"><p class="cl-0dc70cd0"><span class="cl-0dc6fc54">bearing</span></p></td><td class="cl-0dc743da"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">0</span></p></td><td class="cl-0dc743da"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">1</span></p></td><td class="cl-0dc743da"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">1</span></p></td><td class="cl-0dc743da"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">3</span></p></td><td class="cl-0dc743da"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">2</span></p></td><td class="cl-0dc743e4"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0dc743c6"><p class="cl-0dc70cd0"><span class="cl-0dc6fc54">nearly</span></p></td><td class="cl-0dc743b2"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">0</span></p></td><td class="cl-0dc743b2"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">0</span></p></td><td class="cl-0dc743b2"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">7</span></p></td><td class="cl-0dc743b2"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">23</span></p></td><td class="cl-0dc743b2"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">29</span></p></td><td class="cl-0dc743d0"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">7</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0dc743db"><p class="cl-0dc70cd0"><span class="cl-0dc6fc54">many</span></p></td><td class="cl-0dc743da"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">0</span></p></td><td class="cl-0dc743da"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">0</span></p></td><td class="cl-0dc743da"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">0</span></p></td><td class="cl-0dc743da"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">51</span></p></td><td class="cl-0dc743da"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">34</span></p></td><td class="cl-0dc743e4"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">27</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0dc743c6"><p class="cl-0dc70cd0"><span class="cl-0dc6fc54">conditions</span></p></td><td class="cl-0dc743b2"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">0</span></p></td><td class="cl-0dc743b2"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">0</span></p></td><td class="cl-0dc743b2"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">0</span></p></td><td class="cl-0dc743b2"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">0</span></p></td><td class="cl-0dc743b2"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">27</span></p></td><td class="cl-0dc743d0"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">18</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0dc743f8"><p class="cl-0dc70cd0"><span class="cl-0dc6fc54">important</span></p></td><td class="cl-0dc743ee"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">0</span></p></td><td class="cl-0dc743ee"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">0</span></p></td><td class="cl-0dc743ee"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">0</span></p></td><td class="cl-0dc743ee"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">0</span></p></td><td class="cl-0dc743ee"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">0</span></p></td><td class="cl-0dc743ef"><p class="cl-0dc70cda"><span class="cl-0dc6fc54">9</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Using the feature-co-occurrence matrix, we can generate the network graph which shows the terms that collocate with the target term <em>organism</em> with the edges representing the co-occurrence frequency. To generate this network graph, we use the <code>textplot_network</code> function from the <code>quanteda.textplots</code> package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># generate network graph</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_network</span>(tag_fcm, </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">min_freq =</span> <span class="dv">1</span>, </span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">edge_alpha =</span> <span class="fl">0.1</span>, </span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">edge_size =</span> <span class="dv">5</span>,</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">edge_color =</span> <span class="st">"purple"</span>,</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">vertex_labelsize =</span> <span class="fu">log</span>(<span class="fu">rowSums</span>(tag_fcm))<span class="sc">*</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="textanalysis_files/figure-html/dfm8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="keyness" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="keyness">Keyness</h2>
<p>Another common method that can be used for automated text summarization is keyword extraction. Keyword extraction builds on identifying words that are particularly associated with a certain text. In other words, keyness analysis aims to identify words that are particularly indicative of the content of a certain text.</p>
<p>Below, we identify key words for Charles Darwin’s <em>Origin</em>, Herman Melville’s <em>Moby Dick</em>, and George Orwell’s <em>1984</em>. We start by creating a weighted document feature matrix from the corpus containing the three texts.</p>
<p>In order to create a corpus, we use the text objects that consist out of many different elements rather than the objects which contained the collapsed texts that we used above. Thus, in a first step, we create a corpus of the texts.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>corp_dom <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">corpus</span>(<span class="fu">c</span>(darwin_sep, orwell_sep, melville_sep)) </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(corp_dom, <span class="st">"docvars"</span>)<span class="sc">$</span>Author <span class="ot">=</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"Darwin"</span>, <span class="fu">length</span>(darwin_sep)), </span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>                                     <span class="fu">rep</span>(<span class="st">"Orwell"</span>, <span class="fu">length</span>(orwell_sep)),</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>                                     <span class="fu">rep</span>(<span class="st">"Melville"</span>, <span class="fu">length</span>(melville_sep)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, we generate the document feature matrix and we clean it by removing stopwords and selected other words. In addition, we group the documents feature matrix by author.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>dfm_authors <span class="ot">&lt;-</span> corp_dom <span class="sc">%&gt;%</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">tokens</span>(<span class="at">remove_punct =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">tokens_remove</span>(quanteda<span class="sc">::</span><span class="fu">stopwords</span>(<span class="st">"english"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">tokens_remove</span>(<span class="fu">c</span>(<span class="st">"now"</span>, <span class="st">"one"</span>, <span class="st">"like"</span>, <span class="st">"may"</span>, <span class="st">"can"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">dfm</span>() <span class="sc">%&gt;%</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">dfm_group</span>(<span class="at">groups =</span> Author) <span class="sc">%&gt;%</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">dfm_weight</span>(<span class="at">scheme =</span> <span class="st">"prop"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In a next step, we use the <code>textstat_frequency</code> function from the <code>quanteda</code> package to extract the most frequent non-stopwords in the three texts.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate relative frequency by president</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>freq_weight <span class="ot">&lt;-</span> quanteda.textstats<span class="sc">::</span><span class="fu">textstat_frequency</span>(dfm_authors, </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>                                                      <span class="at">n =</span> <span class="dv">10</span>,</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>                                                      <span class="at">groups =</span> dfm_authors<span class="sc">$</span>Author)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div class="tabwid"><style>.cl-0fd1d28a{table-layout:auto;width:50%;}.cl-0fcb1260{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-0fcb1274{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-0fcb25c0{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-0fcb25ca{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-0fcb6f30{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0fcb6f3a{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0fcb6f44{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0fcb6f4e{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0fcb6f4f{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0fcb6f58{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0fcb6f59{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0fcb6f62{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0fcb6f6c{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0fcb6f6d{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0fcb6f76{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-0fcb6f80{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class="cl-0fd1d28a">
<caption class="Table Caption">
<p>Most common words across three texts.</p>
</caption>

<thead><tr style="overflow-wrap:break-word;"><td class="cl-0fcb6f6d"><p class="cl-0fcb25c0"><span class="cl-0fcb1260">feature</span></p></td><td class="cl-0fcb6f76"><p class="cl-0fcb25ca"><span class="cl-0fcb1260">frequency</span></p></td><td class="cl-0fcb6f76"><p class="cl-0fcb25ca"><span class="cl-0fcb1260">rank</span></p></td><td class="cl-0fcb6f76"><p class="cl-0fcb25ca"><span class="cl-0fcb1260">docfreq</span></p></td><td class="cl-0fcb6f80"><p class="cl-0fcb25c0"><span class="cl-0fcb1260">group</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-0fcb6f3a"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">species</span></p></td><td class="cl-0fcb6f30"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">0.018084394</span></p></td><td class="cl-0fcb6f30"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">1</span></p></td><td class="cl-0fcb6f30"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">1</span></p></td><td class="cl-0fcb6f44"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">Darwin</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0fcb6f58"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">many</span></p></td><td class="cl-0fcb6f4f"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">0.006059045</span></p></td><td class="cl-0fcb6f4f"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">2</span></p></td><td class="cl-0fcb6f4f"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">1</span></p></td><td class="cl-0fcb6f4e"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">Darwin</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0fcb6f3a"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">forms</span></p></td><td class="cl-0fcb6f30"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">0.005399557</span></p></td><td class="cl-0fcb6f30"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">3</span></p></td><td class="cl-0fcb6f30"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">1</span></p></td><td class="cl-0fcb6f44"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">Darwin</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0fcb6f58"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">natural</span></p></td><td class="cl-0fcb6f4f"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">0.005244989</span></p></td><td class="cl-0fcb6f4f"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">4</span></p></td><td class="cl-0fcb6f4f"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">1</span></p></td><td class="cl-0fcb6f4e"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">Darwin</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0fcb6f3a"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">selection</span></p></td><td class="cl-0fcb6f30"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">0.005203771</span></p></td><td class="cl-0fcb6f30"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">5</span></p></td><td class="cl-0fcb6f30"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">1</span></p></td><td class="cl-0fcb6f44"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">Darwin</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0fcb6f58"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">two</span></p></td><td class="cl-0fcb6f4f"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">0.004533979</span></p></td><td class="cl-0fcb6f4f"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">6</span></p></td><td class="cl-0fcb6f4f"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">1</span></p></td><td class="cl-0fcb6f4e"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">Darwin</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0fcb6f3a"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">varieties</span></p></td><td class="cl-0fcb6f30"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">0.004214540</span></p></td><td class="cl-0fcb6f30"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">7</span></p></td><td class="cl-0fcb6f30"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">1</span></p></td><td class="cl-0fcb6f44"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">Darwin</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0fcb6f58"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">plants</span></p></td><td class="cl-0fcb6f4f"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">0.004029059</span></p></td><td class="cl-0fcb6f4f"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">8</span></p></td><td class="cl-0fcb6f4f"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">1</span></p></td><td class="cl-0fcb6f4e"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">Darwin</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0fcb6f3a"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">thus</span></p></td><td class="cl-0fcb6f30"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">0.003926014</span></p></td><td class="cl-0fcb6f30"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">9</span></p></td><td class="cl-0fcb6f30"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">1</span></p></td><td class="cl-0fcb6f44"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">Darwin</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0fcb6f58"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">animals</span></p></td><td class="cl-0fcb6f4f"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">0.003689010</span></p></td><td class="cl-0fcb6f4f"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">10</span></p></td><td class="cl-0fcb6f4f"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">1</span></p></td><td class="cl-0fcb6f4e"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">Darwin</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0fcb6f3a"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">whale</span></p></td><td class="cl-0fcb6f30"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">0.008602501</span></p></td><td class="cl-0fcb6f30"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">1</span></p></td><td class="cl-0fcb6f30"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">1</span></p></td><td class="cl-0fcb6f44"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">Melville</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0fcb6f58"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">upon</span></p></td><td class="cl-0fcb6f4f"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">0.005370569</span></p></td><td class="cl-0fcb6f4f"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">2</span></p></td><td class="cl-0fcb6f4f"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">1</span></p></td><td class="cl-0fcb6f4e"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">Melville</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0fcb6f3a"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">man</span></p></td><td class="cl-0fcb6f30"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">0.004277275</span></p></td><td class="cl-0fcb6f30"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">3</span></p></td><td class="cl-0fcb6f30"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">1</span></p></td><td class="cl-0fcb6f44"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">Melville</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0fcb6f58"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">old</span></p></td><td class="cl-0fcb6f4f"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">0.004210143</span></p></td><td class="cl-0fcb6f4f"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">4</span></p></td><td class="cl-0fcb6f4f"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">1</span></p></td><td class="cl-0fcb6f4e"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">Melville</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-0fcb6f6c"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">ahab</span></p></td><td class="cl-0fcb6f62"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">0.004133420</span></p></td><td class="cl-0fcb6f62"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">5</span></p></td><td class="cl-0fcb6f62"><p class="cl-0fcb25ca"><span class="cl-0fcb1274">1</span></p></td><td class="cl-0fcb6f59"><p class="cl-0fcb25c0"><span class="cl-0fcb1274">Melville</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Now, we can simply plot the most common words and most indicative non-stop words in the three texts.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(freq_weight, <span class="fu">aes</span>(<span class="fu">nrow</span>(freq_weight)<span class="sc">:</span><span class="dv">1</span>, frequency)) <span class="sc">+</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>     <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>     <span class="fu">facet_wrap</span>(<span class="sc">~</span> group, <span class="at">scales =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>     <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>     <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">nrow</span>(freq_weight)<span class="sc">:</span><span class="dv">1</span>,</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>                        <span class="at">labels =</span> freq_weight<span class="sc">$</span>feature) <span class="sc">+</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>     <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">"Relative frequency"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="textanalysis_files/figure-html/key4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="text-classification" class="level1 unnumbered">
<h1 class="unnumbered">Text Classification</h1>
<p>Text classification refers to methods that allow to classify a given text to a predefined set of languages, genres, authors, or the like. Such classifications are typically based on the relative frequency of word classes, key words, phonemes, or other linguistic features such as average sentence length, words per line, etc.</p>
<p>As with most other methods that are used in text analysis, text classification typically builds upon a training set that is already annotated with the required tags. Training sets and the features that are derived from these training sets can be created by oneself or one can use build in training sets that are provided in the respective software packages or tools.</p>
<p>In the following, we will use the frequency of phonemes to classify a text. In a first step, we read in a German text, and split it into phonemes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read in German text</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>German <span class="ot">&lt;-</span> <span class="fu">readLines</span>(<span class="st">"https://slcladal.github.io/data/phonemictext1.txt"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_remove_all</span>(<span class="st">" "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_split</span>(<span class="st">""</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>()</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(German, <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "?" "a" "l" "s" "h" "E" "s" "@" "d" "e" ":" "n" "S" "t" "E" "p" "@" "n" "v"
[20] "O"</code></pre>
</div>
</div>
<p>We now do the same for three other texts - an English and a Spanish text as well as one text in a language that we will determine using classification.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read in texts</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>English <span class="ot">&lt;-</span> <span class="fu">readLines</span>(<span class="st">"https://slcladal.github.io/data/phonemictext2.txt"</span>)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>Spanish <span class="ot">&lt;-</span> <span class="fu">readLines</span>(<span class="st">"https://slcladal.github.io/data/phonemictext3.txt"</span>)</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>Unknown <span class="ot">&lt;-</span> <span class="fu">readLines</span>(<span class="st">"https://slcladal.github.io/data/phonemictext4.txt"</span>)</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="co"># clean, split texts into phonemes, unlist and convert them into vectors</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>English <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(<span class="fu">unlist</span>(<span class="fu">strsplit</span>(<span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, English), <span class="st">""</span>)))</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>Spanish <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(<span class="fu">unlist</span>(<span class="fu">strsplit</span>(<span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, Spanish), <span class="st">""</span>)))</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>Unknown <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(<span class="fu">unlist</span>(<span class="fu">strsplit</span>(<span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, Unknown), <span class="st">""</span>)))</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(English, <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "D"  "@"  "b"  "U"  "k"  "I"  "z"  "p"  "r"  "\\" "@"  "z"  "E"  "n"  "t" 
[16] "@"  "d"  "{"  "z"  "@" </code></pre>
</div>
</div>
<p>We will now create a table that represents the phonemes and their frequencies in each of the 4 texts. In addition, we will add the language and simply the column names.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create data tables</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>German <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">names</span>(<span class="fu">table</span>(German)), <span class="fu">as.vector</span>(<span class="fu">table</span>(German)))</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>English <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">names</span>(<span class="fu">table</span>(English)), <span class="fu">as.vector</span>(<span class="fu">table</span>(English)))</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>Spanish <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">names</span>(<span class="fu">table</span>(Spanish)), <span class="fu">as.vector</span>(<span class="fu">table</span>(Spanish)))</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>Unknown <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">names</span>(<span class="fu">table</span>(Unknown)), <span class="fu">as.vector</span>(<span class="fu">table</span>(Unknown)))</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="co"># add column with language</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>German<span class="sc">$</span>Language <span class="ot">&lt;-</span> <span class="st">"German"</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>English<span class="sc">$</span>Language <span class="ot">&lt;-</span> <span class="st">"English"</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>Spanish<span class="sc">$</span>Language <span class="ot">&lt;-</span> <span class="st">"Spanish"</span></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>Unknown<span class="sc">$</span>Language <span class="ot">&lt;-</span> <span class="st">"Unknown"</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a><span class="co"># simplify column names</span></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(German)[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Phoneme"</span>, <span class="st">"Frequency"</span>)</span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(English)[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Phoneme"</span>, <span class="st">"Frequency"</span>)</span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Spanish)[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Phoneme"</span>, <span class="st">"Frequency"</span>)</span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Unknown)[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Phoneme"</span>, <span class="st">"Frequency"</span>)</span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a><span class="co"># combine all tables into a single table</span></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>classdata <span class="ot">&lt;-</span> <span class="fu">rbind</span>(German, English, Spanish, Unknown) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div class="tabwid"><style>.cl-12ed4648{table-layout:auto;width:50%;}.cl-12e3b9fc{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-12e3ba10{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-12e3cca8{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-12e3ccb2{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-12e40b5a{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12e40b6e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12e40b78{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12e40b79{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12e40b82{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12e40b8c{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12e40b96{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12e40b97{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12e40ba0{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12e40baa{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12e40bab{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12e40bb4{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class="cl-12ed4648">
<caption class="Table Caption">
<p>First 10 lines of the class data.</p>
</caption>

<thead><tr style="overflow-wrap:break-word;"><td class="cl-12e40bab"><p class="cl-12e3cca8"><span class="cl-12e3b9fc">Phoneme</span></p></td><td class="cl-12e40baa"><p class="cl-12e3ccb2"><span class="cl-12e3b9fc">Frequency</span></p></td><td class="cl-12e40bb4"><p class="cl-12e3cca8"><span class="cl-12e3b9fc">Language</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-12e40b78"><p class="cl-12e3cca8"><span class="cl-12e3ba10">-</span></p></td><td class="cl-12e40b5a"><p class="cl-12e3ccb2"><span class="cl-12e3ba10">6</span></p></td><td class="cl-12e40b6e"><p class="cl-12e3cca8"><span class="cl-12e3ba10">German</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-12e40ba0"><p class="cl-12e3cca8"><span class="cl-12e3ba10">:</span></p></td><td class="cl-12e40b97"><p class="cl-12e3ccb2"><span class="cl-12e3ba10">569</span></p></td><td class="cl-12e40b96"><p class="cl-12e3cca8"><span class="cl-12e3ba10">German</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-12e40b78"><p class="cl-12e3cca8"><span class="cl-12e3ba10">?</span></p></td><td class="cl-12e40b5a"><p class="cl-12e3ccb2"><span class="cl-12e3ba10">556</span></p></td><td class="cl-12e40b6e"><p class="cl-12e3cca8"><span class="cl-12e3ba10">German</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-12e40ba0"><p class="cl-12e3cca8"><span class="cl-12e3ba10">@</span></p></td><td class="cl-12e40b97"><p class="cl-12e3ccb2"><span class="cl-12e3ba10">565</span></p></td><td class="cl-12e40b96"><p class="cl-12e3cca8"><span class="cl-12e3ba10">German</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-12e40b78"><p class="cl-12e3cca8"><span class="cl-12e3ba10">2</span></p></td><td class="cl-12e40b5a"><p class="cl-12e3ccb2"><span class="cl-12e3ba10">6</span></p></td><td class="cl-12e40b6e"><p class="cl-12e3cca8"><span class="cl-12e3ba10">German</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-12e40ba0"><p class="cl-12e3cca8"><span class="cl-12e3ba10">3</span></p></td><td class="cl-12e40b97"><p class="cl-12e3ccb2"><span class="cl-12e3ba10">31</span></p></td><td class="cl-12e40b96"><p class="cl-12e3cca8"><span class="cl-12e3ba10">German</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-12e40b78"><p class="cl-12e3cca8"><span class="cl-12e3ba10">4</span></p></td><td class="cl-12e40b5a"><p class="cl-12e3ccb2"><span class="cl-12e3ba10">67</span></p></td><td class="cl-12e40b6e"><p class="cl-12e3cca8"><span class="cl-12e3ba10">German</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-12e40ba0"><p class="cl-12e3cca8"><span class="cl-12e3ba10">5</span></p></td><td class="cl-12e40b97"><p class="cl-12e3ccb2"><span class="cl-12e3ba10">1</span></p></td><td class="cl-12e40b96"><p class="cl-12e3cca8"><span class="cl-12e3ba10">German</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-12e40b78"><p class="cl-12e3cca8"><span class="cl-12e3ba10">6</span></p></td><td class="cl-12e40b5a"><p class="cl-12e3ccb2"><span class="cl-12e3ba10">402</span></p></td><td class="cl-12e40b6e"><p class="cl-12e3cca8"><span class="cl-12e3ba10">German</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-12e40b8c"><p class="cl-12e3cca8"><span class="cl-12e3ba10">8</span></p></td><td class="cl-12e40b82"><p class="cl-12e3ccb2"><span class="cl-12e3ba10">32</span></p></td><td class="cl-12e40b79"><p class="cl-12e3cca8"><span class="cl-12e3ba10">German</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Now, we group the data so that we see, how often each phoneme is used in each language.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># convert into wide format</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>classdw <span class="ot">&lt;-</span> classdata <span class="sc">%&gt;%</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">spread</span>(Phoneme, Frequency) <span class="sc">%&gt;%</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace</span>(<span class="fu">is.na</span>(.), <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div class="tabwid"><style>.cl-13054e3c{table-layout:auto;width:50%;}.cl-12fface8{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-12ffacf2{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-12ffbddc{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-12ffbde6{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-12fff1c6{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12fff1da{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12fff1e4{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12fff248{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12fff252{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12fff266{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12fff270{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12fff271{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12fff27a{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12fff284{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12fff285{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-12fff28e{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class="cl-13054e3c">
<caption class="Table Caption">
<p>Overview of the class data in wide format.</p>
</caption>

<thead><tr style="overflow-wrap:break-word;"><td class="cl-12fff28e"><p class="cl-12ffbddc"><span class="cl-12fface8">Language</span></p></td><td class="cl-12fff284"><p class="cl-12ffbde6"><span class="cl-12fface8">-</span></p></td><td class="cl-12fff284"><p class="cl-12ffbde6"><span class="cl-12fface8">:</span></p></td><td class="cl-12fff284"><p class="cl-12ffbde6"><span class="cl-12fface8">?</span></p></td><td class="cl-12fff284"><p class="cl-12ffbde6"><span class="cl-12fface8">'</span></p></td><td class="cl-12fff285"><p class="cl-12ffbde6"><span class="cl-12fface8">{</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-12fff1da"><p class="cl-12ffbddc"><span class="cl-12ffacf2">English</span></p></td><td class="cl-12fff1c6"><p class="cl-12ffbde6"><span class="cl-12ffacf2">8</span></p></td><td class="cl-12fff1c6"><p class="cl-12ffbde6"><span class="cl-12ffacf2">176</span></p></td><td class="cl-12fff1c6"><p class="cl-12ffbde6"><span class="cl-12ffacf2">0</span></p></td><td class="cl-12fff1c6"><p class="cl-12ffbde6"><span class="cl-12ffacf2">7</span></p></td><td class="cl-12fff1e4"><p class="cl-12ffbde6"><span class="cl-12ffacf2">123</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-12fff252"><p class="cl-12ffbddc"><span class="cl-12ffacf2">German</span></p></td><td class="cl-12fff248"><p class="cl-12ffbde6"><span class="cl-12ffacf2">6</span></p></td><td class="cl-12fff248"><p class="cl-12ffbde6"><span class="cl-12ffacf2">569</span></p></td><td class="cl-12fff248"><p class="cl-12ffbde6"><span class="cl-12ffacf2">556</span></p></td><td class="cl-12fff248"><p class="cl-12ffbde6"><span class="cl-12ffacf2">0</span></p></td><td class="cl-12fff266"><p class="cl-12ffbde6"><span class="cl-12ffacf2">0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-12fff1da"><p class="cl-12ffbddc"><span class="cl-12ffacf2">Spanish</span></p></td><td class="cl-12fff1c6"><p class="cl-12ffbde6"><span class="cl-12ffacf2">5</span></p></td><td class="cl-12fff1c6"><p class="cl-12ffbde6"><span class="cl-12ffacf2">0</span></p></td><td class="cl-12fff1c6"><p class="cl-12ffbde6"><span class="cl-12ffacf2">0</span></p></td><td class="cl-12fff1c6"><p class="cl-12ffbde6"><span class="cl-12ffacf2">0</span></p></td><td class="cl-12fff1e4"><p class="cl-12ffbde6"><span class="cl-12ffacf2">0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-12fff27a"><p class="cl-12ffbddc"><span class="cl-12ffacf2">Unknown</span></p></td><td class="cl-12fff270"><p class="cl-12ffbde6"><span class="cl-12ffacf2">12</span></p></td><td class="cl-12fff270"><p class="cl-12ffbde6"><span class="cl-12ffacf2">286</span></p></td><td class="cl-12fff270"><p class="cl-12ffbde6"><span class="cl-12ffacf2">0</span></p></td><td class="cl-12fff270"><p class="cl-12ffbde6"><span class="cl-12ffacf2">12</span></p></td><td class="cl-12fff271"><p class="cl-12ffbde6"><span class="cl-12ffacf2">125</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Now, we need to transform the data again, so that we have the frequency of each phoneme by language as the classifier will use “Language” as the dependent variable and the phoneme frequencies as predictors.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>numvar <span class="ot">&lt;-</span> <span class="fu">colnames</span>(classdw)[<span class="dv">2</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">colnames</span>(classdw))]</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>classdw[numvar] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(classdw[numvar], as.numeric)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="co"># function for normalizing numeric variables</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>normalize <span class="ot">&lt;-</span> <span class="cf">function</span>(x) { (x<span class="sc">-</span><span class="fu">min</span>(x))<span class="sc">/</span>(<span class="fu">max</span>(x)<span class="sc">-</span><span class="fu">min</span>(x))   }</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="co"># apply normalization</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a> classdw[numvar] <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">lapply</span>(classdw[numvar], normalize))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div class="tabwid"><style>.cl-131ed532{table-layout:auto;width:50%;}.cl-1318b6a2{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-1318b6b6{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-1318c87c{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-1318c886{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-1319006c{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13190080{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1319008a{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1319008b{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13190094{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13190095{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1319009e{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1319009f{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-131900a8{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-131900a9{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-131900b2{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-131900bc{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class="cl-131ed532">
<caption class="Table Caption">
<p>Overview of the probabilities.</p>
</caption>

<thead><tr style="overflow-wrap:break-word;"><td class="cl-131900bc"><p class="cl-1318c87c"><span class="cl-1318b6a2">Language</span></p></td><td class="cl-131900a9"><p class="cl-1318c886"><span class="cl-1318b6a2">-</span></p></td><td class="cl-131900a9"><p class="cl-1318c886"><span class="cl-1318b6a2">:</span></p></td><td class="cl-131900a9"><p class="cl-1318c886"><span class="cl-1318b6a2">?</span></p></td><td class="cl-131900a9"><p class="cl-1318c886"><span class="cl-1318b6a2">'</span></p></td><td class="cl-131900b2"><p class="cl-1318c886"><span class="cl-1318b6a2">{</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-13190080"><p class="cl-1318c87c"><span class="cl-1318b6b6">English</span></p></td><td class="cl-1319006c"><p class="cl-1318c886"><span class="cl-1318b6b6">0.4285714</span></p></td><td class="cl-1319006c"><p class="cl-1318c886"><span class="cl-1318b6b6">0.3093146</span></p></td><td class="cl-1319006c"><p class="cl-1318c886"><span class="cl-1318b6b6">0</span></p></td><td class="cl-1319006c"><p class="cl-1318c886"><span class="cl-1318b6b6">0.5833333</span></p></td><td class="cl-1319008a"><p class="cl-1318c886"><span class="cl-1318b6b6">0.984</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-13190094"><p class="cl-1318c87c"><span class="cl-1318b6b6">German</span></p></td><td class="cl-1319008b"><p class="cl-1318c886"><span class="cl-1318b6b6">0.1428571</span></p></td><td class="cl-1319008b"><p class="cl-1318c886"><span class="cl-1318b6b6">1.0000000</span></p></td><td class="cl-1319008b"><p class="cl-1318c886"><span class="cl-1318b6b6">1</span></p></td><td class="cl-1319008b"><p class="cl-1318c886"><span class="cl-1318b6b6">0.0000000</span></p></td><td class="cl-13190095"><p class="cl-1318c886"><span class="cl-1318b6b6">0.000</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-13190080"><p class="cl-1318c87c"><span class="cl-1318b6b6">Spanish</span></p></td><td class="cl-1319006c"><p class="cl-1318c886"><span class="cl-1318b6b6">0.0000000</span></p></td><td class="cl-1319006c"><p class="cl-1318c886"><span class="cl-1318b6b6">0.0000000</span></p></td><td class="cl-1319006c"><p class="cl-1318c886"><span class="cl-1318b6b6">0</span></p></td><td class="cl-1319006c"><p class="cl-1318c886"><span class="cl-1318b6b6">0.0000000</span></p></td><td class="cl-1319008a"><p class="cl-1318c886"><span class="cl-1318b6b6">0.000</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-131900a8"><p class="cl-1318c87c"><span class="cl-1318b6b6">Unknown</span></p></td><td class="cl-1319009e"><p class="cl-1318c886"><span class="cl-1318b6b6">1.0000000</span></p></td><td class="cl-1319009e"><p class="cl-1318c886"><span class="cl-1318b6b6">0.5026362</span></p></td><td class="cl-1319009e"><p class="cl-1318c886"><span class="cl-1318b6b6">0</span></p></td><td class="cl-1319009e"><p class="cl-1318c886"><span class="cl-1318b6b6">1.0000000</span></p></td><td class="cl-1319009f"><p class="cl-1318c886"><span class="cl-1318b6b6">1.000</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Before turning to the actual classification, we will use a cluster analysis to see which texts the unknown text is most similar with.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove language column</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>textm <span class="ot">&lt;-</span> classdw[,<span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(classdw)]</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="co"># add languages as row names</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(textm) <span class="ot">&lt;-</span> classdw[,<span class="dv">1</span>]</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="co"># create distance matrix</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>distmtx <span class="ot">&lt;-</span> <span class="fu">dist</span>(textm)</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="co"># perform clustering</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>clustertexts <span class="ot">&lt;-</span> <span class="fu">hclust</span>(distmtx, <span class="at">method=</span><span class="st">"ward.D"</span>)  </span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a><span class="co"># visualize cluster result</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(clustertexts, <span class="at">hang =</span> .<span class="dv">25</span>,<span class="at">main =</span> <span class="st">""</span>)           </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="textanalysis_files/figure-html/tc10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>According to the cluster analysis, the unknown text clusters together with the English texts which suggests that the unknown text is likely to be English.</p>
<p>Before we begin with the actual classification, we will split the data so that we have one data set without “Unknown” (this is our training set) and one data set with only “Unknown” (this is our test set).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create training set</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> classdw <span class="sc">%&gt;%</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Language <span class="sc">!=</span> <span class="st">"Unknown"</span>)</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create test set</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> classdw <span class="sc">%&gt;%</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Language <span class="sc">==</span> <span class="st">"Unknown"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div class="tabwid"><style>.cl-1348e688{table-layout:auto;width:50%;}.cl-1342a7aa{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-1342a7be{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-1342bda8{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-1342bdb2{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-134300a6{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-134300ba{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-134300ce{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-134300d8{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-134300e2{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-134300e3{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-134300f6{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-13430100{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1343010a{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1343010b{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1343011e{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1343011f{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class="cl-1348e688">
<caption class="Table Caption">
<p>Overview of the training set probabilities.</p>
</caption>

<thead><tr style="overflow-wrap:break-word;"><td class="cl-1343011f"><p class="cl-1342bda8"><span class="cl-1342a7aa">Language</span></p></td><td class="cl-1343010b"><p class="cl-1342bdb2"><span class="cl-1342a7aa">-</span></p></td><td class="cl-1343010b"><p class="cl-1342bdb2"><span class="cl-1342a7aa">:</span></p></td><td class="cl-1343010b"><p class="cl-1342bdb2"><span class="cl-1342a7aa">?</span></p></td><td class="cl-1343010b"><p class="cl-1342bdb2"><span class="cl-1342a7aa">'</span></p></td><td class="cl-1343011e"><p class="cl-1342bdb2"><span class="cl-1342a7aa">{</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-134300ba"><p class="cl-1342bda8"><span class="cl-1342a7be">English</span></p></td><td class="cl-134300a6"><p class="cl-1342bdb2"><span class="cl-1342a7be">0.4285714</span></p></td><td class="cl-134300a6"><p class="cl-1342bdb2"><span class="cl-1342a7be">0.3093146</span></p></td><td class="cl-134300a6"><p class="cl-1342bdb2"><span class="cl-1342a7be">0</span></p></td><td class="cl-134300a6"><p class="cl-1342bdb2"><span class="cl-1342a7be">0.5833333</span></p></td><td class="cl-134300ce"><p class="cl-1342bdb2"><span class="cl-1342a7be">0.984</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-134300e2"><p class="cl-1342bda8"><span class="cl-1342a7be">German</span></p></td><td class="cl-134300d8"><p class="cl-1342bdb2"><span class="cl-1342a7be">0.1428571</span></p></td><td class="cl-134300d8"><p class="cl-1342bdb2"><span class="cl-1342a7be">1.0000000</span></p></td><td class="cl-134300d8"><p class="cl-1342bdb2"><span class="cl-1342a7be">1</span></p></td><td class="cl-134300d8"><p class="cl-1342bdb2"><span class="cl-1342a7be">0.0000000</span></p></td><td class="cl-134300e3"><p class="cl-1342bdb2"><span class="cl-1342a7be">0.000</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-134300ba"><p class="cl-1342bda8"><span class="cl-1342a7be">Spanish</span></p></td><td class="cl-134300a6"><p class="cl-1342bdb2"><span class="cl-1342a7be">0.0000000</span></p></td><td class="cl-134300a6"><p class="cl-1342bdb2"><span class="cl-1342a7be">0.0000000</span></p></td><td class="cl-134300a6"><p class="cl-1342bdb2"><span class="cl-1342a7be">0</span></p></td><td class="cl-134300a6"><p class="cl-1342bdb2"><span class="cl-1342a7be">0.0000000</span></p></td><td class="cl-134300ce"><p class="cl-1342bdb2"><span class="cl-1342a7be">0.000</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1343010a"><p class="cl-1342bda8"><span class="cl-1342a7be">Unknown</span></p></td><td class="cl-134300f6"><p class="cl-1342bdb2"><span class="cl-1342a7be">1.0000000</span></p></td><td class="cl-134300f6"><p class="cl-1342bdb2"><span class="cl-1342a7be">0.5026362</span></p></td><td class="cl-134300f6"><p class="cl-1342bdb2"><span class="cl-1342a7be">0</span></p></td><td class="cl-134300f6"><p class="cl-1342bdb2"><span class="cl-1342a7be">1.0000000</span></p></td><td class="cl-13430100"><p class="cl-1342bdb2"><span class="cl-1342a7be">1.000</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Finally, we can apply our classifier to our data. The classifier we use is a k-nearest neighbor classifier as the underlying function will classify an unknown element given its proximity to the clusters in the training set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># set seed for reproducibility</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12345</span>)</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="co"># apply k-nearest-neighbor (knn) classifier</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>prediction <span class="ot">&lt;-</span> class<span class="sc">::</span><span class="fu">knn</span>(train[,<span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(train)], </span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>                         test[,<span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(test)], </span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>                         <span class="at">cl =</span> train[, <span class="dv">1</span>], </span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>                         <span class="at">k =</span> <span class="dv">3</span>)</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect the result</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>prediction</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] English
Levels: English German Spanish</code></pre>
</div>
</div>
<p>Based on the frequencies of phonemes in the unknown text, the knn-classifier predicts that the unknown text is English. This is in fact true as the text is a subsection of the Wikipedia article for Aldous Huxley’s <em>Brave New World</em>. The training texts were German, English, and Spanish translations of a subsection of Wikipedia’s article for Hermann Hesse’s <em>Steppenwolf</em>.</p>
</section>
<section id="part-of-speech-tagging" class="level1 unnumbered">
<h1 class="unnumbered">Part-of-Speech tagging</h1>
<p>A very common procedure to add information to texts is to part-of-speech tag the data, which means to determine to what type of word a specific word belongs. Below, we will add pos-tags to a short English text.</p>
<p>We start by loading a text</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load text</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>text  <span class="ot">&lt;-</span> base<span class="sc">::</span><span class="fu">readRDS</span>(<span class="fu">url</span>(<span class="st">"https://slcladal.github.io/data/orwell.rda"</span>, <span class="st">"rb"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  .[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>] <span class="sc">%&gt;%</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="at">collapse =</span> <span class="st">" "</span>)</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="fu">substr</span>(text, <span class="dv">1</span>, <span class="dv">200</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1984 George Orwell Part 1, Chapter 1 It was a bright cold day in April, and the clocks were striking thirteen. Winston Smith, his chin nuzzled into his breast in an effort to escape the vile wind, sli"</code></pre>
</div>
</div>
<p>Now that we have a text that we can work with, we will download a pre-trained language model.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># download language model</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>m_eng   <span class="ot">&lt;-</span> udpipe<span class="sc">::</span><span class="fu">udpipe_download_model</span>(<span class="at">language =</span> <span class="st">"english-ewt"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you have downloaded a model once, you can also load the model directly from the place where you stored it on your computer. In my case, I have stored the model in a folder called <em>udpipemodels</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load language model from your computer after you have downloaded it once</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>m_eng <span class="ot">&lt;-</span> <span class="fu">udpipe_load_model</span>(<span class="at">file =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"udpipemodels"</span>, <span class="st">"english-ewt-ud-2.5-191206.udpipe"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can now use the model to annotate out text.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tokenise, tag, dependency parsing</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>text_anndf <span class="ot">&lt;-</span> udpipe<span class="sc">::</span><span class="fu">udpipe_annotate</span>(m_eng, <span class="at">x =</span> text) <span class="sc">%&gt;%</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>sentence)</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(text_anndf, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   doc_id paragraph_id sentence_id token_id   token   lemma  upos xpos
1    doc1            1           1        1    1984    1984 PROPN  NNP
2    doc1            1           1        2  George  George PROPN  NNP
3    doc1            1           1        3  Orwell  Orwell PROPN  NNP
4    doc1            1           1        4    Part    part PROPN  NNP
5    doc1            1           1        5       1       1   NUM   CD
6    doc1            1           1        6       ,       , PUNCT    ,
7    doc1            1           1        7 Chapter chapter PROPN  NNP
8    doc1            1           1        8       1       1   NUM   CD
9    doc1            1           2        1      It      it  PRON  PRP
10   doc1            1           2        2     was      be   AUX  VBD
                                                    feats head_token_id
1                                             Number=Sing             2
2                                             Number=Sing             0
3                                             Number=Sing             2
4                                             Number=Sing             2
5                                            NumType=Card             2
6                                                    &lt;NA&gt;             2
7                                             Number=Sing             2
8                                            NumType=Card             7
9  Case=Nom|Gender=Neut|Number=Sing|Person=3|PronType=Prs             6
10  Mood=Ind|Number=Sing|Person=3|Tense=Past|VerbForm=Fin             6
    dep_rel deps          misc
1  compound &lt;NA&gt;          &lt;NA&gt;
2      root &lt;NA&gt;          &lt;NA&gt;
3      flat &lt;NA&gt;          &lt;NA&gt;
4      flat &lt;NA&gt;          &lt;NA&gt;
5      list &lt;NA&gt; SpaceAfter=No
6     punct &lt;NA&gt;          &lt;NA&gt;
7     appos &lt;NA&gt;          &lt;NA&gt;
8    nummod &lt;NA&gt;          &lt;NA&gt;
9     nsubj &lt;NA&gt;          &lt;NA&gt;
10      cop &lt;NA&gt;          &lt;NA&gt;</code></pre>
</div>
</div>
<p>It can be useful to extract only the words and their pos-tags and convert them back into a text format (rather than a tabular format).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>tagged_text <span class="ot">&lt;-</span> <span class="fu">paste</span>(text_anndf<span class="sc">$</span>token, <span class="st">"/"</span>, text_anndf<span class="sc">$</span>xpos, <span class="at">collapse =</span> <span class="st">" "</span>, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect tagged text</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="fu">substr</span>(tagged_text, <span class="dv">1</span>, <span class="dv">200</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1984/NNP George/NNP Orwell/NNP Part/NNP 1/CD ,/, Chapter/NNP 1/CD It/PRP was/VBD a/DT bright/JJ cold/JJ day/NN in/IN April/NNP ,/, and/CC the/DT clocks/NNS were/VBD striking/VBG thirteen/RB ./. Winsto"</code></pre>
</div>
</div>
<p>We could use the pos-tagged data to study differences in the distribution of word classes across different registers. or to find certain syntactic patterns in a collection of texts.</p>
</section>
<section id="names-entity-recognition" class="level1 unnumbered">
<h1 class="unnumbered">Names Entity Recognition</h1>
<p>Named Entity Recognition (NER) (also referred to as <em>named entity extraction</em> or simply as <em>entity extraction</em>) is a text analytic method which allows us to automatically identify or extract named entities from text(s) such as persons, locations, brands, etc.</p>
<p>As such, NER is a process during which textual elements which have characteristics that are common to proper nouns (locations, people, organizations, etc.) rather than other parts of speech, e.g.&nbsp;non-sentence initial capitalization, are extracted from texts. Retrieving entities is common in automated summarization and in Topic Modeling. NER can be achieved by simple feature extraction (e.g.&nbsp;extract all non-sentence initial capitalized words) or with the help of training sets. Using training sets, i.e.&nbsp;texts that are annotated for entities and non-entities, achieves better results when dealing with unknown data and data with inconsistent capitalization.</p>
<p>Here, we will make use of the results obtained form the pos-tagging and simply extract terms that have been tagged as</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tokenise, tag, dependency parsing</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>ner_df <span class="ot">&lt;-</span> text_anndf <span class="sc">%&gt;%</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(upos <span class="sc">==</span> <span class="st">"PROPN"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(token_id, token, lemma, upos, feats)</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ner_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  token_id   token   lemma  upos       feats
1        1    1984    1984 PROPN Number=Sing
2        2  George  George PROPN Number=Sing
3        3  Orwell  Orwell PROPN Number=Sing
4        4    Part    part PROPN Number=Sing
5        7 Chapter chapter PROPN Number=Sing
6        8   April   April PROPN Number=Sing</code></pre>
</div>
</div>
<p>The results would now have to be processed further and could be categorized into person, location, dates, entities, for example. However, this should already give you an idea and get you started.</p>
</section>
<section id="dependency-parsing-using-udpipe" class="level1 unnumbered">
<h1 class="unnumbered">Dependency Parsing Using UDPipe</h1>
<p>In addition to pos-tagging, we can also generate plots showing the syntactic dependencies of the different constituents of a sentence. For this, we generate an object that contains a sentence (in this case, the sentence <em>John gave Mary a kiss</em>), and we then plot (or visualize) the dependencies using the <code>textplot_dependencyparser</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># parse text</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>sent <span class="ot">&lt;-</span> udpipe<span class="sc">::</span><span class="fu">udpipe_annotate</span>(m_eng, <span class="at">x =</span> <span class="st">"John gave Mary a kiss."</span>) <span class="sc">%&gt;%</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>()</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  doc_id paragraph_id sentence_id               sentence token_id token lemma
1   doc1            1           1 John gave Mary a kiss.        1  John  John
2   doc1            1           1 John gave Mary a kiss.        2  gave  give
3   doc1            1           1 John gave Mary a kiss.        3  Mary  Mary
4   doc1            1           1 John gave Mary a kiss.        4     a     a
5   doc1            1           1 John gave Mary a kiss.        5  kiss  kiss
6   doc1            1           1 John gave Mary a kiss.        6     .     .
   upos xpos                            feats head_token_id dep_rel deps
1 PROPN  NNP                      Number=Sing             2   nsubj &lt;NA&gt;
2  VERB  VBD Mood=Ind|Tense=Past|VerbForm=Fin             0    root &lt;NA&gt;
3 PROPN  NNP                      Number=Sing             2    iobj &lt;NA&gt;
4   DET   DT        Definite=Ind|PronType=Art             5     det &lt;NA&gt;
5  NOUN   NN                      Number=Sing             2     obj &lt;NA&gt;
6 PUNCT    .                             &lt;NA&gt;             2   punct &lt;NA&gt;
             misc
1            &lt;NA&gt;
2            &lt;NA&gt;
3            &lt;NA&gt;
4            &lt;NA&gt;
5   SpaceAfter=No
6 SpacesAfter=\\n</code></pre>
</div>
</div>
<p>We now generate the plot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># generate dependency plot</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>dplot <span class="ot">&lt;-</span> textplot<span class="sc">::</span><span class="fu">textplot_dependencyparser</span>(sent, <span class="at">size =</span> <span class="dv">3</span>) </span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="co"># show plot</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>dplot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="textanalysis_files/figure-html/udi5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Dependency parsing cane be used, e.g.&nbsp;to study who is the agent versus who is the patient of certain actions such as crimes or other activities.</p>
</section>
<section id="citation-session-info" class="level1 unnumbered">
<h1 class="unnumbered">Citation &amp; Session Info</h1>
<p>Schweinberger, Martin. 2022. <em>Practical Overview of Selected Text Analytics Methods</em>. Brisbane: The University of Queensland. url: https://slcladal.github.io/textanalysis.html (Version 2022.08.31).</p>
<pre><code>@manual{schweinberger2022ta,
  author = {Schweinberger, Martin},
  title = {Practical Overview of Selected Text Analytics Methods},
  note = {https://slcladal.github.io/textanalysis.html},
  year = {2022},
  organization = "The University of Queensland, Australia. School of Languages and Cultures},
  address = {Brisbane},
  edition = {2022.08.31}
}</code></pre>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.2.1 (2022-06-23)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 22.04.1 LTS

Matrix products: default
BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.10.0
LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.10.0

locale:
 [1] LC_CTYPE=en_AU.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_AU.UTF-8        LC_COLLATE=en_AU.UTF-8    
 [5] LC_MONETARY=en_AU.UTF-8    LC_MESSAGES=en_AU.UTF-8   
 [7] LC_PAPER=en_AU.UTF-8       LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_AU.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] slam_0.1-50               Matrix_1.4-1             
 [3] tidyr_1.2.0               quanteda.textplots_0.94.1
 [5] quanteda.textstats_0.95   wordcloud2_0.2.1         
 [7] tidytext_0.3.3            udpipe_0.8.9             
 [9] tm_0.7-8                  NLP_0.2-1                
[11] quanteda_3.2.1            flextable_0.7.3          
[13] ggplot2_3.3.6             stringr_1.4.0            
[15] dplyr_1.0.9              

loaded via a namespace (and not attached):
 [1] nlme_3.1-158         RColorBrewer_1.1-3   rprojroot_2.0.3     
 [4] SnowballC_0.7.0      tools_4.2.1          utf8_1.2.2          
 [7] R6_2.5.1             DBI_1.1.3            mgcv_1.8-40         
[10] colorspace_2.0-3     withr_2.5.0          gridExtra_2.3       
[13] tidyselect_1.1.2     compiler_4.2.1       textplot_0.2.2      
[16] cli_3.3.0            xml2_1.3.3           network_1.17.2      
[19] officer_0.4.3        labeling_0.4.2       scales_1.2.0        
[22] systemfonts_1.0.4    digest_0.6.29        rmarkdown_2.14      
[25] base64enc_0.1-3      pkgconfig_2.0.3      htmltools_0.5.2     
[28] fastmap_1.1.0        htmlwidgets_1.5.4    rlang_1.0.4         
[31] rstudioapi_0.13      farver_2.1.1         generics_0.1.3      
[34] jsonlite_1.8.0       statnet.common_4.6.0 zip_2.2.0           
[37] tokenizers_0.2.1     magrittr_2.0.3       Rcpp_1.0.8.3        
[40] munsell_0.5.0        fansi_1.0.3          viridis_0.6.2       
[43] gdtools_0.2.4        lifecycle_1.0.1      stringi_1.7.8       
[46] yaml_2.3.5           ggraph_2.0.5         MASS_7.3-58.1       
[49] grid_4.2.1           parallel_4.2.1       ggrepel_0.9.1       
[52] crayon_1.5.1         lattice_0.20-45      graphlayouts_0.8.0  
[55] splines_4.2.1        sna_2.7              knitr_1.39          
[58] klippy_0.0.0.9500    pillar_1.7.0         igraph_1.3.2        
[61] uuid_1.1-0           stopwords_2.3        fastmatch_1.1-3     
[64] glue_1.6.2           evaluate_0.15        data.table_1.14.2   
[67] RcppParallel_5.1.5   tweenr_1.0.2         vctrs_0.4.1         
[70] polyclip_1.10-0      gtable_0.3.0         purrr_0.3.4         
[73] assertthat_0.2.1     ggforce_0.3.3        xfun_0.31           
[76] tidygraph_1.2.1      coda_0.19-4          janeaustenr_0.1.5   
[79] viridisLite_0.4.0    class_7.3-20         tibble_3.1.7        
[82] nsyllable_1.0.1      ISOcodes_2022.01.10  ellipsis_0.3.2      
[85] here_1.0.1          </code></pre>
</div>
</div>
<hr>
<p><a href="#introduction">Back to top</a></p>
<p><a href="https://slcladal.github.io/index.html">Back to HOME</a></p>
<hr>
</section>
<section id="references" class="level1 unnumbered">




</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body" role="doc-bibliography">
<div id="ref-bernard1998text" class="csl-entry" role="doc-biblioentry">
<div class="csl-left-margin">1. </div><div class="csl-right-inline">Bernard, H.R., Ryan, G.: Text analysis. Handbook of methods in cultural anthropology. 613, (1998).</div>
</div>
<div id="ref-kabanoff1997introduction" class="csl-entry" role="doc-biblioentry">
<div class="csl-left-margin">2. </div><div class="csl-right-inline">Kabanoff, B.: Introduction: Computers can read as well as count: Computer-aided text analysis in organizational research. Journal of Organizational behavior. 507–511 (1997).</div>
</div>
<div id="ref-popping2000computer" class="csl-entry" role="doc-biblioentry">
<div class="csl-left-margin">3. </div><div class="csl-right-inline">Popping, R.: Computer-assisted text analysis. Sage (2000).</div>
</div>
<div id="ref-lindquist2009corpus" class="csl-entry" role="doc-biblioentry">
<div class="csl-left-margin">4. </div><div class="csl-right-inline">Lindquist, H.: Corpus linguistics and the description of english. Edinburgh University Press, Edinburgh (2009).</div>
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>