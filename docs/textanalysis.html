<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Martin Schweinberger" />

<meta name="date" content="2023-04-05" />

<title>Practical Overview of Selected Text Analytics Methods</title>

<script src="site_libs/header-attrs-2.14/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/clipboard-1.7.1/clipboard.min.js"></script>
<link href="site_libs/primer-tooltips-1.4.0/build.css" rel="stylesheet" />
<link href="site_libs/klippy-0.0.0.9500/css/klippy.min.css" rel="stylesheet" />
<script src="site_libs/klippy-0.0.0.9500/js/klippy.min.js"></script>
<link href="site_libs/tabwid-1.0.0/tabwid.css" rel="stylesheet" />
<link href="site_libs/tabwid-1.0.0/scrool.css" rel="stylesheet" />
<link rel="stylesheet" href="styles.css" />

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VSGK4KYDQZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VSGK4KYDQZ');
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">



<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  
  <!-- Added by SKC - LADAL image and thicker top with   -->
  <div class="container-fluid navbar-top" >
    <a href="index.html"> <!-- Make entire top row and text clickable home link  -->
        <div class="row">
            <div class="navbar-brand col-md-12">
              <img src="/content/ladal_icon_cas_tran_white_trimed.png" class="navbar-icon" alt="LADAL"/>
              <span class="navbar-title-note navbar-collapse collapse" >Language Technology and Data Analysis Laboratory</span>
            </div>
        </div>
    </a>
  </div>
  
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <!-- SKC removed  navbar brand -->
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">HOME</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    ABOUT LADAL
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="people.html">People | Collabs</a>
    </li>
    <li>
      <a href="news.html">News</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    EVENTS
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="workshops.html">Workshops</a>
    </li>
    <li>
      <a href="compthinking.html">Computational Thinking in HASS</a>
    </li>
    <li>
      <a href="webinars2022.html">LADAL Webinar Series 2022</a>
    </li>
    <li>
      <a href="opening.html">LADAL Webinar Series 2021</a>
    </li>
    <li>
      <a href="atapevents.html">ATAP Events</a>
    </li>
  </ul>
</li>
<li>
  <a href="tutorials.html">TUTORIALS</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    RESOURCES
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="links.html">Links</a>
    </li>
    <li>
      <a href="base.html">Tutorial stylesheet</a>
    </li>
  </ul>
</li>
<li>
  <a href="contact.html">CONTACT</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Practical Overview of Selected Text Analytics Methods</h1>
<h4 class="author">Martin Schweinberger</h4>
<h4 class="date">2023-04-05</h4>

</div>


<p><img src="https://slcladal.github.io/images/uq1.jpg" width="100%" /></p>
<div id="introduction" class="section level1 unnumbered" number="">
<h1 class="unnumbered" number="">Introduction</h1>
<p><img src="https://slcladal.github.io/images/gy_chili.jpg" width="15%" style="float:right; padding:10px" /></p>
<p>This tutorial introduces Text Analysis <span class="citation">(see Bernard and Ryan <a href="#ref-bernard1998text" role="doc-biblioref">1998</a>; Kabanoff <a href="#ref-kabanoff1997introduction" role="doc-biblioref">1997</a>; Popping <a href="#ref-popping2000computer" role="doc-biblioref">2000</a>)</span>, i.e. computer-based analysis of language data or the (semi-)automated extraction of information from text. This tutorial shows beginner and intermediate users of R how to perform basic text analytic procedures. The aim is not to provide a fully-fledged analysis but rather to show and exemplify selected useful methods associated with text analysis and distant reading.</p>
<div class="warning" style="padding:0.1em; background-color:#f2f2f2; color:#51247a">
<span>
<p style="margin-top:1em; text-align:center">
The entire R Notebook for the tutorial can be downloaded <a href="https://slcladal.github.io/content/textanalysis.Rmd"><strong>here</strong></a>. If you want to render the R Notebook on your machine, i.e. knitting the document to html or a pdf, you need to make sure that you have R and RStudio installed and you also need to download the <a href="https://slcladal.github.io/content/bibliography.bib"><strong>bibliography file</strong></a> and store it in the same folder where you store the Rmd file. <br><br> <a href="https://mybinder.org/v2/gh/SLCLADAL/interactive-notebooks-environment/main?urlpath=git-pull%3Frepo%3Dhttps%253A%252F%252Fgithub.com%252FSLCLADAL%252Finteractive-notebooks%26urlpath%3Dlab%252Ftree%252Finteractive-notebooks%252Fnotebooks%252Ftextanalysis_cb.ipynb%26branch%3Dmain"><img src="https://mybinder.org/badge_logo.svg" alt="Binder" /></a><br> <a href="https://mybinder.org/v2/gh/SLCLADAL/interactive-notebooks-environment/main?urlpath=git-pull%3Frepo%3Dhttps%253A%252F%252Fgithub.com%252FSLCLADAL%252Finteractive-notebooks%26urlpath%3Dlab%252Ftree%252Finteractive-notebooks%252Fnotebooks%252Ftextanalysis_cb.ipynb%26branch%3Dmain"><strong>Click this link to open an interactive version of this tutorial on MyBinder.org</strong></a>. <br> This interactive Jupyter notebook allows you to execute code yourself and you can also change and edit the notebook, e.g. you can change code and upload your own data. <br>
</p>
<p style="margin-left:1em;">
</p>
<p></span></p>
</div>
<p><br></p>
<p>Most of the applications of Text Analysis are based upon a relatively limited number of key procedures or concepts (e.g. concordancing, word frequencies, annotation or tagging, parsing, collocation, text classification, Sentiment Analysis, Entity Extraction, Topic Modeling, etc.). In the following, we will explore these procedures and introduce some basic tools that help you perform the introduced tasks.</p>
<p><strong>Preparation and session set up</strong></p>
<p>This tutorial is based on R. If you have not installed R or are new to it, you will find an introduction to and more information how to use R <a href="https://slcladal.github.io/intror.html">here</a>. For this tutorials, we need to install certain <em>packages</em> from an R <em>library</em> so that the scripts shown below are executed without errors. Before turning to the code below, please install the packages by running the code below this paragraph. If you have already installed the packages mentioned below, then you can skip ahead and ignore this section. To install the necessary packages, simply run the following code - it may take some time (between 1 and 5 minutes to install all of the packages so you do not need to worry if it takes some time).</p>
<pre class="r"><code># install packages
install.packages(&quot;quanteda&quot;)
install.packages(&quot;dplyr&quot;)
install.packages(&quot;stringr&quot;)
install.packages(&quot;ggplot2&quot;)
install.packages(&quot;tm&quot;)
install.packages(&quot;udpipe&quot;)
install.packages(&quot;tidytext&quot;)
install.packages(&quot;wordcloud2&quot;)
install.packages(&quot;quanteda.textstats&quot;)
install.packages(&quot;quanteda.textplots&quot;)
install.packages(&quot;flextable&quot;)
# install klippy for copy-to-clipboard button in code chunks
install.packages(&quot;remotes&quot;)
remotes::install_github(&quot;rlesur/klippy&quot;)</code></pre>
<p>Now that we have installed the packages, we can activate them as shown below.</p>
<pre class="r"><code># load packages
library(dplyr)
library(stringr)
library(ggplot2)
library(flextable)
library(quanteda)
library(tm)
library(udpipe)
library(tidytext)
library(wordcloud2)
library(flextable)
library(quanteda.textstats)
library(quanteda.textplots)
library(tidyr)
# activate klippy for copy-to-clipboard button
klippy::klippy()</code></pre>
<script>
  addClassKlippyTo("pre.r, pre.markdown");
  addKlippy('left', 'top', 'auto', '1', 'Copy code', 'Copied!');
</script>
<p>Once you have initiated the session by executing the code shown above, you are good to go.</p>
</div>
<div id="concordancing" class="section level1 unnumbered" number="">
<h1 class="unnumbered" number="">Concordancing</h1>
<p>In Text Analysis, concordancing refers to the extraction of words from a given text or texts <span class="citation">(Lindquist <a href="#ref-lindquist2009corpus" role="doc-biblioref">2009</a>)</span>. Commonly, concordances are displayed in the form of key-word in contexts (KWIC) where the search term is shown with some preceding and following context. Thus, such displays are referred to as key word in context concordances. A more elaborate tutorial on how to perform concordancing with R is available <a href="https://slcladal.github.io/kwics.html">here</a>.</p>
<p><img src="https://slcladal.github.io/images/AntConcConcordance.png" width="60%" style="float:right; padding:10px" /></p>
<p>Concordancing is helpful for seeing how the term is used in the data, for inspecting how often a given word occurs in a text or a collection of texts, for extracting examples, and it also represents a basic procedure and often the first step in more sophisticated analyses of language data.</p>
<p>In the following, we will use R to query and investigate text, using Lewis Caroll’s <em>Alice’s Adventures in Wonderland</em> as our example text.</p>
<p>We begin by loading the data which represents the text of Lewis Caroll’s <em>Alice’s Adventures in Wonderland</em>. For the present tutorial, we load data that is available on the LADAL GitHUb repository. If you want to know how to load your own data, have a look at <a href="https://slcladal.github.io/intror.html#Working_with_text">this tutorial</a>.</p>
<pre class="r"><code># load text
text &lt;- base::readRDS(url(&quot;https://slcladal.github.io/data/alice.rda&quot;, &quot;rb&quot;))</code></pre>
<template id="e54dbe86-38f3-42a7-82ef-319ed286dd30"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-d57ceebc{table-layout:auto;width:75%;}.cl-d579bc06{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-d579bc10{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-d579cb7e{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-d579ea1e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d579ea28{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d579ea32{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d579ea33{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-d57ceebc'>
<caption class="Table Caption">
<p>First text elements of the example text</p>
</caption>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-d579ea33"><p class="cl-d579cb7e"><span class="cl-d579bc06">.</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-d579ea1e"><p class="cl-d579cb7e"><span class="cl-d579bc10">Alice’s Adventures in Wonderland</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d579ea28"><p class="cl-d579cb7e"><span class="cl-d579bc10">by Lewis Carroll</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d579ea1e"><p class="cl-d579cb7e"><span class="cl-d579bc10">CHAPTER I.</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d579ea28"><p class="cl-d579cb7e"><span class="cl-d579bc10">Down the Rabbit-Hole</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d579ea1e"><p class="cl-d579cb7e"><span class="cl-d579bc10">Alice was beginning to get very tired of sitting by her sister on the</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d579ea32"><p class="cl-d579cb7e"><span class="cl-d579bc10">bank, and of having nothing to do: once or twice she had peeped into</span></p></td></tr></tbody></table></div></template>
<div class="flextable-shadow-host" id="d0b4536a-c2e9-4696-8037-e5fbfbb042f6"></div>
<script>
var dest = document.getElementById("d0b4536a-c2e9-4696-8037-e5fbfbb042f6");
var template = document.getElementById("e54dbe86-38f3-42a7-82ef-319ed286dd30");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>The data still consists of short text snippets which is why we collapse these snippets and then split the collapsed data into chapters.</p>
<pre class="r"><code># combine and split into chapters
text_chapters &lt;- text %&gt;%
  # paste all texts together into one long text
  paste0(collapse = &quot; &quot;) %&gt;%
  # replace Chapter I to Chapter XVI with qwertz 
  stringr::str_replace_all(&quot;(CHAPTER [XVI]{1,7}\\.{0,1}) &quot;, &quot;qwertz\\1&quot;) %&gt;%
  # convert text to lower case
  tolower() %&gt;%  
  # split the long text into chapters
  stringr::str_split(&quot;qwertz&quot;) %&gt;%
  # unlist the result (convert into simple vector)
  unlist()</code></pre>
<template id="6e4a38ca-7439-4ad4-a98f-dc8404d42bf3"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-d585b178{table-layout:auto;width:95%;}.cl-d582ef4c{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-d582ef56{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-d582f7e4{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-d5830d4c{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5830d56{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5830d60{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5830d61{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-d585b178'>
<caption class="Table Caption">
<p>First 500 characters of the first 6 chapters of the example text</p>
</caption>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-d5830d61"><p class="cl-d582f7e4"><span class="cl-d582ef4c">.</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-d5830d4c"><p class="cl-d582f7e4"><span class="cl-d582ef56">alice’s adventures in wonderland by lewis carroll </span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5830d56"><p class="cl-d582f7e4"><span class="cl-d582ef56">chapter i.down the rabbit-hole alice was beginning to get very tired of sitting by her sister on the bank, and of having nothing to do: once or twice she had peeped into the book her sister was reading, but it had no pictures or conversations in it, “and what is the use of a book,” thought alice “without pictures or conversations?” so she was considering in her own mind (as well as she could, for the hot day made her feel very sleepy and stupid), whether the pleasure of making a daisy-chain woul</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5830d4c"><p class="cl-d582f7e4"><span class="cl-d582ef56">chapter ii.the pool of tears “curiouser and curiouser!” cried alice (she was so much surprised, that for the moment she quite forgot how to speak good english); “now i’m opening out like the largest telescope that ever was! good-bye, feet!” (for when she looked down at her feet, they seemed to be almost out of sight, they were getting so far off). “oh, my poor little feet, i wonder who will put on your shoes and stockings for you now, dears? i’m sure _i_ shan’t be able! i shall be a great deal t</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5830d56"><p class="cl-d582f7e4"><span class="cl-d582ef56">chapter iii.a caucus-race and a long tale they were indeed a queer-looking party that assembled on the bank—the birds with draggled feathers, the animals with their fur clinging close to them, and all dripping wet, cross, and uncomfortable. the first question of course was, how to get dry again: they had a consultation about this, and after a few minutes it seemed quite natural to alice to find herself talking familiarly with them, as if she had known them all her life. indeed, she had quite a l</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5830d4c"><p class="cl-d582f7e4"><span class="cl-d582ef56">chapter iv.the rabbit sends in a little bill it was the white rabbit, trotting slowly back again, and looking anxiously about as it went, as if it had lost something; and she heard it muttering to itself “the duchess! the duchess! oh my dear paws! oh my fur and whiskers! she’ll get me executed, as sure as ferrets are ferrets! where _can_ i have dropped them, i wonder?” alice guessed in a moment that it was looking for the fan and the pair of white kid gloves, and she very good-naturedly began hu</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5830d60"><p class="cl-d582f7e4"><span class="cl-d582ef56">chapter v.advice from a caterpillar the caterpillar and alice looked at each other for some time in silence: at last the caterpillar took the hookah out of its mouth, and addressed her in a languid, sleepy voice. “who are _you?_” said the caterpillar. this was not an encouraging opening for a conversation. alice replied, rather shyly, “i—i hardly know, sir, just at present—at least i know who i _was_ when i got up this morning, but i think i must have been changed several times since then.” “wha</span></p></td></tr></tbody></table></div></template>
<div class="flextable-shadow-host" id="5b2cc49e-92a7-4eed-97ef-a78d937981cf"></div>
<script>
var dest = document.getElementById("5b2cc49e-92a7-4eed-97ef-a78d937981cf");
var template = document.getElementById("6e4a38ca-7439-4ad4-a98f-dc8404d42bf3");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>Once we have split the data into chapters, we perform the concordancing and extract the KWICs. To create these kwics, we use the <code>kwic</code> function from the <code>quanteda</code> package. This function takes the data (x), the search pattern (pattern), and the window size as its main arguments.</p>
<p>To start with, we generate kwics for the term <em>alice</em> as shown below.</p>
<pre class="r"><code># create kwic
kwic_alice &lt;- quanteda::kwic(x = text_chapters, # define text(s) 
                         # define pattern
                          pattern = &quot;alice&quot;,
                         # define window size
                          window = 5) %&gt;%
  # convert into a data frame
  as.data.frame() %&gt;%
  # remove superfluous columns
  dplyr::select(-to, -from, -pattern)</code></pre>
<template id="bdb96884-5025-4e2f-84b0-774f11708426"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-d5988c8a{table-layout:auto;width:95%;}.cl-d5962a6c{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-d5962a76{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-d596317e{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-d59643d0{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d59643d1{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d59643da{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d59643db{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d59643dc{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d59643e4{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d59643e5{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d59643e6{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d59643e7{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d59643ee{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d59643ef{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d59643f0{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-d5988c8a'>
<caption class="Table Caption">
<p>First 10 concordances of <em>alice</em> in the example text</p>
</caption>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-d59643ee"><p class="cl-d596317e"><span class="cl-d5962a6c">docname</span></p></td><td class="cl-d59643ef"><p class="cl-d596317e"><span class="cl-d5962a6c">pre</span></p></td><td class="cl-d59643ef"><p class="cl-d596317e"><span class="cl-d5962a6c">keyword</span></p></td><td class="cl-d59643f0"><p class="cl-d596317e"><span class="cl-d5962a6c">post</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-d59643d1"><p class="cl-d596317e"><span class="cl-d5962a76">text2</span></p></td><td class="cl-d59643d0"><p class="cl-d596317e"><span class="cl-d5962a76">chapter i.down the rabbit-hole</span></p></td><td class="cl-d59643d0"><p class="cl-d596317e"><span class="cl-d5962a76">alice</span></p></td><td class="cl-d59643da"><p class="cl-d596317e"><span class="cl-d5962a76">was beginning to get very</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d59643e4"><p class="cl-d596317e"><span class="cl-d5962a76">text2</span></p></td><td class="cl-d59643dc"><p class="cl-d596317e"><span class="cl-d5962a76">a book , " thought</span></p></td><td class="cl-d59643dc"><p class="cl-d596317e"><span class="cl-d5962a76">alice</span></p></td><td class="cl-d59643db"><p class="cl-d596317e"><span class="cl-d5962a76">" without pictures or conversations</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d59643d1"><p class="cl-d596317e"><span class="cl-d5962a76">text2</span></p></td><td class="cl-d59643d0"><p class="cl-d596317e"><span class="cl-d5962a76">in that ; nor did</span></p></td><td class="cl-d59643d0"><p class="cl-d596317e"><span class="cl-d5962a76">alice</span></p></td><td class="cl-d59643da"><p class="cl-d596317e"><span class="cl-d5962a76">think it so _very_ much</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d59643e4"><p class="cl-d596317e"><span class="cl-d5962a76">text2</span></p></td><td class="cl-d59643dc"><p class="cl-d596317e"><span class="cl-d5962a76">and then hurried on ,</span></p></td><td class="cl-d59643dc"><p class="cl-d596317e"><span class="cl-d5962a76">alice</span></p></td><td class="cl-d59643db"><p class="cl-d596317e"><span class="cl-d5962a76">started to her feet ,</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d59643d1"><p class="cl-d596317e"><span class="cl-d5962a76">text2</span></p></td><td class="cl-d59643d0"><p class="cl-d596317e"><span class="cl-d5962a76">in another moment down went</span></p></td><td class="cl-d59643d0"><p class="cl-d596317e"><span class="cl-d5962a76">alice</span></p></td><td class="cl-d59643da"><p class="cl-d596317e"><span class="cl-d5962a76">after it , never once</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d59643e7"><p class="cl-d596317e"><span class="cl-d5962a76">text2</span></p></td><td class="cl-d59643e6"><p class="cl-d596317e"><span class="cl-d5962a76">down , so suddenly that</span></p></td><td class="cl-d59643e6"><p class="cl-d596317e"><span class="cl-d5962a76">alice</span></p></td><td class="cl-d59643e5"><p class="cl-d596317e"><span class="cl-d5962a76">had not a moment to</span></p></td></tr></tbody></table></div></template>
<div class="flextable-shadow-host" id="2d31d499-2173-4cb1-88ab-4bc3e957a815"></div>
<script>
var dest = document.getElementById("2d31d499-2173-4cb1-88ab-4bc3e957a815");
var template = document.getElementById("bdb96884-5025-4e2f-84b0-774f11708426");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>We can also use regular expressions in our search to extract not only <em>alice</em> but also more complex and even vague patterns. Vague means that only part of the pattern is specified. For instance, maybe only <em>walk</em> is specified and now we want all words containing this sequence including <em>walking</em>, <em>walker</em>, <em>walked</em>, and <em>walks</em>. To retrieve such vague patterns, we need to use so-called <em>regular expressions</em>. Also, when using a regular expression in the <code>pattern</code> argument, we need to specify the <code>valuetype</code> as <code>regex</code> (as shown below).</p>
<pre class="r"><code># create kwic
kwic_walk &lt;- quanteda::kwic(x = text_chapters, 
                          pattern = &quot;walk.*&quot;,
                          window = 5,
                          valuetype = &quot;regex&quot;) %&gt;%
  # convert into a data frame
  as.data.frame() %&gt;%
  # remove superfluous columns
  dplyr::select(-to, -from, -pattern)</code></pre>
<template id="b89c10e2-7fe4-4550-907c-e367b24d522b"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-d5a5a3e8{table-layout:auto;width:95%;}.cl-d5a32884{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-d5a3288e{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-d5a32f82{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-d5a346de{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5a346e8{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5a346e9{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5a346ea{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5a346f2{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5a346f3{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5a346f4{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5a346f5{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5a346fc{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5a346fd{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5a34706{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5a34707{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-d5a5a3e8'>
<caption class="Table Caption">
<p>First 10 cleaned Concordances of <em>walk</em> in the example text</p>
</caption>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-d5a346fd"><p class="cl-d5a32f82"><span class="cl-d5a32884">docname</span></p></td><td class="cl-d5a34707"><p class="cl-d5a32f82"><span class="cl-d5a32884">pre</span></p></td><td class="cl-d5a34707"><p class="cl-d5a32f82"><span class="cl-d5a32884">keyword</span></p></td><td class="cl-d5a34706"><p class="cl-d5a32f82"><span class="cl-d5a32884">post</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-d5a346de"><p class="cl-d5a32f82"><span class="cl-d5a3288e">text2</span></p></td><td class="cl-d5a346e8"><p class="cl-d5a32f82"><span class="cl-d5a3288e">out among the people that</span></p></td><td class="cl-d5a346e8"><p class="cl-d5a32f82"><span class="cl-d5a3288e">walk</span></p></td><td class="cl-d5a346e9"><p class="cl-d5a32f82"><span class="cl-d5a3288e">with their heads downward !</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5a346fc"><p class="cl-d5a32f82"><span class="cl-d5a3288e">text2</span></p></td><td class="cl-d5a346f4"><p class="cl-d5a32f82"><span class="cl-d5a3288e">to dream that she was</span></p></td><td class="cl-d5a346f4"><p class="cl-d5a32f82"><span class="cl-d5a3288e">walking</span></p></td><td class="cl-d5a346f5"><p class="cl-d5a32f82"><span class="cl-d5a3288e">hand in hand with dinah</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5a346de"><p class="cl-d5a32f82"><span class="cl-d5a3288e">text2</span></p></td><td class="cl-d5a346e8"><p class="cl-d5a32f82"><span class="cl-d5a3288e">trying every door , she</span></p></td><td class="cl-d5a346e8"><p class="cl-d5a32f82"><span class="cl-d5a3288e">walked</span></p></td><td class="cl-d5a346e9"><p class="cl-d5a32f82"><span class="cl-d5a3288e">sadly down the middle ,</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5a346fc"><p class="cl-d5a32f82"><span class="cl-d5a3288e">text3</span></p></td><td class="cl-d5a346f4"><p class="cl-d5a32f82"><span class="cl-d5a3288e">" or perhaps they won't</span></p></td><td class="cl-d5a346f4"><p class="cl-d5a32f82"><span class="cl-d5a3288e">walk</span></p></td><td class="cl-d5a346f5"><p class="cl-d5a32f82"><span class="cl-d5a3288e">the way i want to</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5a346de"><p class="cl-d5a32f82"><span class="cl-d5a3288e">text4</span></p></td><td class="cl-d5a346e8"><p class="cl-d5a32f82"><span class="cl-d5a3288e">mouse , getting up and</span></p></td><td class="cl-d5a346e8"><p class="cl-d5a32f82"><span class="cl-d5a3288e">walking</span></p></td><td class="cl-d5a346e9"><p class="cl-d5a32f82"><span class="cl-d5a3288e">away . " you insult</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5a346fc"><p class="cl-d5a32f82"><span class="cl-d5a3288e">text4</span></p></td><td class="cl-d5a346f4"><p class="cl-d5a32f82"><span class="cl-d5a3288e">its head impatiently , and</span></p></td><td class="cl-d5a346f4"><p class="cl-d5a32f82"><span class="cl-d5a3288e">walked</span></p></td><td class="cl-d5a346f5"><p class="cl-d5a32f82"><span class="cl-d5a3288e">a little quicker . "</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5a346de"><p class="cl-d5a32f82"><span class="cl-d5a3288e">text5</span></p></td><td class="cl-d5a346e8"><p class="cl-d5a32f82"><span class="cl-d5a3288e">and get ready for your</span></p></td><td class="cl-d5a346e8"><p class="cl-d5a32f82"><span class="cl-d5a3288e">walk</span></p></td><td class="cl-d5a346e9"><p class="cl-d5a32f82"><span class="cl-d5a3288e">! ' ' coming in</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5a346fc"><p class="cl-d5a32f82"><span class="cl-d5a3288e">text7</span></p></td><td class="cl-d5a346f4"><p class="cl-d5a32f82"><span class="cl-d5a3288e">, " if you only</span></p></td><td class="cl-d5a346f4"><p class="cl-d5a32f82"><span class="cl-d5a3288e">walk</span></p></td><td class="cl-d5a346f5"><p class="cl-d5a32f82"><span class="cl-d5a3288e">long enough . " alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5a346de"><p class="cl-d5a32f82"><span class="cl-d5a3288e">text7</span></p></td><td class="cl-d5a346e8"><p class="cl-d5a32f82"><span class="cl-d5a3288e">a minute or two she</span></p></td><td class="cl-d5a346e8"><p class="cl-d5a32f82"><span class="cl-d5a3288e">walked</span></p></td><td class="cl-d5a346e9"><p class="cl-d5a32f82"><span class="cl-d5a3288e">on in the direction in</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5a346f2"><p class="cl-d5a32f82"><span class="cl-d5a3288e">text7</span></p></td><td class="cl-d5a346ea"><p class="cl-d5a32f82"><span class="cl-d5a3288e">high : even then she</span></p></td><td class="cl-d5a346ea"><p class="cl-d5a32f82"><span class="cl-d5a3288e">walked</span></p></td><td class="cl-d5a346f3"><p class="cl-d5a32f82"><span class="cl-d5a3288e">up towards it rather timidly</span></p></td></tr></tbody></table></div></template>
<div class="flextable-shadow-host" id="890eb484-f2d8-4a70-9068-11af15767a4a"></div>
<script>
var dest = document.getElementById("890eb484-f2d8-4a70-9068-11af15767a4a");
var template = document.getElementById("b89c10e2-7fe4-4550-907c-e367b24d522b");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>When search for expressions that represent phrase and that consists out of several elements such as <em>poor alice</em>, we also need to specify that we are looking for a phrase in the pattern argument.</p>
<pre class="r"><code># create kwic
kwic_pooralice &lt;- quanteda::kwic(x = text_chapters, 
                          pattern = quanteda::phrase(&quot;poor alice&quot;),
                          window = 5) %&gt;%
  # convert into a data frame
  as.data.frame() %&gt;%
  # remove superfluous columns
  dplyr::select(-to, -from, -pattern)</code></pre>
<template id="64e084b9-5b11-4dc0-9b14-660d188b6745"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-d5b35e5c{table-layout:auto;width:95%;}.cl-d5b0b4d6{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-d5b0b4e0{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-d5b0bc06{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-d5b0ce62{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5b0ce6c{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5b0ce6d{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5b0ce76{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5b0ce77{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5b0ce78{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5b0ce80{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5b0ce81{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5b0ce8a{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5b0ce8b{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5b0ce8c{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5b0ce94{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-d5b35e5c'>
<caption class="Table Caption">
<p>First cleaned concordances of the phrase <em>poor alice</em> in the example text</p>
</caption>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-d5b0ce8b"><p class="cl-d5b0bc06"><span class="cl-d5b0b4d6">docname</span></p></td><td class="cl-d5b0ce8c"><p class="cl-d5b0bc06"><span class="cl-d5b0b4d6">pre</span></p></td><td class="cl-d5b0ce8c"><p class="cl-d5b0bc06"><span class="cl-d5b0b4d6">keyword</span></p></td><td class="cl-d5b0ce94"><p class="cl-d5b0bc06"><span class="cl-d5b0b4d6">post</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-d5b0ce6c"><p class="cl-d5b0bc06"><span class="cl-d5b0b4e0">text2</span></p></td><td class="cl-d5b0ce62"><p class="cl-d5b0bc06"><span class="cl-d5b0b4e0">go through , " thought</span></p></td><td class="cl-d5b0ce62"><p class="cl-d5b0bc06"><span class="cl-d5b0b4e0">poor alice</span></p></td><td class="cl-d5b0ce6d"><p class="cl-d5b0bc06"><span class="cl-d5b0b4e0">, " it would be</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5b0ce78"><p class="cl-d5b0bc06"><span class="cl-d5b0b4e0">text2</span></p></td><td class="cl-d5b0ce77"><p class="cl-d5b0bc06"><span class="cl-d5b0b4e0">; but , alas for</span></p></td><td class="cl-d5b0ce77"><p class="cl-d5b0bc06"><span class="cl-d5b0b4e0">poor alice</span></p></td><td class="cl-d5b0ce76"><p class="cl-d5b0bc06"><span class="cl-d5b0b4e0">! when she got to</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5b0ce6c"><p class="cl-d5b0bc06"><span class="cl-d5b0b4e0">text2</span></p></td><td class="cl-d5b0ce62"><p class="cl-d5b0bc06"><span class="cl-d5b0b4e0">use now , " thought</span></p></td><td class="cl-d5b0ce62"><p class="cl-d5b0bc06"><span class="cl-d5b0b4e0">poor alice</span></p></td><td class="cl-d5b0ce6d"><p class="cl-d5b0bc06"><span class="cl-d5b0b4e0">, " to pretend to</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5b0ce78"><p class="cl-d5b0bc06"><span class="cl-d5b0b4e0">text3</span></p></td><td class="cl-d5b0ce77"><p class="cl-d5b0bc06"><span class="cl-d5b0b4e0">to the garden door .</span></p></td><td class="cl-d5b0ce77"><p class="cl-d5b0bc06"><span class="cl-d5b0b4e0">poor alice</span></p></td><td class="cl-d5b0ce76"><p class="cl-d5b0bc06"><span class="cl-d5b0b4e0">! it was as much</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5b0ce6c"><p class="cl-d5b0bc06"><span class="cl-d5b0b4e0">text3</span></p></td><td class="cl-d5b0ce62"><p class="cl-d5b0bc06"><span class="cl-d5b0b4e0">right words , " said</span></p></td><td class="cl-d5b0ce62"><p class="cl-d5b0bc06"><span class="cl-d5b0b4e0">poor alice</span></p></td><td class="cl-d5b0ce6d"><p class="cl-d5b0bc06"><span class="cl-d5b0b4e0">, and her eyes filled</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5b0ce8a"><p class="cl-d5b0bc06"><span class="cl-d5b0b4e0">text4</span></p></td><td class="cl-d5b0ce81"><p class="cl-d5b0bc06"><span class="cl-d5b0b4e0">mean it ! " pleaded</span></p></td><td class="cl-d5b0ce81"><p class="cl-d5b0bc06"><span class="cl-d5b0b4e0">poor alice</span></p></td><td class="cl-d5b0ce80"><p class="cl-d5b0bc06"><span class="cl-d5b0b4e0">. " but you're so</span></p></td></tr></tbody></table></div></template>
<div class="flextable-shadow-host" id="a7dcd2e0-987c-4cdb-b4f7-8e1b9ea38541"></div>
<script>
var dest = document.getElementById("a7dcd2e0-987c-4cdb-b4f7-8e1b9ea38541");
var template = document.getElementById("64e084b9-5b11-4dc0-9b14-660d188b6745");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>We could now continue and analyze how the phrase <em>poor alice</em> is used or perform similar analyses.</p>
</div>
<div id="word-frequency" class="section level1 unnumbered" number="">
<h1 class="unnumbered" number="">Word Frequency</h1>
<p>Almost all methods used in text analytics rely on frequency information. Thus, fending out out frequent words are in a text is a fundamental technique in text analytics. In fact, frequency information lies at the very core of Text Analysis. Such frequency information often comes in the form of word frequency lists, i.e. lists of word forms and their frequency in a given text or collection of texts.</p>
<p>As extracting word frequency lists is very important, we will now We will now extract a frequency list from a corpus.</p>
<p>In a first step, we load a corpus, convert everything to lower case, remove non-word symbols (including punctuation), and split the corpus data into individual words.</p>
<pre class="r"><code># load and process corpus
text_words &lt;- text  %&gt;%
  # convert everything to lower case
  tolower() %&gt;%
  # remove non-word characters
  str_replace_all(&quot;[^[:alpha:][:space:]]*&quot;, &quot;&quot;)  %&gt;%
  tm::removePunctuation() %&gt;%
  stringr::str_squish() %&gt;%
  stringr::str_split(&quot; &quot;) %&gt;%
  unlist()</code></pre>
<template id="c28b321c-3b6c-42c3-a923-e60ae69fdcdd"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-d5bc20aa{table-layout:auto;width:50%;}.cl-d5b9f0c8{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-d5b9f0d2{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-d5b9f7f8{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-d5ba0928{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5ba0929{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5ba0932{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5ba0933{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-d5bc20aa'>
<caption class="Table Caption">
<p>First 15 words in the example text</p>
</caption>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-d5ba0933"><p class="cl-d5b9f7f8"><span class="cl-d5b9f0c8">.</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-d5ba0928"><p class="cl-d5b9f7f8"><span class="cl-d5b9f0d2">alices</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5ba0929"><p class="cl-d5b9f7f8"><span class="cl-d5b9f0d2">adventures</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5ba0928"><p class="cl-d5b9f7f8"><span class="cl-d5b9f0d2">in</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5ba0929"><p class="cl-d5b9f7f8"><span class="cl-d5b9f0d2">wonderland</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5ba0928"><p class="cl-d5b9f7f8"><span class="cl-d5b9f0d2">by</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5ba0929"><p class="cl-d5b9f7f8"><span class="cl-d5b9f0d2">lewis</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5ba0928"><p class="cl-d5b9f7f8"><span class="cl-d5b9f0d2">carroll</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5ba0929"><p class="cl-d5b9f7f8"><span class="cl-d5b9f0d2">chapter</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5ba0928"><p class="cl-d5b9f7f8"><span class="cl-d5b9f0d2">i</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5ba0929"><p class="cl-d5b9f7f8"><span class="cl-d5b9f0d2">down</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5ba0928"><p class="cl-d5b9f7f8"><span class="cl-d5b9f0d2">the</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5ba0929"><p class="cl-d5b9f7f8"><span class="cl-d5b9f0d2">rabbithole</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5ba0928"><p class="cl-d5b9f7f8"><span class="cl-d5b9f0d2">alice</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5ba0929"><p class="cl-d5b9f7f8"><span class="cl-d5b9f0d2">was</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5ba0932"><p class="cl-d5b9f7f8"><span class="cl-d5b9f0d2">beginning</span></p></td></tr></tbody></table></div></template>
<div class="flextable-shadow-host" id="634bd7cb-6fb3-4525-b7e6-93f6018f0332"></div>
<script>
var dest = document.getElementById("634bd7cb-6fb3-4525-b7e6-93f6018f0332");
var template = document.getElementById("c28b321c-3b6c-42c3-a923-e60ae69fdcdd");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>Now that we have a vector of words, we can easily create a table representing a word frequency list (as shown below).</p>
<pre class="r"><code># create table
wfreq &lt;- text_words %&gt;%
  table() %&gt;%
  as.data.frame() %&gt;%
  arrange(desc(Freq)) %&gt;%
  dplyr::rename(word = 1,
                frequency = 2)</code></pre>
<template id="08959580-cf52-4b69-be3b-2afd7e3c506b"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-d5c62c94{table-layout:auto;width:50%;}.cl-d5c3bc2a{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-d5c3bc34{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-d5c3c49a{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-d5c3c49b{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-d5c3dca0{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5c3dcaa{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5c3dcab{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5c3dcac{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5c3dcb4{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5c3dcb5{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5c3dcb6{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5c3dcb7{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-d5c62c94'>
<caption class="Table Caption">
<p>Top 15 words in the example text by frequency.</p>
</caption>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-d5c3dcb7"><p class="cl-d5c3c49a"><span class="cl-d5c3bc2a">word</span></p></td><td class="cl-d5c3dcb6"><p class="cl-d5c3c49b"><span class="cl-d5c3bc2a">frequency</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-d5c3dcaa"><p class="cl-d5c3c49a"><span class="cl-d5c3bc34">the</span></p></td><td class="cl-d5c3dca0"><p class="cl-d5c3c49b"><span class="cl-d5c3bc34">1,630</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5c3dcac"><p class="cl-d5c3c49a"><span class="cl-d5c3bc34">and</span></p></td><td class="cl-d5c3dcab"><p class="cl-d5c3c49b"><span class="cl-d5c3bc34">844</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5c3dcaa"><p class="cl-d5c3c49a"><span class="cl-d5c3bc34">to</span></p></td><td class="cl-d5c3dca0"><p class="cl-d5c3c49b"><span class="cl-d5c3bc34">721</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5c3dcac"><p class="cl-d5c3c49a"><span class="cl-d5c3bc34">a</span></p></td><td class="cl-d5c3dcab"><p class="cl-d5c3c49b"><span class="cl-d5c3bc34">627</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5c3dcaa"><p class="cl-d5c3c49a"><span class="cl-d5c3bc34">she</span></p></td><td class="cl-d5c3dca0"><p class="cl-d5c3c49b"><span class="cl-d5c3bc34">537</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5c3dcac"><p class="cl-d5c3c49a"><span class="cl-d5c3bc34">it</span></p></td><td class="cl-d5c3dcab"><p class="cl-d5c3c49b"><span class="cl-d5c3bc34">526</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5c3dcaa"><p class="cl-d5c3c49a"><span class="cl-d5c3bc34">of</span></p></td><td class="cl-d5c3dca0"><p class="cl-d5c3c49b"><span class="cl-d5c3bc34">508</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5c3dcac"><p class="cl-d5c3c49a"><span class="cl-d5c3bc34">said</span></p></td><td class="cl-d5c3dcab"><p class="cl-d5c3c49b"><span class="cl-d5c3bc34">462</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5c3dcaa"><p class="cl-d5c3c49a"><span class="cl-d5c3bc34">i</span></p></td><td class="cl-d5c3dca0"><p class="cl-d5c3c49b"><span class="cl-d5c3bc34">400</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5c3dcac"><p class="cl-d5c3c49a"><span class="cl-d5c3bc34">alice</span></p></td><td class="cl-d5c3dcab"><p class="cl-d5c3c49b"><span class="cl-d5c3bc34">385</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5c3dcaa"><p class="cl-d5c3c49a"><span class="cl-d5c3bc34">in</span></p></td><td class="cl-d5c3dca0"><p class="cl-d5c3c49b"><span class="cl-d5c3bc34">366</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5c3dcac"><p class="cl-d5c3c49a"><span class="cl-d5c3bc34">you</span></p></td><td class="cl-d5c3dcab"><p class="cl-d5c3c49b"><span class="cl-d5c3bc34">360</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5c3dcaa"><p class="cl-d5c3c49a"><span class="cl-d5c3bc34">was</span></p></td><td class="cl-d5c3dca0"><p class="cl-d5c3c49b"><span class="cl-d5c3bc34">357</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5c3dcac"><p class="cl-d5c3c49a"><span class="cl-d5c3bc34">that</span></p></td><td class="cl-d5c3dcab"><p class="cl-d5c3c49b"><span class="cl-d5c3bc34">276</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5c3dcb5"><p class="cl-d5c3c49a"><span class="cl-d5c3bc34">as</span></p></td><td class="cl-d5c3dcb4"><p class="cl-d5c3c49b"><span class="cl-d5c3bc34">262</span></p></td></tr></tbody></table></div></template>
<div class="flextable-shadow-host" id="443998b0-78ee-4446-a3be-152e7d05df77"></div>
<script>
var dest = document.getElementById("443998b0-78ee-4446-a3be-152e7d05df77");
var template = document.getElementById("08959580-cf52-4b69-be3b-2afd7e3c506b");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>The most frequent words are all function words which are often not meaningful or useful for an analysis. Thus, we now remove these function words (also called <em>stopwords</em>) from the frequency list and inspect the list without stopwords.</p>
<pre class="r"><code># create table wo stopwords
wfreq_wostop &lt;- wfreq %&gt;%
  anti_join(tidytext::stop_words, by = &quot;word&quot;) %&gt;%
  dplyr::filter(word != &quot;&quot;)</code></pre>
<template id="9bebf0a4-bba2-4e97-852d-21b9c0ffc98a"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-d5ced27c{table-layout:auto;width:50%;}.cl-d5cc6e06{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-d5cc6e10{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-d5cc752c{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-d5cc7536{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-d5cc89fe{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5cc8a08{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5cc8a09{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5cc8a12{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5cc8a13{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5cc8a14{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5cc8a1c{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d5cc8a1d{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-d5ced27c'>
<caption class="Table Caption">
<p>Top 15 lexical words in the example text by frequency.</p>
</caption>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-d5cc8a1d"><p class="cl-d5cc752c"><span class="cl-d5cc6e06">word</span></p></td><td class="cl-d5cc8a1c"><p class="cl-d5cc7536"><span class="cl-d5cc6e06">frequency</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-d5cc8a08"><p class="cl-d5cc752c"><span class="cl-d5cc6e10">alice</span></p></td><td class="cl-d5cc89fe"><p class="cl-d5cc7536"><span class="cl-d5cc6e10">385</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5cc8a12"><p class="cl-d5cc752c"><span class="cl-d5cc6e10">queen</span></p></td><td class="cl-d5cc8a09"><p class="cl-d5cc7536"><span class="cl-d5cc6e10">68</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5cc8a08"><p class="cl-d5cc752c"><span class="cl-d5cc6e10">time</span></p></td><td class="cl-d5cc89fe"><p class="cl-d5cc7536"><span class="cl-d5cc6e10">68</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5cc8a12"><p class="cl-d5cc752c"><span class="cl-d5cc6e10">king</span></p></td><td class="cl-d5cc8a09"><p class="cl-d5cc7536"><span class="cl-d5cc6e10">61</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5cc8a08"><p class="cl-d5cc752c"><span class="cl-d5cc6e10">dont</span></p></td><td class="cl-d5cc89fe"><p class="cl-d5cc7536"><span class="cl-d5cc6e10">60</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5cc8a12"><p class="cl-d5cc752c"><span class="cl-d5cc6e10">im</span></p></td><td class="cl-d5cc8a09"><p class="cl-d5cc7536"><span class="cl-d5cc6e10">57</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5cc8a08"><p class="cl-d5cc752c"><span class="cl-d5cc6e10">mock</span></p></td><td class="cl-d5cc89fe"><p class="cl-d5cc7536"><span class="cl-d5cc6e10">56</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5cc8a12"><p class="cl-d5cc752c"><span class="cl-d5cc6e10">turtle</span></p></td><td class="cl-d5cc8a09"><p class="cl-d5cc7536"><span class="cl-d5cc6e10">56</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5cc8a08"><p class="cl-d5cc752c"><span class="cl-d5cc6e10">gryphon</span></p></td><td class="cl-d5cc89fe"><p class="cl-d5cc7536"><span class="cl-d5cc6e10">55</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5cc8a12"><p class="cl-d5cc752c"><span class="cl-d5cc6e10">hatter</span></p></td><td class="cl-d5cc8a09"><p class="cl-d5cc7536"><span class="cl-d5cc6e10">55</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5cc8a08"><p class="cl-d5cc752c"><span class="cl-d5cc6e10">head</span></p></td><td class="cl-d5cc89fe"><p class="cl-d5cc7536"><span class="cl-d5cc6e10">48</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5cc8a12"><p class="cl-d5cc752c"><span class="cl-d5cc6e10">voice</span></p></td><td class="cl-d5cc8a09"><p class="cl-d5cc7536"><span class="cl-d5cc6e10">47</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5cc8a08"><p class="cl-d5cc752c"><span class="cl-d5cc6e10">looked</span></p></td><td class="cl-d5cc89fe"><p class="cl-d5cc7536"><span class="cl-d5cc6e10">45</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5cc8a12"><p class="cl-d5cc752c"><span class="cl-d5cc6e10">rabbit</span></p></td><td class="cl-d5cc8a09"><p class="cl-d5cc7536"><span class="cl-d5cc6e10">43</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d5cc8a14"><p class="cl-d5cc752c"><span class="cl-d5cc6e10">round</span></p></td><td class="cl-d5cc8a13"><p class="cl-d5cc7536"><span class="cl-d5cc6e10">41</span></p></td></tr></tbody></table></div></template>
<div class="flextable-shadow-host" id="a7c20d7c-f566-451d-9443-216655f9c958"></div>
<script>
var dest = document.getElementById("a7c20d7c-f566-451d-9443-216655f9c958");
var template = document.getElementById("9bebf0a4-bba2-4e97-852d-21b9c0ffc98a");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>Such word frequency lists can be visualized in various ways. The most common way to visualize word frequency lists is in the form of bargraphs.</p>
<pre class="r"><code>wfreq_wostop %&gt;%
  head(10) %&gt;%
  ggplot(aes(x = reorder(word, -frequency, mean), y = frequency)) +
  geom_bar(stat = &quot;identity&quot;) +
  labs(title = &quot;10 most frequent non-stop words \nin the example text&quot;,
       x = &quot;&quot;) +
  theme(axis.text.x = element_text(angle = 45, size = 12, hjust = 1))</code></pre>
<p><img src="textanalysis_files/figure-html/wf6-1.png" width="672" /></p>
<div id="wordclouds" class="section level2 unnumbered" number="">
<h2 class="unnumbered" number="">Wordclouds</h2>
<p>Alternatively, word frequency lists can be visualized, although less informative, as word clouds.</p>
<pre class="r"><code># create wordcloud
text %&gt;%
  quanteda::corpus() %&gt;%
  quanteda::tokens(remove_punct = TRUE) %&gt;%
  quanteda::tokens_remove(stopwords(&quot;english&quot;)) %&gt;%
  quanteda::dfm() %&gt;%
  quanteda.textplots::textplot_wordcloud()</code></pre>
<p><img src="textanalysis_files/figure-html/wc1-1.png" width="672" /></p>
<p>Another variant of word clouds, so-called <em>comparison clouds</em>, Word lists can be used to determine differences between texts. For instance, we can load different texts and check whether they differ with respect to word frequencies. To show this, we load Herman Melville’s <em>Moby Dick</em>, George Orwell’s <em>1984</em>, and we also use Darwin’s <em>Origin</em>.</p>
<p>In a first step, we load these texts and collapse them into single documents.</p>
<pre class="r"><code># load data
orwell_sep &lt;- base::readRDS(url(&quot;https://slcladal.github.io/data/orwell.rda&quot;, &quot;rb&quot;))
orwell &lt;- orwell_sep %&gt;%
  paste0(collapse = &quot; &quot;)
melville_sep &lt;- base::readRDS(url(&quot;https://slcladal.github.io/data/melville.rda&quot;, &quot;rb&quot;))
melville &lt;- melville_sep %&gt;%
  paste0(collapse = &quot; &quot;)
darwin_sep &lt;- base::readRDS(url(&quot;https://slcladal.github.io/data/melville.rda&quot;, &quot;rb&quot;))
darwin &lt;- darwin_sep %&gt;%
  paste0(collapse = &quot; &quot;)</code></pre>
<p>Now, we generate a corpus object from these texts and create a variable with the author name.</p>
<pre class="r"><code>corp_dom &lt;- quanteda::corpus(c(darwin, orwell, melville)) 
attr(corp_dom, &quot;docvars&quot;)$Author = c(&quot;Darwin&quot;, &quot;Orwell&quot;, &quot;Melville&quot;)</code></pre>
<p>Now, we can remove so-called <em>stopwords</em> (non-lexical function words) and punctuation and generate the comparison cloud.</p>
<pre class="r"><code>corp_dom  %&gt;%
    quanteda::tokens(remove_punct = TRUE) %&gt;%
    quanteda::tokens_remove(stopwords(&quot;english&quot;)) %&gt;%
    quanteda::dfm() %&gt;%
    quanteda::dfm_group(groups = corp_dom$Author) %&gt;%
    quanteda::dfm_trim(min_termfreq = 200, verbose = FALSE) %&gt;%
    quanteda.textplots::textplot_wordcloud(comparison = TRUE)</code></pre>
<p><img src="textanalysis_files/figure-html/wc4-1.png" width="672" /></p>
</div>
<div id="frequency-changes" class="section level2 unnumbered" number="">
<h2 class="unnumbered" number="">Frequency changes</h2>
<p>We can also investigate the use of the term <em>alice</em> across chapters of the example text. In a first step, we extract the number of words in each chapter.</p>
<pre class="r"><code># extract number of words per chapter
Words &lt;- text_chapters %&gt;%
  stringr::str_split(&quot; &quot;)  %&gt;%
  lengths()
# inspect data
Words</code></pre>
<pre><code>##  [1]    8 2364 2125 1765 2616 2339 2609 2307 2487 2272 2058 1886 2153</code></pre>
<p>Next, we extract the number of matches in each chapter.</p>
<pre class="r"><code># extract number of matches per chapter
Matches &lt;- text_chapters %&gt;%
  stringr::str_count(&quot;alice&quot;)
# inspect the number of matches per chapter
Matches</code></pre>
<pre><code>##  [1]  1 28 26 23 31 35 43 51 39 52 30 16 23</code></pre>
<p>Now, we extract the names of the chapters and create a table with the chapter names and the relative frequency of matches per 1,000 words.</p>
<pre class="r"><code># extract chapters
Chapters &lt;- paste0(&quot;chapter &quot;, 0:(length(text_chapters)-1))
Chapters</code></pre>
<pre><code>##  [1] &quot;chapter 0&quot;  &quot;chapter 1&quot;  &quot;chapter 2&quot;  &quot;chapter 3&quot;  &quot;chapter 4&quot; 
##  [6] &quot;chapter 5&quot;  &quot;chapter 6&quot;  &quot;chapter 7&quot;  &quot;chapter 8&quot;  &quot;chapter 9&quot; 
## [11] &quot;chapter 10&quot; &quot;chapter 11&quot; &quot;chapter 12&quot;</code></pre>
<pre class="r"><code># create table of results
tb &lt;- data.frame(Chapters, Matches, Words) %&gt;%
  dplyr::mutate(Frequency = round(Matches/Words*1000, 2))</code></pre>
<template id="b75361af-060a-4868-975d-6c1ad3b7c729"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-e1b6298c{table-layout:auto;width:50%;}.cl-e1b3a81a{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e1b3a824{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e1b3afea{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e1b3aff4{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e1b3c9ee{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1b3c9f8{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1b3ca02{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1b3ca0c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1b3ca0d{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1b3ca16{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1b3ca17{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1b3ca18{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1b3ca2a{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1b3ca2b{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1b3ca2c{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e1b3ca34{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-e1b6298c'>
<caption class="Table Caption">
<p>Words and their (relative) freqeuncy across in the example text by frequency.</p>
</caption>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-e1b3ca2b"><p class="cl-e1b3afea"><span class="cl-e1b3a81a">Chapters</span></p></td><td class="cl-e1b3ca34"><p class="cl-e1b3aff4"><span class="cl-e1b3a81a">Matches</span></p></td><td class="cl-e1b3ca34"><p class="cl-e1b3aff4"><span class="cl-e1b3a81a">Words</span></p></td><td class="cl-e1b3ca2c"><p class="cl-e1b3aff4"><span class="cl-e1b3a81a">Frequency</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-e1b3ca02"><p class="cl-e1b3afea"><span class="cl-e1b3a824">chapter 0</span></p></td><td class="cl-e1b3c9ee"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">1</span></p></td><td class="cl-e1b3c9ee"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">8</span></p></td><td class="cl-e1b3c9f8"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">125.00</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1b3ca0d"><p class="cl-e1b3afea"><span class="cl-e1b3a824">chapter 1</span></p></td><td class="cl-e1b3ca0c"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">28</span></p></td><td class="cl-e1b3ca0c"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">2,364</span></p></td><td class="cl-e1b3ca16"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">11.84</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1b3ca02"><p class="cl-e1b3afea"><span class="cl-e1b3a824">chapter 2</span></p></td><td class="cl-e1b3c9ee"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">26</span></p></td><td class="cl-e1b3c9ee"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">2,125</span></p></td><td class="cl-e1b3c9f8"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">12.24</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1b3ca0d"><p class="cl-e1b3afea"><span class="cl-e1b3a824">chapter 3</span></p></td><td class="cl-e1b3ca0c"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">23</span></p></td><td class="cl-e1b3ca0c"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">1,765</span></p></td><td class="cl-e1b3ca16"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">13.03</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1b3ca02"><p class="cl-e1b3afea"><span class="cl-e1b3a824">chapter 4</span></p></td><td class="cl-e1b3c9ee"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">31</span></p></td><td class="cl-e1b3c9ee"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">2,616</span></p></td><td class="cl-e1b3c9f8"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">11.85</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1b3ca0d"><p class="cl-e1b3afea"><span class="cl-e1b3a824">chapter 5</span></p></td><td class="cl-e1b3ca0c"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">35</span></p></td><td class="cl-e1b3ca0c"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">2,339</span></p></td><td class="cl-e1b3ca16"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">14.96</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1b3ca02"><p class="cl-e1b3afea"><span class="cl-e1b3a824">chapter 6</span></p></td><td class="cl-e1b3c9ee"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">43</span></p></td><td class="cl-e1b3c9ee"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">2,609</span></p></td><td class="cl-e1b3c9f8"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">16.48</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1b3ca0d"><p class="cl-e1b3afea"><span class="cl-e1b3a824">chapter 7</span></p></td><td class="cl-e1b3ca0c"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">51</span></p></td><td class="cl-e1b3ca0c"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">2,307</span></p></td><td class="cl-e1b3ca16"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">22.11</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1b3ca02"><p class="cl-e1b3afea"><span class="cl-e1b3a824">chapter 8</span></p></td><td class="cl-e1b3c9ee"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">39</span></p></td><td class="cl-e1b3c9ee"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">2,487</span></p></td><td class="cl-e1b3c9f8"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">15.68</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1b3ca0d"><p class="cl-e1b3afea"><span class="cl-e1b3a824">chapter 9</span></p></td><td class="cl-e1b3ca0c"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">52</span></p></td><td class="cl-e1b3ca0c"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">2,272</span></p></td><td class="cl-e1b3ca16"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">22.89</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1b3ca02"><p class="cl-e1b3afea"><span class="cl-e1b3a824">chapter 10</span></p></td><td class="cl-e1b3c9ee"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">30</span></p></td><td class="cl-e1b3c9ee"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">2,058</span></p></td><td class="cl-e1b3c9f8"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">14.58</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1b3ca0d"><p class="cl-e1b3afea"><span class="cl-e1b3a824">chapter 11</span></p></td><td class="cl-e1b3ca0c"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">16</span></p></td><td class="cl-e1b3ca0c"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">1,886</span></p></td><td class="cl-e1b3ca16"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">8.48</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e1b3ca17"><p class="cl-e1b3afea"><span class="cl-e1b3a824">chapter 12</span></p></td><td class="cl-e1b3ca2a"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">23</span></p></td><td class="cl-e1b3ca2a"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">2,153</span></p></td><td class="cl-e1b3ca18"><p class="cl-e1b3aff4"><span class="cl-e1b3a824">10.68</span></p></td></tr></tbody></table></div></template>
<div class="flextable-shadow-host" id="d8fc4412-9568-4667-b0f8-9353b4aaf432"></div>
<script>
var dest = document.getElementById("d8fc4412-9568-4667-b0f8-9353b4aaf432");
var template = document.getElementById("b75361af-060a-4868-975d-6c1ad3b7c729");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>We can now visualize the relative frequencies of our search word per chapter.</p>
<pre class="r"><code># create plot
ggplot(tb, aes(x = Chapters, y = Frequency, group = 1)) + 
  geom_smooth(color = &quot;purple&quot;) +
  geom_line(color = &quot;darkgray&quot;) +         
  guides(color=guide_legend(override.aes=list(fill=NA))) +
  theme_bw() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))+
  scale_y_continuous(name =&quot;Relative Frequency (per 1,000 words)&quot;)</code></pre>
<p><img src="textanalysis_files/figure-html/wf18-1.png" width="672" /></p>
</div>
<div id="dispersion-plots" class="section level2 unnumbered" number="">
<h2 class="unnumbered" number="">Dispersion plots</h2>
<p>To show when in a text or in a collection of texts certain terms occur, we can use <em>dispersion plots</em>. The <code>quanteda</code> package offers a very easy-to-use function <code>textplot_xray</code> to generate dispersion plots.</p>
<pre class="r"><code># add chapter names
names(text_chapters) &lt;- Chapters
# generate corpus from chapters
text_corpus &lt;- quanteda::corpus(text_chapters)
# generate dispersion plots
quanteda.textplots::textplot_xray(kwic(text_corpus, pattern = &quot;alice&quot;),
                                  kwic(text_corpus, pattern = &quot;hatter&quot;),
                                  sort = T)</code></pre>
<p><img src="textanalysis_files/figure-html/dp-1.png" width="672" /></p>
<p>We can modify the plot by saving it into an object and then use <code>ggplot</code> to modify it appearance.</p>
<pre class="r"><code># generate and save dispersion plots
dp &lt;- quanteda.textplots::textplot_xray(kwic(text_corpus, pattern = &quot;alice&quot;),
                                        kwic(text_corpus, pattern = &quot;cat&quot;))
# modify plot
dp + aes(color = keyword) + 
  scale_color_manual(values = c(&#39;red&#39;, &#39;blue&#39;)) +
  theme(legend.position = &quot;none&quot;)</code></pre>
<p><img src="textanalysis_files/figure-html/dp2-1.png" width="672" /></p>
</div>
<div id="over--and-underuse" class="section level2 unnumbered" number="">
<h2 class="unnumbered" number="">Over- and underuse</h2>
<p>Frequency information can also tell us something about the nature of a text. For instance, private dialogues will typically contain higher rates of second person pronouns compared with more format text types, such as, for instance, scripted monologues like speeches. For this reason, word frequency lists can be used in text classification and to determine the formality of texts.</p>
<p>As an example, below you find the number of the second person pronouns <em>you</em> and <em>your</em> and the number of all words except for these second person pronouns in private dialogues compared with scripted monologues in the Irish component of the <em>International Corpus of English</em> (ICE). In addition, the tables shows the percentage of second person pronouns in both text types to enable seeing whether private dialogues contain more of these second person pronouns than scripted monologues (i.e. speeches).</p>
<template id="aa2e4b48-58c1-407a-9fff-e39437f7464e"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-e253a518{table-layout:auto;width:50%;}.cl-e2514ac0{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e2514aca{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e25151be{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e2516226{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2516230{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2516231{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e251623a{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e251623b{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e251623c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2516244{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2516245{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e251624e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e251624f{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2516258{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2516259{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-e253a518'>
<caption class="Table Caption">
<p>Use of 2nd person pronouns (and all other words) in ICE Ireland.</p>
</caption>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-e251624f"><p class="cl-e25151be"><span class="cl-e2514ac0">.</span></p></td><td class="cl-e2516258"><p class="cl-e25151be"><span class="cl-e2514ac0">Private dialogues</span></p></td><td class="cl-e2516259"><p class="cl-e25151be"><span class="cl-e2514ac0">Scripted monologues</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-e2516231"><p class="cl-e25151be"><span class="cl-e2514aca">you, your</span></p></td><td class="cl-e2516226"><p class="cl-e25151be"><span class="cl-e2514aca">6761</span></p></td><td class="cl-e2516230"><p class="cl-e25151be"><span class="cl-e2514aca">659</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e251623c"><p class="cl-e25151be"><span class="cl-e2514aca">Other words</span></p></td><td class="cl-e251623b"><p class="cl-e25151be"><span class="cl-e2514aca">259625</span></p></td><td class="cl-e251623a"><p class="cl-e25151be"><span class="cl-e2514aca">105295</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e2516245"><p class="cl-e25151be"><span class="cl-e2514aca">Percent</span></p></td><td class="cl-e251624e"><p class="cl-e25151be"><span class="cl-e2514aca">2.60</span></p></td><td class="cl-e2516244"><p class="cl-e25151be"><span class="cl-e2514aca">0.63</span></p></td></tr></tbody></table></div></template>
<div class="flextable-shadow-host" id="2786546a-98fd-4a5e-b0ae-63daf62e07bf"></div>
<script>
var dest = document.getElementById("2786546a-98fd-4a5e-b0ae-63daf62e07bf");
var template = document.getElementById("aa2e4b48-58c1-407a-9fff-e39437f7464e");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>This simple example shows that second person pronouns make up 2.6 percent of all words that are used in private dialogues while they only amount to 0.63 percent in scripted speeches. A handy way to present such differences visually are association and mosaic plots.</p>
<pre class="r"><code>d &lt;- matrix(c(6761, 659, 259625, 105295), nrow = 2, byrow = T)
colnames(d) &lt;- c(&quot;D&quot;, &quot;M&quot;)
rownames(d) &lt;- c(&quot;you, your&quot;, &quot;Other words&quot;)
assocplot(d)</code></pre>
<p><img src="textanalysis_files/figure-html/ou2-1.png" width="672" /></p>
<p>Bars above the dashed line indicate relative overuse while bars below the line suggest relative under-use. Therefore, the association plot indicates under-use of <em>you</em> and <em>your</em> and overuse of <em>other words</em> in monologues while the opposite trends holds true for dialogues, i.e. overuse of <em>you</em> and <em>your</em> and under-use of <em>Other words</em>.</p>
</div>
</div>
<div id="n-grams-collocations-and-keyness" class="section level1 unnumbered" number="">
<h1 class="unnumbered" number="">N-grams, Collocations, and Keyness</h1>
<p>Collocation refers to the co-occurrence of words. A typical example of a collocation is <em>Merry Christmas</em> because the words merry and Christmas occur together more frequently together than would be expected by chance, if words were just randomly stringed together.</p>
<p>N-grams are related to collocates in that they represent words that occur together (bi-grams are two words that occur together, tri-grams three words and so on). Fortunately, creating N-gram lists is very easy. We will use the example text to create a bi-gram list. We can simply take each word and combine it with the following word.</p>
<pre class="r"><code># create data frame
text_bigrams &lt;- data.frame(text_words[1:length(text_words)-1], 
                       text_words[2:length(text_words)]) %&gt;%
  dplyr::rename(Word1 = 1,
                Word2 = 2) %&gt;%
  dplyr::mutate(Bigram = paste0(Word1, &quot; &quot;, Word2)) %&gt;%
  dplyr::group_by(Bigram) %&gt;%
  dplyr::summarise(Frequency = n()) %&gt;%
  dplyr::arrange(-Frequency)</code></pre>
<template id="d9b407c2-3022-423f-829f-7ca7503a1e7c"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-e27e132a{table-layout:auto;width:50%;}.cl-e27bb1ca{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e27bb1d4{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e27bb918{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e27bb919{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e27bd13c{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e27bd146{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e27bd147{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e27bd150{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e27bd151{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e27bd15a{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e27bd164{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e27bd165{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-e27e132a'>
<caption class="Table Caption">
<p>Top 10 most frequent bigrams and their (relative) freqeuncy in the example text</p>
</caption>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-e27bd164"><p class="cl-e27bb918"><span class="cl-e27bb1ca">Bigram</span></p></td><td class="cl-e27bd165"><p class="cl-e27bb919"><span class="cl-e27bb1ca">Frequency</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-e27bd13c"><p class="cl-e27bb918"><span class="cl-e27bb1d4">said the</span></p></td><td class="cl-e27bd146"><p class="cl-e27bb919"><span class="cl-e27bb1d4">210</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e27bd147"><p class="cl-e27bb918"><span class="cl-e27bb1d4">of the</span></p></td><td class="cl-e27bd150"><p class="cl-e27bb919"><span class="cl-e27bb1d4">130</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e27bd13c"><p class="cl-e27bb918"><span class="cl-e27bb1d4">said alice</span></p></td><td class="cl-e27bd146"><p class="cl-e27bb919"><span class="cl-e27bb1d4">115</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e27bd147"><p class="cl-e27bb918"><span class="cl-e27bb1d4">in a</span></p></td><td class="cl-e27bd150"><p class="cl-e27bb919"><span class="cl-e27bb1d4">97</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e27bd13c"><p class="cl-e27bb918"><span class="cl-e27bb1d4">and the</span></p></td><td class="cl-e27bd146"><p class="cl-e27bb919"><span class="cl-e27bb1d4">80</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e27bd147"><p class="cl-e27bb918"><span class="cl-e27bb1d4">in the</span></p></td><td class="cl-e27bd150"><p class="cl-e27bb919"><span class="cl-e27bb1d4">79</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e27bd13c"><p class="cl-e27bb918"><span class="cl-e27bb1d4">it was</span></p></td><td class="cl-e27bd146"><p class="cl-e27bb919"><span class="cl-e27bb1d4">74</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e27bd147"><p class="cl-e27bb918"><span class="cl-e27bb1d4">to the</span></p></td><td class="cl-e27bd150"><p class="cl-e27bb919"><span class="cl-e27bb1d4">69</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e27bd13c"><p class="cl-e27bb918"><span class="cl-e27bb1d4">the queen</span></p></td><td class="cl-e27bd146"><p class="cl-e27bb919"><span class="cl-e27bb1d4">65</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e27bd147"><p class="cl-e27bb918"><span class="cl-e27bb1d4">as she</span></p></td><td class="cl-e27bd150"><p class="cl-e27bb919"><span class="cl-e27bb1d4">61</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e27bd13c"><p class="cl-e27bb918"><span class="cl-e27bb1d4">at the</span></p></td><td class="cl-e27bd146"><p class="cl-e27bb919"><span class="cl-e27bb1d4">60</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e27bd147"><p class="cl-e27bb918"><span class="cl-e27bb1d4">she had</span></p></td><td class="cl-e27bd150"><p class="cl-e27bb919"><span class="cl-e27bb1d4">60</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e27bd13c"><p class="cl-e27bb918"><span class="cl-e27bb1d4">the king</span></p></td><td class="cl-e27bd146"><p class="cl-e27bb919"><span class="cl-e27bb1d4">60</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e27bd147"><p class="cl-e27bb918"><span class="cl-e27bb1d4">a little</span></p></td><td class="cl-e27bd150"><p class="cl-e27bb919"><span class="cl-e27bb1d4">59</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e27bd151"><p class="cl-e27bb918"><span class="cl-e27bb1d4">she was</span></p></td><td class="cl-e27bd15a"><p class="cl-e27bb919"><span class="cl-e27bb1d4">55</span></p></td></tr></tbody></table></div></template>
<div class="flextable-shadow-host" id="74b87ff5-8351-4e6a-8e56-8b83c3fce931"></div>
<script>
var dest = document.getElementById("74b87ff5-8351-4e6a-8e56-8b83c3fce931");
var template = document.getElementById("d9b407c2-3022-423f-829f-7ca7503a1e7c");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>Both N-grams and collocations are not only an important concept in language teaching but they are also fundamental in Text Analysis and many other research areas working with language data. Unfortunately, words that collocate do not have to be immediately adjacent but can also encompass several slots which makes it harder to retrieve of collocates that are not adjacent- We will find out how to identify non-adjacent collocates in the next section.</p>
<div id="finding-collocations" class="section level2 unnumbered" number="">
<h2 class="unnumbered" number="">Finding collocations</h2>
<p>There are various techniques for identifying collocations. To identify collocations without having a pre-defined target term, we can use the <code>textstat_collocations</code> function from the <code>quanteda.textstats</code> package.</p>
<p>However, before we can apply that function and start identifying collocations, we need to process the data to which we want to apply this function. In the present case, we will apply that function to the sentences in the example text which we extract in the code chunk below.</p>
<pre class="r"><code>text_sentences &lt;- text %&gt;%
  tolower() %&gt;%
  paste0(collapse= &quot; &quot;) %&gt;%
  stringr::str_split(fixed(&quot;.&quot;)) %&gt;%
  unlist() %&gt;%
  tm::removePunctuation() %&gt;%
  stringr::str_squish()</code></pre>
<template id="5e6c86eb-8434-4f94-a6db-1eaa54db937f"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-e285d81c{table-layout:auto;width:95%;}.cl-e2838dd2{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e2838ddc{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e28395fc{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e283a7cc{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e283a7e0{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e283a7ea{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e283a7eb{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-e285d81c'>
<caption class="Table Caption">
<p>First 10 sentences in the example text</p>
</caption>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-e283a7eb"><p class="cl-e28395fc"><span class="cl-e2838dd2">.</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-e283a7cc"><p class="cl-e28395fc"><span class="cl-e2838ddc">alice’s adventures in wonderland by lewis carroll chapter i</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e283a7e0"><p class="cl-e28395fc"><span class="cl-e2838ddc">down the rabbithole alice was beginning to get very tired of sitting by her sister on the bank and of having nothing to do once or twice she had peeped into the book her sister was reading but it had no pictures or conversations in it “and what is the use of a book” thought alice “without pictures or conversations” so she was considering in her own mind as well as she could for the hot day made her feel very sleepy and stupid whether the pleasure of making a daisychain would be worth the trouble of getting up and picking the daisies when suddenly a white rabbit with pink eyes ran close by her</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e283a7cc"><p class="cl-e28395fc"><span class="cl-e2838ddc">there was nothing so very remarkable in that nor did alice think it so very much out of the way to hear the rabbit say to itself “oh dear oh dear i shall be late” when she thought it over afterwards it occurred to her that she ought to have wondered at this but at the time it all seemed quite natural but when the rabbit actually took a watch out of its waistcoatpocket and looked at it and then hurried on alice started to her feet for it flashed across her mind that she had never before seen a rabbit with either a waistcoatpocket or a watch to take out of it and burning with curiosity she ran across the field after it and fortunately was just in time to see it pop down a large rabbithole under the hedge</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e283a7e0"><p class="cl-e28395fc"><span class="cl-e2838ddc">in another moment down went alice after it never once considering how in the world she was to get out again</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e283a7cc"><p class="cl-e28395fc"><span class="cl-e2838ddc">the rabbithole went straight on like a tunnel for some way and then dipped suddenly down so suddenly that alice had not a moment to think about stopping herself before she found herself falling down a very deep well</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e283a7e0"><p class="cl-e28395fc"><span class="cl-e2838ddc">either the well was very deep or she fell very slowly for she had plenty of time as she went down to look about her and to wonder what was going to happen next</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e283a7cc"><p class="cl-e28395fc"><span class="cl-e2838ddc">first she tried to look down and make out what she was coming to but it was too dark to see anything then she looked at the sides of the well and noticed that they were filled with cupboards and bookshelves here and there she saw maps and pictures hung upon pegs</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e283a7e0"><p class="cl-e28395fc"><span class="cl-e2838ddc">she took down a jar from one of the shelves as she passed it was labelled “orange marmalade” but to her great disappointment it was empty she did not like to drop the jar for fear of killing somebody underneath so managed to put it into one of the cupboards as she fell past it</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e283a7cc"><p class="cl-e28395fc"><span class="cl-e2838ddc">“well” thought alice to herself “after such a fall as this i shall think nothing of tumbling down stairs how brave they’ll all think me at home why i wouldn’t say anything about it even if i fell off the top of the house” which was very likely true</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e283a7e0"><p class="cl-e28395fc"><span class="cl-e2838ddc">down down down</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e283a7cc"><p class="cl-e28395fc"><span class="cl-e2838ddc">would the fall never come to an end “i wonder how many miles i’ve fallen by this time” she said aloud</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e283a7e0"><p class="cl-e28395fc"><span class="cl-e2838ddc">“i must be getting somewhere near the centre of the earth</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e283a7cc"><p class="cl-e28395fc"><span class="cl-e2838ddc">let me see that would be four thousand miles down i think—” for you see alice had learnt several things of this sort in her lessons in the schoolroom and though this was not a very good opportunity for showing off her knowledge as there was no one to listen to her still it was good practice to say it over “—yes that’s about the right distance—but then i wonder what latitude or longitude i’ve got to” alice had no idea what latitude was or longitude either but thought they were nice grand words to say</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e283a7e0"><p class="cl-e28395fc"><span class="cl-e2838ddc">presently she began again</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e283a7ea"><p class="cl-e28395fc"><span class="cl-e2838ddc">“i wonder if i shall fall right through the earth how funny it’ll seem to come out among the people that walk with their heads downward the antipathies i think—” she was rather glad there was no one listening this time as it didn’t sound at all the right word “—but i shall have to ask them what the name of the country is you know</span></p></td></tr></tbody></table></div></template>
<div class="flextable-shadow-host" id="f9d4e3ff-eee6-4635-8710-2ebe8febe1c5"></div>
<script>
var dest = document.getElementById("f9d4e3ff-eee6-4635-8710-2ebe8febe1c5");
var template = document.getElementById("5e6c86eb-8434-4f94-a6db-1eaa54db937f");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>From the output shown above, we also see that splitting texts simply by full stops is not optimal as it produces some unwarranted artifacts like the “sentences” that consist of single characters (due to the name of the H.M.S. Beagle - the ship on which Darwin traveled when he explored the southern hemisphere). Fortunately, these errors do not really matter in the case of our example.</p>
<p>Now that we have split the example text into sentences, we can tokenize these sentences and apply the <code>textstat_collocations</code> function which identifies collocations.</p>
<pre class="r"><code># create a token object
text_tokens &lt;- tokens(text_sentences, remove_punct = TRUE) %&gt;%
  tokens_remove(stopwords(&quot;english&quot;))
# extract collocations
text_coll &lt;- textstat_collocations(text_tokens, size = 2, min_count = 20)</code></pre>
<template id="61e180f9-c64a-44d4-9e52-d49f60eae7f7"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-e2a559e4{table-layout:auto;width:50%;}.cl-e2a107a4{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e2a107b8{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e2a119c4{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e2a119ce{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e2a15452{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2a1545c{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2a15466{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2a15470{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2a15471{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2a15484{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2a15485{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2a15486{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2a1548e{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2a15498{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2a154a2{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2a154a3{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-e2a559e4'>
<caption class="Table Caption">
<p>Top 10 collocations in the example text</p>
</caption>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-e2a15498"><p class="cl-e2a119c4"><span class="cl-e2a107a4">collocation</span></p></td><td class="cl-e2a154a2"><p class="cl-e2a119ce"><span class="cl-e2a107a4">count</span></p></td><td class="cl-e2a154a2"><p class="cl-e2a119ce"><span class="cl-e2a107a4">count_nested</span></p></td><td class="cl-e2a154a2"><p class="cl-e2a119ce"><span class="cl-e2a107a4">length</span></p></td><td class="cl-e2a154a2"><p class="cl-e2a119ce"><span class="cl-e2a107a4">lambda</span></p></td><td class="cl-e2a154a3"><p class="cl-e2a119ce"><span class="cl-e2a107a4">z</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-e2a1545c"><p class="cl-e2a119c4"><span class="cl-e2a107b8">said alice</span></p></td><td class="cl-e2a15452"><p class="cl-e2a119ce"><span class="cl-e2a107b8">121</span></p></td><td class="cl-e2a15452"><p class="cl-e2a119ce"><span class="cl-e2a107b8">0</span></p></td><td class="cl-e2a15452"><p class="cl-e2a119ce"><span class="cl-e2a107b8">2</span></p></td><td class="cl-e2a15452"><p class="cl-e2a119ce"><span class="cl-e2a107b8">2.932312</span></p></td><td class="cl-e2a15466"><p class="cl-e2a119ce"><span class="cl-e2a107b8">23.017768</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e2a15470"><p class="cl-e2a119c4"><span class="cl-e2a107b8">white rabbit</span></p></td><td class="cl-e2a15471"><p class="cl-e2a119ce"><span class="cl-e2a107b8">22</span></p></td><td class="cl-e2a15471"><p class="cl-e2a119ce"><span class="cl-e2a107b8">0</span></p></td><td class="cl-e2a15471"><p class="cl-e2a119ce"><span class="cl-e2a107b8">2</span></p></td><td class="cl-e2a15471"><p class="cl-e2a119ce"><span class="cl-e2a107b8">7.320030</span></p></td><td class="cl-e2a15484"><p class="cl-e2a119ce"><span class="cl-e2a107b8">15.843499</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e2a1545c"><p class="cl-e2a119c4"><span class="cl-e2a107b8">mock turtle</span></p></td><td class="cl-e2a15452"><p class="cl-e2a119ce"><span class="cl-e2a107b8">54</span></p></td><td class="cl-e2a15452"><p class="cl-e2a119ce"><span class="cl-e2a107b8">0</span></p></td><td class="cl-e2a15452"><p class="cl-e2a119ce"><span class="cl-e2a107b8">2</span></p></td><td class="cl-e2a15452"><p class="cl-e2a119ce"><span class="cl-e2a107b8">11.145243</span></p></td><td class="cl-e2a15466"><p class="cl-e2a119ce"><span class="cl-e2a107b8">13.281773</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e2a15470"><p class="cl-e2a119c4"><span class="cl-e2a107b8">thought alice</span></p></td><td class="cl-e2a15471"><p class="cl-e2a119ce"><span class="cl-e2a107b8">26</span></p></td><td class="cl-e2a15471"><p class="cl-e2a119ce"><span class="cl-e2a107b8">0</span></p></td><td class="cl-e2a15471"><p class="cl-e2a119ce"><span class="cl-e2a107b8">2</span></p></td><td class="cl-e2a15471"><p class="cl-e2a119ce"><span class="cl-e2a107b8">3.070789</span></p></td><td class="cl-e2a15484"><p class="cl-e2a119ce"><span class="cl-e2a107b8">12.171649</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e2a1545c"><p class="cl-e2a119c4"><span class="cl-e2a107b8">said king</span></p></td><td class="cl-e2a15452"><p class="cl-e2a119ce"><span class="cl-e2a107b8">29</span></p></td><td class="cl-e2a15452"><p class="cl-e2a119ce"><span class="cl-e2a107b8">0</span></p></td><td class="cl-e2a15452"><p class="cl-e2a119ce"><span class="cl-e2a107b8">2</span></p></td><td class="cl-e2a15452"><p class="cl-e2a119ce"><span class="cl-e2a107b8">3.221498</span></p></td><td class="cl-e2a15466"><p class="cl-e2a119ce"><span class="cl-e2a107b8">12.155748</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e2a15470"><p class="cl-e2a119c4"><span class="cl-e2a107b8">said hatter</span></p></td><td class="cl-e2a15471"><p class="cl-e2a119ce"><span class="cl-e2a107b8">22</span></p></td><td class="cl-e2a15471"><p class="cl-e2a119ce"><span class="cl-e2a107b8">0</span></p></td><td class="cl-e2a15471"><p class="cl-e2a119ce"><span class="cl-e2a107b8">2</span></p></td><td class="cl-e2a15471"><p class="cl-e2a119ce"><span class="cl-e2a107b8">2.968924</span></p></td><td class="cl-e2a15484"><p class="cl-e2a119ce"><span class="cl-e2a107b8">10.372201</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e2a1545c"><p class="cl-e2a119c4"><span class="cl-e2a107b8">said mock</span></p></td><td class="cl-e2a15452"><p class="cl-e2a119ce"><span class="cl-e2a107b8">20</span></p></td><td class="cl-e2a15452"><p class="cl-e2a119ce"><span class="cl-e2a107b8">0</span></p></td><td class="cl-e2a15452"><p class="cl-e2a119ce"><span class="cl-e2a107b8">2</span></p></td><td class="cl-e2a15452"><p class="cl-e2a119ce"><span class="cl-e2a107b8">2.679614</span></p></td><td class="cl-e2a15466"><p class="cl-e2a119ce"><span class="cl-e2a107b8">9.464654</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e2a1548e"><p class="cl-e2a119c4"><span class="cl-e2a107b8">march hare</span></p></td><td class="cl-e2a15486"><p class="cl-e2a119ce"><span class="cl-e2a107b8">31</span></p></td><td class="cl-e2a15486"><p class="cl-e2a119ce"><span class="cl-e2a107b8">0</span></p></td><td class="cl-e2a15486"><p class="cl-e2a119ce"><span class="cl-e2a107b8">2</span></p></td><td class="cl-e2a15486"><p class="cl-e2a119ce"><span class="cl-e2a107b8">12.545276</span></p></td><td class="cl-e2a15485"><p class="cl-e2a119ce"><span class="cl-e2a107b8">8.044760</span></p></td></tr></tbody></table></div></template>
<div class="flextable-shadow-host" id="07c09d26-0819-4989-8c98-4b3849b4cff5"></div>
<script>
var dest = document.getElementById("07c09d26-0819-4989-8c98-4b3849b4cff5");
var template = document.getElementById("61e180f9-c64a-44d4-9e52-d49f60eae7f7");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>The resulting table shows collocations in the example text descending by collocation strength.</p>
</div>
<div id="visualizing-collocation-networks" class="section level2 unnumbered" number="">
<h2 class="unnumbered" number="">Visualizing Collocation Networks</h2>
<p>Network graphs are a very useful and flexible tool for visualizing relationships between elements such as words, personas, or authors. This section shows how to generate a network graph for collocations of the term <em>alice</em> using the <code>quanteda</code> package.</p>
<p>In a first step, we generate a document-feature matrix based on the sentences in the example text. A document-feature matrix shows how often elements (here these elements are the words that occur in the the example text) occur in a selection of documents (here these documents are the sentences in the example text).</p>
<pre class="r"><code># create document-feature matrix
text_dfm &lt;- text_sentences %&gt;% 
    quanteda::dfm(remove = stopwords(&#39;english&#39;), remove_punct = TRUE) %&gt;%
    quanteda::dfm_trim(min_termfreq = 10, verbose = FALSE)</code></pre>
<template id="1964df8c-a04f-4430-971b-c7f4141768f9"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-e2c9ade4{table-layout:auto;width:50%;}.cl-e2c710f2{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e2c710fc{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e2c71912{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e2c71913{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e2c730fa{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2c73104{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2c73105{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2c7310e{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2c7310f{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2c73118{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2c73119{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2c73122{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2c73123{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2c73124{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2c7312c{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e2c7312d{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-e2c9ade4'>
<caption class="Table Caption">
<p>First 6 rows and columns of the document-feature matrix.</p>
</caption>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-e2c7312c"><p class="cl-e2c71912"><span class="cl-e2c710f2">doc_id</span></p></td><td class="cl-e2c73124"><p class="cl-e2c71913"><span class="cl-e2c710f2">alice's</span></p></td><td class="cl-e2c73124"><p class="cl-e2c71913"><span class="cl-e2c710f2">chapter</span></p></td><td class="cl-e2c73124"><p class="cl-e2c71913"><span class="cl-e2c710f2">alice</span></p></td><td class="cl-e2c73124"><p class="cl-e2c71913"><span class="cl-e2c710f2">beginning</span></p></td><td class="cl-e2c73124"><p class="cl-e2c71913"><span class="cl-e2c710f2">get</span></p></td><td class="cl-e2c7312d"><p class="cl-e2c71913"><span class="cl-e2c710f2">sitting</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-e2c73105"><p class="cl-e2c71912"><span class="cl-e2c710fc">text1</span></p></td><td class="cl-e2c730fa"><p class="cl-e2c71913"><span class="cl-e2c710fc">1</span></p></td><td class="cl-e2c730fa"><p class="cl-e2c71913"><span class="cl-e2c710fc">1</span></p></td><td class="cl-e2c730fa"><p class="cl-e2c71913"><span class="cl-e2c710fc">0</span></p></td><td class="cl-e2c730fa"><p class="cl-e2c71913"><span class="cl-e2c710fc">0</span></p></td><td class="cl-e2c730fa"><p class="cl-e2c71913"><span class="cl-e2c710fc">0</span></p></td><td class="cl-e2c73104"><p class="cl-e2c71913"><span class="cl-e2c710fc">0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e2c73118"><p class="cl-e2c71912"><span class="cl-e2c710fc">text2</span></p></td><td class="cl-e2c7310e"><p class="cl-e2c71913"><span class="cl-e2c710fc">0</span></p></td><td class="cl-e2c7310e"><p class="cl-e2c71913"><span class="cl-e2c710fc">0</span></p></td><td class="cl-e2c7310e"><p class="cl-e2c71913"><span class="cl-e2c710fc">2</span></p></td><td class="cl-e2c7310e"><p class="cl-e2c71913"><span class="cl-e2c710fc">1</span></p></td><td class="cl-e2c7310e"><p class="cl-e2c71913"><span class="cl-e2c710fc">1</span></p></td><td class="cl-e2c7310f"><p class="cl-e2c71913"><span class="cl-e2c710fc">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e2c73105"><p class="cl-e2c71912"><span class="cl-e2c710fc">text3</span></p></td><td class="cl-e2c730fa"><p class="cl-e2c71913"><span class="cl-e2c710fc">0</span></p></td><td class="cl-e2c730fa"><p class="cl-e2c71913"><span class="cl-e2c710fc">0</span></p></td><td class="cl-e2c730fa"><p class="cl-e2c71913"><span class="cl-e2c710fc">2</span></p></td><td class="cl-e2c730fa"><p class="cl-e2c71913"><span class="cl-e2c710fc">0</span></p></td><td class="cl-e2c730fa"><p class="cl-e2c71913"><span class="cl-e2c710fc">0</span></p></td><td class="cl-e2c73104"><p class="cl-e2c71913"><span class="cl-e2c710fc">0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e2c73118"><p class="cl-e2c71912"><span class="cl-e2c710fc">text4</span></p></td><td class="cl-e2c7310e"><p class="cl-e2c71913"><span class="cl-e2c710fc">0</span></p></td><td class="cl-e2c7310e"><p class="cl-e2c71913"><span class="cl-e2c710fc">0</span></p></td><td class="cl-e2c7310e"><p class="cl-e2c71913"><span class="cl-e2c710fc">1</span></p></td><td class="cl-e2c7310e"><p class="cl-e2c71913"><span class="cl-e2c710fc">0</span></p></td><td class="cl-e2c7310e"><p class="cl-e2c71913"><span class="cl-e2c710fc">1</span></p></td><td class="cl-e2c7310f"><p class="cl-e2c71913"><span class="cl-e2c710fc">0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e2c73105"><p class="cl-e2c71912"><span class="cl-e2c710fc">text5</span></p></td><td class="cl-e2c730fa"><p class="cl-e2c71913"><span class="cl-e2c710fc">0</span></p></td><td class="cl-e2c730fa"><p class="cl-e2c71913"><span class="cl-e2c710fc">0</span></p></td><td class="cl-e2c730fa"><p class="cl-e2c71913"><span class="cl-e2c710fc">1</span></p></td><td class="cl-e2c730fa"><p class="cl-e2c71913"><span class="cl-e2c710fc">0</span></p></td><td class="cl-e2c730fa"><p class="cl-e2c71913"><span class="cl-e2c710fc">0</span></p></td><td class="cl-e2c73104"><p class="cl-e2c71913"><span class="cl-e2c710fc">0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e2c73122"><p class="cl-e2c71912"><span class="cl-e2c710fc">text6</span></p></td><td class="cl-e2c73119"><p class="cl-e2c71913"><span class="cl-e2c710fc">0</span></p></td><td class="cl-e2c73119"><p class="cl-e2c71913"><span class="cl-e2c710fc">0</span></p></td><td class="cl-e2c73119"><p class="cl-e2c71913"><span class="cl-e2c710fc">0</span></p></td><td class="cl-e2c73119"><p class="cl-e2c71913"><span class="cl-e2c710fc">0</span></p></td><td class="cl-e2c73119"><p class="cl-e2c71913"><span class="cl-e2c710fc">0</span></p></td><td class="cl-e2c73123"><p class="cl-e2c71913"><span class="cl-e2c710fc">0</span></p></td></tr></tbody></table></div></template>
<div class="flextable-shadow-host" id="2ca74206-29b4-4480-970c-691c6fb2b409"></div>
<script>
var dest = document.getElementById("2ca74206-29b4-4480-970c-691c6fb2b409");
var template = document.getElementById("1964df8c-a04f-4430-971b-c7f4141768f9");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>As we want to generate a network graph of words that collocate with the term <em>organism</em>, we use the <code>calculateCoocStatistics</code> function to determine which words most strongly collocate with our target term (<em>organism</em>).</p>
<pre class="r"><code># load function for co-occurrence calculation
source(&quot;https://slcladal.github.io/rscripts/calculateCoocStatistics.R&quot;)
# define term
coocTerm &lt;- &quot;alice&quot;
# calculate co-occurrence statistics
coocs &lt;- calculateCoocStatistics(coocTerm, text_dfm, measure=&quot;LOGLIK&quot;)
# inspect results
coocs[1:20]</code></pre>
<pre><code>##   thought      like      much    looked       say      well       way    things 
## 62.185957 23.876107 23.541486 18.165007 15.593621 14.901895 13.157512 12.058324 
##   talking    little    afraid     every      king       ran       saw    seemed 
## 11.713869 11.678941 11.481745 11.481745 11.195298 10.694290 10.694290 10.652633 
##      said    hatter     cried        oh 
## 10.369215  9.963506  9.654420  9.599779</code></pre>
<p>We now reduce the document-feature matrix to contain only the top 20 collocates of <em>organism</em> (plus our target word <em>organism</em>).</p>
<pre class="r"><code>redux_dfm &lt;- dfm_select(text_dfm, 
                        pattern = c(names(coocs)[1:20], &quot;alice&quot;))</code></pre>
<template id="574095a9-5c4c-4bff-8ca4-9445202b6a57"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-e31ea128{table-layout:auto;width:50%;}.cl-e31c15a2{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e31c15ac{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e31c1d9a{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e31c1da4{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e31c3604{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e31c3605{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e31c360e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e31c360f{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e31c3610{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e31c3618{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e31c3619{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e31c3622{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e31c3623{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e31c362c{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e31c362d{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e31c362e{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-e31ea128'>
<caption class="Table Caption">
<p>First 6 rows and columns of the reduced feature co-occurrence matrix.</p>
</caption>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-e31c362d"><p class="cl-e31c1d9a"><span class="cl-e31c15a2">doc_id</span></p></td><td class="cl-e31c362c"><p class="cl-e31c1da4"><span class="cl-e31c15a2">alice</span></p></td><td class="cl-e31c362c"><p class="cl-e31c1da4"><span class="cl-e31c15a2">thought</span></p></td><td class="cl-e31c362c"><p class="cl-e31c1da4"><span class="cl-e31c15a2">well</span></p></td><td class="cl-e31c362c"><p class="cl-e31c1da4"><span class="cl-e31c15a2">ran</span></p></td><td class="cl-e31c362c"><p class="cl-e31c1da4"><span class="cl-e31c15a2">much</span></p></td><td class="cl-e31c362e"><p class="cl-e31c1da4"><span class="cl-e31c15a2">way</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-e31c360e"><p class="cl-e31c1d9a"><span class="cl-e31c15ac">text1</span></p></td><td class="cl-e31c3604"><p class="cl-e31c1da4"><span class="cl-e31c15ac">0</span></p></td><td class="cl-e31c3604"><p class="cl-e31c1da4"><span class="cl-e31c15ac">0</span></p></td><td class="cl-e31c3604"><p class="cl-e31c1da4"><span class="cl-e31c15ac">0</span></p></td><td class="cl-e31c3604"><p class="cl-e31c1da4"><span class="cl-e31c15ac">0</span></p></td><td class="cl-e31c3604"><p class="cl-e31c1da4"><span class="cl-e31c15ac">0</span></p></td><td class="cl-e31c3605"><p class="cl-e31c1da4"><span class="cl-e31c15ac">0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e31c3618"><p class="cl-e31c1d9a"><span class="cl-e31c15ac">text2</span></p></td><td class="cl-e31c360f"><p class="cl-e31c1da4"><span class="cl-e31c15ac">2</span></p></td><td class="cl-e31c360f"><p class="cl-e31c1da4"><span class="cl-e31c15ac">1</span></p></td><td class="cl-e31c360f"><p class="cl-e31c1da4"><span class="cl-e31c15ac">1</span></p></td><td class="cl-e31c360f"><p class="cl-e31c1da4"><span class="cl-e31c15ac">1</span></p></td><td class="cl-e31c360f"><p class="cl-e31c1da4"><span class="cl-e31c15ac">0</span></p></td><td class="cl-e31c3610"><p class="cl-e31c1da4"><span class="cl-e31c15ac">0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e31c360e"><p class="cl-e31c1d9a"><span class="cl-e31c15ac">text3</span></p></td><td class="cl-e31c3604"><p class="cl-e31c1da4"><span class="cl-e31c15ac">2</span></p></td><td class="cl-e31c3604"><p class="cl-e31c1da4"><span class="cl-e31c15ac">1</span></p></td><td class="cl-e31c3604"><p class="cl-e31c1da4"><span class="cl-e31c15ac">0</span></p></td><td class="cl-e31c3604"><p class="cl-e31c1da4"><span class="cl-e31c15ac">1</span></p></td><td class="cl-e31c3604"><p class="cl-e31c1da4"><span class="cl-e31c15ac">1</span></p></td><td class="cl-e31c3605"><p class="cl-e31c1da4"><span class="cl-e31c15ac">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e31c3618"><p class="cl-e31c1d9a"><span class="cl-e31c15ac">text4</span></p></td><td class="cl-e31c360f"><p class="cl-e31c1da4"><span class="cl-e31c15ac">1</span></p></td><td class="cl-e31c360f"><p class="cl-e31c1da4"><span class="cl-e31c15ac">0</span></p></td><td class="cl-e31c360f"><p class="cl-e31c1da4"><span class="cl-e31c15ac">0</span></p></td><td class="cl-e31c360f"><p class="cl-e31c1da4"><span class="cl-e31c15ac">0</span></p></td><td class="cl-e31c360f"><p class="cl-e31c1da4"><span class="cl-e31c15ac">0</span></p></td><td class="cl-e31c3610"><p class="cl-e31c1da4"><span class="cl-e31c15ac">0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e31c360e"><p class="cl-e31c1d9a"><span class="cl-e31c15ac">text5</span></p></td><td class="cl-e31c3604"><p class="cl-e31c1da4"><span class="cl-e31c15ac">1</span></p></td><td class="cl-e31c3604"><p class="cl-e31c1da4"><span class="cl-e31c15ac">0</span></p></td><td class="cl-e31c3604"><p class="cl-e31c1da4"><span class="cl-e31c15ac">1</span></p></td><td class="cl-e31c3604"><p class="cl-e31c1da4"><span class="cl-e31c15ac">0</span></p></td><td class="cl-e31c3604"><p class="cl-e31c1da4"><span class="cl-e31c15ac">0</span></p></td><td class="cl-e31c3605"><p class="cl-e31c1da4"><span class="cl-e31c15ac">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e31c3622"><p class="cl-e31c1d9a"><span class="cl-e31c15ac">text6</span></p></td><td class="cl-e31c3619"><p class="cl-e31c1da4"><span class="cl-e31c15ac">0</span></p></td><td class="cl-e31c3619"><p class="cl-e31c1da4"><span class="cl-e31c15ac">0</span></p></td><td class="cl-e31c3619"><p class="cl-e31c1da4"><span class="cl-e31c15ac">1</span></p></td><td class="cl-e31c3619"><p class="cl-e31c1da4"><span class="cl-e31c15ac">0</span></p></td><td class="cl-e31c3619"><p class="cl-e31c1da4"><span class="cl-e31c15ac">0</span></p></td><td class="cl-e31c3623"><p class="cl-e31c1da4"><span class="cl-e31c15ac">0</span></p></td></tr></tbody></table></div></template>
<div class="flextable-shadow-host" id="d9380ebb-e6c7-43cf-8122-06ac27fe76cf"></div>
<script>
var dest = document.getElementById("d9380ebb-e6c7-43cf-8122-06ac27fe76cf");
var template = document.getElementById("574095a9-5c4c-4bff-8ca4-9445202b6a57");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>Now, we can transform the document-feature matrix into a feature-co-occurrence matrix as shown below. A feature-co-occurrence matrix shows how often each element in that matrix co-occurs with every other element in that matrix.</p>
<pre class="r"><code>tag_fcm &lt;- fcm(redux_dfm)</code></pre>
<template id="33f496b6-b563-4f32-b63c-d51c84beaec6"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-e32afb58{table-layout:auto;width:50%;}.cl-e328624e{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e3286258{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e3286a5a{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e3286a64{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e3288300{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e328830a{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e328830b{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e328830c{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3288314{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e328831e{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e328831f{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3288328{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3288332{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e3288333{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e328833c{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e328833d{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-e32afb58'>
<caption class="Table Caption">
<p>First 6 rows and columns of the feature co-occurrence matrix.</p>
</caption>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-e328833c"><p class="cl-e3286a5a"><span class="cl-e328624e">doc_id</span></p></td><td class="cl-e3288333"><p class="cl-e3286a64"><span class="cl-e328624e">alice</span></p></td><td class="cl-e3288333"><p class="cl-e3286a64"><span class="cl-e328624e">thought</span></p></td><td class="cl-e3288333"><p class="cl-e3286a64"><span class="cl-e328624e">well</span></p></td><td class="cl-e3288333"><p class="cl-e3286a64"><span class="cl-e328624e">ran</span></p></td><td class="cl-e3288333"><p class="cl-e3286a64"><span class="cl-e328624e">much</span></p></td><td class="cl-e328833d"><p class="cl-e3286a64"><span class="cl-e328624e">way</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-e328830b"><p class="cl-e3286a5a"><span class="cl-e3286258">alice</span></p></td><td class="cl-e3288300"><p class="cl-e3286a64"><span class="cl-e3286258">31</span></p></td><td class="cl-e3288300"><p class="cl-e3286a64"><span class="cl-e3286258">66</span></p></td><td class="cl-e3288300"><p class="cl-e3286a64"><span class="cl-e3286258">42</span></p></td><td class="cl-e3288300"><p class="cl-e3286a64"><span class="cl-e3286258">17</span></p></td><td class="cl-e3288300"><p class="cl-e3286a64"><span class="cl-e3286258">43</span></p></td><td class="cl-e328830a"><p class="cl-e3286a64"><span class="cl-e3286258">51</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e328831e"><p class="cl-e3286a5a"><span class="cl-e3286258">thought</span></p></td><td class="cl-e328830c"><p class="cl-e3286a64"><span class="cl-e3286258">0</span></p></td><td class="cl-e328830c"><p class="cl-e3286a64"><span class="cl-e3286258">1</span></p></td><td class="cl-e328830c"><p class="cl-e3286a64"><span class="cl-e3286258">12</span></p></td><td class="cl-e328830c"><p class="cl-e3286a64"><span class="cl-e3286258">3</span></p></td><td class="cl-e328830c"><p class="cl-e3286a64"><span class="cl-e3286258">8</span></p></td><td class="cl-e3288314"><p class="cl-e3286a64"><span class="cl-e3286258">8</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e328830b"><p class="cl-e3286a5a"><span class="cl-e3286258">well</span></p></td><td class="cl-e3288300"><p class="cl-e3286a64"><span class="cl-e3286258">0</span></p></td><td class="cl-e3288300"><p class="cl-e3286a64"><span class="cl-e3286258">0</span></p></td><td class="cl-e3288300"><p class="cl-e3286a64"><span class="cl-e3286258">3</span></p></td><td class="cl-e3288300"><p class="cl-e3286a64"><span class="cl-e3286258">3</span></p></td><td class="cl-e3288300"><p class="cl-e3286a64"><span class="cl-e3286258">9</span></p></td><td class="cl-e328830a"><p class="cl-e3286a64"><span class="cl-e3286258">10</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e328831e"><p class="cl-e3286a5a"><span class="cl-e3286258">ran</span></p></td><td class="cl-e328830c"><p class="cl-e3286a64"><span class="cl-e3286258">0</span></p></td><td class="cl-e328830c"><p class="cl-e3286a64"><span class="cl-e3286258">0</span></p></td><td class="cl-e328830c"><p class="cl-e3286a64"><span class="cl-e3286258">0</span></p></td><td class="cl-e328830c"><p class="cl-e3286a64"><span class="cl-e3286258">2</span></p></td><td class="cl-e328830c"><p class="cl-e3286a64"><span class="cl-e3286258">2</span></p></td><td class="cl-e3288314"><p class="cl-e3286a64"><span class="cl-e3286258">4</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e328830b"><p class="cl-e3286a5a"><span class="cl-e3286258">much</span></p></td><td class="cl-e3288300"><p class="cl-e3286a64"><span class="cl-e3286258">0</span></p></td><td class="cl-e3288300"><p class="cl-e3286a64"><span class="cl-e3286258">0</span></p></td><td class="cl-e3288300"><p class="cl-e3286a64"><span class="cl-e3286258">0</span></p></td><td class="cl-e3288300"><p class="cl-e3286a64"><span class="cl-e3286258">0</span></p></td><td class="cl-e3288300"><p class="cl-e3286a64"><span class="cl-e3286258">2</span></p></td><td class="cl-e328830a"><p class="cl-e3286a64"><span class="cl-e3286258">13</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e3288328"><p class="cl-e3286a5a"><span class="cl-e3286258">way</span></p></td><td class="cl-e328831f"><p class="cl-e3286a64"><span class="cl-e3286258">0</span></p></td><td class="cl-e328831f"><p class="cl-e3286a64"><span class="cl-e3286258">0</span></p></td><td class="cl-e328831f"><p class="cl-e3286a64"><span class="cl-e3286258">0</span></p></td><td class="cl-e328831f"><p class="cl-e3286a64"><span class="cl-e3286258">0</span></p></td><td class="cl-e328831f"><p class="cl-e3286a64"><span class="cl-e3286258">0</span></p></td><td class="cl-e3288332"><p class="cl-e3286a64"><span class="cl-e3286258">21</span></p></td></tr></tbody></table></div></template>
<div class="flextable-shadow-host" id="e55b04db-b06f-402b-b1f2-fc8457c0046f"></div>
<script>
var dest = document.getElementById("e55b04db-b06f-402b-b1f2-fc8457c0046f");
var template = document.getElementById("33f496b6-b563-4f32-b63c-d51c84beaec6");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>Using the feature-co-occurrence matrix, we can generate the network graph which shows the terms that collocate with the target term <em>alice</em> with the edges representing the co-occurrence frequency. To generate this network graph, we use the <code>textplot_network</code> function from the <code>quanteda.textplots</code> package.</p>
<pre class="r"><code># generate network graph
textplot_network(tag_fcm, 
                 min_freq = 1, 
                 edge_alpha = 0.1, 
                 edge_size = 5,
                 edge_color = &quot;purple&quot;,
                 vertex_labelsize = log(rowSums(tag_fcm))*2)</code></pre>
<p><img src="textanalysis_files/figure-html/dfm8-1.png" width="672" /></p>
</div>
<div id="keyness" class="section level2 unnumbered" number="">
<h2 class="unnumbered" number="">Keyness</h2>
<p>Another common method that can be used for automated text summarization is keyword extraction. Keyword extraction builds on identifying words that are particularly associated with a certain text. In other words, keyness analysis aims to identify words that are particularly indicative of the content of a certain text.</p>
<p>Below, we identify key words for Charles Darwin’s <em>Origin</em>, Herman Melville’s <em>Moby Dick</em>, and George Orwell’s <em>1984</em>. We start by creating a weighted document feature matrix from the corpus containing the three texts.</p>
<p>In order to create a corpus, we use the text objects that consist out of many different elements rather than the objects which contained the collapsed texts that we used above. Thus, in a first step, we create a corpus of the texts.</p>
<pre class="r"><code>corp_dom &lt;- quanteda::corpus(c(darwin_sep, orwell_sep, melville_sep)) 
attr(corp_dom, &quot;docvars&quot;)$Author = c(rep(&quot;Darwin&quot;, length(darwin_sep)), 
                                     rep(&quot;Orwell&quot;, length(orwell_sep)),
                                     rep(&quot;Melville&quot;, length(melville_sep)))</code></pre>
<p>Next, we generate the document feature matrix and we clean it by removing stopwords and selected other words. In addition, we group the documents feature matrix by author.</p>
<pre class="r"><code>dfm_authors &lt;- corp_dom %&gt;%
  quanteda::tokens(remove_punct = TRUE) %&gt;%
  quanteda::tokens_remove(quanteda::stopwords(&quot;english&quot;)) %&gt;%
  quanteda::tokens_remove(c(&quot;now&quot;, &quot;one&quot;, &quot;like&quot;, &quot;may&quot;, &quot;can&quot;)) %&gt;%
  quanteda::dfm() %&gt;%
  quanteda::dfm_group(groups = Author) %&gt;%
  quanteda::dfm_weight(scheme = &quot;prop&quot;)</code></pre>
<p>In a next step, we use the <code>textstat_frequency</code> function from the <code>quanteda</code> package to extract the most frequent non-stopwords in the three texts.</p>
<pre class="r"><code># Calculate relative frequency by president
freq_weight &lt;- quanteda.textstats::textstat_frequency(dfm_authors, 
                                                      n = 10,
                                                      groups = dfm_authors$Author)</code></pre>
<template id="e2ac3c3b-0ed2-4f87-8a5c-e4b58cf22aec"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-e4199704{table-layout:auto;width:50%;}.cl-e416e9fa{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e416ea04{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e416f224{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e416f22e{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e4170e8a{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e4170e94{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e4170e95{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e4170e96{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e4170e9e{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e4170ea8{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e4170ea9{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e4170eb2{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e4170eb3{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e4170ebc{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e4170ebd{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e4170ebe{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-e4199704'>
<caption class="Table Caption">
<p>Most common words across three texts.</p>
</caption>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-e4170ebc"><p class="cl-e416f224"><span class="cl-e416e9fa">feature</span></p></td><td class="cl-e4170ebd"><p class="cl-e416f22e"><span class="cl-e416e9fa">frequency</span></p></td><td class="cl-e4170ebd"><p class="cl-e416f22e"><span class="cl-e416e9fa">rank</span></p></td><td class="cl-e4170ebd"><p class="cl-e416f22e"><span class="cl-e416e9fa">docfreq</span></p></td><td class="cl-e4170ebe"><p class="cl-e416f224"><span class="cl-e416e9fa">group</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-e4170e94"><p class="cl-e416f224"><span class="cl-e416ea04">whale</span></p></td><td class="cl-e4170e8a"><p class="cl-e416f22e"><span class="cl-e416ea04">0.008602501</span></p></td><td class="cl-e4170e8a"><p class="cl-e416f22e"><span class="cl-e416ea04">1</span></p></td><td class="cl-e4170e8a"><p class="cl-e416f22e"><span class="cl-e416ea04">1</span></p></td><td class="cl-e4170e95"><p class="cl-e416f224"><span class="cl-e416ea04">Darwin</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e4170ea8"><p class="cl-e416f224"><span class="cl-e416ea04">upon</span></p></td><td class="cl-e4170e9e"><p class="cl-e416f22e"><span class="cl-e416ea04">0.005370569</span></p></td><td class="cl-e4170e9e"><p class="cl-e416f22e"><span class="cl-e416ea04">2</span></p></td><td class="cl-e4170e9e"><p class="cl-e416f22e"><span class="cl-e416ea04">1</span></p></td><td class="cl-e4170e96"><p class="cl-e416f224"><span class="cl-e416ea04">Darwin</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e4170e94"><p class="cl-e416f224"><span class="cl-e416ea04">man</span></p></td><td class="cl-e4170e8a"><p class="cl-e416f22e"><span class="cl-e416ea04">0.004277275</span></p></td><td class="cl-e4170e8a"><p class="cl-e416f22e"><span class="cl-e416ea04">3</span></p></td><td class="cl-e4170e8a"><p class="cl-e416f22e"><span class="cl-e416ea04">1</span></p></td><td class="cl-e4170e95"><p class="cl-e416f224"><span class="cl-e416ea04">Darwin</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e4170ea8"><p class="cl-e416f224"><span class="cl-e416ea04">old</span></p></td><td class="cl-e4170e9e"><p class="cl-e416f22e"><span class="cl-e416ea04">0.004210143</span></p></td><td class="cl-e4170e9e"><p class="cl-e416f22e"><span class="cl-e416ea04">4</span></p></td><td class="cl-e4170e9e"><p class="cl-e416f22e"><span class="cl-e416ea04">1</span></p></td><td class="cl-e4170e96"><p class="cl-e416f224"><span class="cl-e416ea04">Darwin</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e4170e94"><p class="cl-e416f224"><span class="cl-e416ea04">ahab</span></p></td><td class="cl-e4170e8a"><p class="cl-e416f22e"><span class="cl-e416ea04">0.004133420</span></p></td><td class="cl-e4170e8a"><p class="cl-e416f22e"><span class="cl-e416ea04">5</span></p></td><td class="cl-e4170e8a"><p class="cl-e416f22e"><span class="cl-e416ea04">1</span></p></td><td class="cl-e4170e95"><p class="cl-e416f224"><span class="cl-e416ea04">Darwin</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e4170ea8"><p class="cl-e416f224"><span class="cl-e416ea04">ye</span></p></td><td class="cl-e4170e9e"><p class="cl-e416f22e"><span class="cl-e416ea04">0.004066288</span></p></td><td class="cl-e4170e9e"><p class="cl-e416f22e"><span class="cl-e416ea04">6</span></p></td><td class="cl-e4170e9e"><p class="cl-e416f22e"><span class="cl-e416ea04">1</span></p></td><td class="cl-e4170e96"><p class="cl-e416f224"><span class="cl-e416ea04">Darwin</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e4170e94"><p class="cl-e416f224"><span class="cl-e416ea04">ship</span></p></td><td class="cl-e4170e8a"><p class="cl-e416f22e"><span class="cl-e416ea04">0.003711447</span></p></td><td class="cl-e4170e8a"><p class="cl-e416f22e"><span class="cl-e416ea04">7</span></p></td><td class="cl-e4170e8a"><p class="cl-e416f22e"><span class="cl-e416ea04">1</span></p></td><td class="cl-e4170e95"><p class="cl-e416f224"><span class="cl-e416ea04">Darwin</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e4170ea8"><p class="cl-e416f224"><span class="cl-e416ea04">though</span></p></td><td class="cl-e4170e9e"><p class="cl-e416f22e"><span class="cl-e416ea04">0.003663495</span></p></td><td class="cl-e4170e9e"><p class="cl-e416f22e"><span class="cl-e416ea04">8</span></p></td><td class="cl-e4170e9e"><p class="cl-e416f22e"><span class="cl-e416ea04">1</span></p></td><td class="cl-e4170e96"><p class="cl-e416f224"><span class="cl-e416ea04">Darwin</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e4170e94"><p class="cl-e416f224"><span class="cl-e416ea04">sea</span></p></td><td class="cl-e4170e8a"><p class="cl-e416f22e"><span class="cl-e416ea04">0.003510051</span></p></td><td class="cl-e4170e8a"><p class="cl-e416f22e"><span class="cl-e416ea04">9</span></p></td><td class="cl-e4170e8a"><p class="cl-e416f22e"><span class="cl-e416ea04">1</span></p></td><td class="cl-e4170e95"><p class="cl-e416f224"><span class="cl-e416ea04">Darwin</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e4170ea8"><p class="cl-e416f224"><span class="cl-e416ea04">yet</span></p></td><td class="cl-e4170e9e"><p class="cl-e416f22e"><span class="cl-e416ea04">0.003299064</span></p></td><td class="cl-e4170e9e"><p class="cl-e416f22e"><span class="cl-e416ea04">10</span></p></td><td class="cl-e4170e9e"><p class="cl-e416f22e"><span class="cl-e416ea04">1</span></p></td><td class="cl-e4170e96"><p class="cl-e416f224"><span class="cl-e416ea04">Darwin</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e4170e94"><p class="cl-e416f224"><span class="cl-e416ea04">whale</span></p></td><td class="cl-e4170e8a"><p class="cl-e416f22e"><span class="cl-e416ea04">0.008602501</span></p></td><td class="cl-e4170e8a"><p class="cl-e416f22e"><span class="cl-e416ea04">1</span></p></td><td class="cl-e4170e8a"><p class="cl-e416f22e"><span class="cl-e416ea04">1</span></p></td><td class="cl-e4170e95"><p class="cl-e416f224"><span class="cl-e416ea04">Melville</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e4170ea8"><p class="cl-e416f224"><span class="cl-e416ea04">upon</span></p></td><td class="cl-e4170e9e"><p class="cl-e416f22e"><span class="cl-e416ea04">0.005370569</span></p></td><td class="cl-e4170e9e"><p class="cl-e416f22e"><span class="cl-e416ea04">2</span></p></td><td class="cl-e4170e9e"><p class="cl-e416f22e"><span class="cl-e416ea04">1</span></p></td><td class="cl-e4170e96"><p class="cl-e416f224"><span class="cl-e416ea04">Melville</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e4170e94"><p class="cl-e416f224"><span class="cl-e416ea04">man</span></p></td><td class="cl-e4170e8a"><p class="cl-e416f22e"><span class="cl-e416ea04">0.004277275</span></p></td><td class="cl-e4170e8a"><p class="cl-e416f22e"><span class="cl-e416ea04">3</span></p></td><td class="cl-e4170e8a"><p class="cl-e416f22e"><span class="cl-e416ea04">1</span></p></td><td class="cl-e4170e95"><p class="cl-e416f224"><span class="cl-e416ea04">Melville</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e4170ea8"><p class="cl-e416f224"><span class="cl-e416ea04">old</span></p></td><td class="cl-e4170e9e"><p class="cl-e416f22e"><span class="cl-e416ea04">0.004210143</span></p></td><td class="cl-e4170e9e"><p class="cl-e416f22e"><span class="cl-e416ea04">4</span></p></td><td class="cl-e4170e9e"><p class="cl-e416f22e"><span class="cl-e416ea04">1</span></p></td><td class="cl-e4170e96"><p class="cl-e416f224"><span class="cl-e416ea04">Melville</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e4170eb3"><p class="cl-e416f224"><span class="cl-e416ea04">ahab</span></p></td><td class="cl-e4170eb2"><p class="cl-e416f22e"><span class="cl-e416ea04">0.004133420</span></p></td><td class="cl-e4170eb2"><p class="cl-e416f22e"><span class="cl-e416ea04">5</span></p></td><td class="cl-e4170eb2"><p class="cl-e416f22e"><span class="cl-e416ea04">1</span></p></td><td class="cl-e4170ea9"><p class="cl-e416f224"><span class="cl-e416ea04">Melville</span></p></td></tr></tbody></table></div></template>
<div class="flextable-shadow-host" id="7950ae27-a5be-4e3b-9f0b-35e324cc9fef"></div>
<script>
var dest = document.getElementById("7950ae27-a5be-4e3b-9f0b-35e324cc9fef");
var template = document.getElementById("e2ac3c3b-0ed2-4f87-8a5c-e4b58cf22aec");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>Now, we can simply plot the most common words and most indicative non-stop words in the three texts.</p>
<pre class="r"><code>ggplot(freq_weight, aes(nrow(freq_weight):1, frequency)) +
     geom_point() +
     facet_wrap(~ group, scales = &quot;free&quot;) +
     coord_flip() +
     scale_x_continuous(breaks = nrow(freq_weight):1,
                        labels = freq_weight$feature) +
     labs(x = NULL, y = &quot;Relative frequency&quot;)</code></pre>
<p><img src="textanalysis_files/figure-html/key4-1.png" width="672" /></p>
</div>
</div>
<div id="text-classification" class="section level1 unnumbered" number="">
<h1 class="unnumbered" number="">Text Classification</h1>
<p>Text classification refers to methods that allow to classify a given text to a predefined set of languages, genres, authors, or the like. Such classifications are typically based on the relative frequency of word classes, key words, phonemes, or other linguistic features such as average sentence length, words per line, etc.</p>
<p>As with most other methods that are used in text analysis, text classification typically builds upon a training set that is already annotated with the required tags. Training sets and the features that are derived from these training sets can be created by oneself or one can use build in training sets that are provided in the respective software packages or tools.</p>
<p>In the following, we will use the frequency of phonemes to classify a text. In a first step, we read in a German text, and split it into phonemes.</p>
<pre class="r"><code># read in German text
German &lt;- readLines(&quot;https://slcladal.github.io/data/phonemictext1.txt&quot;) %&gt;%
  stringr::str_remove_all(&quot; &quot;) %&gt;%
  stringr::str_split(&quot;&quot;) %&gt;%
  unlist()
# inspect data
head(German, 20)</code></pre>
<pre><code>##  [1] &quot;?&quot; &quot;a&quot; &quot;l&quot; &quot;s&quot; &quot;h&quot; &quot;E&quot; &quot;s&quot; &quot;@&quot; &quot;d&quot; &quot;e&quot; &quot;:&quot; &quot;n&quot; &quot;S&quot; &quot;t&quot; &quot;E&quot; &quot;p&quot; &quot;@&quot; &quot;n&quot; &quot;v&quot;
## [20] &quot;O&quot;</code></pre>
<p>We now do the same for three other texts - an English and a Spanish text as well as one text in a language that we will determine using classification.</p>
<pre class="r"><code># read in texts
English &lt;- readLines(&quot;https://slcladal.github.io/data/phonemictext2.txt&quot;)
Spanish &lt;- readLines(&quot;https://slcladal.github.io/data/phonemictext3.txt&quot;)
Unknown &lt;- readLines(&quot;https://slcladal.github.io/data/phonemictext4.txt&quot;)
# clean, split texts into phonemes, unlist and convert them into vectors
English &lt;- as.vector(unlist(strsplit(gsub(&quot; &quot;, &quot;&quot;, English), &quot;&quot;)))
Spanish &lt;- as.vector(unlist(strsplit(gsub(&quot; &quot;, &quot;&quot;, Spanish), &quot;&quot;)))
Unknown &lt;- as.vector(unlist(strsplit(gsub(&quot; &quot;, &quot;&quot;, Unknown), &quot;&quot;)))
# inspect data
head(English, 20)</code></pre>
<pre><code>##  [1] &quot;D&quot;  &quot;@&quot;  &quot;b&quot;  &quot;U&quot;  &quot;k&quot;  &quot;I&quot;  &quot;z&quot;  &quot;p&quot;  &quot;r&quot;  &quot;\\&quot; &quot;@&quot;  &quot;z&quot;  &quot;E&quot;  &quot;n&quot;  &quot;t&quot; 
## [16] &quot;@&quot;  &quot;d&quot;  &quot;{&quot;  &quot;z&quot;  &quot;@&quot;</code></pre>
<p>We will now create a table that represents the phonemes and their frequencies in each of the 4 texts. In addition, we will add the language and simply the column names.</p>
<pre class="r"><code># create data tables
German &lt;- data.frame(names(table(German)), as.vector(table(German)))
English &lt;- data.frame(names(table(English)), as.vector(table(English)))
Spanish &lt;- data.frame(names(table(Spanish)), as.vector(table(Spanish)))
Unknown &lt;- data.frame(names(table(Unknown)), as.vector(table(Unknown)))
# add column with language
German$Language &lt;- &quot;German&quot;
English$Language &lt;- &quot;English&quot;
Spanish$Language &lt;- &quot;Spanish&quot;
Unknown$Language &lt;- &quot;Unknown&quot;
# simplify column names
colnames(German)[1:2] &lt;- c(&quot;Phoneme&quot;, &quot;Frequency&quot;)
colnames(English)[1:2] &lt;- c(&quot;Phoneme&quot;, &quot;Frequency&quot;)
colnames(Spanish)[1:2] &lt;- c(&quot;Phoneme&quot;, &quot;Frequency&quot;)
colnames(Unknown)[1:2] &lt;- c(&quot;Phoneme&quot;, &quot;Frequency&quot;)
# combine all tables into a single table
classdata &lt;- rbind(German, English, Spanish, Unknown) </code></pre>
<template id="bab7f63c-ab03-45fd-af1e-98100975e37a"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-e61f88c4{table-layout:auto;width:50%;}.cl-e61bcff4{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e61bd008{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e61bdf76{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e61bdf80{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e61c0d3e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e61c0d48{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e61c0d52{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e61c0d53{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e61c0d5c{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e61c0d66{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e61c0d7a{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e61c0d7b{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e61c0d84{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e61c0d8e{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e61c0d8f{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e61c0d98{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-e61f88c4'>
<caption class="Table Caption">
<p>First 10 lines of the class data.</p>
</caption>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-e61c0d8f"><p class="cl-e61bdf76"><span class="cl-e61bcff4">Phoneme</span></p></td><td class="cl-e61c0d8e"><p class="cl-e61bdf80"><span class="cl-e61bcff4">Frequency</span></p></td><td class="cl-e61c0d98"><p class="cl-e61bdf76"><span class="cl-e61bcff4">Language</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-e61c0d52"><p class="cl-e61bdf76"><span class="cl-e61bd008">-</span></p></td><td class="cl-e61c0d3e"><p class="cl-e61bdf80"><span class="cl-e61bd008">6</span></p></td><td class="cl-e61c0d48"><p class="cl-e61bdf76"><span class="cl-e61bd008">German</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e61c0d84"><p class="cl-e61bdf76"><span class="cl-e61bd008">:</span></p></td><td class="cl-e61c0d7b"><p class="cl-e61bdf80"><span class="cl-e61bd008">569</span></p></td><td class="cl-e61c0d7a"><p class="cl-e61bdf76"><span class="cl-e61bd008">German</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e61c0d52"><p class="cl-e61bdf76"><span class="cl-e61bd008">?</span></p></td><td class="cl-e61c0d3e"><p class="cl-e61bdf80"><span class="cl-e61bd008">556</span></p></td><td class="cl-e61c0d48"><p class="cl-e61bdf76"><span class="cl-e61bd008">German</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e61c0d84"><p class="cl-e61bdf76"><span class="cl-e61bd008">@</span></p></td><td class="cl-e61c0d7b"><p class="cl-e61bdf80"><span class="cl-e61bd008">565</span></p></td><td class="cl-e61c0d7a"><p class="cl-e61bdf76"><span class="cl-e61bd008">German</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e61c0d52"><p class="cl-e61bdf76"><span class="cl-e61bd008">2</span></p></td><td class="cl-e61c0d3e"><p class="cl-e61bdf80"><span class="cl-e61bd008">6</span></p></td><td class="cl-e61c0d48"><p class="cl-e61bdf76"><span class="cl-e61bd008">German</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e61c0d84"><p class="cl-e61bdf76"><span class="cl-e61bd008">3</span></p></td><td class="cl-e61c0d7b"><p class="cl-e61bdf80"><span class="cl-e61bd008">31</span></p></td><td class="cl-e61c0d7a"><p class="cl-e61bdf76"><span class="cl-e61bd008">German</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e61c0d52"><p class="cl-e61bdf76"><span class="cl-e61bd008">4</span></p></td><td class="cl-e61c0d3e"><p class="cl-e61bdf80"><span class="cl-e61bd008">67</span></p></td><td class="cl-e61c0d48"><p class="cl-e61bdf76"><span class="cl-e61bd008">German</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e61c0d84"><p class="cl-e61bdf76"><span class="cl-e61bd008">5</span></p></td><td class="cl-e61c0d7b"><p class="cl-e61bdf80"><span class="cl-e61bd008">1</span></p></td><td class="cl-e61c0d7a"><p class="cl-e61bdf76"><span class="cl-e61bd008">German</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e61c0d52"><p class="cl-e61bdf76"><span class="cl-e61bd008">6</span></p></td><td class="cl-e61c0d3e"><p class="cl-e61bdf80"><span class="cl-e61bd008">402</span></p></td><td class="cl-e61c0d48"><p class="cl-e61bdf76"><span class="cl-e61bd008">German</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e61c0d66"><p class="cl-e61bdf76"><span class="cl-e61bd008">8</span></p></td><td class="cl-e61c0d5c"><p class="cl-e61bdf80"><span class="cl-e61bd008">32</span></p></td><td class="cl-e61c0d53"><p class="cl-e61bdf76"><span class="cl-e61bd008">German</span></p></td></tr></tbody></table></div></template>
<div class="flextable-shadow-host" id="1967ea7e-1de3-4503-8e6b-4139517086bb"></div>
<script>
var dest = document.getElementById("1967ea7e-1de3-4503-8e6b-4139517086bb");
var template = document.getElementById("bab7f63c-ab03-45fd-af1e-98100975e37a");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>Now, we group the data so that we see, how often each phoneme is used in each language.</p>
<pre class="r"><code># convert into wide format
classdw &lt;- classdata %&gt;%
  tidyr::spread(Phoneme, Frequency) %&gt;%
  replace(is.na(.), 0)</code></pre>
<template id="edd18cf3-102e-4eb7-b7d2-1faabaefa79e"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-e62a502e{table-layout:auto;width:50%;}.cl-e62687f0{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e6268804{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e6269146{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e6269147{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e626ac3a{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e626ac3b{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e626ac44{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e626ac4e{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e626ac4f{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e626ac58{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e626ac59{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e626ac62{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e626ac63{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e626ac6c{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e626ac6d{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e626ac76{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-e62a502e'>
<caption class="Table Caption">
<p>Overview of the class data in wide format.</p>
</caption>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-e626ac76"><p class="cl-e6269146"><span class="cl-e62687f0">Language</span></p></td><td class="cl-e626ac6c"><p class="cl-e6269147"><span class="cl-e62687f0">-</span></p></td><td class="cl-e626ac6c"><p class="cl-e6269147"><span class="cl-e62687f0">:</span></p></td><td class="cl-e626ac6c"><p class="cl-e6269147"><span class="cl-e62687f0">?</span></p></td><td class="cl-e626ac6c"><p class="cl-e6269147"><span class="cl-e62687f0">'</span></p></td><td class="cl-e626ac6d"><p class="cl-e6269147"><span class="cl-e62687f0">{</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-e626ac3b"><p class="cl-e6269146"><span class="cl-e6268804">English</span></p></td><td class="cl-e626ac3a"><p class="cl-e6269147"><span class="cl-e6268804">8</span></p></td><td class="cl-e626ac3a"><p class="cl-e6269147"><span class="cl-e6268804">176</span></p></td><td class="cl-e626ac3a"><p class="cl-e6269147"><span class="cl-e6268804">0</span></p></td><td class="cl-e626ac3a"><p class="cl-e6269147"><span class="cl-e6268804">7</span></p></td><td class="cl-e626ac44"><p class="cl-e6269147"><span class="cl-e6268804">123</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e626ac4f"><p class="cl-e6269146"><span class="cl-e6268804">German</span></p></td><td class="cl-e626ac4e"><p class="cl-e6269147"><span class="cl-e6268804">6</span></p></td><td class="cl-e626ac4e"><p class="cl-e6269147"><span class="cl-e6268804">569</span></p></td><td class="cl-e626ac4e"><p class="cl-e6269147"><span class="cl-e6268804">556</span></p></td><td class="cl-e626ac4e"><p class="cl-e6269147"><span class="cl-e6268804">0</span></p></td><td class="cl-e626ac58"><p class="cl-e6269147"><span class="cl-e6268804">0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e626ac3b"><p class="cl-e6269146"><span class="cl-e6268804">Spanish</span></p></td><td class="cl-e626ac3a"><p class="cl-e6269147"><span class="cl-e6268804">5</span></p></td><td class="cl-e626ac3a"><p class="cl-e6269147"><span class="cl-e6268804">0</span></p></td><td class="cl-e626ac3a"><p class="cl-e6269147"><span class="cl-e6268804">0</span></p></td><td class="cl-e626ac3a"><p class="cl-e6269147"><span class="cl-e6268804">0</span></p></td><td class="cl-e626ac44"><p class="cl-e6269147"><span class="cl-e6268804">0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e626ac63"><p class="cl-e6269146"><span class="cl-e6268804">Unknown</span></p></td><td class="cl-e626ac59"><p class="cl-e6269147"><span class="cl-e6268804">12</span></p></td><td class="cl-e626ac59"><p class="cl-e6269147"><span class="cl-e6268804">286</span></p></td><td class="cl-e626ac59"><p class="cl-e6269147"><span class="cl-e6268804">0</span></p></td><td class="cl-e626ac59"><p class="cl-e6269147"><span class="cl-e6268804">12</span></p></td><td class="cl-e626ac62"><p class="cl-e6269147"><span class="cl-e6268804">125</span></p></td></tr></tbody></table></div></template>
<div class="flextable-shadow-host" id="a38d5b3f-449e-4f30-a85a-8e7fe6b03609"></div>
<script>
var dest = document.getElementById("a38d5b3f-449e-4f30-a85a-8e7fe6b03609");
var template = document.getElementById("edd18cf3-102e-4eb7-b7d2-1faabaefa79e");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>Now, we need to transform the data again, so that we have the frequency of each phoneme by language as the classifier will use “Language” as the dependent variable and the phoneme frequencies as predictors.</p>
<pre class="r"><code>numvar &lt;- colnames(classdw)[2:length(colnames(classdw))]
classdw[numvar] &lt;- lapply(classdw[numvar], as.numeric)
# function for normalizing numeric variables
normalize &lt;- function(x) { (x-min(x))/(max(x)-min(x))   }
# apply normalization
 classdw[numvar] &lt;- as.data.frame(lapply(classdw[numvar], normalize))</code></pre>
<template id="bf50b3d7-52c8-4b1a-add4-643ea4f8f4f3"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-e6344b4c{table-layout:auto;width:50%;}.cl-e631b5d0{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e631b5da{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e631be36{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e631be40{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e631d588{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e631d592{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e631d59c{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e631d59d{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e631d5a6{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e631d5a7{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e631d5b0{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e631d5ba{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e631d5bb{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e631d5c4{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e631d5c5{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e631d5ce{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-e6344b4c'>
<caption class="Table Caption">
<p>Overview of the probabilities.</p>
</caption>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-e631d5ce"><p class="cl-e631be36"><span class="cl-e631b5d0">Language</span></p></td><td class="cl-e631d5c4"><p class="cl-e631be40"><span class="cl-e631b5d0">-</span></p></td><td class="cl-e631d5c4"><p class="cl-e631be40"><span class="cl-e631b5d0">:</span></p></td><td class="cl-e631d5c4"><p class="cl-e631be40"><span class="cl-e631b5d0">?</span></p></td><td class="cl-e631d5c4"><p class="cl-e631be40"><span class="cl-e631b5d0">'</span></p></td><td class="cl-e631d5c5"><p class="cl-e631be40"><span class="cl-e631b5d0">{</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-e631d592"><p class="cl-e631be36"><span class="cl-e631b5da">English</span></p></td><td class="cl-e631d588"><p class="cl-e631be40"><span class="cl-e631b5da">0.4285714</span></p></td><td class="cl-e631d588"><p class="cl-e631be40"><span class="cl-e631b5da">0.3093146</span></p></td><td class="cl-e631d588"><p class="cl-e631be40"><span class="cl-e631b5da">0</span></p></td><td class="cl-e631d588"><p class="cl-e631be40"><span class="cl-e631b5da">0.5833333</span></p></td><td class="cl-e631d59c"><p class="cl-e631be40"><span class="cl-e631b5da">0.984</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e631d5a6"><p class="cl-e631be36"><span class="cl-e631b5da">German</span></p></td><td class="cl-e631d59d"><p class="cl-e631be40"><span class="cl-e631b5da">0.1428571</span></p></td><td class="cl-e631d59d"><p class="cl-e631be40"><span class="cl-e631b5da">1.0000000</span></p></td><td class="cl-e631d59d"><p class="cl-e631be40"><span class="cl-e631b5da">1</span></p></td><td class="cl-e631d59d"><p class="cl-e631be40"><span class="cl-e631b5da">0.0000000</span></p></td><td class="cl-e631d5a7"><p class="cl-e631be40"><span class="cl-e631b5da">0.000</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e631d592"><p class="cl-e631be36"><span class="cl-e631b5da">Spanish</span></p></td><td class="cl-e631d588"><p class="cl-e631be40"><span class="cl-e631b5da">0.0000000</span></p></td><td class="cl-e631d588"><p class="cl-e631be40"><span class="cl-e631b5da">0.0000000</span></p></td><td class="cl-e631d588"><p class="cl-e631be40"><span class="cl-e631b5da">0</span></p></td><td class="cl-e631d588"><p class="cl-e631be40"><span class="cl-e631b5da">0.0000000</span></p></td><td class="cl-e631d59c"><p class="cl-e631be40"><span class="cl-e631b5da">0.000</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e631d5bb"><p class="cl-e631be36"><span class="cl-e631b5da">Unknown</span></p></td><td class="cl-e631d5b0"><p class="cl-e631be40"><span class="cl-e631b5da">1.0000000</span></p></td><td class="cl-e631d5b0"><p class="cl-e631be40"><span class="cl-e631b5da">0.5026362</span></p></td><td class="cl-e631d5b0"><p class="cl-e631be40"><span class="cl-e631b5da">0</span></p></td><td class="cl-e631d5b0"><p class="cl-e631be40"><span class="cl-e631b5da">1.0000000</span></p></td><td class="cl-e631d5ba"><p class="cl-e631be40"><span class="cl-e631b5da">1.000</span></p></td></tr></tbody></table></div></template>
<div class="flextable-shadow-host" id="c7ab9e6d-8696-4049-b1d9-6a9b2e5ef83a"></div>
<script>
var dest = document.getElementById("c7ab9e6d-8696-4049-b1d9-6a9b2e5ef83a");
var template = document.getElementById("bf50b3d7-52c8-4b1a-add4-643ea4f8f4f3");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>Before turning to the actual classification, we will use a cluster analysis to see which texts the unknown text is most similar with.</p>
<pre class="r"><code># remove language column
textm &lt;- classdw[,2:ncol(classdw)]
# add languages as row names
rownames(textm) &lt;- classdw[,1]
# create distance matrix
distmtx &lt;- dist(textm)
# perform clustering
clustertexts &lt;- hclust(distmtx, method=&quot;ward.D&quot;)  
# visualize cluster result
plot(clustertexts, hang = .25,main = &quot;&quot;)           </code></pre>
<p><img src="textanalysis_files/figure-html/tc10-1.png" width="672" /></p>
<p>According to the cluster analysis, the unknown text clusters together with the English texts which suggests that the unknown text is likely to be English.</p>
<p>Before we begin with the actual classification, we will split the data so that we have one data set without “Unknown” (this is our training set) and one data set with only “Unknown” (this is our test set).</p>
<pre class="r"><code># create training set
train &lt;- classdw %&gt;%
  filter(Language != &quot;Unknown&quot;)
# create test set
test &lt;- classdw %&gt;%
  filter(Language == &quot;Unknown&quot;)</code></pre>
<template id="10bf3947-87cc-4677-bdd3-6dfd344fd145"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
.katex-display {
    margin: 0 0 !important;
}
</style><div class="tabwid"><style>.cl-e645b242{table-layout:auto;width:50%;}.cl-e6431776{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e6431780{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-e6431f0a{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e6431f14{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-e6433864{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e643386e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e6433878{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e6433879{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e643387a{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e6433882{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e6433883{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e6433884{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e64338aa{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e64338b4{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e64338b5{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-e64338b6{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-e645b242'>
<caption class="Table Caption">
<p>Overview of the training set probabilities.</p>
</caption>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-e64338b6"><p class="cl-e6431f0a"><span class="cl-e6431776">Language</span></p></td><td class="cl-e64338b4"><p class="cl-e6431f14"><span class="cl-e6431776">-</span></p></td><td class="cl-e64338b4"><p class="cl-e6431f14"><span class="cl-e6431776">:</span></p></td><td class="cl-e64338b4"><p class="cl-e6431f14"><span class="cl-e6431776">?</span></p></td><td class="cl-e64338b4"><p class="cl-e6431f14"><span class="cl-e6431776">'</span></p></td><td class="cl-e64338b5"><p class="cl-e6431f14"><span class="cl-e6431776">{</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-e643386e"><p class="cl-e6431f0a"><span class="cl-e6431780">English</span></p></td><td class="cl-e6433864"><p class="cl-e6431f14"><span class="cl-e6431780">0.4285714</span></p></td><td class="cl-e6433864"><p class="cl-e6431f14"><span class="cl-e6431780">0.3093146</span></p></td><td class="cl-e6433864"><p class="cl-e6431f14"><span class="cl-e6431780">0</span></p></td><td class="cl-e6433864"><p class="cl-e6431f14"><span class="cl-e6431780">0.5833333</span></p></td><td class="cl-e6433878"><p class="cl-e6431f14"><span class="cl-e6431780">0.984</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e643387a"><p class="cl-e6431f0a"><span class="cl-e6431780">German</span></p></td><td class="cl-e6433879"><p class="cl-e6431f14"><span class="cl-e6431780">0.1428571</span></p></td><td class="cl-e6433879"><p class="cl-e6431f14"><span class="cl-e6431780">1.0000000</span></p></td><td class="cl-e6433879"><p class="cl-e6431f14"><span class="cl-e6431780">1</span></p></td><td class="cl-e6433879"><p class="cl-e6431f14"><span class="cl-e6431780">0.0000000</span></p></td><td class="cl-e6433882"><p class="cl-e6431f14"><span class="cl-e6431780">0.000</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e643386e"><p class="cl-e6431f0a"><span class="cl-e6431780">Spanish</span></p></td><td class="cl-e6433864"><p class="cl-e6431f14"><span class="cl-e6431780">0.0000000</span></p></td><td class="cl-e6433864"><p class="cl-e6431f14"><span class="cl-e6431780">0.0000000</span></p></td><td class="cl-e6433864"><p class="cl-e6431f14"><span class="cl-e6431780">0</span></p></td><td class="cl-e6433864"><p class="cl-e6431f14"><span class="cl-e6431780">0.0000000</span></p></td><td class="cl-e6433878"><p class="cl-e6431f14"><span class="cl-e6431780">0.000</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-e64338aa"><p class="cl-e6431f0a"><span class="cl-e6431780">Unknown</span></p></td><td class="cl-e6433883"><p class="cl-e6431f14"><span class="cl-e6431780">1.0000000</span></p></td><td class="cl-e6433883"><p class="cl-e6431f14"><span class="cl-e6431780">0.5026362</span></p></td><td class="cl-e6433883"><p class="cl-e6431f14"><span class="cl-e6431780">0</span></p></td><td class="cl-e6433883"><p class="cl-e6431f14"><span class="cl-e6431780">1.0000000</span></p></td><td class="cl-e6433884"><p class="cl-e6431f14"><span class="cl-e6431780">1.000</span></p></td></tr></tbody></table></div></template>
<div class="flextable-shadow-host" id="44b8bfd5-f274-455b-8380-cdd1412bc874"></div>
<script>
var dest = document.getElementById("44b8bfd5-f274-455b-8380-cdd1412bc874");
var template = document.getElementById("10bf3947-87cc-4677-bdd3-6dfd344fd145");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

<p>Finally, we can apply our classifier to our data. The classifier we use is a k-nearest neighbor classifier as the underlying function will classify an unknown element given its proximity to the clusters in the training set.</p>
<pre class="r"><code># set seed for reproducibility
set.seed(12345)
# apply k-nearest-neighbor (knn) classifier
prediction &lt;- class::knn(train[,2:ncol(train)], 
                         test[,2:ncol(test)], 
                         cl = train[, 1], 
                         k = 3)
# inspect the result
prediction</code></pre>
<pre><code>## [1] English
## Levels: English German Spanish</code></pre>
<p>Based on the frequencies of phonemes in the unknown text, the knn-classifier predicts that the unknown text is English. This is in fact true as the text is a subsection of the Wikipedia article for Aldous Huxley’s <em>Brave New World</em>. The training texts were German, English, and Spanish translations of a subsection of Wikipedia’s article for Hermann Hesse’s <em>Steppenwolf</em>.</p>
</div>
<div id="part-of-speech-tagging" class="section level1 unnumbered" number="">
<h1 class="unnumbered" number="">Part-of-Speech tagging</h1>
<p>A very common procedure to add information to texts is to part-of-speech tag the data, which means to determine to what type of word a specific word belongs. Below, we will add pos-tags to a short English text.</p>
<p>We start by selecting a sample of our example text.</p>
<pre class="r"><code># load text
sample  &lt;- base::readRDS(url(&quot;https://slcladal.github.io/data/alice.rda&quot;, &quot;rb&quot;)) %&gt;%
  .[1:10] %&gt;%
  paste0(collapse = &quot; &quot;)
# inspect
substr(sample, 1, 200)</code></pre>
<pre><code>## [1] &quot;Alice’s Adventures in Wonderland by Lewis Carroll CHAPTER I. Down the Rabbit-Hole Alice was beginning to get very tired of sitting by her sister on the bank, and of having nothing to do: once or twice&quot;</code></pre>
<p>Now that we have a text that we can work with, we will download a pre-trained language model.</p>
<pre class="r"><code># download language model
m_eng   &lt;- udpipe::udpipe_download_model(language = &quot;english-ewt&quot;)</code></pre>
<p>If you have downloaded a model once, you can also load the model directly from the place where you stored it on your computer. In my case, I have stored the model in a folder called <em>udpipemodels</em></p>
<pre class="r"><code># load language model from your computer after you have downloaded it once
m_eng &lt;- udpipe_load_model(here::here(&quot;udpipemodels&quot;, &quot;english-ewt-ud-2.5-191206.udpipe&quot;))</code></pre>
<p>We can now use the model to annotate out text.</p>
<pre class="r"><code># tokenise, tag, dependency parsing
text_anndf &lt;- udpipe::udpipe_annotate(m_eng, x = sample) %&gt;%
  as.data.frame() %&gt;%
  dplyr::select(-sentence)
# inspect
head(text_anndf, 10)</code></pre>
<pre><code>##    doc_id paragraph_id sentence_id token_id      token      lemma  upos xpos
## 1    doc1            1           1        1      Alice      Alice PROPN  NNP
## 2    doc1            1           1        2         ’s         &#39;s  PART  POS
## 3    doc1            1           1        3 Adventures  Adventure  NOUN  NNS
## 4    doc1            1           1        4         in         in   ADP   IN
## 5    doc1            1           1        5 Wonderland Wonderland PROPN  NNP
## 6    doc1            1           1        6         by         by   ADP   IN
## 7    doc1            1           1        7      Lewis      Lewis PROPN  NNP
## 8    doc1            1           1        8    Carroll    Carroll PROPN  NNP
## 9    doc1            1           1        9    CHAPTER    chapter PROPN  NNP
## 10   doc1            1           1       10          I          I  PRON  PRP
##                                         feats head_token_id   dep_rel deps
## 1                                 Number=Sing             3 nmod:poss &lt;NA&gt;
## 2                                        &lt;NA&gt;             1      case &lt;NA&gt;
## 3                                 Number=Plur             0      root &lt;NA&gt;
## 4                                        &lt;NA&gt;             5      case &lt;NA&gt;
## 5                                 Number=Sing             3      nmod &lt;NA&gt;
## 6                                        &lt;NA&gt;             7      case &lt;NA&gt;
## 7                                 Number=Sing             3      nmod &lt;NA&gt;
## 8                                 Number=Sing             7      flat &lt;NA&gt;
## 9                                 Number=Sing             7      flat &lt;NA&gt;
## 10 Case=Nom|Number=Sing|Person=1|PronType=Prs             3     appos &lt;NA&gt;
##             misc
## 1  SpaceAfter=No
## 2           &lt;NA&gt;
## 3           &lt;NA&gt;
## 4           &lt;NA&gt;
## 5           &lt;NA&gt;
## 6           &lt;NA&gt;
## 7           &lt;NA&gt;
## 8           &lt;NA&gt;
## 9           &lt;NA&gt;
## 10 SpaceAfter=No</code></pre>
<p>It can be useful to extract only the words and their pos-tags and convert them back into a text format (rather than a tabular format).</p>
<pre class="r"><code>tagged_text &lt;- paste(text_anndf$token, &quot;/&quot;, text_anndf$xpos, collapse = &quot; &quot;, sep = &quot;&quot;)
# inspect tagged text
substr(tagged_text, 1, 200)</code></pre>
<pre><code>## [1] &quot;Alice/NNP ’s/POS Adventures/NNS in/IN Wonderland/NNP by/IN Lewis/NNP Carroll/NNP CHAPTER/NNP I/PRP ./. Down/RB the/DT Rabbit/NNP -/HYPH Hole/NNP Alice/NNP was/VBD beginning/VBG to/TO get/VB very/RB ti&quot;</code></pre>
<p>We could use the pos-tagged data to study differences in the distribution of word classes across different registers. or to find certain syntactic patterns in a collection of texts.</p>
</div>
<div id="names-entity-recognition" class="section level1 unnumbered" number="">
<h1 class="unnumbered" number="">Names Entity Recognition</h1>
<p>Named Entity Recognition (NER) (also referred to as <em>named entity extraction</em> or simply as <em>entity extraction</em>) is a text analytic method which allows us to automatically identify or extract named entities from text(s) such as persons, locations, brands, etc.</p>
<p>As such, NER is a process during which textual elements which have characteristics that are common to proper nouns (locations, people, organizations, etc.) rather than other parts of speech, e.g. non-sentence initial capitalization, are extracted from texts. Retrieving entities is common in automated summarization and in Topic Modeling. NER can be achieved by simple feature extraction (e.g. extract all non-sentence initial capitalized words) or with the help of training sets. Using training sets, i.e. texts that are annotated for entities and non-entities, achieves better results when dealing with unknown data and data with inconsistent capitalization.</p>
<p>Here, we will make use of the results obtained form the pos-tagging and simply extract terms that have been tagged as</p>
<pre class="r"><code># tokenise, tag, dependency parsing
ner_df &lt;- text_anndf %&gt;%
  dplyr::filter(upos == &quot;PROPN&quot;) %&gt;%
  dplyr::select(token_id, token, lemma, upos, feats)
# inspect
head(ner_df)</code></pre>
<pre><code>##   token_id      token      lemma  upos       feats
## 1        1      Alice      Alice PROPN Number=Sing
## 2        5 Wonderland Wonderland PROPN Number=Sing
## 3        7      Lewis      Lewis PROPN Number=Sing
## 4        8    Carroll    Carroll PROPN Number=Sing
## 5        9    CHAPTER    chapter PROPN Number=Sing
## 6        3     Rabbit     rabbit PROPN Number=Sing</code></pre>
<p>The results would now have to be processed further and could be categorized into person, location, dates, entities, for example. However, this should already give you an idea and get you started.</p>
</div>
<div id="dependency-parsing-using-udpipe" class="section level1 unnumbered" number="">
<h1 class="unnumbered" number="">Dependency Parsing Using UDPipe</h1>
<p>In addition to pos-tagging, we can also generate plots showing the syntactic dependencies of the different constituents of a sentence. For this, we generate an object that contains a sentence (in this case, the sentence <em>John gave Mary a kiss</em>), and we then plot (or visualize) the dependencies using the <code>textplot_dependencyparser</code> function.</p>
<pre class="r"><code># parse text
sent &lt;- udpipe::udpipe_annotate(m_eng, x = &quot;John gave Mary a kiss.&quot;) %&gt;%
  as.data.frame()
# inspect
head(sent)</code></pre>
<pre><code>##   doc_id paragraph_id sentence_id               sentence token_id token lemma
## 1   doc1            1           1 John gave Mary a kiss.        1  John  John
## 2   doc1            1           1 John gave Mary a kiss.        2  gave  give
## 3   doc1            1           1 John gave Mary a kiss.        3  Mary  Mary
## 4   doc1            1           1 John gave Mary a kiss.        4     a     a
## 5   doc1            1           1 John gave Mary a kiss.        5  kiss  kiss
## 6   doc1            1           1 John gave Mary a kiss.        6     .     .
##    upos xpos                            feats head_token_id dep_rel deps
## 1 PROPN  NNP                      Number=Sing             2   nsubj &lt;NA&gt;
## 2  VERB  VBD Mood=Ind|Tense=Past|VerbForm=Fin             0    root &lt;NA&gt;
## 3 PROPN  NNP                      Number=Sing             2    iobj &lt;NA&gt;
## 4   DET   DT        Definite=Ind|PronType=Art             5     det &lt;NA&gt;
## 5  NOUN   NN                      Number=Sing             2     obj &lt;NA&gt;
## 6 PUNCT    .                             &lt;NA&gt;             2   punct &lt;NA&gt;
##              misc
## 1            &lt;NA&gt;
## 2            &lt;NA&gt;
## 3            &lt;NA&gt;
## 4            &lt;NA&gt;
## 5   SpaceAfter=No
## 6 SpacesAfter=\\n</code></pre>
<p>We now generate the plot.</p>
<pre class="r"><code># generate dependency plot
dplot &lt;- textplot::textplot_dependencyparser(sent, size = 3) 
# show plot
dplot</code></pre>
<p><img src="textanalysis_files/figure-html/udi5-1.png" width="672" /></p>
<p>Dependency parsing cane be used, e.g. to study who is the agent versus who is the patient of certain actions such as crimes or other activities.</p>
</div>
<div id="citation-session-info" class="section level1 unnumbered" number="">
<h1 class="unnumbered" number="">Citation &amp; Session Info</h1>
<p>Schweinberger, Martin. 2022. <em>Practical Overview of Selected Text Analytics Methods</em>. Brisbane: The University of Queensland. url: <a href="https://ladal.edu.au/textanalysis.html" class="uri">https://ladal.edu.au/textanalysis.html</a> (Version 2022.11.15).</p>
<pre><code>@manual{schweinberger2022ta,
  author = {Schweinberger, Martin},
  title = {Practical Overview of Selected Text Analytics Methods},
  note = {https://ladal.edu.au/textanalysis.html},
  year = {2022},
  organization = &quot;The University of Queensland, Australia. School of Languages and Cultures},
  address = {Brisbane},
  edition = {2022.11.15}
}</code></pre>
<pre class="r"><code>sessionInfo()</code></pre>
<pre><code>## R version 4.1.2 (2021-11-01)
## Platform: x86_64-pc-linux-gnu (64-bit)
## Running under: Ubuntu 22.04.2 LTS
## 
## Matrix products: default
## BLAS:   /usr/lib/x86_64-linux-gnu/atlas/libblas.so.3.10.3
## LAPACK: /usr/lib/x86_64-linux-gnu/atlas/liblapack.so.3.10.3
## 
## locale:
##  [1] LC_CTYPE=en_AU.UTF-8       LC_NUMERIC=C              
##  [3] LC_TIME=en_AU.UTF-8        LC_COLLATE=en_AU.UTF-8    
##  [5] LC_MONETARY=en_AU.UTF-8    LC_MESSAGES=en_AU.UTF-8   
##  [7] LC_PAPER=en_AU.UTF-8       LC_NAME=C                 
##  [9] LC_ADDRESS=C               LC_TELEPHONE=C            
## [11] LC_MEASUREMENT=en_AU.UTF-8 LC_IDENTIFICATION=C       
## 
## attached base packages:
## [1] stats     graphics  grDevices datasets  utils     methods   base     
## 
## other attached packages:
##  [1] slam_0.1-50               Matrix_1.4-1             
##  [3] tidyr_1.2.0               quanteda.textplots_0.94.1
##  [5] quanteda.textstats_0.95   wordcloud2_0.2.1         
##  [7] tidytext_0.3.3            udpipe_0.8.9             
##  [9] tm_0.7-8                  NLP_0.2-1                
## [11] quanteda_3.2.1            flextable_0.7.3          
## [13] ggplot2_3.3.6             stringr_1.4.0            
## [15] dplyr_1.0.9              
## 
## loaded via a namespace (and not attached):
##  [1] nlme_3.1-158         RColorBrewer_1.1-3   rprojroot_2.0.3     
##  [4] SnowballC_0.7.0      tools_4.1.2          bslib_0.3.1         
##  [7] utf8_1.2.2           R6_2.5.1             DBI_1.1.3           
## [10] mgcv_1.8-40          colorspace_2.0-3     withr_2.5.0         
## [13] gridExtra_2.3        tidyselect_1.1.2     compiler_4.1.2      
## [16] textplot_0.2.2       cli_3.3.0            xml2_1.3.3          
## [19] network_1.17.2       officer_0.4.3        labeling_0.4.2      
## [22] sass_0.4.1           scales_1.2.0         systemfonts_1.0.4   
## [25] digest_0.6.29        rmarkdown_2.14       base64enc_0.1-3     
## [28] pkgconfig_2.0.3      htmltools_0.5.2      fastmap_1.1.0       
## [31] highr_0.9            htmlwidgets_1.5.4    rlang_1.0.4         
## [34] jquerylib_0.1.4      farver_2.1.1         generics_0.1.3      
## [37] jsonlite_1.8.0       statnet.common_4.6.0 zip_2.2.0           
## [40] tokenizers_0.2.1     magrittr_2.0.3       Rcpp_1.0.8.3        
## [43] munsell_0.5.0        fansi_1.0.3          viridis_0.6.2       
## [46] gdtools_0.2.4        lifecycle_1.0.1      stringi_1.7.8       
## [49] yaml_2.3.5           ggraph_2.0.5         MASS_7.3-58.1       
## [52] grid_4.1.2           parallel_4.1.2       ggrepel_0.9.1       
## [55] crayon_1.5.1         lattice_0.20-45      graphlayouts_0.8.0  
## [58] splines_4.1.2        sna_2.7              knitr_1.39          
## [61] klippy_0.0.0.9500    pillar_1.7.0         igraph_1.3.2        
## [64] uuid_1.1-0           stopwords_2.3        fastmatch_1.1-3     
## [67] glue_1.6.2           evaluate_0.15        data.table_1.14.2   
## [70] renv_0.15.4          RcppParallel_5.1.5   tweenr_1.0.2        
## [73] vctrs_0.4.1          polyclip_1.10-0      gtable_0.3.0        
## [76] purrr_0.3.4          assertthat_0.2.1     ggforce_0.3.3       
## [79] xfun_0.31            tidygraph_1.2.1      coda_0.19-4         
## [82] janeaustenr_0.1.5    viridisLite_0.4.0    class_7.3-20        
## [85] tibble_3.1.7         nsyllable_1.0.1      ISOcodes_2022.01.10 
## [88] ellipsis_0.3.2       here_1.0.1</code></pre>
<hr />
<p><a href="#introduction">Back to top</a></p>
<p><a href="https://ladal.edu.au">Back to HOME</a></p>
<hr />
</div>
<div id="references" class="section level1 unnumbered" number="">
<h1 class="unnumbered" number="">References</h1>
<div id="refs" class="references hanging-indent">
<div id="ref-bernard1998text">
<p>Bernard, H Russell, and Gery Ryan. 1998. “Text Analysis.” <em>Handbook of Methods in Cultural Anthropology</em> 613.</p>
</div>
<div id="ref-kabanoff1997introduction">
<p>Kabanoff, Boris. 1997. “Introduction: Computers Can Read as Well as Count: Computer-Aided Text Analysis in Organizational Research.” <em>Journal of Organizational Behavior</em>, 507–11.</p>
</div>
<div id="ref-lindquist2009corpus">
<p>Lindquist, Hans. 2009. <em>Corpus Linguistics and the Description of English</em>. Edinburgh: Edinburgh University Press.</p>
</div>
<div id="ref-popping2000computer">
<p>Popping, Roel. 2000. <em>Computer-Assisted Text Analysis</em>. Sage.</p>
</div>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
