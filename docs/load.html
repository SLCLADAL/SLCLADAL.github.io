<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Martin Schweinberger" />


<title>Loading, saving, and generating data in R</title>

<script src="site_libs/header-attrs-2.21/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/clipboard-1.7.1/clipboard.min.js"></script>
<link href="site_libs/primer-tooltips-1.4.0/build.css" rel="stylesheet" />
<link href="site_libs/klippy-0.0.0.9500/css/klippy.min.css" rel="stylesheet" />
<script src="site_libs/klippy-0.0.0.9500/js/klippy.min.js"></script>
<link rel="stylesheet" href="styles.css" />

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VSGK4KYDQZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VSGK4KYDQZ');
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">



<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  
  <!-- Added by SKC - LADAL image and thicker top with   -->
  <div class="container-fluid navbar-top" >
    <a href="index.html"> <!-- Make entire top row and text clickable home link  -->
        <div class="row">
            <div class="navbar-brand col-md-12">
              <img src="/content/ladal_icon_cas_tran_white_trimed.png" class="navbar-icon" alt="LADAL"/>
              <span class="navbar-title-note navbar-collapse collapse" >Language Technology and Data Analysis Laboratory</span>
            </div>
        </div>
    </a>
  </div>
  
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <!-- SKC removed  navbar brand -->
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">HOME</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    ABOUT LADAL
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="people.html">People | Collabs</a>
    </li>
    <li>
      <a href="news.html">News</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    EVENTS
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="workshops.html">Workshops</a>
    </li>
    <li>
      <a href="compthinking.html">Computational Thinking in HASS</a>
    </li>
    <li>
      <a href="webinars2022.html">LADAL Webinar Series 2022</a>
    </li>
    <li>
      <a href="opening.html">LADAL Webinar Series 2021</a>
    </li>
    <li>
      <a href="atapevents.html">ATAP Events</a>
    </li>
  </ul>
</li>
<li>
  <a href="tutorials.html">TUTORIALS</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    RESOURCES
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="links.html">Links</a>
    </li>
    <li>
      <a href="base.html">Tutorial stylesheet</a>
    </li>
  </ul>
</li>
<li>
  <a href="contact.html">CONTACT</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Loading, saving, and generating data in
R</h1>
<h4 class="author">Martin Schweinberger</h4>

</div>


<p><img src="https://slcladal.github.io/images/uq1.jpg" width="100%" /></p>
<div id="introduction" class="section level1 unnumbered">
<h1 class="unnumbered">Introduction</h1>
<p>The data we work with comes in many formats and types. Therefore,
this tutorial shows how you can load and save different types of data
when working with R and we will have a brief look at how to generate
data in R.</p>
<p><img src="https://slcladal.github.io/images/g_chili.jpg" width="15%" style="float:right; padding:10px" /></p>
<p>This tutorial is aimed at beginners with the aim of showcasing how to
load and save different type of data and data structures in R. The aim
is not to provide a fully-fledged analysis but rather to show and
exemplify how to load and save the most common types of data in R.</p>
<div class="warning"
style="padding:0.1em; background-color:#f2f2f2; color:#51247a">
<span>
<p style="margin-top:1em; text-align:center">
To be able to follow this tutorial, we suggest you check out and
familiarize yourself with the content of the following <strong>R
Basics</strong> tutorials:<br>
</p>
<p style="margin-top:1em; text-align:left">
<ul>
<li>
<a href="https://ladal.edu.au/intror.html">Getting started with R</a>
</li>
</ul>
</p>
<p style="margin-top:1em; text-align:center">
Click <a
href="https://ladal.edu.au/content/load.Rmd"><strong>here</strong></a><a
href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> to
download the <strong>entire R Notebook</strong> for this tutorial.<br>
</p>
<p></span></p>
</div>
<p><br></p>
<div id="preparation-and-session-set-up"
class="section level2 unnumbered">
<h2 class="unnumbered">Preparation and session set up</h2>
<p>This tutorial is based on R. If you have not installed R or are new
to it, you will find an introduction to and more information how to use
R <a href="https://slcladal.github.io/intror.html">here</a>. For this
tutorials, we need to install certain <em>packages</em> from an R
<em>library</em> so that the scripts shown below are executed without
errors. Before turning to the code below, please install the packages by
running the code below this paragraph. If you have already installed the
packages mentioned below, then you can skip ahead ignore this section.
To install the necessary packages, simply run the following code - it
may take some time (between 1 and 5 minutes to install all of the
packages so you do not need to worry if it takes some time).</p>
<pre class="r"><code># install packages
install.packages(&quot;xlsx&quot;)
install.packages(&quot;dplyr&quot;)
install.packages(&quot;stringr&quot;)
install.packages(&quot;tidyr&quot;)
install.packages(&quot;flextable&quot;)
install.packages(&quot;openxlsx&quot;)
install.packages(&quot;here&quot;)
install.packages(&quot;faux&quot;)
install.packages(&quot;data.tree&quot;)
# install klippy for copy-to-clipboard button in code chunks
remotes::install_github(&quot;rlesur/klippy&quot;)</code></pre>
<p>Now that we have installed the packages, we can activate them as
shown below.</p>
<pre class="r"><code># load packages
library(dplyr)
library(stringr)
library(tidyr)
library(flextable)
library(xlsx)
library(openxlsx)
library(here)
library(data.tree)
# activate klippy for copy-to-clipboard button
klippy::klippy()</code></pre>
<script>
  addClassKlippyTo("pre.r, pre.markdown");
  addKlippy('left', 'top', 'auto', '1', 'Copy code', 'Copied!');
</script>
<p>Once you have installed RStudio and initiated the session by
executing the code shown above, you are good to go.</p>
<hr />
<div class="warning"
style="padding:0.1em; background-color:#51247a; color:#f2f2f2">
<span>
<p style="margin-top:1em; text-align:center">
<b>NOTE</b><br><br> This tutorial assumes that you will be loading data
from your own computer, as is often the case.<br />
<br> This tutorial assumes that you have a designated subfolder named
<code>data</code> within the directory where your R project (the Rproj
file) is located. It is assumed that your data sets are stored in this
data subfolder. Additionally, we provide guidance on how to load
multiple text files into R, a common scenario when working with corpora.
These multiple texts are expected to be situated within a folder named
<code>textcorpus</code>, which is located within the data
subfolder.<br />
<br> If you have a different setup, you will need to adjust the path to
the data in order for the tutorial to function correctly on your own
computer. It is worth mentioning that the <code>here</code> function is
utilized to create paths that originate from the directory where the
Rproj is located.
</p>
<p style="margin-left:1em;">
</p>
<p></span></p>
</div>
<hr />
<p>In other words, your directory should have the structure as shown
below.</p>
<pre><code>                       levelName
1  myproject                    
2   ¦--Rproj                    
3   ¦--load.Rmd                 
4   °--data                     
5       ¦--testdat.csv          
6       ¦--testdat2.csv         
7       ¦--testdat.xlsx         
8       ¦--testdat.txt          
9       ¦--testdat.rda          
10      ¦--english.rda          
11      °--testcorpus           
12          ¦--linguistics01.txt
13          ¦--linguistics02.txt
14          ¦--linguistics03.txt
15          ¦--linguistics04.txt
16          ¦--linguistics05.txt
17          ¦--linguistics06.txt
18          °--linguistics07.txt</code></pre>
<p>The data used in this tutorial can be downloaded using the links
below:</p>
<ul>
<li><a
href="https://slcladal.github.io/data/testdat.csv">testdat.csv</a></li>
<li><a
href="https://slcladal.github.io/data/testdat2.csv">testdat2.csv</a></li>
<li><a
href="https://slcladal.github.io/data/testdat.xlsx">testdat.xlsx</a></li>
<li><a
href="https://slcladal.github.io/data/testdat.txt">testdat.txt</a></li>
<li><a
href="https://slcladal.github.io/data/testdat.rda">testdat.rda</a></li>
<li><a
href="https://slcladal.github.io/data/english.txt">english.txt</a>
<ul>
<li><a
href="https://slcladal.github.io/data/testcorpus/linguistics01.txt">linguistics01.txt</a></li>
<li><a
href="https://slcladal.github.io/data/testcorpus/linguistics02.txt">linguistics02.txt</a></li>
<li><a
href="https://slcladal.github.io/data/testcorpus/linguistics03.txt">linguistics03.txt</a></li>
<li><a
href="https://slcladal.github.io/data/testcorpus/linguistics04.txt">linguistics04.txt</a></li>
<li><a
href="https://slcladal.github.io/data/testcorpus/linguistics05.txt">linguistics05.txt</a></li>
<li><a
href="https://slcladal.github.io/data/testcorpus/linguistics06.txt">linguistics06.txt</a></li>
<li><a
href="https://slcladal.github.io/data/testcorpus/linguistics07.txt">linguistics07.txt</a></li>
</ul></li>
</ul>
</div>
</div>
<div id="tabulated-data" class="section level1 unnumbered">
<h1 class="unnumbered">Tabulated data</h1>
<p>In R, there are multiple functions available for reading
comma-separated (csv) and other Excel files. Once we cover these
functions, we will briefly explore the process of generating data from
scratch, without relying on loading pre-existing data files.</p>
<div id="csv" class="section level2 unnumbered">
<h2 class="unnumbered">CSV</h2>
<p>A common data type when working with tabulated data are comma
separated files (csv). To load such files, we can use the
<code>read.csv</code> function as shown below.</p>
<pre class="r"><code># load csv file
datcsv &lt;- read.csv(here::here(&quot;data&quot;, &quot;testdat.csv&quot;),
                   # indicate the data has column names
                   header=TRUE) 
# inspect first 6 rows using the head() function
head(datcsv)</code></pre>
<pre><code>##   Variable1 Variable2
## 1         6        67
## 2        65        16
## 3        12        56
## 4        56        34
## 5        45        54
## 6        84        42</code></pre>
<p>The data is not spectacular and consist of a table with 2 columns
(<code>Variable1</code>, and <code>Variable2</code>).</p>
<p>Sometimes, csv files are actually not comma-separated but use a
semi-colon as a separator. In such cases, we can use the
<code>read.delim</code> function to load the csv and specify that the
separator (<code>sep</code>) is “;”.</p>
<pre class="r"><code># load csv with ; as the separator
datcsv2 &lt;- read.delim(here::here(&quot;data&quot;, &quot;testdat2.csv&quot;),
                      # define separator
                      sep = &quot;;&quot;, 
                      # indicate the the data has column names
                      header = TRUE)
# inspect data
head(datcsv2)</code></pre>
<pre><code>##   Variable1 Variable2
## 1         6        67
## 2        65        16
## 3        12        56
## 4        56        34
## 5        45        54
## 6        84        42</code></pre>
<p>To save a data set as a csv on your computer (here it is saved within
the <code>data</code> folder within the folder where the Rproj is
located).</p>
<pre class="r"><code># save data as a csv without row names
write.csv(datcsv, here::here(&quot;data&quot;, &quot;testdat.csv&quot;), row.names = F)</code></pre>
</div>
<div id="xlsx" class="section level2 unnumbered">
<h2 class="unnumbered">XLSX</h2>
<p>To load excel data, you can use the <code>read.xlsx</code> function
from the <code>openxlsx</code> package. We have activated the
<code>openxlsx</code> package in the session preparation so we do not
need to activate it again here. If you get an error message telling you
that R did not find the <code>read.xlsx</code> function, you need to
activate the <code>openxlsx</code> package by running the
<code>library(openxlsx)</code>.</p>
<pre class="r"><code># load data
datxlsx &lt;- openxlsx::read.xlsx(
  # define path where data is stored
  here::here(&quot;data&quot;, &quot;testdat.xlsx&quot;),
  # define spreadsheet to load
  sheet = 1)
# inspect first 6 rows using the head() function
head(datxlsx)</code></pre>
<pre><code>##   Variable1 Variable2
## 1         6        67
## 2        65        16
## 3        12        56
## 4        56        34
## 5        45        54
## 6        84        42</code></pre>
<p>To save xlsx files, we can use the <code>write.xlsx</code> from the
<code>openxlsx</code> package as shown below.</p>
<pre class="r"><code>write.xlsx(
  # define object to be stored
  datxlsx, 
  # define path where data should be stored
  here::here(&quot;data&quot;, &quot;testdat.xlsx&quot;))</code></pre>
</div>
<div id="txt-tabulated" class="section level2 unnumbered">
<h2 class="unnumbered">TXT (tabulated)</h2>
<p>If the data is tabular and stored as a txt-file, there are various
functions to read in the data. The most common functions are
<code>read.delim</code> and <code>read.table</code>. The read.delim
function is very flexible and allows you to specify the separator and
inform R that the first row contains column headers rather than data
points (if the data does not contain column headers, then you do not
need to specify <code>header = T</code> because <code>header = F</code>
is the default).</p>
<pre class="r"><code># load tab txt 1
dattxt &lt;- read.delim(here::here(&quot;data&quot;, &quot;testdat.txt&quot;), 
                   sep = &quot;\t&quot;, header = TRUE)
# inspect data
head(dattxt)</code></pre>
<p>The <code>read.table</code> function is very similar and can also be
used to load various types of tabulated data. Again, we let R know that
the first row contains column headers rather than data points.</p>
<pre class="r"><code># load tab txt
dattxt2 &lt;- read.table(here::here(&quot;data&quot;, &quot;testdat.txt&quot;), header = TRUE)
# inspect 
head(dattxt2)</code></pre>
<p>To save tabulated txt files, we use the <code>write.table</code>
function. In the <code>write.table</code> function we define the
separator (in this case we write a tab-separated file) and inform R to
not add row names (i.e, that R should not number rows and store this
information in a separate column).</p>
<pre class="r"><code># save txt
write.table(dattxt, here::here(&quot;data&quot;, &quot;testdat.txt&quot;), sep = &quot;\t&quot;, row.names = F)</code></pre>
</div>
</div>
<div id="unstructured-data" class="section level1 unnumbered">
<h1 class="unnumbered">Unstructured data</h1>
<div id="txt" class="section level2 unnumbered">
<h2 class="unnumbered">TXT</h2>
<p>Unstructured data (most commonly data representing raw text) is also
very common - particularly when working with corpus data.</p>
<p>To load text data into R (here in the form of a txt file), we can use
the <code>scan</code> function. Reading in texts using the
<code>scan</code> function will result in loading vectors of stings
where each string represents a separate word.</p>
<pre class="r"><code>testtxt &lt;- scan(here::here(&quot;data&quot;, &quot;english.txt&quot;), what = &quot;char&quot;)
# inspect
testtxt</code></pre>
<pre><code>##  [1] &quot;Linguistics&quot; &quot;is&quot;          &quot;the&quot;         &quot;scientific&quot;  &quot;study&quot;      
##  [6] &quot;of&quot;          &quot;language&quot;    &quot;and&quot;         &quot;it&quot;          &quot;involves&quot;   
## [11] &quot;the&quot;         &quot;analysis&quot;    &quot;of&quot;          &quot;language&quot;    &quot;form,&quot;      
## [16] &quot;language&quot;    &quot;meaning,&quot;    &quot;and&quot;         &quot;language&quot;    &quot;in&quot;         
## [21] &quot;context.&quot;</code></pre>
<p>In contract, the <code>readLines</code> function will read in
complete lines and result in a vector of strings representing lines (if
the entire text is in 1 line, the the entire text will be loaded as a
single string).</p>
<pre class="r"><code>testtxt2 &lt;- readLines(here::here(&quot;data&quot;, &quot;english.txt&quot;))
# inspect
testtxt2</code></pre>
<pre><code>## [1] &quot;Linguistics is the scientific study of language and it involves the analysis of language form, language meaning, and language in context. &quot;</code></pre>
<p>To save text data, we can use the <code>writeLines</code> function as
shown below.</p>
<pre class="r"><code>writeLines(text2, here::here(&quot;data&quot;, &quot;english.txt&quot;))</code></pre>
</div>
<div id="multiple-txts" class="section level2 unnumbered">
<h2 class="unnumbered">Multiple TXTs</h2>
<p>When dealing with text data, it is quite common to encounter
scenarios where we need to load multiple files containing texts. In such
cases, we typically begin by storing the file locations in an object
(referred to as <code>fls</code> in this context) and then proceed to
load the files using the <code>sapply</code> function, which allows for
looping. Within the <code>sapply</code> function, we have the option to
utilize either <code>scan</code> or <code>writeLines</code> for reading
the text. In the example below, we employ <code>scan</code> and
subsequently merge the individual elements into a single text using the
<code>paste</code> function. The output demonstrates the successful
loading of 7 txt files from the <code>testcorpus</code> located within
the <code>data</code> folder.</p>
<pre class="r"><code># extract file paths
fls &lt;- list.files(here::here(&quot;data&quot;, &quot;testcorpus&quot;), pattern = &quot;txt&quot;, full.names = T)
# load files
txts &lt;- sapply(fls, function(x){
  x &lt;- scan(x, what = &quot;char&quot;) %&gt;%
    paste0( collapse = &quot; &quot;)
  })
# inspect
str(txts)</code></pre>
<pre><code>##  Named chr [1:7] &quot;Linguistics is the scientific study of language. It involves analysing language form language meaning and langu&quot;| __truncated__ ...
##  - attr(*, &quot;names&quot;)= chr [1:7] &quot;F:/data recovery/Uni/UQ/SLC/LADAL/SLCLADAL.github.io/data/testcorpus/linguistics01.txt&quot; &quot;F:/data recovery/Uni/UQ/SLC/LADAL/SLCLADAL.github.io/data/testcorpus/linguistics02.txt&quot; &quot;F:/data recovery/Uni/UQ/SLC/LADAL/SLCLADAL.github.io/data/testcorpus/linguistics03.txt&quot; &quot;F:/data recovery/Uni/UQ/SLC/LADAL/SLCLADAL.github.io/data/testcorpus/linguistics04.txt&quot; ...</code></pre>
<p>To save multiple txt files, we follow a similar procedure and first
determine the paths that define where R will store the files and then
loop over the files and store them in the <code>testcorpus</code>
folder.</p>
<pre class="r"><code># define where to save each file
outs &lt;- file.path(paste(here::here(), &quot;/&quot;, &quot;data/testcorpus&quot;, &quot;/&quot;, &quot;text&quot;, 1:7, &quot;.txt&quot;, sep = &quot;&quot;))
# save the files
lapply(seq_along(txts), function(i) 
       writeLines(txts[[i]],  
       con = outs[i]))</code></pre>
</div>
</div>
<div id="r-data-objects" class="section level1 unnumbered">
<h1 class="unnumbered">R data objects</h1>
<p>When working withR in RStudio, it makes sense to save data as R data
objects as this requires minimal storage space and allows to load and
save data very quickly. R data objects can have any format (structured,
unstructured, lists, etc.). Here, we use the <code>readRDS</code>
function to load R data objects (which can represent any form or type of
data).</p>
<pre class="r"><code># load data
rdadat &lt;- readRDS(here::here(&quot;data&quot;, &quot;testdat.rda&quot;))
# inspect
head(rdadat)</code></pre>
<pre><code>##   Variable1 Variable2
## 1         6        67
## 2        65        16
## 3        12        56
## 4        56        34
## 5        45        54
## 6        84        42</code></pre>
<p>To save R data objects, we use the <code>saveRDS</code> function as
shown below.</p>
<pre class="r"><code>saveRDS(rdadat, file = here::here(&quot;data&quot;, &quot;testdat.rda&quot;))</code></pre>
</div>
<div id="web-data" class="section level1 unnumbered">
<h1 class="unnumbered">Web data</h1>
<p>You can load all types of data discussed above from the web. the only
thing you need to do is to change the path. Instead of defining a path
on your own computer, simply replace it with a url with thin the
<code>url</code> function nd the additional argument
<code>"rb"</code>.</p>
<p>So loading the <code>testdat.rda</code> from the LADAL github data
repo would require the following path specification:</p>
<p><code>url("https://slcladal.github.io/data/testdat.rda", "rb")</code></p>
<p>compared to the data repo in the current Rproj:</p>
<p><code>here::here("data", "testdat.rda")</code></p>
<p>See below how you can load, e.g., an <code>rda</code> object from the
LADAL data repo on GitHub.</p>
<pre class="r"><code>webdat &lt;- base::readRDS(url(&quot;https://slcladal.github.io/data/testdat.rda&quot;, &quot;rb&quot;))
# inspect
head(webdat)</code></pre>
<pre><code>##   Variable1 Variable2
## 1         6        67
## 2        65        16
## 3        12        56
## 4        56        34
## 5        45        54
## 6        84        42</code></pre>
<p>We can then store this data as shown in the sections above.</p>
</div>
<div id="generating-data" class="section level1 unnumbered">
<h1 class="unnumbered">Generating data</h1>
<p>In this section, we will briefly have a look at how to generate data
in R.</p>
<div id="creating-tabular-data" class="section level2 unnumbered">
<h2 class="unnumbered">Creating tabular data</h2>
<p>To create a simple data frame, we can simply generate the columns and
then bind them together using the <code>data.frame</code> function as
shown below.</p>
<pre class="r"><code># create a data frame from scratch
age &lt;- c(25, 30, 56)
gender &lt;- c(&quot;male&quot;, &quot;female&quot;, &quot;male&quot;)
l1 &lt;- c(&quot;english&quot;, &quot;german&quot;, &quot;english&quot;)
mydat &lt;- data.frame(age, gender, l1)
# inspect
head(mydat)</code></pre>
<pre><code>##   age gender      l1
## 1  25   male english
## 2  30 female  german
## 3  56   male english</code></pre>
<p>You can also generate more complex data sets where columns or
variables correlate with each other. Below, we will generate a data set
with 4 correlated variables: <em>Proficiency</em> (the proficiency of a
speaker), <em>Abroad</em> (whether or not subjects have been abroad),
<em>University</em> (if they went to a standard or excellent
university), and <em>PluralError</em> (if they produced a number marking
error in a test sentence).</p>
<p>We start by setting seed so the generated data will be the same each
time we generate the data.</p>
<pre class="r"><code>set.seed(678)</code></pre>
<p>Next, we create a correlation matrix, Here, we will create 4
variables and for each of these variables we have to determine how
strongly each variable should be correlated with each other variable.
The diagonal values are 1 as each variable correlates perfectly with
itself.</p>
<pre class="r"><code>cmat &lt;- c(1.00,  0.05,  0.05, -0.5, 
          0.05,  1.00,  0.05, -0.3,
          0.05,  0.05,  1.00, -0.1,
         -0.50, -0.30, -0.10,  1.0)</code></pre>
<p>Next, we generate the data using the <code>rnorm_multi</code>
function. In this function, we need to specify:</p>
<ul>
<li>how many data points the data set should consist of
(<code>n</code>)<br />
</li>
<li>the number of variables (<code>vars</code>)<br />
</li>
<li>the means (<code>mu</code>)<br />
</li>
<li>the standard deviation (<code>sd</code>)<br />
</li>
<li>the correlations (here we specify the correlation matrix we defined
above)<br />
</li>
<li>the names of the variables (<code>varnames</code>).</li>
</ul>
<p>If all variables should have the same mean, then we only need to
provide a singe value but we need to provide 4 values, if we want the
variables to have different means).</p>
<pre class="r"><code>dat &lt;- faux::rnorm_multi(n = 400, vars = 4, mu = 1, sd = 1, cmat, 
                         varnames = c(&quot;Proficiency&quot;, &quot;Abroad&quot;, &quot;University&quot;, &quot;PluralError&quot;))
# inspect
head(dat)</code></pre>
<pre><code>##   Proficiency     Abroad University PluralError
## 1   1.2214098  1.2103764  1.1571743 -0.09080666
## 2   0.3439251  0.4244035  2.2630978  2.19437567
## 3   0.9070220  0.7618138  0.9030697  1.62879140
## 4   2.3410885 -0.5503251  2.0893112 -0.45122521
## 5   3.0568993  1.4600793  0.7689547 -1.05360914
## 6   2.7434079  1.5160429  1.2232027  1.51467370</code></pre>
<p>If you want to generate numeric data, then this would be all you need
to do. If you want to generate categorical variables, however, we need
to convert these numeric values into factors. In the example below, we
convert all values higher than 1 (the mean) into one level, and all
other values into a second level.</p>
<pre class="r"><code># modify data
dat &lt;- dat %&gt;%
  dplyr::mutate(Proficiency = ifelse(Proficiency &gt; 1, &quot;Advanced&quot;, &quot;Intermediate&quot;),
                Abroad = ifelse(Abroad &gt; 1, &quot;Abroad&quot;, &quot;Home&quot;),
                University = ifelse(University &gt; 1, &quot;Excellent&quot;, &quot;Standard&quot;),
                PluralError = ifelse(PluralError &gt; 1, &quot;Error&quot;, &quot;Correct&quot;))
# inspect
head(dat)</code></pre>
<pre><code>##    Proficiency Abroad University PluralError
## 1     Advanced Abroad  Excellent     Correct
## 2 Intermediate   Home  Excellent       Error
## 3 Intermediate   Home   Standard       Error
## 4     Advanced   Home  Excellent     Correct
## 5     Advanced Abroad   Standard     Correct
## 6     Advanced Abroad  Excellent       Error</code></pre>
<p>And again, we could then save this data on our computer as shown in
the sections above. For instance, we could save it as an MS Excel file
as shown below.</p>
<pre class="r"><code>write.xlsx(dat, here::here(&quot;data&quot;, &quot;dat.xlsx&quot;))</code></pre>
</div>
<div id="creating-text-data" class="section level2 unnumbered">
<h2 class="unnumbered">Creating text data</h2>
<p>You may also want to create textual data (e.g., to create sample
sentences or short test texts). Thus, we will briefly focus on how to
create textual data in R.</p>
<p>The easiest way to generate text data is to simply create strings and
combine them as shown below.</p>
<pre class="r"><code>text &lt;- c(&quot;This is an example sentence.&quot;, &quot;This is a second example sentence&quot;)
# inspect
text</code></pre>
<pre><code>## [1] &quot;This is an example sentence.&quot;      &quot;This is a second example sentence&quot;</code></pre>
<p>If you need to generate many sentences that have a standard format,
you can make use of the paste function.</p>
<pre class="r"><code>num &lt;- 1:4
start &lt;- &quot;This is sentence number &quot;
end &lt;- &quot;.&quot;
texts &lt;- paste(start, num, end, sep = &quot;&quot;)
# inspect
texts</code></pre>
<pre><code>## [1] &quot;This is sentence number 1.&quot; &quot;This is sentence number 2.&quot;
## [3] &quot;This is sentence number 3.&quot; &quot;This is sentence number 4.&quot;</code></pre>
<p>Or, you can combine these text snippets into a single string.</p>
<pre class="r"><code>onetext &lt;- paste(start, num, end, sep = &quot;&quot;, collapse = &quot; &quot;)
# inspect
onetext</code></pre>
<pre><code>## [1] &quot;This is sentence number 1. This is sentence number 2. This is sentence number 3. This is sentence number 4.&quot;</code></pre>
<p>The text can then be saved using the <code>writeLines</code> function
as shown below.</p>
<pre class="r"><code>writeLines(onetext, here::here(&quot;data&quot;, &quot;onetext.txt&quot;))</code></pre>
<p>This is all for this tutorial. We hope it is useful and that you have
a better idea about how to load, save and generate data now.</p>
</div>
</div>
<div id="citation-session-info" class="section level1 unnumbered">
<h1 class="unnumbered">Citation &amp; Session Info</h1>
<p>Schweinberger, Martin. 2022. <em>Loading, saving, and generating data
in R</em>. Brisbane: The University of Queensland. URL: <a
href="https://ladal.edu.au/load.html"
class="uri">https://ladal.edu.au/load.html</a> (Version 2022.11.08).</p>
<pre><code>@manual{schweinberger2022loadr,
  author = {Schweinberger, Martin},
  title = {Loading, saving, and generating data in R},
  note = {https://ladal.edu.au/load.html},
  year = {2022},
  organization = &quot;The University of Queensland, School of Languages and Cultures},
  address = {Brisbane},
  edition = {2022.11.08}
}</code></pre>
<pre class="r"><code>sessionInfo()</code></pre>
<pre><code>## R version 4.2.2 (2022-10-31 ucrt)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## Running under: Windows 10 x64 (build 22621)
## 
## Matrix products: default
## 
## locale:
## [1] LC_COLLATE=English_Australia.utf8  LC_CTYPE=English_Australia.utf8   
## [3] LC_MONETARY=English_Australia.utf8 LC_NUMERIC=C                      
## [5] LC_TIME=English_Australia.utf8    
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
## [1] data.tree_1.0.0  here_1.0.1       openxlsx_4.2.5.2 xlsx_0.6.5      
## [5] flextable_0.9.1  tidyr_1.3.0      stringr_1.5.0    dplyr_1.1.2     
## 
## loaded via a namespace (and not attached):
##  [1] Rcpp_1.0.10             xlsxjars_0.6.1          assertthat_0.2.1       
##  [4] rprojroot_2.0.3         digest_0.6.31           utf8_1.2.3             
##  [7] mime_0.12               R6_2.5.1                evaluate_0.21          
## [10] ggplot2_3.4.2           highr_0.10              pillar_1.9.0           
## [13] gdtools_0.3.3           rlang_1.1.1             curl_5.0.0             
## [16] uuid_1.1-0              rstudioapi_0.14         data.table_1.14.8      
## [19] jquerylib_0.1.4         klippy_0.0.0.9500       rmarkdown_2.21         
## [22] textshaping_0.3.6       munsell_0.5.0           shiny_1.7.4            
## [25] compiler_4.2.2          httpuv_1.6.11           xfun_0.39              
## [28] pkgconfig_2.0.3         askpass_1.1             systemfonts_1.0.4      
## [31] gfonts_0.2.0            htmltools_0.5.5         faux_1.2.1             
## [34] openssl_2.0.6           tidyselect_1.2.0        tibble_3.2.1           
## [37] fontBitstreamVera_0.1.1 httpcode_0.3.0          fansi_1.0.4            
## [40] crayon_1.5.2            later_1.3.1             crul_1.4.0             
## [43] grid_4.2.2              gtable_0.3.3            jsonlite_1.8.4         
## [46] xtable_1.8-4            lifecycle_1.0.3         magrittr_2.0.3         
## [49] scales_1.2.1            zip_2.3.0               cli_3.6.1              
## [52] stringi_1.7.12          cachem_1.0.8            promises_1.2.0.1       
## [55] xml2_1.3.4              bslib_0.4.2             ellipsis_0.3.2         
## [58] ragg_1.2.5              generics_0.1.3          vctrs_0.6.2            
## [61] tools_4.2.2             glue_1.6.2              officer_0.6.2          
## [64] fontquiver_0.2.1        purrr_1.0.1             fastmap_1.1.1          
## [67] yaml_2.3.7              colorspace_2.1-0        fontLiberation_0.1.0   
## [70] rJava_1.0-6             knitr_1.43              sass_0.4.6</code></pre>
<hr />
<p><a href="#introduction">Back to top</a></p>
<p><a href="https://ladal.edu.au">Back to HOME</a></p>
<hr />
</div>
<div class="footnotes footnotes-end-of-document">
<hr />
<ol>
<li id="fn1"><p>If you want to render the R Notebook on your machine,
i.e. knitting the document to html or a pdf, you need to make sure that
you have R and RStudio installed and you also need to download the <a
href="https://slcladal.github.io/content/bibliography.bib"><strong>bibliography
file</strong></a> and store it in the same folder where you store the
Rmd file.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
