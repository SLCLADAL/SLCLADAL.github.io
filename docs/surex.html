<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.165">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Martin Schweinberger">
<meta name="dcterms.date" content="2022-08-31">

<title>Creating Surveys, Questionnaires, and Experiments in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-VSGK4KYDQZ"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-VSGK4KYDQZ', { 'anonymize_ip': true});
</script>
<script src="site_libs/clipboard-1.7.1/clipboard.min.js"></script>
<link href="site_libs/primer-tooltips-1.4.0/build.css" rel="stylesheet">
<link href="site_libs/klippy-0.0.0.9500/css/klippy.min.css" rel="stylesheet">
<script src="site_libs/klippy-0.0.0.9500/js/klippy.min.js"></script>


</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./ladal_icon_cas_tran_white_trimed.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Language Technology and Data Analysis Laboratory</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">HOME</a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-about-ladal" role="button" data-bs-toggle="dropdown" aria-expanded="false">ABOUT LADAL</a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-about-ladal">    
        <li>
    <a class="dropdown-item" href="./people.html">
 <span class="dropdown-text">People | Collabs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./news.html">
 <span class="dropdown-text">News</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-events" role="button" data-bs-toggle="dropdown" aria-expanded="false">EVENTS</a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-events">    
        <li>
    <a class="dropdown-item" href="./workshops.html">
 <span class="dropdown-text">Workshops</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./compthinking.html">
 <span class="dropdown-text">Computational Thinking in HASS</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./webinars2022.html">
 <span class="dropdown-text">LADAL Webinar Series 2022</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./opening.html">
 <span class="dropdown-text">LADAL Webinar Series 2021</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./atapevents.html">
 <span class="dropdown-text">ATAP Events</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./tutorials.html">TUTORIALS</a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-resources" role="button" data-bs-toggle="dropdown" aria-expanded="false">RESOURCES</a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-resources">    
        <li>
    <a class="dropdown-item" href="./links.html">
 <span class="dropdown-text">Links</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./base.html">
 <span class="dropdown-text">Tutorial stylesheet</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./contact.html">CONTACT</a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#server-hosting" id="toc-server-hosting" class="nav-link" data-scroll-target="#server-hosting"><span class="toc-section-number">1</span>  Server hosting</a></li>
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link" data-scroll-target="#getting-started"><span class="toc-section-number">2</span>  Getting started</a>
  <ul class="collapse">
  <li><a href="#creating-instructions" id="toc-creating-instructions" class="nav-link" data-scroll-target="#creating-instructions">Creating instructions</a></li>
  <li><a href="#creating-simple-trials" id="toc-creating-simple-trials" class="nav-link" data-scroll-target="#creating-simple-trials">Creating simple trials</a></li>
  <li><a href="#creating-a-timeline" id="toc-creating-a-timeline" class="nav-link" data-scroll-target="#creating-a-timeline">Creating a timeline</a></li>
  <li><a href="#building-the-experiment" id="toc-building-the-experiment" class="nav-link" data-scroll-target="#building-the-experiment">Building the experiment</a></li>
  <li><a href="#what-have-we-created" id="toc-what-have-we-created" class="nav-link" data-scroll-target="#what-have-we-created">What have we created?</a></li>
  <li><a href="#running-the-experiment" id="toc-running-the-experiment" class="nav-link" data-scroll-target="#running-the-experiment">Running the experiment</a></li>
  </ul></li>
  <li><a href="#randomisation-repetition-and-variables" id="toc-randomisation-repetition-and-variables" class="nav-link" data-scroll-target="#randomisation-repetition-and-variables"><span class="toc-section-number">3</span>  Randomisation, repetition and variables</a>
  <ul class="collapse">
  <li><a href="#trial-templates" id="toc-trial-templates" class="nav-link" data-scroll-target="#trial-templates">Trial templates</a></li>
  <li><a href="#attaching-variables-to-timelines" id="toc-attaching-variables-to-timelines" class="nav-link" data-scroll-target="#attaching-variables-to-timelines">Attaching variables to timelines</a></li>
  <li><a href="#randomisation" id="toc-randomisation" class="nav-link" data-scroll-target="#randomisation">Randomisation</a></li>
  <li><a href="#repetition" id="toc-repetition" class="nav-link" data-scroll-target="#repetition">Repetition</a></li>
  <li><a href="#add-final-page" id="toc-add-final-page" class="nav-link" data-scroll-target="#add-final-page">Add final page</a></li>
  <li><a href="#build-experiment" id="toc-build-experiment" class="nav-link" data-scroll-target="#build-experiment">Build experiment</a></li>
  <li><a href="#running-the-experiment-1" id="toc-running-the-experiment-1" class="nav-link" data-scroll-target="#running-the-experiment-1">Running the experiment</a></li>
  </ul></li>
  <li><a href="#using-resource-files" id="toc-using-resource-files" class="nav-link" data-scroll-target="#using-resource-files"><span class="toc-section-number">4</span>  Using resource files</a>
  <ul class="collapse">
  <li><a href="#the-resource-folder" id="toc-the-resource-folder" class="nav-link" data-scroll-target="#the-resource-folder">The resource folder</a></li>
  <li><a href="#creating-resources-in-r" id="toc-creating-resources-in-r" class="nav-link" data-scroll-target="#creating-resources-in-r">Creating resources in R</a></li>
  <li><a href="#the-trial-template" id="toc-the-trial-template" class="nav-link" data-scroll-target="#the-trial-template">The trial template</a></li>
  <li><a href="#using-resources-in-a-timeline" id="toc-using-resources-in-a-timeline" class="nav-link" data-scroll-target="#using-resources-in-a-timeline">Using resources in a timeline</a></li>
  </ul></li>
  <li><a href="#image-video-and-audio-files" id="toc-image-video-and-audio-files" class="nav-link" data-scroll-target="#image-video-and-audio-files"><span class="toc-section-number">5</span>  Image, video and audio files</a>
  <ul class="collapse">
  <li><a href="#images" id="toc-images" class="nav-link" data-scroll-target="#images">Images</a></li>
  <li><a href="#videos" id="toc-videos" class="nav-link" data-scroll-target="#videos">Videos</a></li>
  <li><a href="#audio" id="toc-audio" class="nav-link" data-scroll-target="#audio">Audio</a></li>
  <li><a href="#building-the-experiment-1" id="toc-building-the-experiment-1" class="nav-link" data-scroll-target="#building-the-experiment-1">Building the experiment</a></li>
  <li><a href="#running-the-experiment-2" id="toc-running-the-experiment-2" class="nav-link" data-scroll-target="#running-the-experiment-2">Running the experiment</a></li>
  <li><a href="#what-have-we-created-1" id="toc-what-have-we-created-1" class="nav-link" data-scroll-target="#what-have-we-created-1">What have we created?</a></li>
  </ul></li>
  <li><a href="#buttons-key-presses-and-sliders" id="toc-buttons-key-presses-and-sliders" class="nav-link" data-scroll-target="#buttons-key-presses-and-sliders"><span class="toc-section-number">6</span>  Buttons, key presses and sliders</a></li>
  <li><a href="#survey-pages" id="toc-survey-pages" class="nav-link" data-scroll-target="#survey-pages"><span class="toc-section-number">7</span>  Survey pages</a>
  <ul class="collapse">
  <li><a href="#creating-a-question" id="toc-creating-a-question" class="nav-link" data-scroll-target="#creating-a-question">Creating a question</a></li>
  <li><a href="#composing-a-page-of-questions" id="toc-composing-a-page-of-questions" class="nav-link" data-scroll-target="#composing-a-page-of-questions">Composing a page of questions</a></li>
  <li><a href="#example-experiment" id="toc-example-experiment" class="nav-link" data-scroll-target="#example-experiment">Example experiment</a></li>
  </ul></li>
  <li><a href="#loops-and-branches" id="toc-loops-and-branches" class="nav-link" data-scroll-target="#loops-and-branches"><span class="toc-section-number">8</span>  Loops and branches</a>
  <ul class="collapse">
  <li><a href="#branching-timelines" id="toc-branching-timelines" class="nav-link" data-scroll-target="#branching-timelines">Branching timelines</a></li>
  <li><a href="#what-is-going-on-here" id="toc-what-is-going-on-here" class="nav-link" data-scroll-target="#what-is-going-on-here">What is going on here?</a></li>
  <li><a href="#looping-timelines" id="toc-looping-timelines" class="nav-link" data-scroll-target="#looping-timelines">Looping timelines</a></li>
  </ul></li>
  <li><a href="#a-choice-reaction-time-task" id="toc-a-choice-reaction-time-task" class="nav-link" data-scroll-target="#a-choice-reaction-time-task"><span class="toc-section-number">9</span>  A choice reaction time task</a>
  <ul class="collapse">
  <li><a href="#creating-the-resource-files" id="toc-creating-the-resource-files" class="nav-link" data-scroll-target="#creating-the-resource-files">Creating the resource files</a></li>
  <li><a href="#defining-instructions" id="toc-defining-instructions" class="nav-link" data-scroll-target="#defining-instructions">Defining instructions</a></li>
  <li><a href="#defining-the-experiment-trials" id="toc-defining-the-experiment-trials" class="nav-link" data-scroll-target="#defining-the-experiment-trials">Defining the experiment trials</a></li>
  <li><a href="#building-the-experiment-2" id="toc-building-the-experiment-2" class="nav-link" data-scroll-target="#building-the-experiment-2">Building the experiment</a></li>
  <li><a href="#running-the-experiment-3" id="toc-running-the-experiment-3" class="nav-link" data-scroll-target="#running-the-experiment-3">Running the experiment</a></li>
  </ul></li>
  <li><a href="#citation-session-info" id="toc-citation-session-info" class="nav-link" data-scroll-target="#citation-session-info">Citation &amp; Session Info</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Creating Surveys, Questionnaires, and Experiments in R</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Martin Schweinberger </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">August 31, 2022</p>
    </div>
  </div>
    
  </div>
  

</header>

<div class="cell">
<div class="cell-output-display">
<p><img src="https://slcladal.github.io/images/uq1.jpg" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<section id="introduction" class="level1 unnumbered">
<h1 class="unnumbered">Introduction</h1>
<p>This tutorial shows how to create surveys, questionnaires, and behavioral experiments in R. The RNotebook for this tutorial can be downloaded <a href="https://slcladal.github.io/content/surex.Rmd">here</a>. If you want to render the Rmarkdown notebook on your machine, i.e.&nbsp;knitting the document to a html or pdf file, you need to make sure that you have R installed and you also need to download the <a href="https://slcladal.github.io/content/bibliography.bib">bibliography file</a> and store it in the same folder where you store the Rmd file.</p>
<p>This tutorial is based on the <a href="http://jaysire.djnavarro.net/articles/jaysire01.html">this tutorial</a> by Danielle Navarro and uses the <code>jaysire</code> package which was also developed my Danielle Navarro. I can highly recommend checking out <a href="http://jaysire.djnavarro.net/articles/jaysire01.html">that tutorial</a> as it is more elaborate and, as it is written by the developer, it is naturally better. The idea behind the <code>jaysire</code> package is to allow users to write flexible behavioral experiments that run through a web browser, relying on the jsPsych javascript library to run the experiment itself. In this tutorial, we will walk you through the process of creating a minimal toy experiment using the jaysire package.</p>
<p><strong>Preparation and session set up</strong></p>
<p>This tutorial is based on R. If you have not installed R or are new to it, you will find an introduction to and more information how to use R <a href="https://slcladal.github.io/intror.html">here</a>. For this tutorials, we need to install certain <em>packages</em> from an R <em>library</em> so that the scripts shown below are executed without errors. Before turning to the code below, please install the packages by running the code below this paragraph. If you have already installed the packages mentioned below, then you can skip ahead and ignore this section. To install the necessary packages, simply run the following code - it may take some time (between 1 and 5 minutes to install all of the libraries so you do not need to worry if it takes some time).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># set options</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">stringsAsFactors =</span> F)          <span class="co"># no automatic data transformation</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="st">"scipen"</span> <span class="ot">=</span> <span class="dv">100</span>, <span class="st">"digits"</span> <span class="ot">=</span> <span class="dv">12</span>) <span class="co"># suppress math annotation</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># install packages</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tibble"</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"here"</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"remotes"</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"djnavarro/jaysire"</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># install klippy for copy-to-clipboard button in code chunks</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"rlesur/klippy"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next we activate the packages.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># activate packages</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jaysire)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co"># activate klippy for copy-to-clipboard button</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>klippy<span class="sc">::</span><span class="fu">klippy</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<script>
  addClassKlippyTo("pre.r, pre.markdown");
  addKlippy('left', 'top', 'auto', '1', 'Copy code', 'Copied!');
</script>
</div>
</div>
<p>Once you have installed RStudio and have also initiated the session by executing the code shown above, you are good to go.</p>
</section>
<section id="server-hosting" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Server hosting</h1>
<p>In this tutorial, we write a survey (or a behavioral experiment). However, if you want to distribute the survey to participants, you will need to upload it to a server where people can take part in the survey/experiment.</p>
<p>There are various options for doing this. a very handy option is <a href="https://cognition.run">Cognition.run</a> (see https://cognition.run) which is a service for hosting jsPsych experiments online. It’s easy to use - and free! Also, it integrates easily with online labor markets like Mechanical Turk and Prolific. <a href="https://www.youtube.com/watch?v=O628dNA7WCc">Here is a YouTube tutorial</a> on how to upload your experiment to cognition.run.</p>
<p>Here are some sources that also provide additional options and information about server hosting:</p>
<ul>
<li><p>https://redcap.health.uq.edu.au/</p></li>
<li><p>https://qfab.org/training/Clinical%20data%20capture%20and%20management%20with%20REDcap</p></li>
<li><p>https://cran.r-project.org/web/packages/REDCapR/REDCapR.pdf</p></li>
</ul>
</section>
<section id="getting-started" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Getting started</h1>
<p>Because the <code>jaysire</code> package is a wrapper around jsPsych, the place to start is with jsPsych itself. The key idea in jsPsych is that your job is to provide a description of the experiment, referred to as a timeline. The timeline is an abstract description of what stimuli should be shown to participants, how responses are to be collected, what randomisation procedure to follow, and so on. Once you have specified the timeline, the jsPsych library takes care of all the low level actions like determining which trial will run next, where the data are stored and so on.</p>
<p>In its simplest form, a timeline is straightforward: it’s just a list of the trials that make up the experiment, listed in the order that they should be run. We’ll talk about fancier features like randomisation, loops, conditional branching etc later on, but for now let’s imagine that all we want to do is run a fixed sequence of trials in a fixed order.</p>
<p>That sounds pretty straightforward, but raises the natural question of “what is a ‘trial’, exactly?” Behavioural experiments can vary in all sorts of ways, and so the number of things that can be considered a “trial” in an experiment is limited only by your imagination. The way that jsPsych handles this is providing a system of plugins, where each plugin defines a different kind of experimental trial, and allows you to write your own plugins if you need to. Within the jaysire package, there is a function called <code>trial_generic</code> that allows you to create a trial using any plugin you like, but in most cases it is more convenient to use a more specific function because the arguments are better documented.</p>
<section id="creating-instructions" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="creating-instructions">Creating instructions</h2>
<p>In most experiments, the first thing we want to do is present some instructions to the participant. jsPsych contains an <code>instructions</code> plugin that will present multiple pages of instructions to the participant, and there is a corresponding function in jaysire called <code>trial_instructions</code> that we can use:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>instructions <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">trial_instructions</span>(</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">pages =</span> <span class="fu">c</span>(</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Welcome! Use the arrow buttons to browse these instructions"</span>,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Your task is to decide if an equation like '2 + 2 = 4' is true or false"</span>,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"You will respond by clicking a button"</span>,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Press the 'Next' button to begin!"</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">show_clickable_nav =</span> <span class="cn">TRUE</span>,</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">post_trial_gap =</span> <span class="dv">1000</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In this code, the pages argument specifies four very short pages of text that will be displayed to the participants. By setting <code>show_clickable_nav</code> to <code>TRUE</code>, we are telling jsPsych to display a pair of buttons that participants can click to move forward or backward within the instructions. By default, these are labeled “Next” and “Previous”, but you can change this if you like. The third thing I’ve specified here is the <code>post_trial_gap</code>, which is the length of time (in milliseconds) that the experiment will pause between the end of this trial (the instructions) and the start of the next one. During this “gap” period a blank screen is shown.</p>
</section>
<section id="creating-simple-trials" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="creating-simple-trials">Creating simple trials</h2>
<p>Our next job is to write some experimental trials! We’ll keep it simple in this first example, and create two variables trial1 and trial2. In both cases we’ll present people with a piece of text, and then ask them to respond by clicking a button with the mouse. We can do this with the <code>trial_html_button_response</code> function. This function will use the <code>html-button-response</code> plugin within jsPsych. The plugin does exactly what you might expect given the name: it displays some HTML as the stimulus (in this case, just some regular text), and collects responses using buttons! Here’s the code to create trial1:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>trial1 <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">trial_html_button_response</span>(</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus =</span> <span class="st">"13 + 23 = 36"</span>,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">"true"</span>, <span class="st">"false"</span>),</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">post_trial_gap =</span> <span class="dv">1000</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In this code the stimulus argument specifies the text that will be displayed on screen to the participant, and the choices argument specifies the labels that will be shown on the response buttons. Again, the post_trial_gap argument is used to tell jsPsych how long to pause before starting the next trial. We can create trial2 in much the same way:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>trial2 <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">trial_html_button_response</span>(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus =</span> <span class="st">"17 - 9 = 6"</span>,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">"true"</span>, <span class="st">"false"</span>), </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">post_trial_gap =</span> <span class="dv">1000</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In fact, the code for trial2 is so similar to the code for trial1 that it feels inefficient. There should be a way to create both trials at the same time, and indeed there is, which I’ll talk about that later.</p>
</section>
<section id="creating-a-timeline" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="creating-a-timeline">Creating a timeline</h2>
<p>Now that we have our trial objects, instructions, trial1 and trial2, our next task is to bind together into a timeline. The <code>build_timeline</code> function allows us to do this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>all_trials <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">build_timeline</span>(instructions, trial1, trial2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>At this point we have a complete timeline for our simple experiment! Yay!</p>
</section>
<section id="building-the-experiment" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="building-the-experiment">Building the experiment</h2>
<p>At the moment we have a complete timeline, but it is stored in an abstract form as the all_trials variable. What we really want to do is <em>build</em>” an experiment from this timeline: we want to write the files that will run the experiment, and save those files somewhere. That is the job of the <code>build_experiment</code> function. First, let’s specify the location of the experiment. Normally, we would build the experiment into a sensible location (e.g., somewhere inside an RStudio project), but for the purposes of this demonstration – which has to be reproducible on any computer, not just mine – I’ll use the <code>temporary_folder</code> function for this purposes. Let’s check if there already exists a exp_path folder, and create it if it doesn’t exist:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">exists</span>(<span class="st">"exp_path"</span>)) {</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  exp_path <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">temporary_folder</span>()</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect location of temp output folder</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>exp_path</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/tmp/RtmpmeYlBg/jaysire_3fefe"</code></pre>
</div>
</div>
<p>Now all we have to do is write the experiment into this folder <code>build_experiment</code> function, specifying the timeline and path arguments to tell R what to write and where to write it:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>jaysire<span class="sc">::</span><span class="fu">build_experiment</span>(</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">timeline =</span> all_trials,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> exp_path,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">on_finish =</span> <span class="fu">save_locally</span>()</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(path): '/tmp/RtmpmeYlBg/jaysire_3fefe' already exists</code></pre>
</div>
</div>
<p>The other thing that is specified is the <code>on_finish</code> argument, which tells jsPsych what do to when the experiment ends. In the present case, the only thing we want to do is save the data. To keep it simple, we’ll assume the experiment is going to be run on the same computer where the experiment is stored, and so we can use the <code>save_locally</code> function here.</p>
</section>
<section id="what-have-we-created" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="what-have-we-created">What have we created?</h2>
<p>When we run the <code>build_experiment</code> function, two subfolders within the <em>exp_path</em> folder are created, one called <em>data</em> (which is initially empty) and another called <em>experiment</em>, which contains all the source files required to run the experiment. Here are the files we have just created:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">list.files</span>(exp_path, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "experiment/experiment.js"                                  
[2] "experiment/index.html"                                     
[3] "experiment/resource/script/jspsych-html-button-response.js"
[4] "experiment/resource/script/jspsych-instructions.js"        
[5] "experiment/resource/script/jspsych.js"                     
[6] "experiment/resource/style/jspsych.css"                     </code></pre>
</div>
</div>
</section>
<section id="running-the-experiment" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="running-the-experiment">Running the experiment</h2>
<p>To run the experiment on the local machine (and save the data to the <em>data</em> folder) all we have to do is call the <code>run_locally</code> function, specifying the location of the experiment to run:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>jaysire<span class="sc">::</span><span class="fu">run_locally</span>(<span class="at">path =</span> exp_path)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="randomisation-repetition-and-variables" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Randomisation, repetition and variables</h1>
<p>In the previous section, we created three separate trials and put them together into a timeline. This approach works well when your experiment is short and you don’t need to worry about randomization, but most behavioral experiments are considerably longer, and require some degree of randomization.</p>
<p>The goal in this article is to take the same experiment and extend it in three ways:</p>
<ul>
<li>Avoid code duplication using timeline variables<br>
</li>
<li>Randomise the order of trials within a block<br>
</li>
<li>Repetition of blocks of trials</li>
</ul>
<section id="trial-templates" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="trial-templates">Trial templates</h2>
<p>In the original example, our next step was to define a specific trial using <code>trial_html_button</code> response, in which the stimulus argument corresponded to a specific equation like <em>2 + 2 = 4</em>, and the choices offered to participants were to judge the equation to be “true” or “false”. This time around, we’ll do the same thing except we won’t specify the stimulus directly. Instead, what we’ll do is define a timeline variable using the <code>variable</code> function. The <code>insert_variable</code> function has only a single argument name, which tells jsPsych what to to call the timeline variable. So we can create a kind of “trial template” like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>trial_template <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">trial_html_button_response</span>(</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus =</span> <span class="fu">insert_variable</span>(<span class="at">name =</span> <span class="st">"my_stimulus"</span>),</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">"true"</span>, <span class="st">"false"</span>),</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">post_trial_gap =</span> <span class="dv">1000</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="attaching-variables-to-timelines" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="attaching-variables-to-timelines">Attaching variables to timelines</h2>
<p>Our next step is to specify what possible values the variable can have. Let’s do that by creating a character vector that lists all the equations we want to show people:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>equations <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"13 + 23 = 36"</span>,  </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"17 - 9 = 6"</span>, </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"125 / 5 = 25"</span>, </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"2 - 4 = 6"</span>, </span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"12 + 39 = 43"</span>, </span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"4 * 23 = 92"</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now that we have specified the stimuli as an ordinary R variable, what we need to do is to link it to the trial template we defined earlier. To do this, we first “wrap” <code>trial_template</code> into a timeline, and use the <code>set_variables</code> function to attach a variable to that timeline:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>trials <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">build_timeline</span>(trial_template) <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  jaysire<span class="sc">::</span><span class="fu">set_variables</span>(<span class="at">my_stimulus =</span> equations)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This might seem slightly odd, because in our first example we created all the trials individually and only wrapped them into a timeline at the very end. However, jsPsych allows you to nest timelines within other timelines, and this can be extremely useful. In this situation, what we have create is essentially a new <em>mini-timeline</em> that consists of six copies of the trial_template, each one using a different equation. This <em>templating</em> approach produces code that is much easier to write than if we had to use <code>trial_html_button_response</code> six times, and as you might imagine this is much more efficient when there are hundreds of different stimuli!</p>
</section>
<section id="randomisation" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="randomisation">Randomisation</h2>
<p>So far, so good. However, one limitation with our code is that the experiment will run the six trials in the same order every time. If our experiment were running in R, what we could to is use the <code>sample</code> function to shuffle stimuli, but that won’t work in this situation because the experiment will (eventually) run through a web browser. So if we want to randomise the trial ordering we need to use the randomisation tools built into jsPsych. We can do this by attaching parameters to the timeline that we have just defined using the <code>set_parameters</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>trials <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">build_timeline</span>(trial_template) <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  jaysire<span class="sc">::</span><span class="fu">set_variables</span>(<span class="at">stimulus =</span> equations) <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  jaysire<span class="sc">::</span><span class="fu">set_parameters</span>(<span class="at">randomize_order =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In this version, the trials timeline contains the same six copies of the template, but jsPsych will show them in a random order when the experiment is run in the browser.</p>
</section>
<section id="repetition" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="repetition">Repetition</h2>
<p>We’re almost there. Suppose we want to create a <em>block randomised</em> design, in which all six items are presented in a random order, and then the same six items are repeated in a different randomised order. This kind of design is quite common in experimental psychology, and we can create one by setting the repetitions parameter for the timeline:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>trials <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">build_timeline</span>(trial_template) <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  jaysire<span class="sc">::</span><span class="fu">set_variables</span>(<span class="at">stimulus =</span> equations) <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  jaysire<span class="sc">::</span><span class="fu">set_parameters</span>(<span class="at">randomize_order =</span> <span class="cn">TRUE</span>, <span class="at">repetitions =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="add-final-page" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="add-final-page">Add final page</h2>
<p>We can also add a final <em>good bye</em> screen to inform participants that the experiment is over by defining a <em>finish</em> trial.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>finish <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">trial_html_keyboard_response</span>(</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus =</span> <span class="st">"All done! Press any key to finish"</span>,</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">choices =</span> <span class="fu">respond_any_key</span>()</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="build-experiment" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="build-experiment">Build experiment</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">build_experiment</span>(</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">timeline =</span> <span class="fu">build_timeline</span>(instructions, trials, finish),</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> exp_path,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">on_finish =</span> <span class="fu">save_locally</span>()</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(path): '/tmp/RtmpmeYlBg/jaysire_3fefe' already exists</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(file.path(path, experiment_folder)): '/tmp/RtmpmeYlBg/
jaysire_3fefe/experiment' already exists</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(file.path(path, experiment_folder, "resource")): '/tmp/
RtmpmeYlBg/jaysire_3fefe/experiment/resource' already exists</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(file.path(path, experiment_folder, "resource", "script")):
'/tmp/RtmpmeYlBg/jaysire_3fefe/experiment/resource/script' already exists</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(file.path(path, experiment_folder, "resource", "style")):
'/tmp/RtmpmeYlBg/jaysire_3fefe/experiment/resource/style' already exists</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(file.path(path, experiment_folder, "resource", "audio")):
'/tmp/RtmpmeYlBg/jaysire_3fefe/experiment/resource/audio' already exists</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(file.path(path, experiment_folder, "resource", "video")):
'/tmp/RtmpmeYlBg/jaysire_3fefe/experiment/resource/video' already exists</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(file.path(path, experiment_folder, "resource", "image")):
'/tmp/RtmpmeYlBg/jaysire_3fefe/experiment/resource/image' already exists</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(file.path(path, experiment_folder, "resource", "other")):
'/tmp/RtmpmeYlBg/jaysire_3fefe/experiment/resource/other' already exists</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(file.path(path, data_folder)): '/tmp/RtmpmeYlBg/
jaysire_3fefe/data' already exists</code></pre>
</div>
</div>
</section>
<section id="running-the-experiment-1" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="running-the-experiment-1">Running the experiment</h2>
<p>To run the experiment on the local machine (and save the data to the <em>data</em> folder) all we have to do is call the <code>run_locally</code> function, specifying the location of the experiment to run:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>jaysire<span class="sc">::</span><span class="fu">run_locally</span>(<span class="at">path =</span> exp_path)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="using-resource-files" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Using resource files</h1>
<p>In the first and second articles, the stimulus materials were simple text, and so I didn’t need to worry about specifying image files or anything like that. This is not the norm, of course: most behavioral experiments include images, audio or video in some form or another. The way we handle this in jaysire is by referring to resource files that are stored somewhere else on your computer, but will be copied (not moved - the original files are untouched) into the experiment folder when the <code>build_experiment</code> function is called. In this article I’ll walk you through the process. For the sake of simplicity, I won’t bother with instruction trials this time</p>
<section id="the-resource-folder" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="the-resource-folder">The resource folder</h2>
<p>The way jaysire works is to assume that there is a folder on your computer that contains all the files that your experiment needs to use. The current implementation in jaysire is a bit crude, so this needs to be a flat folder (i.e., it cannot contain any subfolders). Normally, this folder would be located somewhere sensible, but for the purposes of this example I’ll create one in a temporary folder:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># specify the path</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>resource_folder <span class="ot">&lt;-</span> <span class="fu">file.path</span>(exp_path, <span class="st">"images"</span>)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>resource_folder</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/tmp/RtmpmeYlBg/jaysire_3fefe/images"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create the empty folder if necessary</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">dir.exists</span>(resource_folder)) {</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dir.create</span>(resource_folder)</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Okay, so now we have a resource folder. Note that this folder is not part of our experiment (it can’t be, since we haven’t created the experiment yet!) it’s somewhere else.</p>
</section>
<section id="creating-resources-in-r" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="creating-resources-in-r">Creating resources in R</h2>
<p>The next step is to place resources in the folder. One way to do this is just to copy and paste existing files from your computer, but because we’re in R we might as well use R to create some images for us to use in our experiment.</p>
<p>The experimental task that we’re going to design is one that asks people to look at images containing red and blue dots and judge whether there are more red dots or more blue dots in the image. To do this, here’s a function that will generate an image file that plots nred red dots and nblue blue dots, randomly located.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>make_image <span class="ot">&lt;-</span> <span class="cf">function</span>(nblue, nred, filename) {</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  points <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fu">runif</span>(nblue <span class="sc">+</span> nred),</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">runif</span>(nblue <span class="sc">+</span> nred),</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"blue"</span>, nblue), <span class="fu">rep</span>(<span class="st">"red"</span>, nred))</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>  img <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(points, <span class="fu">aes</span>(x, y, <span class="at">color =</span> col)) <span class="sc">+</span> </span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_identity</span>() <span class="sc">+</span> </span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>()</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggsave</span>(filename, img, <span class="at">width =</span> <span class="dv">4</span>, <span class="at">height =</span> <span class="dv">4</span>, <span class="at">dpi =</span> <span class="dv">100</span>)</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now that we have our <code>make_image</code> function, let’s create stimuli that vary in the number of red dots and the number of blue dots! To do that, the first step is to specify how many red and blue dots will be in each image:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>nblue <span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>nred <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>, <span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>image_files <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"stimulus"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>, <span class="st">".png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we create the files:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(s <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>) {</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">make_image</span>(</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">nblue =</span> nblue[s], </span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">nred =</span> nred[s], </span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">filename =</span> <span class="fu">file.path</span>(resource_folder, image_files[s])</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Check that it worked:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">list.files</span>(resource_folder)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "stimulus1.png" "stimulus2.png" "stimulus3.png" "stimulus4.png"
[5] "stimulus5.png" "stimulus6.png" "stimulus7.png" "stimulus8.png"</code></pre>
</div>
</div>
<p>Okay, so now we have our stimulus materials, so we’re ready to start incorporating them into an experiment! However, before we do so, there’s something important to note. At this point we have two separate variables resource_folder that specifies the path to the resource folder, and image_files which specifies the names of the images that are contained within that folder. That is:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>resource_folder</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/tmp/RtmpmeYlBg/jaysire_3fefe/images"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>image_files</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "stimulus1.png" "stimulus2.png" "stimulus3.png" "stimulus4.png"
[5] "stimulus5.png" "stimulus6.png" "stimulus7.png" "stimulus8.png"</code></pre>
</div>
</div>
<p>These are the two variables we’ll need to use when building our experiment.</p>
</section>
<section id="the-trial-template" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="the-trial-template">The trial template</h2>
<p>Because we have several different stimuli to incorporate into the experiment, what we’ll do is specify a template just as we did in the second tutorial article. However, for our new experiment, the stimulus is an image rather than text, so we’ll use the <code>trial_image_button_response</code> function this time.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>trial_template <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">trial_image_button_response</span>(</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus =</span> <span class="fu">insert_variable</span>(<span class="at">name =</span> <span class="st">"my_stimulus"</span>),</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus_height =</span> <span class="dv">400</span>,</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus_width =</span> <span class="dv">400</span>,</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">"there are more red dots"</span>, <span class="st">"there are more blue dots"</span>),</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">post_trial_gap =</span> <span class="dv">1000</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Notice that again I’ve used the <code>insert_variable</code> function to indicate the blank space that will need to be filled in when the experiment gets built. Another thing to notice is that the function allows you to manually specify the height and the width of the image (in pixels), so I’ve done that here.</p>
</section>
<section id="using-resources-in-a-timeline" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="using-resources-in-a-timeline">Using resources in a timeline</h2>
<p>Much like we did in the previous example, we can construct the timeline by first transforming <code>trial_template</code> into a timeline object using the <code>build_timeline</code> function, and then use the <code>set_variables</code> function to specify the timeline variable <code>my_stimulus</code> that the template requires. The only difference between this time and the last one is that we need to use the <code>insert_resource</code> function so that jaysire knows that it needs to treat image_files as filenames. So our code looks like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>trials <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">build_timeline</span>(trial_template) <span class="sc">%&gt;%</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_variables</span>(<span class="at">my_stimulus =</span> <span class="fu">insert_resource</span>(image_files)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Of course, in a real experiment we would probably want to randomise the order in which the stimuli are presented, so it would make more sense to add an extra step like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>trials <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">build_timeline</span>(trial_template) <span class="sc">%&gt;%</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_variables</span>(<span class="at">my_stimulus =</span> <span class="fu">insert_resource</span>(image_files)) <span class="sc">%&gt;%</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_parameters</span>(<span class="at">randomize_order =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In a complete experiment, the trials timeline would need to have other things added to it. We’d need some instructions at the start and a thank you message at the end. But I won’t bother with that in this case, and so we’ll pretend that trials is the entire timeline for the experiment.</p>
<p>##Adding the resources to the experiment build{-}</p>
<p>The last step is, as always, building the experiment using the <code>build_experiment</code> function. Again, for the purposes of the tutorial I’ll set the experiment path to be a temporary folder, but in real life you’d put it somewhere sensible. Here’s how I do that:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>jaysire<span class="sc">::</span><span class="fu">build_experiment</span>(</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">timeline =</span> trials,</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> <span class="fu">file.path</span>(exp_path, <span class="st">"images_exp"</span>), </span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">resources =</span> <span class="fu">build_resources</span>(resource_folder),</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">on_finish =</span> <span class="fu">save_locally</span>()</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Notice the difference from the previous tutorials. This time around there is an extra argument called resources, and I’ve used the <code>build_resources</code> function. It’s worth unpacking this a little bit. To understand what is happening here, let’s have a look at the output of the <code>build_resources</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>jaysire<span class="sc">::</span><span class="fu">build_resources</span>(resource_folder)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 4
  name          type  from                                               to     
  &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;                                              &lt;chr&gt;  
1 stimulus1.png image /tmp/RtmpmeYlBg/jaysire_3fefe/images/stimulus1.png resour…
2 stimulus2.png image /tmp/RtmpmeYlBg/jaysire_3fefe/images/stimulus2.png resour…
3 stimulus3.png image /tmp/RtmpmeYlBg/jaysire_3fefe/images/stimulus3.png resour…
4 stimulus4.png image /tmp/RtmpmeYlBg/jaysire_3fefe/images/stimulus4.png resour…
5 stimulus5.png image /tmp/RtmpmeYlBg/jaysire_3fefe/images/stimulus5.png resour…
6 stimulus6.png image /tmp/RtmpmeYlBg/jaysire_3fefe/images/stimulus6.png resour…
7 stimulus7.png image /tmp/RtmpmeYlBg/jaysire_3fefe/images/stimulus7.png resour…
8 stimulus8.png image /tmp/RtmpmeYlBg/jaysire_3fefe/images/stimulus8.png resour…</code></pre>
</div>
</div>
<p>What the <code>build_resources</code> function does is scan the resource folder and construct a tibble containing all the information that jaysire needs to be able to structure the experiment appropriately. The first column is just the filename, the second column is the type of resource (in this case, everything is an image), the third column indicates where the original file is located, and the final column indicates where copy of that file will be created.</p>
<p>This probably seems unnecessarily complicated. The reason it is structured like this is because there are different kinds of resources, and the browser needs to be given different instructions for how to handle each type. That is, the HTML code for incorporating images is different to the code for audio, video, or javascript code, and so the input to <code>build_experiment</code> needs to be explicit about what kind of resource each file corresponds to. By default the <code>build_resources</code> function assumes that an .mp3 file is audio, a .png file is an image, etc, but you can override the defaults if you need to. Alternatively, there’s nothing stopping you from constructing this tibble manually if you wanted to: the <code>build_resources</code> function is just there to make life slightly less annoying.</p>
</section>
</section>
<section id="image-video-and-audio-files" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Image, video and audio files</h1>
<p>In the <a href="jaysire03.html">previous article</a> I provided a short walkthrough of resource files, and how they are handled in jaysire and jsPsych. However, the only form of resource file we looked at in that article were image files, and trials were handled using the <code>trial_image_button_response</code> function. In this article I’ll extend this discussion, introducing audio files and video files. To make our lives a little easier, this time around I won’t create the resource files from scratch. Instead, I’ll use resource files that come bundled with the jaysire package:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jaysire)</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>resources <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">"extdata"</span>, <span class="st">"resources"</span>, <span class="at">package =</span> <span class="st">"jaysire"</span>)</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="fu">list.files</span>(resources)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "heart.mpg"          "heart.png"          "heart.webm"        
[4] "lukewarm_banjo.mp3"</code></pre>
</div>
</div>
<p>We have one image file (“heart.png”), two versions of the same video in different formats (“heart.mpg” and “heart.webm”), and a single audio file (“lukewarm_banjo.mp3”).</p>
<section id="images" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="images">Images</h2>
<p>First, let’s write an trial using <code>trial_image_button_response</code> to handle display the image file and ask people to rate its pleasantness on a 3-point scale:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>image_trial <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">trial_image_button_response</span>(</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus =</span> <span class="fu">insert_resource</span>(<span class="st">"heart.png"</span>), </span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus_height =</span> <span class="dv">400</span>,</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus_width =</span> <span class="dv">400</span>,</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">"Unpleasant"</span>, <span class="st">"Neutral"</span>, <span class="st">"Pleasant"</span>) </span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This is familiar to us from the previous article. I’ve specified the <code>stimulus</code> itself using the <code>insert_resource</code> function, listed the <code>choices</code> available to participants, and some ancillary information about the size of the image.</p>
</section>
<section id="videos" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="videos">Videos</h2>
<p>Embedding videos in an experiment is, in principle, exactly the same as embedding images. Instead of using <code>trial_image_button_response</code> we use <code>trial_video_button_response</code>. However, there are a few complexities to note here. First, video files often require codecs to run, not every browser supports every form of video, and so on. As a consequence, it is often a good idea to have multiple versions of your video file, and let the browser find a version that it can display. As a consequence, instead of having a <code>stimulus</code> argument, we specify the video file using a vector of <code>sources</code>, like so:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>video_trial <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">trial_video_button_response</span>(</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">sources =</span> <span class="fu">insert_resource</span>(<span class="fu">c</span>(<span class="st">"heart.mpg"</span>, <span class="st">"heart.webm"</span>)), </span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">"Unpleasant"</span>, <span class="st">"Neutral"</span>, <span class="st">"Pleasant"</span>), </span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">trial_ends_after_video =</span> <span class="cn">FALSE</span>,</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">response_ends_trial =</span> <span class="cn">TRUE</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>By default, <code>trial_video_button_response</code> will end the trial as soon as the participant makes a response <em>or</em> the video ends. However, there are arguments that you can specify that allow you to make this decision yourself, as this example illustrates.</p>
</section>
<section id="audio" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="audio">Audio</h2>
<p>The structure of the audio trial is essentially the same as what we’ve seen previously.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>audio_trial <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">trial_audio_button_response</span>(</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus =</span> <span class="fu">insert_resource</span>(<span class="st">"lukewarm_banjo.mp3"</span>),</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">"Unpleasant"</span>, <span class="st">"Neutral"</span>, <span class="st">"Pleasant"</span>), </span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">trial_ends_after_audio =</span> <span class="cn">FALSE</span>,</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">response_ends_trial =</span> <span class="cn">TRUE</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>However, there is one nuance to audio files if you are playing them locally (i.e., on your own computer, rather than from a remote server), which I’ll explain in the next section.</p>
</section>
<section id="building-the-experiment-1" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="building-the-experiment-1">Building the experiment</h2>
<p>To build the experiment into the <code>exp_path</code> folder, I’ll call the <code>experiment</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>jaysire<span class="sc">::</span><span class="fu">build_experiment</span>(</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">timeline =</span> <span class="fu">build_timeline</span>(image_trial, video_trial, audio_trial),</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> exp_path, </span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">resources =</span> <span class="fu">build_resources</span>(resources),</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">use_webaudio =</span> <span class="cn">FALSE</span>,</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">on_finish =</span> <span class="fu">save_locally</span>()</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Most of this should look familiar. I’ve specified the <code>timeline</code> that describes the experiment, the <code>path</code> to the folder where it should be located, I’ve used the <code>build_resources</code> function to tell jaysire how to handle each of the resource files, and I’ve indicated that when the experiment finishes we should <code>save_locally</code> into the data folder (see the <a href="jaysire01.html">first article</a> for more information about the data folder).</p>
<p>There is one thing that is new. I’ve specified the <code>use_webaudio</code> argument and set it to <code>FALSE</code>. The reason for this is that when you’re running the experiment locally, the web browser treats locally stored audio files as though they were being hosted on a <em>different</em> server to the webpage itself, and that triggers a “cross origin request error” (it is treated as a security risk). Fortunately, jsPsych includes a method to disable this and by setting <code>use_webaudio = FALSE</code> you can get around this issue and run your audio files even when the experiment is running locally!</p>
</section>
<section id="running-the-experiment-2" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="running-the-experiment-2">Running the experiment</h2>
<p>To run the experiment on the local machine (and save the data to the “data” folder) all we have to do is call the <code>run_locally</code> function, specifying the location of the experiment to run:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>jaysire<span class="sc">::</span><span class="fu">run_locally</span>(<span class="at">path =</span> exp_path)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="what-have-we-created-1" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="what-have-we-created-1">What have we created?</h2>
<p>There is one last thing worth discussing, namely the file structure of the experiment that we have build. To start with, let’s take a look at what <code>build_resources</code> creates:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>jaysire<span class="sc">::</span><span class="fu">build_resources</span>(resources)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
  name               type  from                                            to   
  &lt;chr&gt;              &lt;chr&gt; &lt;chr&gt;                                           &lt;chr&gt;
1 heart.mpg          video /home/sam/programming/SLCLADAL.github.io/renv/… reso…
2 heart.png          image /home/sam/programming/SLCLADAL.github.io/renv/… reso…
3 heart.webm         video /home/sam/programming/SLCLADAL.github.io/renv/… reso…
4 lukewarm_banjo.mp3 audio /home/sam/programming/SLCLADAL.github.io/renv/… reso…</code></pre>
</div>
</div>
<p>Now take a look at where all the files have ended up:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">list.files</span>(exp_path, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "experiment/experiment.js"                                              
 [2] "experiment/index.html"                                                 
 [3] "experiment/resource/audio/lukewarm_banjo.mp3"                          
 [4] "experiment/resource/image/heart.png"                                   
 [5] "experiment/resource/script/jspsych-audio-button-response.js"           
 [6] "experiment/resource/script/jspsych-html-button-response.js"            
 [7] "experiment/resource/script/jspsych-html-keyboard-response.js"          
 [8] "experiment/resource/script/jspsych-image-button-response.js"           
 [9] "experiment/resource/script/jspsych-instructions.js"                    
[10] "experiment/resource/script/jspsych-video-button-response.js"           
[11] "experiment/resource/script/jspsych.js"                                 
[12] "experiment/resource/style/jspsych.css"                                 
[13] "experiment/resource/video/heart.mpg"                                   
[14] "experiment/resource/video/heart.webm"                                  
[15] "images_exp/experiment/experiment.js"                                   
[16] "images_exp/experiment/index.html"                                      
[17] "images_exp/experiment/resource/image/stimulus1.png"                    
[18] "images_exp/experiment/resource/image/stimulus2.png"                    
[19] "images_exp/experiment/resource/image/stimulus3.png"                    
[20] "images_exp/experiment/resource/image/stimulus4.png"                    
[21] "images_exp/experiment/resource/image/stimulus5.png"                    
[22] "images_exp/experiment/resource/image/stimulus6.png"                    
[23] "images_exp/experiment/resource/image/stimulus7.png"                    
[24] "images_exp/experiment/resource/image/stimulus8.png"                    
[25] "images_exp/experiment/resource/script/jspsych-image-button-response.js"
[26] "images_exp/experiment/resource/script/jspsych.js"                      
[27] "images_exp/experiment/resource/style/jspsych.css"                      
[28] "images/stimulus1.png"                                                  
[29] "images/stimulus2.png"                                                  
[30] "images/stimulus3.png"                                                  
[31] "images/stimulus4.png"                                                  
[32] "images/stimulus5.png"                                                  
[33] "images/stimulus6.png"                                                  
[34] "images/stimulus7.png"                                                  
[35] "images/stimulus8.png"                                                  </code></pre>
</div>
</div>
</section>
</section>
<section id="buttons-key-presses-and-sliders" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Buttons, key presses and sliders</h1>
<p>Up to this point we have only considered scenarios in which the participant makes responses by clicking buttons on the screen. Depending on the kind of stimulus that we are presenting, we used a different function:</p>
<ul>
<li>When the stimulus is an image, we used <code>trial_image_button_response</code></li>
<li>When the stimulus is text (or HTML more generally), we used <code>trial_html_button_response</code></li>
<li>When the stimulus is a video, we used <code>trial_video_button_response</code></li>
<li>When the stimulus is audio, we used <code>trial_audio_button_response</code></li>
</ul>
<p>This gives us a family of four trial types that vary depending on the <em>stimulus</em> modality. In jaysire (and jsPsych), we can also vary the <em>response</em> modality. There are three supported response methods: buttons, key presses, and slider bars. If you want users to respond by pressing a key, the jaysire package includes the following family of functions:</p>
<ul>
<li>For images: <code>trial_image_keyboard_response</code></li>
<li>For HTML <code>trial_html_keyboard_response</code></li>
<li>For video: <code>trial_video_keyboard_response</code></li>
<li>For audio: <code>trial_audio_keyboard_response</code></li>
</ul>
<p>If you would prefer a continuous valued response that uses a slider bar:</p>
<ul>
<li>For images: <code>trial_image_slider_response</code></li>
<li>For HTML <code>trial_html_slider_response</code></li>
<li>For video: <code>trial_video_slider_response</code></li>
<li>For audio: <code>trial_audio_slider_response</code></li>
</ul>
<p>All of these functions work in approximately the same way, but there are slightly different arguments required to describe a button press, a key press, and a slider bar.</p>
<p>For example, when you specify the <code>choices</code> in a button press trial, what you’re doing is provide a character vector that contains the <em>labels</em> shown on each of the buttons. In contrast, when you specify the <code>choices</code> argument for a keyboard response trial, you’re giving the a vector that specifies which keys can be used to register a response. A common use case is to ask people to press “p” to respond with their left hand or “q” to respond with their right hand, which you can do by setting <code>choices = c("p","q")</code>. You can also specify keys numerically by using their <a href="https://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes">javascript key code value</a>. This is worth noting, because when the data are recorded, it will be the numeric key code that appears in the data set! Also note that jaysire contains the <code>respond_any_key</code> function that allows the user to press any key to register a response, and the <code>respond_no_key</code> button which makes it impossible the respond with the keyboard (this is useful if you want a trial that runs for a fixed duration)</p>
<p>To give you a sense of how these functions work, here is a very simple experiment that uses a button press trial, a keypress trial, and a slider trial:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>resources <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">"extdata"</span>, <span class="st">"resources"</span>, <span class="at">package =</span> <span class="st">"jaysire"</span>)</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="co"># the keypress trial is used as an instruction screen</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>keypress_trial <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">trial_image_keyboard_response</span>(</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus =</span> <span class="fu">insert_resource</span>(<span class="st">"heart.png"</span>),</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus_height =</span> <span class="dv">400</span>,</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus_width =</span> <span class="dv">400</span>,</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">prompt =</span> <span class="st">"&lt;br&gt;You will be asked judge the pleasantness of this image. Press any key to continue"</span>,</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">choices =</span> <span class="fu">respond_any_key</span>()</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a><span class="co"># use buttons to ask people to rate on a three-point likert scale</span></span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>button_trial <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">trial_image_button_response</span>(</span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus =</span> <span class="fu">insert_resource</span>(<span class="st">"heart.png"</span>), </span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus_height =</span> <span class="dv">400</span>,</span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus_width =</span> <span class="dv">400</span>,</span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">"Unpleasant"</span>, <span class="st">"Neutral"</span>, <span class="st">"Pleasant"</span>) </span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a><span class="co"># use a slider to ask people to respond on a continuous valued scale</span></span>
<span id="cb61-18"><a href="#cb61-18" aria-hidden="true" tabindex="-1"></a>slider_trial <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">trial_image_slider_response</span>(</span>
<span id="cb61-19"><a href="#cb61-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus =</span> <span class="fu">insert_resource</span>(<span class="st">"heart.png"</span>), </span>
<span id="cb61-20"><a href="#cb61-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus_height =</span> <span class="dv">400</span>,</span>
<span id="cb61-21"><a href="#cb61-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus_width =</span> <span class="dv">400</span>,</span>
<span id="cb61-22"><a href="#cb61-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Most unpleasant"</span>, <span class="st">"Neutral"</span>, <span class="st">"Most Pleasant"</span>),</span>
<span id="cb61-23"><a href="#cb61-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">min =</span> <span class="dv">0</span>,</span>
<span id="cb61-24"><a href="#cb61-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">max =</span> <span class="dv">100</span>,</span>
<span id="cb61-25"><a href="#cb61-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">start =</span> <span class="dv">50</span></span>
<span id="cb61-26"><a href="#cb61-26" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb61-27"><a href="#cb61-27" aria-hidden="true" tabindex="-1"></a><span class="co"># randomise the order of the two "substantial trials"</span></span>
<span id="cb61-28"><a href="#cb61-28" aria-hidden="true" tabindex="-1"></a>tests <span class="ot">&lt;-</span> jaysire<span class="sc">::</span>jaysire<span class="sc">::</span><span class="fu">build_timeline</span>(button_trial, slider_trial) <span class="sc">%&gt;%</span></span>
<span id="cb61-29"><a href="#cb61-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_parameters</span>(<span class="at">randomize_order =</span> <span class="cn">TRUE</span>)</span>
<span id="cb61-30"><a href="#cb61-30" aria-hidden="true" tabindex="-1"></a><span class="co"># build the experiment</span></span>
<span id="cb61-31"><a href="#cb61-31" aria-hidden="true" tabindex="-1"></a><span class="fu">build_experiment</span>(</span>
<span id="cb61-32"><a href="#cb61-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">timeline =</span> jaysire<span class="sc">::</span><span class="fu">build_timeline</span>(keypress_trial, tests),</span>
<span id="cb61-33"><a href="#cb61-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">resources =</span> jaysire<span class="sc">::</span><span class="fu">build_resources</span>(resources),</span>
<span id="cb61-34"><a href="#cb61-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> exp_path, </span>
<span id="cb61-35"><a href="#cb61-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">on_finish =</span> <span class="fu">save_locally</span>()</span>
<span id="cb61-36"><a href="#cb61-36" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="survey-pages" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Survey pages</h1>
<p>In all the experiments we’ve built so far, it has been assumed that a “trial” consists of a single stimulus to which a participant must give a response. By varying the stimulus type and the response type this produces a family of R functions that map onto different jsPsych plugins. In my experience these are the most common kinds of trials that one wishes to use, but there are also a variety of more specialised situations for which jsPsych supplies dedicated plugins. We’ve seen one example of this already, namely the <code>trial_instructions</code> function. There’s nothing stopping you from presenting instructions as a series of <code>trial_html_button_response</code> trials, but it’s tedious to build and it is hard (not impossible) to allow participants to browse the instruction set using forward and back buttons. So this is a situation where the specialised plugin is handy.</p>
<p>Another very common scenario where a specialised plugin is handy is if you want to include an entire page of survey questions. It would of course be quite easy to create a <em>single</em> survey question using <code>trial_html_button_response</code>, and create a complete survey by using many such questions, but it is sometimes inconvenient. To make surveys a little simpler, jsPsych has plugins for five different kinds of survey page, four of which are currently supported in jaysire. The four supported types are:</p>
<ul>
<li>Pages where every survey question is a multiple choice question (i.e., choose exactly one option) can be created using the <code>trial_survey_multi_choice</code> function</li>
<li>Pages where every survey question is a multiple selection question (i.e., select as many options as are applicable) can be created using the <code>trial_survey_multi_select</code> function</li>
<li>Pages where every survey question is a Likert scale item can be created with <code>trial_survey_likert</code></li>
<li>Pages where every survey question asks for a free text response can be created with <code>trial_survey_text</code></li>
</ul>
<p>The jsPsych library does not have specialised plugins for the case where a survey page can contain questions of different types, and as a consequence neither does jaysire.</p>
<section id="creating-a-question" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="creating-a-question">Creating a question</h2>
<p>Because a survey page can include more than one question, the jaysire package provides convenience functions that allow you to build questions. For instance, if you want a likert scale question you could do something like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>jaysire<span class="sc">::</span><span class="fu">question_likert</span>(</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">prompt =</span> <span class="st">"Kittens are awesome"</span>,</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"strong disagree"</span>, <span class="st">"somewhat disagree"</span>, <span class="st">"neutral"</span>,</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>             <span class="st">"somewhat agree"</span>, <span class="st">"strongly agree"</span>),</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">required =</span> <span class="cn">TRUE</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>which defines a 5 point Likert scale item, and marks it as a required question. If you want to create a multiple choice or multiple selection question, then you can use <code>question_multi</code>, which (following the convention in jsPsych) refers to response <code>options</code> for multiple choice trials, in contrast to the scale <code>labels</code> used by <code>question_likert</code>. Here is an example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>jaysire<span class="sc">::</span><span class="fu">question_multi</span>(</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">prompt =</span> <span class="st">"Choose your awesomeness"</span>,</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">options =</span> <span class="fu">c</span>(<span class="st">"Kittens"</span>, <span class="st">"Puppies"</span>, <span class="st">"Otters"</span>, <span class="st">"Ducks"</span>, <span class="st">"Axolotls"</span>)</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that you don’t need to specify whether this is a multiple choice question or a multiple selection question: if you embed it in a <code>trial_survey_multi_choice</code> page it will be presented as a multiple choice question, but if you embed it in <code>trial_survey_multi_select</code> it will appear in a “choose as many as apply” format.</p>
<p>Finally, you can define a free response question using <code>question_text</code> like so:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>jaysire<span class="sc">::</span><span class="fu">question_text</span>(</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">prompt =</span> <span class="st">"Explain the awesomeness of kittens"</span>,</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">placeholder =</span> <span class="st">"Type your answer here"</span>,</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">rows =</span> <span class="dv">10</span>,</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">columns =</span> <span class="dv">60</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>When embedded on a <code>trial_survey_text</code> this question will appear with a text response box underneath that spans 10 rows and 60 columns. The <code>placeholder</code> text will be shown greyed out within the box.</p>
</section>
<section id="composing-a-page-of-questions" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="composing-a-page-of-questions">Composing a page of questions</h2>
<p>At this point, our next task in writing a survey is to put together a list of questions that can be passed to one of the survey items. For example, suppose we wanted a page that asks for some basic demographic information. This page would contain a short <code>preamble</code> that would be displayed at the top of the page, and then show a list of multiple choice <code>questions</code> underneath. Once all of the required questions are answered, a button can be pressed to continue to the next page. Here is how we could do that:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>page1 <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">trial_survey_multi_choice</span>(</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">preamble =</span> <span class="st">"Welcome! We'd like to ask some demographic questions"</span>,</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">questions =</span> <span class="fu">list</span>(</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">question_multi</span>(</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">prompt =</span> <span class="st">"Please select the option that best matches your gender"</span>,</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">options =</span> <span class="fu">c</span>(<span class="st">"Male"</span>, <span class="st">"Female"</span>, <span class="st">"Nonbinary"</span>, <span class="st">"Other"</span>, <span class="st">"Prefer not to say"</span>),</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">name =</span> <span class="st">"gender"</span></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">question_multi</span>(</span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">prompt =</span> <span class="st">"Do you consider yourself to be LGBTIQ+?"</span>,</span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">options =</span> <span class="fu">c</span>(<span class="st">"Yes"</span>, <span class="st">"No"</span>, <span class="st">"Unsure"</span>, <span class="st">"Prefer not to say"</span>)</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Notice that the <code>questions</code> argument is a <em>list</em> of questions. When you have two or more questions to include, this is mandatory, but if there is only one question jaysire will allow you to pass the question directly like so:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>page2 <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">trial_survey_multi_select</span>(</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">questions =</span> <span class="fu">question_multi</span>(</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">prompt =</span> <span class="st">"Which of the following R packages to you use?"</span>,</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">options =</span> <span class="fu">c</span>(</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>      <span class="st">"ggplot2"</span>, <span class="st">"dplyr"</span>, <span class="st">"purrr"</span>, <span class="st">"janitor"</span>, <span class="st">"data.table"</span>, <span class="st">"testthat"</span>,</span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>      <span class="st">"usethis"</span>, <span class="st">"tibble"</span>, <span class="st">"magrittr"</span>, <span class="st">"rlang"</span>, <span class="st">"babynames"</span>, <span class="st">"janeaustenr"</span></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>When creating Likert pages, it is very common to reuse the same labels for every question, so it can be convenient to create a page of Likert items like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define the scale</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>confidence_scale <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Very unconfident"</span>, </span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Somewhat unconfident"</span>, </span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Somewhat confident"</span>, </span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Very confident"</span></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a><span class="co"># a page of questions that all use the same scale</span></span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>page3 <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">trial_survey_likert</span>(</span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">preamble =</span> <span class="st">"How confident in you R skills?"</span>,</span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">questions =</span> <span class="fu">list</span>(</span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">question_likert</span>(<span class="st">"Data wrangling?"</span>, confidence_scale),</span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">question_likert</span>(<span class="st">"Data visualisation?"</span>, confidence_scale),</span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">question_likert</span>(<span class="st">"Statistical modelling?"</span>, confidence_scale),</span>
<span id="cb67-15"><a href="#cb67-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">question_likert</span>(<span class="st">"Designing experiments?"</span>, confidence_scale),</span>
<span id="cb67-16"><a href="#cb67-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">question_likert</span>(<span class="st">"R markdown documents?"</span>, confidence_scale)</span>
<span id="cb67-17"><a href="#cb67-17" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb67-18"><a href="#cb67-18" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="example-experiment" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="example-experiment">Example experiment</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jaysire)</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>page1 <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">trial_survey_multi_choice</span>(</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">preamble =</span> <span class="st">"Welcome! We'd like to ask some demographic questions"</span>,</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">questions =</span> <span class="fu">list</span>(</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">question_multi</span>(</span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">prompt =</span> <span class="st">"Please select the option that best matches your gender"</span>,</span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">options =</span> <span class="fu">c</span>(<span class="st">"Male"</span>, <span class="st">"Female"</span>, <span class="st">"Nonbinary"</span>, <span class="st">"Other"</span>, <span class="st">"Prefer not to say"</span>),</span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">name =</span> <span class="st">"gender"</span></span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">question_multi</span>(</span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">prompt =</span> <span class="st">"Do you consider yourself to be LGBTIQ+?"</span>,</span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">options =</span> <span class="fu">c</span>(<span class="st">"Yes"</span>, <span class="st">"No"</span>, <span class="st">"Unsure"</span>, <span class="st">"Prefer not to say"</span>)</span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb68-14"><a href="#cb68-14" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb68-15"><a href="#cb68-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb68-16"><a href="#cb68-16" aria-hidden="true" tabindex="-1"></a>page2 <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">trial_survey_multi_select</span>(</span>
<span id="cb68-17"><a href="#cb68-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">questions =</span> <span class="fu">question_multi</span>(</span>
<span id="cb68-18"><a href="#cb68-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">prompt =</span> <span class="st">"Which of the following R packages to you use?"</span>,</span>
<span id="cb68-19"><a href="#cb68-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">options =</span> <span class="fu">c</span>(</span>
<span id="cb68-20"><a href="#cb68-20" aria-hidden="true" tabindex="-1"></a>      <span class="st">"ggplot2"</span>, <span class="st">"dplyr"</span>, <span class="st">"purrr"</span>, <span class="st">"janitor"</span>, <span class="st">"data.table"</span>, <span class="st">"testthat"</span>,</span>
<span id="cb68-21"><a href="#cb68-21" aria-hidden="true" tabindex="-1"></a>      <span class="st">"usethis"</span>, <span class="st">"tibble"</span>, <span class="st">"magrittr"</span>, <span class="st">"rlang"</span>, <span class="st">"babynames"</span>, <span class="st">"janeaustenr"</span></span>
<span id="cb68-22"><a href="#cb68-22" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb68-23"><a href="#cb68-23" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb68-24"><a href="#cb68-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb68-25"><a href="#cb68-25" aria-hidden="true" tabindex="-1"></a>confidence_scale <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb68-26"><a href="#cb68-26" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Very unconfident"</span>, </span>
<span id="cb68-27"><a href="#cb68-27" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Somewhat unconfident"</span>, </span>
<span id="cb68-28"><a href="#cb68-28" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Somewhat confident"</span>, </span>
<span id="cb68-29"><a href="#cb68-29" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Very confident"</span></span>
<span id="cb68-30"><a href="#cb68-30" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb68-31"><a href="#cb68-31" aria-hidden="true" tabindex="-1"></a>page3 <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">trial_survey_likert</span>(</span>
<span id="cb68-32"><a href="#cb68-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">preamble =</span> <span class="st">"How confident in you R skills?"</span>,</span>
<span id="cb68-33"><a href="#cb68-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">questions =</span> <span class="fu">list</span>(</span>
<span id="cb68-34"><a href="#cb68-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">question_likert</span>(<span class="st">"Data wrangling?"</span>, confidence_scale),</span>
<span id="cb68-35"><a href="#cb68-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">question_likert</span>(<span class="st">"Data visualisation?"</span>, confidence_scale),</span>
<span id="cb68-36"><a href="#cb68-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">question_likert</span>(<span class="st">"Statistical modelling?"</span>, confidence_scale),</span>
<span id="cb68-37"><a href="#cb68-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">question_likert</span>(<span class="st">"Designing experiments?"</span>, confidence_scale),</span>
<span id="cb68-38"><a href="#cb68-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">question_likert</span>(<span class="st">"R markdown documents?"</span>, confidence_scale)</span>
<span id="cb68-39"><a href="#cb68-39" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb68-40"><a href="#cb68-40" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb68-41"><a href="#cb68-41" aria-hidden="true" tabindex="-1"></a>page4 <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">trial_survey_text</span>(</span>
<span id="cb68-42"><a href="#cb68-42" aria-hidden="true" tabindex="-1"></a>  <span class="at">questions =</span> <span class="fu">question_text</span>(</span>
<span id="cb68-43"><a href="#cb68-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">prompt =</span> <span class="st">"Anything else you would like to mention?"</span>,</span>
<span id="cb68-44"><a href="#cb68-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">placeholder =</span> <span class="st">"Type your answer here"</span>,</span>
<span id="cb68-45"><a href="#cb68-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">rows =</span> <span class="dv">8</span>,</span>
<span id="cb68-46"><a href="#cb68-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="dv">60</span></span>
<span id="cb68-47"><a href="#cb68-47" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb68-48"><a href="#cb68-48" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb68-49"><a href="#cb68-49" aria-hidden="true" tabindex="-1"></a>jaysire<span class="sc">::</span><span class="fu">build_experiment</span>(</span>
<span id="cb68-50"><a href="#cb68-50" aria-hidden="true" tabindex="-1"></a>  <span class="at">timeline =</span> jaysire<span class="sc">::</span><span class="fu">build_timeline</span>(page1, page2, page3, page4),</span>
<span id="cb68-51"><a href="#cb68-51" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> exp_path, </span>
<span id="cb68-52"><a href="#cb68-52" aria-hidden="true" tabindex="-1"></a>  <span class="at">on_finish =</span> jaysire<span class="sc">::</span><span class="fu">save_locally</span>()</span>
<span id="cb68-53"><a href="#cb68-53" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(path): '/tmp/RtmpmeYlBg/jaysire_3fefe' already exists</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(file.path(path, experiment_folder)): '/tmp/RtmpmeYlBg/
jaysire_3fefe/experiment' already exists</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(file.path(path, experiment_folder, "resource")): '/tmp/
RtmpmeYlBg/jaysire_3fefe/experiment/resource' already exists</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(file.path(path, experiment_folder, "resource", "script")):
'/tmp/RtmpmeYlBg/jaysire_3fefe/experiment/resource/script' already exists</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(file.path(path, experiment_folder, "resource", "style")):
'/tmp/RtmpmeYlBg/jaysire_3fefe/experiment/resource/style' already exists</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(file.path(path, experiment_folder, "resource", "audio")):
'/tmp/RtmpmeYlBg/jaysire_3fefe/experiment/resource/audio' already exists</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(file.path(path, experiment_folder, "resource", "video")):
'/tmp/RtmpmeYlBg/jaysire_3fefe/experiment/resource/video' already exists</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(file.path(path, experiment_folder, "resource", "image")):
'/tmp/RtmpmeYlBg/jaysire_3fefe/experiment/resource/image' already exists</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(file.path(path, experiment_folder, "resource", "other")):
'/tmp/RtmpmeYlBg/jaysire_3fefe/experiment/resource/other' already exists</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(file.path(path, data_folder)): '/tmp/RtmpmeYlBg/
jaysire_3fefe/data' already exists</code></pre>
</div>
</div>
</section>
</section>
<section id="loops-and-branches" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Loops and branches</h1>
<p>Up to this point our experiments have been mostly linear in structure. Although we have seen examples of nested timelines, randomised timelines, repeated timelines and so on, none of the example experiments we’ve built so far allow us to <em>explicitly</em> rely on programming constructs like <em>if</em> (to create conditional branching) or <em>while</em> (to build customised loops). The jaysire package provides two functions that provide these programming constructs, <code>display_if</code> and <code>display_while</code>. The <code>display_if</code> function allows you to indicate that a timeline should be executed only if a particular <em>condition</em> holds, and the <code>display_while</code> function allows you to specify that a timeline should execute over and over again until the condition no longer holds. At the moment, jaysire is quite limited in terms of what conditions are natively supported. Later releases will (I hope) extend this functionality.</p>
<section id="branching-timelines" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="branching-timelines">Branching timelines</h2>
<p>Suppose the first question in our experiment asks people to indicate whether they identify as LGBTIQ+, like so:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>page1 <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">trial_html_button_response</span>(</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Do you identify as LGBTIQ+?"</span>,</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">"Yes"</span>, <span class="st">"No"</span>, <span class="st">"Prefer not to say"</span>)</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If the user response <em>Yes</em>, we might want to ask a follow-up question, one that asks them to indicate (if they are willing to do so) which subcategories they belong to. However, we wouldn’t want to show that question to anyone who responds “No” or “Prefer not to say”, since the question isn’t relevant to those people. How do we do this? First, let’s just build the trial the same way we normally would:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>followup <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">trial_survey_multi_select</span>(</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>  jaysire<span class="sc">::</span><span class="fu">question_multi</span>(</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">prompt =</span> <span class="st">"Select all that apply"</span>,</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">options =</span> <span class="fu">c</span>(</span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Lesbian"</span>, </span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Gay"</span>, </span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Bisexual/Pansexual"</span>, </span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Transgender"</span>, </span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Nonbinary"</span>,</span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Genderqueer"</span>, </span>
<span id="cb80-11"><a href="#cb80-11" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Intersex"</span>, </span>
<span id="cb80-12"><a href="#cb80-12" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Asexual"</span>,</span>
<span id="cb80-13"><a href="#cb80-13" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Other"</span></span>
<span id="cb80-14"><a href="#cb80-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb80-15"><a href="#cb80-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb80-16"><a href="#cb80-16" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If we add <code>followup</code> to our timeline “as is”, it will be shown to everybody regardless of what answer they provide. To fix this, what we do is wrap <code>followup</code> into a timeline, and then pipe that timeline through a <code>display_if</code> statement. What that looks like is this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>page1a <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">build_timeline</span>(followup) <span class="sc">%&gt;%</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>  jaysire<span class="sc">::</span><span class="fu">display_if</span>(jaysire<span class="sc">::</span><span class="fu">fn_data_condition</span>(button_pressed <span class="sc">==</span> <span class="st">"0"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>What we have done here is defined <code>page1a</code> as a <em>conditional</em> timeline. When the participant actually completes the experiment, this trial will <em>only</em> be shown if the condition <code>fn_data_condition(button_pressed == "0")</code> is true. This solves our problem, but it may not be obvious <em>how</em> we’re solving the problem, so it is worth unpacking this a little…</p>
</section>
<section id="what-is-going-on-here" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="what-is-going-on-here">What is going on here?</h2>
<p>Firstly, let’s take a look at the <code>button_pressed == "0"</code> part. Within jsPsych, a button response is recorded numerically: it creates an internal “button_pressed” variable to store the results of the trial, where a value of 0 indicates that the user pressed the first button, 1 refers to the second button, and so on. However, everything in jsPsych is internally stored as text, so if we want to check the response we have to use <code>"0"</code> rather than <code>0</code>. This is the reason why the condition statement takes the form <code>button_pressed == "0"</code>: the “Yes” response is the first response option for the <code>page1</code> trial, so we only want <code>page1a</code> to execute <em>if</em> the response on that trial (i.e., the value of <code>button_pressed</code> within the jsPsych data storage) is equal to <code>"0"</code>.</p>
<p>Next, I’ll expand on what is going on with the <code>fn_data_condition</code> function, but to do so I need to explain the <code>display_if</code> function in a little more detail. First, let’s rewrite the code above without using the pipe, and name our arguments explicitly:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>page1a <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">display_if</span>(</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">timeline =</span> jaysire<span class="sc">::</span><span class="fu">build_timeline</span>(followup), </span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">conditional_function =</span> jaysire<span class="sc">::</span><span class="fu">fn_data_condition</span>(button_pressed <span class="sc">==</span> <span class="st">"0"</span>)</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This isn’t quite so pretty to look at, but it is helpful for the purposes of understanding. The <code>display_if</code> function takes two arguments, the <code>timeline</code> object itself (i.e., the <code>followup</code> page), and a <code>conditional_function</code> that is used to determine whether or not the timeline should be executed. Because the experiment is eventually run in javascript through the web browser, this function must be a <em>javascript</em> function, not an R function. If you know javascript, then it may be useful to note that jaysire contains an <code>insert_javascript</code> function that means that any text you include will be passed as unfiltered javascript, so you can in fact pass anything you like here:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>page1a <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">display_if</span>(</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">timeline =</span> jaysire<span class="sc">::</span><span class="fu">build_timeline</span>(followup), </span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">conditional_function =</span> <span class="fu">insert_javascript</span>(<span class="st">"/* your javascript function here */"</span>)</span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If your javascript function returns <code>true</code> – logical values in javascript are <code>true</code> or <code>false</code> unlike in R where they are <code>TRUE</code> or <code>FALSE</code> – then the timeline will execute. If it returns <code>false</code> the timeline will not execute.</p>
<p>However, one of the goals of jaysire is to minimise the amount of javascript you have to write when building a behavioural experiment, so there is a helper function called <code>fn_data_condition</code> that will create the javascript function that you want. By default, what it does is inspect the contents of the jsPsych data store for the <em>preceding</em> trial, and allows the user to construct an expression that will be tested against that data (e.g., <code>button_pressed == "0"</code>). This simplifies matters a little, but my intention is to extend this functionality over time to allow you to deal with the most common use cases without ever having to write your own javascript. Nevertheless, this is a work in progress.</p>
</section>
<section id="looping-timelines" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="looping-timelines">Looping timelines</h2>
<p>Having gone into all this detail for <code>display_if</code>, it is very simple to provide an illustration of <code>display_while</code> because it works in exactly the same fashion. Suppose I want to force people to tell me that this picture of a heart looks pleasant. Let’s construct a trial:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>resources <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">"extdata"</span>, <span class="st">"resources"</span>, <span class="at">package =</span> <span class="st">"jaysire"</span>)</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>query <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">trial_image_button_response</span>(</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus =</span> jaysire<span class="sc">::</span><span class="fu">insert_resource</span>(<span class="st">"heart.png"</span>), </span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus_height =</span> <span class="dv">400</span>,</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus_width =</span> <span class="dv">400</span>,</span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">"Unpleasant"</span>, <span class="st">"Neutral"</span>, <span class="st">"Pleasant"</span>),</span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">prompt =</span> <span class="st">"You will not be allowed to continue unless you select 'Pleasant'"</span></span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now what we do is take this <code>query</code> trial, wrap into a timeline using <code>build_timeline</code> and then keep repeating that trial until the user responds by pressing button <code>"2"</code> (i.e., selects <code>"Pleasant"</code>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>page2 <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">build_timeline</span>(query) <span class="sc">%&gt;%</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>  jaysire<span class="sc">::</span><span class="fu">display_while</span>(<span class="fu">fn_data_condition</span>(button_pressed <span class="sc">!=</span> <span class="st">"2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>At this point we are done! Let’s wrap all this up in a single timeline, add the resources, and build it as an experiment:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>jaysire<span class="sc">::</span><span class="fu">build_experiment</span>(</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">timeline =</span> jaysire<span class="sc">::</span><span class="fu">build_timeline</span>(page1, page1a, page2),</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">resources =</span> jaysire<span class="sc">::</span><span class="fu">build_resources</span>(resources),</span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> exp_path, </span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">on_finish =</span> jaysire<span class="sc">::</span><span class="fu">save_locally</span>()</span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(path): '/tmp/RtmpmeYlBg/jaysire_3fefe' already exists</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(file.path(path, experiment_folder)): '/tmp/RtmpmeYlBg/
jaysire_3fefe/experiment' already exists</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(file.path(path, experiment_folder, "resource")): '/tmp/
RtmpmeYlBg/jaysire_3fefe/experiment/resource' already exists</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(file.path(path, experiment_folder, "resource", "script")):
'/tmp/RtmpmeYlBg/jaysire_3fefe/experiment/resource/script' already exists</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(file.path(path, experiment_folder, "resource", "style")):
'/tmp/RtmpmeYlBg/jaysire_3fefe/experiment/resource/style' already exists</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(file.path(path, experiment_folder, "resource", "audio")):
'/tmp/RtmpmeYlBg/jaysire_3fefe/experiment/resource/audio' already exists</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(file.path(path, experiment_folder, "resource", "video")):
'/tmp/RtmpmeYlBg/jaysire_3fefe/experiment/resource/video' already exists</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(file.path(path, experiment_folder, "resource", "image")):
'/tmp/RtmpmeYlBg/jaysire_3fefe/experiment/resource/image' already exists</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(file.path(path, experiment_folder, "resource", "other")):
'/tmp/RtmpmeYlBg/jaysire_3fefe/experiment/resource/other' already exists</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dir.create(file.path(path, data_folder)): '/tmp/RtmpmeYlBg/
jaysire_3fefe/data' already exists</code></pre>
</div>
</div>
</section>
</section>
<section id="a-choice-reaction-time-task" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> A choice reaction time task</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">143</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In this example we’ll build a relatively simple choice reaction time experiment. On any given trial, the participant will be presented with a blue circle or an orange circle, and will respond by pressing the “F” or “J” keys. It is almost identical to the <a href="https://www.jspsych.org/tutorials/rt-task/">demonstration experiment</a> used in the jsPsych documentation.</p>
<section id="creating-the-resource-files" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="creating-the-resource-files">Creating the resource files</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># where should the images be stored initially?</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>resources <span class="ot">&lt;-</span> exp_path  </span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>blue_image <span class="ot">&lt;-</span> <span class="fu">file.path</span>(resources, <span class="st">"blue.png"</span>)</span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>orange_image <span class="ot">&lt;-</span> <span class="fu">file.path</span>(resources, <span class="st">"orange.png"</span>)</span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a><span class="co"># create the blue circle plot</span></span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a>blue_pic <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb98-7"><a href="#cb98-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb98-8"><a href="#cb98-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">"point"</span>, <span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">"blue"</span>, <span class="at">size =</span> <span class="dv">60</span>)</span>
<span id="cb98-9"><a href="#cb98-9" aria-hidden="true" tabindex="-1"></a><span class="co"># create the orange circle plot</span></span>
<span id="cb98-10"><a href="#cb98-10" aria-hidden="true" tabindex="-1"></a>orange_pic <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb98-11"><a href="#cb98-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb98-12"><a href="#cb98-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">"point"</span>, <span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">"orange"</span>, <span class="at">size =</span> <span class="dv">60</span>)</span>
<span id="cb98-13"><a href="#cb98-13" aria-hidden="true" tabindex="-1"></a><span class="co"># save the images to files in the resource folder</span></span>
<span id="cb98-14"><a href="#cb98-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> blue_image, <span class="at">plot =</span> blue_pic, <span class="at">width =</span> <span class="dv">2</span>, <span class="at">height =</span> <span class="dv">2</span>)</span>
<span id="cb98-15"><a href="#cb98-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> orange_image, <span class="at">plot =</span> orange_pic, <span class="at">width =</span> <span class="dv">2</span>, <span class="at">height =</span> <span class="dv">2</span>)</span>
<span id="cb98-16"><a href="#cb98-16" aria-hidden="true" tabindex="-1"></a><span class="co"># check that it worked</span></span>
<span id="cb98-17"><a href="#cb98-17" aria-hidden="true" tabindex="-1"></a><span class="fu">list.files</span>(resources)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "blue.png"   "data"       "experiment" "images"     "images_exp"
[6] "orange.png"</code></pre>
</div>
</div>
</section>
<section id="defining-instructions" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="defining-instructions">Defining instructions</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>welcome <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">trial_html_keyboard_response</span>(</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus =</span> <span class="st">"Welcome to the experiment! Press any key to begin"</span>,</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> <span class="fu">insert_property</span>(<span class="at">stage =</span> <span class="st">"start"</span>)</span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>finish <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">trial_html_keyboard_response</span>(</span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus =</span> <span class="st">"Thank you!"</span>, </span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">choices =</span> <span class="fu">respond_no_key</span>(),</span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">trial_duration =</span> <span class="dv">2000</span>,</span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> jaysire<span class="sc">::</span><span class="fu">insert_property</span>(<span class="at">stage =</span> <span class="st">"end"</span>)</span>
<span id="cb100-10"><a href="#cb100-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb100-11"><a href="#cb100-11" aria-hidden="true" tabindex="-1"></a>page1 <span class="ot">&lt;-</span> <span class="fu">paste0</span>(</span>
<span id="cb100-12"><a href="#cb100-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"To navigate these instructions, use the arrow keys on your keyboard. "</span>,</span>
<span id="cb100-13"><a href="#cb100-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"The right arrow will move you forward one page, and the left arrow will "</span>,</span>
<span id="cb100-14"><a href="#cb100-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"move you back one page. Press the right arrow key to continue."</span></span>
<span id="cb100-15"><a href="#cb100-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb100-16"><a href="#cb100-16" aria-hidden="true" tabindex="-1"></a>page2 <span class="ot">&lt;-</span> <span class="fu">paste0</span>(</span>
<span id="cb100-17"><a href="#cb100-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">"In this experiment, a circle will appear in the centre of the screen. "</span>,</span>
<span id="cb100-18"><a href="#cb100-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">"If the circle is &lt;b&gt;blue&lt;/b&gt;, press the letter F on the keyboard as fast "</span>,</span>
<span id="cb100-19"><a href="#cb100-19" aria-hidden="true" tabindex="-1"></a>  <span class="st">"as you can. If the circle is &lt;b&gt;orange&lt;/b&gt;, press the letter J as fast as"</span>,</span>
<span id="cb100-20"><a href="#cb100-20" aria-hidden="true" tabindex="-1"></a>  <span class="st">"you can.&lt;br&gt;"</span></span>
<span id="cb100-21"><a href="#cb100-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb100-22"><a href="#cb100-22" aria-hidden="true" tabindex="-1"></a>page3 <span class="ot">&lt;-</span> <span class="fu">paste0</span>(</span>
<span id="cb100-23"><a href="#cb100-23" aria-hidden="true" tabindex="-1"></a>  <span class="st">"If you see this blue circle, you should press F. &lt;br&gt;"</span>, </span>
<span id="cb100-24"><a href="#cb100-24" aria-hidden="true" tabindex="-1"></a>  <span class="st">"&lt;img src = '"</span>, <span class="fu">insert_resource</span>(<span class="st">"blue.png"</span>), <span class="st">"' width = 300px&gt;"</span></span>
<span id="cb100-25"><a href="#cb100-25" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb100-26"><a href="#cb100-26" aria-hidden="true" tabindex="-1"></a>page4 <span class="ot">&lt;-</span> <span class="fu">paste0</span>(</span>
<span id="cb100-27"><a href="#cb100-27" aria-hidden="true" tabindex="-1"></a>  <span class="st">"If you see this orange circle, you should press J. &lt;br&gt;"</span>, </span>
<span id="cb100-28"><a href="#cb100-28" aria-hidden="true" tabindex="-1"></a>  <span class="st">"&lt;img src = '"</span>, <span class="fu">insert_resource</span>(<span class="st">"orange.png"</span>), <span class="st">"' width = 300px&gt;"</span></span>
<span id="cb100-29"><a href="#cb100-29" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb100-30"><a href="#cb100-30" aria-hidden="true" tabindex="-1"></a>page5 <span class="ot">&lt;-</span> <span class="st">"When you are ready to begin, press the right arrow key."</span></span>
<span id="cb100-31"><a href="#cb100-31" aria-hidden="true" tabindex="-1"></a>instructions <span class="ot">&lt;-</span> <span class="fu">trial_instructions</span>(</span>
<span id="cb100-32"><a href="#cb100-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">pages =</span> <span class="fu">c</span>(page1, page2, page3, page4, page5), </span>
<span id="cb100-33"><a href="#cb100-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">show_clickable_nav =</span> <span class="cn">FALSE</span>,</span>
<span id="cb100-34"><a href="#cb100-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">allow_keys =</span> <span class="cn">TRUE</span>,</span>
<span id="cb100-35"><a href="#cb100-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">post_trial_gap =</span> <span class="dv">2000</span>,</span>
<span id="cb100-36"><a href="#cb100-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> jaysire<span class="sc">::</span><span class="fu">insert_property</span>(<span class="at">stage =</span> <span class="st">"instruction"</span>)</span>
<span id="cb100-37"><a href="#cb100-37" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="defining-the-experiment-trials" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="defining-the-experiment-trials">Defining the experiment trials</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>intervals <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">250</span>, <span class="dv">500</span>, <span class="dv">750</span>, <span class="dv">1000</span>, <span class="dv">1250</span>, <span class="dv">1500</span>, <span class="dv">1750</span>, <span class="dv">2000</span>)</span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>fixation <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">trial_html_keyboard_response</span>(</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus =</span> <span class="st">'&lt;div style="font-size:60px;"&gt;+&lt;/div&gt;'</span>,</span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">choices =</span> jaysire<span class="sc">::</span><span class="fu">respond_no_key</span>(),</span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">trial_duration =</span> <span class="fu">fn_sample</span>(intervals, <span class="dv">1</span>),</span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> jaysire<span class="sc">::</span><span class="fu">insert_property</span>(<span class="at">stage =</span> <span class="st">"fixation"</span>)</span>
<span id="cb101-7"><a href="#cb101-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb101-8"><a href="#cb101-8" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">trial_image_keyboard_response</span>(</span>
<span id="cb101-9"><a href="#cb101-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus =</span> <span class="fu">insert_variable</span>(<span class="st">"circle"</span>), </span>
<span id="cb101-10"><a href="#cb101-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus_height =</span> <span class="dv">300</span>,</span>
<span id="cb101-11"><a href="#cb101-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus_width =</span> <span class="dv">300</span>,</span>
<span id="cb101-12"><a href="#cb101-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">"f"</span>, <span class="st">"j"</span>),</span>
<span id="cb101-13"><a href="#cb101-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> jaysire<span class="sc">::</span><span class="fu">insert_property</span>(</span>
<span id="cb101-14"><a href="#cb101-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">stage =</span> <span class="st">"choice"</span>, </span>
<span id="cb101-15"><a href="#cb101-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="fu">insert_variable</span>(<span class="st">"colour"</span>),</span>
<span id="cb101-16"><a href="#cb101-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">correct_key =</span> <span class="fu">insert_variable</span>(<span class="st">"correct_key"</span>)</span>
<span id="cb101-17"><a href="#cb101-17" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb101-18"><a href="#cb101-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb101-19"><a href="#cb101-19" aria-hidden="true" tabindex="-1"></a>trials <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">build_timeline</span>(fixation, test) <span class="sc">%&gt;%</span></span>
<span id="cb101-20"><a href="#cb101-20" aria-hidden="true" tabindex="-1"></a>  jaysire<span class="sc">::</span><span class="fu">set_variables</span>(</span>
<span id="cb101-21"><a href="#cb101-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">circle =</span> jaysire<span class="sc">::</span><span class="fu">insert_resource</span>(<span class="fu">c</span>(<span class="st">"orange.png"</span>, <span class="st">"blue.png"</span>)),</span>
<span id="cb101-22"><a href="#cb101-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="fu">c</span>(<span class="st">"orange"</span>, <span class="st">"blue"</span>),</span>
<span id="cb101-23"><a href="#cb101-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">correct_key =</span> <span class="fu">keycode</span>(<span class="fu">c</span>(<span class="st">"f"</span>,<span class="st">"j"</span>))</span>
<span id="cb101-24"><a href="#cb101-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb101-25"><a href="#cb101-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_parameters</span>(</span>
<span id="cb101-26"><a href="#cb101-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">repetitions =</span> <span class="dv">5</span>,</span>
<span id="cb101-27"><a href="#cb101-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">randomize_order =</span> <span class="cn">TRUE</span></span>
<span id="cb101-28"><a href="#cb101-28" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="building-the-experiment-2" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="building-the-experiment-2">Building the experiment</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>jaysire<span class="sc">::</span><span class="fu">build_experiment</span>(</span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">timeline =</span> jaysire<span class="sc">::</span><span class="fu">build_timeline</span>(welcome, instructions, trials, finish),</span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">resources =</span> <span class="fu">build_resources</span>(resources),</span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">columns =</span> jaysire<span class="sc">::</span><span class="fu">insert_property</span>(<span class="at">experiment =</span> <span class="st">"choice_rt"</span>),  </span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> exp_path,</span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">on_finish =</span> jaysire<span class="sc">::</span><span class="fu">save_locally</span>()</span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Working version of the experiment <a href="../demos/example08/experiment/index.html">here</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>finish <span class="ot">&lt;-</span> jaysire<span class="sc">::</span><span class="fu">trial_html_keyboard_response</span>(</span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">stimulus =</span> <span class="st">"All done! Click &lt;a href='../../../articles/experiment01.html'&gt;here&lt;/a&gt; to return to the vignette."</span>,</span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">choices =</span> jaysire<span class="sc">::</span><span class="fu">respond_no_key</span>()</span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a><span class="co"># write a working copy of the experiment into the docs folder</span></span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a>jaysire<span class="sc">::</span><span class="fu">build_experiment</span>(</span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">timeline =</span> jaysire<span class="sc">::</span><span class="fu">build_timeline</span>(welcome, instructions, trials, finish),</span>
<span id="cb103-8"><a href="#cb103-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">resources =</span> jaysire<span class="sc">::</span><span class="fu">build_resources</span>(resources),</span>
<span id="cb103-9"><a href="#cb103-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">columns =</span> jaysire<span class="sc">::</span><span class="fu">insert_property</span>(<span class="at">experiment =</span> <span class="st">"choice_rt"</span>),  </span>
<span id="cb103-10"><a href="#cb103-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span>  here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"docs"</span>, <span class="st">"demos"</span>, <span class="st">"example08"</span>)</span>
<span id="cb103-11"><a href="#cb103-11" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="running-the-experiment-3" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="running-the-experiment-3">Running the experiment</h2>
<p>To run the experiment on the local machine (and save the data to the <em>data</em> folder) all we have to do is call the <code>run_locally</code> function, specifying the location of the experiment to run:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>jaysire<span class="sc">::</span><span class="fu">run_locally</span>(<span class="at">path =</span> exp_path)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="citation-session-info" class="level1 unnumbered">
<h1 class="unnumbered">Citation &amp; Session Info</h1>
<p>Schweinberger, Martin. 2022. <em>Creating Surveys, Questionnaires, and Experiments in R</em>. Brisbane: The University of Queensland. url: https://slcladal.github.io/surex.html (Version 2022.08.31).</p>
<pre><code>@manual{schweinberger2022surex,
  author = {Schweinberger, Martin},
  title = {Topic Modeling with r  surex01},
  note = {https://slcladal.github.io/surex.html},
  year = {2022},
  organization = "The University of Queensland, Australia. School of Languages and Cultures},
  address = {Brisbane},
  edition = {2022.08.31}
}</code></pre>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.2.1 (2022-06-23)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 22.04.1 LTS

Matrix products: default
BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.10.0
LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.10.0

locale:
 [1] LC_CTYPE=en_AU.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_AU.UTF-8        LC_COLLATE=en_AU.UTF-8    
 [5] LC_MONETARY=en_AU.UTF-8    LC_MESSAGES=en_AU.UTF-8   
 [7] LC_PAPER=en_AU.UTF-8       LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_AU.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] jaysire_0.1.0   here_1.0.1      forcats_0.5.1   stringr_1.4.0  
 [5] dplyr_1.0.9     purrr_0.3.4     readr_2.1.2     tidyr_1.2.0    
 [9] tibble_3.1.7    ggplot2_3.3.6   tidyverse_1.3.2

loaded via a namespace (and not attached):
 [1] lubridate_1.8.0     assertthat_0.2.1    rprojroot_2.0.3    
 [4] digest_0.6.29       utf8_1.2.2          R6_2.5.1           
 [7] cellranger_1.1.0    backports_1.4.1     reprex_2.0.1       
[10] evaluate_0.15       httr_1.4.3          pillar_1.7.0       
[13] rlang_1.0.4         googlesheets4_1.0.0 readxl_1.4.0       
[16] rstudioapi_0.13     klippy_0.0.0.9500   rmarkdown_2.14     
[19] labeling_0.4.2      textshaping_0.3.6   googledrive_2.0.0  
[22] htmlwidgets_1.5.4   munsell_0.5.0       broom_1.0.0        
[25] compiler_4.2.1      modelr_0.1.8        xfun_0.31          
[28] systemfonts_1.0.4   pkgconfig_2.0.3     htmltools_0.5.2    
[31] tidyselect_1.1.2    fansi_1.0.3         crayon_1.5.1       
[34] tzdb_0.3.0          dbplyr_2.2.1        withr_2.5.0        
[37] grid_4.2.1          jsonlite_1.8.0      gtable_0.3.0       
[40] lifecycle_1.0.1     DBI_1.1.3           magrittr_2.0.3     
[43] scales_1.2.0        cli_3.3.0           stringi_1.7.8      
[46] farver_2.1.1        fs_1.5.2            xml2_1.3.3         
[49] ellipsis_0.3.2      ragg_1.2.2          generics_0.1.3     
[52] vctrs_0.4.1         tools_4.2.1         glue_1.6.2         
[55] hms_1.1.1           fastmap_1.1.0       yaml_2.3.5         
[58] colorspace_2.0-3    gargle_1.2.0        rvest_1.0.2        
[61] knitr_1.39          haven_2.5.0        </code></pre>
</div>
</div>
<hr>
<p><a href="#introduction">Back to top</a></p>
<p><a href="https://slcladal.github.io/index.html">Back to HOME</a></p>
<hr>
</section>
<section id="references" class="level1 unnumbered">
<h1 class="unnumbered">References</h1>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>