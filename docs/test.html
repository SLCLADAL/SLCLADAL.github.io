<div class="cell">
<div class="cell-output-display">
<p><img src="https://slcladal.github.io/images/uq1.jpg"
style="width:100.0%" /></p>
</div>
</div>
<h1 class="unnumbered" id="introduction">Introduction</h1>
<div class="cell">
<div class="cell-output-display">
<p><img src="https://slcladal.github.io/images/g_chili.jpg"
style="float:right; padding:10px;width:15.0%" /></p>
</div>
</div>
<p>This tutorial shows how to get started with R and it specifically
focuses on R for analyzing language data but it offers valuable
information for anyone who wants to get started with R. As such, this
tutorial is aimed at fresh users or beginners with the aim of showcasing
how to set up a R session in RStudio, how to set up R projects, and how
to do basic operations using R. The aim is not to provide a
fully-fledged from beginner-to-expert, all-you-need-to-know tutorial but
rather to show how to properly and tidily set up a project before you
start coding and exemplify common operations such as loading and
manipulation tabular data and generating basic visualization using
R.</p>
<br>
<div class="warning"
style="padding:0.1em; background-color:#f2f2f2; color:#51247a">
<span>
<p style="margin-top:1em; text-align:center">
The entire R Notebook for the tutorial can be downloaded <a
href="https://slcladal.github.io/content/intror.Rmd"><strong>here</strong></a>.
If you want to render the R Notebook on your machine, i.e. knitting the
document to html or a pdf, you need to make sure that you have R and
RStudio installed and you also need to download the <a
href="https://slcladal.github.io/content/bibliography.bib"><strong>bibliography
file</strong></a> and store it in the same folder where you store the
Rmd or the Rproj file. <br>
</p>
<p style="margin-left:1em;">
</p>
<p></span></p>
</div>
<p><br></p>
<p><a href="https://www.rstudio.com/resources/cheatsheets/">Here</a> is
an overview of cheat sheets for popular and frequently used packages
providde by RStudio (cheat sheets are short overviews with explanations
and examples of useful functions). If you already have experience with
R, both <span class="citation"
data-cites="wickham2016r">@wickham2016r</span> (see <a
href="https://r4ds.had.co.nz/">here</a>) and <span class="citation"
data-cites="gillespie2016efficient">@gillespie2016efficient</span> (see
<a href="https://bookdown.org/csgillespie/efficientR/">here</a>) are
highly recommendable and excellent resources for improving your coding
abilities and workflows in R.</p>
<h2 class="unnumbered" id="goals-of-this-tutorial">Goals of this
tutorial</h2>
<p>The goals of this tutorial are:</p>
<ul>
<li>How to get started with R</li>
<li>How to orient yourself to R and RStudio</li>
<li>How to create and work in R projects</li>
<li>How to know where to look for help and to learn more about R</li>
<li>Understand the basics of working with data: load data, save data,
working with tables, create a simple plot</li>
<li>Learn some best practices for using R scripts, using data, and
projects</li>
<li>Understand the basics of objects, functions, and indexing</li>
</ul>
<h2 class="unnumbered" id="audience">Audience</h2>
<p>The intended audience for this tutorial is beginner-level, with no
previous experience using R. Thus, no prior knowledge of R is
required.</p>
<p>If you want to know more, would like to get some more practice, or
would like to have another approach to R, please check out the workshops
and resources on R provided by the <a
href="https://web.library.uq.edu.au/library-services/training">UQ
library</a>. In addition, there are various online resources available
to learn R (you can check out a very recommendable introduction <a
href="https://uvastatlab.github.io/phdplus/intror.html">here</a>).</p>
<h2 class="unnumbered" id="installing-r-and-rstudio">Installing R and
RStudio</h2>
<ul>
<li><p>You have NOT yet installed <strong>R</strong> on your
computer?</p>
<ul>
<li><p>You have a Windows computer? Then click <a
href="https://cran.r-project.org/bin/windows/base/R-4.0.2-win.exe">here</a>
for downloading and installing R</p></li>
<li><p>You have a Mac? Then click <a
href="https://cran.r-project.org/bin/macosx/R-4.0.2.pkg">here</a> for
downloading and installing R</p></li>
</ul></li>
<li><p>You have NOT yet installed <strong>RStudio</strong> on your
computer?</p>
<ul>
<li>Click <a
href="https://rstudio.com/products/rstudio/download/#download">here</a>
for downloading and installing RStudio.</li>
</ul></li>
</ul>
<p>You can find a more elaborate explanation of how to download and
install R and RStudio <a
href="https://gitlab.com/stragu/DSH/blob/master/R/Installation.md">here</a>
that was created by the UQ library.</p>
<h1 class="unnumbered" id="preparation">Preparation</h1>
<p>Before you actually open R or RStudio, there things to consider that
make working in R much easier and give your workflow a better
structure.</p>
<p>Imagine it like this: when you want to write a book, you could simply
take pen and paper and start writing <em>or</em> you could think about
what you want to write about, what different chapters your book would
consist of, which chapters to write first, what these chapters will deal
with, etc. The same is true for R: you could simply open R and start
writing code <em>or</em> you can prepare you session and structure what
you will be doing.</p>
<h2 class="unnumbered" id="folder-structure-and-r-projects">Folder
Structure and R projects</h2>
<p>Before actually starting with writing code, you should prepare the
session by going through the following steps:</p>
<h3 class="unnumbered" id="create-a-folder-for-your-project">1. Create a
folder for your project</h3>
<p>In that folder, create the following sub-folders (you can, of course,
adapt this folder template to match your needs)</p>
<ul>
<li>data (you do not create this folder for the present workshop as you
can simply use the data folder that you downloaded for this workshop
instead)</li>
<li>images</li>
<li>tables</li>
<li>docs</li>
</ul>
<p>The folder for your project could look like the the one shown
below.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="https://slcladal.github.io/images/RStudio_newfolder.png"
style="width:75.0%" /></p>
</div>
</div>
<p>Once you have created your project folder, you can go ahead with
RStudio.</p>
<h3 class="unnumbered" id="open-rstudio">3. Open RStudio</h3>
<p>This is what RStudio looks like when you first open it:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="https://slcladal.github.io/images/RStudio_empty.png"
style="width:100.0%" /></p>
</div>
</div>
<p>In RStudio, click on <code>File</code></p>
<div class="cell">
<div class="cell-output-display">
<p><img src="https://slcladal.github.io/images/RStudio_file.png"
style="width:50.0%" /></p>
</div>
</div>
<p>You can use the drop-down menu to create a <code>R project</code></p>
<h3 class="unnumbered" id="r-projects">4. R Projects</h3>
<p>In RStudio, click on <code>New Project</code></p>
<div class="cell">
<div class="cell-output-display">
<p><img src="https://slcladal.github.io/images/RStudio_newfile.png"
style="width:50.0%" /></p>
</div>
</div>
<p>Next, confirm by clicking <code>OK</code> and select
<code>Existing Directory</code>.</p>
<p>Then, navigate to where you have just created the project folder for
this workshop.</p>
<div class="cell">
<div class="cell-output-display">
<p><img
src="https://slcladal.github.io/images/RStudio_existingdirectory.png"
style="width:30.0%" /></p>
</div>
</div>
<p>Once you click on <code>Open</code>, you have created a new
<code>R project</code></p>
<h3 class="unnumbered" id="r-notebooks">5. R Notebooks</h3>
<p>In this project, click on <code>File</code></p>
<div class="cell">
<div class="cell-output-display">
<p><img src="https://slcladal.github.io/images/RStudio_file.png"
style="width:50.0%" /></p>
</div>
</div>
<p>Click on <code>New File</code> and then on <code>R Notebook</code> as
shown below.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="https://slcladal.github.io/images/RStudio_newnotebook.png"
style="width:50.0%" /></p>
</div>
</div>
<p>This <code>R Notebook</code> will be the file in which you do all
your work.</p>
<h3 class="unnumbered" id="updating-r">6. Updating R</h3>
<p>In case you encounter issues when opening the R Notebook (e.g., if
you receive an error message saying that you need to update packages
which then do not install properly), you may have to <em>update your R
version</em>.</p>
<p>To update your current R version to the recent release please copy
the code chunk shown below into the console pane (the bottom left pane)
and click on <code>Enter</code> to run the code. The code will
automatically update your version of R to the most recent release.
During the update, you may be asked to specify some options - in that
case, you can simply click on <em>Accept</em> and <em>Next</em> and
accept the default settings.</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install installr package</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;installr&quot;</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># load installr package</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(installr)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># update r</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">updateR</span>()</span></code></pre></div>
</div>
<h3 class="unnumbered" id="optimizing-r-project-options">7. Optimizing R
project options</h3>
<p>When you work with projects, it is recommendable to control the
so-called <em>environment</em>. This means that you make your R Project
self-contained by storing all packages that are used in project in a
library <em>in the R Project</em> (instead of in the general R library
on your computer). Having a library in your R Project means that you can
share your project folder wit other people and they will automatically
have the same package versions that you have sued which makes your code
more robust and reproducible.</p>
<p>So, how to create such an environment? You simply click on
<code>Tools</code> (at the very top right of RStudio), then click
on<code>Project Options</code> then click on <code>Environments</code>
and then check <code>Use renv with this project</code>. Now, when you
install packages, they will be installed in the package library (rather
than the general R library on your computer).</p>
<h3 class="unnumbered" id="getting-started-with-r-notebooks">8. Getting
started with R Notebooks</h3>
<p>You can now start writing in this R Notebook. For instance, you could
start by changing the title of the R Notebook and describe what you are
doing (what this Notebook contains).</p>
<p>Below is a picture of what this document looked like when I started
writing it.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="https://slcladal.github.io/images/RStudio_editMD.png"
style="width:100.0%" /></p>
</div>
</div>
<p>When you write in the R Notebook, you use what is called
<code>R Markdown</code> which is explained below.</p>
<h2 class="unnumbered" id="r-markdown">R Markdown</h2>
<p>The Notebook is an <a href="http://rmarkdown.rstudio.com/">R Markdown
document</a>: a Rmd (R Markdown) file is more than a flat text document:
it’s a program that you can run in R and which allows you to combine
prose and code, so readers can see the technical aspects of your work
while reading about their interpretive significance.</p>
<p>You can get a nice and short overview of the formatting options in R
Markdown (Rmd) files <a
href="https://rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf">here</a>.</p>
<p>R Markdown allows you to make your research fully transparent and
reproducible! If a couple of years down the line another researcher or a
journal editor asked you how you have done your analysis, you can simply
send them the Notebook or even the entire R-project folder.</p>
<p>As such, Rmd files are a type of document that allows to</p>
<ul>
<li><p>include snippets of code (and any outputs such as tables or
graphs) in plain text while</p></li>
<li><p>encoding the <em>structure</em> of your document by using simple
typographical symbols to encode formatting (rather than HTML tags or
format types such as <em>Main header</em> or <em>Header level 1</em> in
Word).</p></li>
</ul>
<p>Markdown is really quite simple to learn and these resources may
help:</p>
<ul>
<li><p>The <a href="https://en.wikipedia.org/wiki/Markdown">Markdown
Wikipedia page</a> includes a very handy chart of the syntax.</p></li>
<li><p>John Gruber developed Markdown and his <a
href="https://daringfireball.net/projects/markdown/syntax">introduction
to the syntax</a> is worth browsing.</p></li>
<li><p>This <a href="http://www.markdowntutorial.com/">interactive
Markdown tutorial</a> will teach you the syntax in a few
minutes.</p></li>
</ul>
<h1 class="unnumbered" id="r-and-rstudio-basics">R and RStudio
Basics</h1>
<p>RStudio is a so-called IDE - Integrated Development Environment. The
interface provides easy access to R. The advantage of this application
is that R programs and files as well as a project directory can be
managed easily. The environment is capable of editing and running
program code, viewing outputs and rendering graphics. Furthermore, it is
possible to view variables and data objects of an R-script directly in
the interface.</p>
<h2 class="unnumbered" id="rstudio-panes">RStudio: Panes</h2>
<p>The GUI - Graphical User Interface - that RStudio provides divides
the screen into four areas that are called <strong>panes</strong>:</p>
<ol type="1">
<li>File editor</li>
<li>Environment variables</li>
<li>R console</li>
<li>Management panes (File browser, plots, help display and R
packages).</li>
</ol>
<p>The two most important are the R console (bottom left) and the File
editor (or Script in the top left). The Environment variables and
Management panes are on the right of the screen and they contain:</p>
<ul>
<li><strong>Environment</strong> (top): Lists all currently defined
objects and data sets</li>
<li><strong>History</strong> (top): Lists all commands recently used or
associated with a project</li>
<li><strong>Plots</strong> (bottom): Graphical output goes here</li>
<li><strong>Help</strong> (bottom): Find help for R packages and
functions. Don’t forget you can type <code>?</code> before a function
name in the console to get info in the Help section.</li>
<li><strong>Files</strong> (bottom): Shows the files available to you in
your working directory</li>
</ul>
<p>These RStudio panes are shown below.</p>
<div class="cell">
<div class="cell-output-display">
<p><img
src="https://slcladal.github.io/images/RStudioscreenshot.png" /></p>
</div>
</div>
<h3 class="unnumbered" id="r-console-bottom-left-pane">R Console (bottom
left pane)</h3>
<p>The console pane allows you to quickly and immediately execute R
code. You can experiment with functions here, or quickly print data for
viewing.</p>
<p>Type next to the <code>&gt;</code> and press <code>Enter</code> to
execute.</p>
<hr />
<div class="warning"
style="padding:0.1em; background-color:#51247a; color:#f2f2f2">
<span>
<p style="margin-top:1em; text-align:center">
<b>EXERCISE TIME!</b>
</p>
<p style="margin-left:1em;">
</p>
<p></span></p>
</div>
<div class="question">
<p>`</p>
<ol type="1">
<li>You can use R like a calculator. Try typing <code>2+8</code> into
the <strong>R console</strong>.</li>
</ol>
<details>
<summary>
Answer
</summary>
<p>::: {.cell}</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span><span class="sc">+</span><span class="dv">8</span></span></code></pre></div>
<p>::: {.cell-output .cell-output-stdout} <code>[1] 10</code> :::
:::</p>
</details>
</div>
<p>`</p>
<hr />
<p>Here, the plus sign is the <strong>operator</strong>. Operators are
symbols that represent some sort of action. However, R is, of course,
much more than a simple calculator. To use R more fully, we need to
understand <strong>objects</strong>, <strong>functions</strong>, and
<strong>indexing</strong> - which we will learn about as we go.</p>
<p>For now, think of <em>objects as nouns</em> and <em>functions as
verbs</em>.</p>
<h2 class="unnumbered" id="running-commands-from-a-script">Running
commands from a script</h2>
<p>To run code from a script, insert your cursor on a line with a
command, and press <code>CTRL/CMD+Enter</code>.</p>
<p>Or highlight some code to only run certain sections of the command,
then press <code>CTRL/CMD+Enter</code> to run.</p>
<p>Alternatively, use the <code>Run</code> button at the top of the pane
to execute the current line or selection (see below).</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="https://slcladal.github.io/images/RStudio_run.png"
style="width:50.0%" /></p>
</div>
</div>
<h3 class="unnumbered" id="script-editor-top-left-pane">Script Editor
(top left pane)</h3>
<p>In contrast to the R console, which quickly runs code, the Script
Editor (in the top left) does not automatically execute code. The Script
Editor allows you to save the code essential to your analysis. You can
re-use that code in the moment, refer back to it later, or publish it
for replication.</p>
<p>Now, that we have explored RStudio, we are ready to get started with
R!</p>
<h1 class="unnumbered" id="getting-started-with-r">Getting started with
R</h1>
<p>This section introduces some basic concepts and procedures that help
optimize your workflow in R.</p>
<h2 class="unnumbered" id="setting-up-an-r-session">Setting up an R
session</h2>
<p>At the beginning of a session, it is common practice to define some
basic parameters. This is not required or even necessary, but it may
just help further down the line. This session preparation may include
specifying options. In the present case, we</p>
<ul>
<li><p>want R to show numbers as numbers up to 100 decimal points (and
not show them in mathematical notation (in mathematical notation, 0.007
would be represented as 0.7e<sup>-3</sup>))</p></li>
<li><p>want R to show maximally 100 results (otherwise, it can happen
that R prints out pages-after-pages of some numbers).</p></li>
</ul>
<p>Again, the session preparation is not required or necessary but it
can help avoid errors.</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># set options</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">stringsAsFactors =</span> F)                           </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">100</span>) </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">max.print=</span><span class="dv">100</span>) </span></code></pre></div>
</div>
<p>In script editor pane of RStudio, this would look like this:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="https://slcladal.github.io/images/RStudio_preparation.png"
style="width:100.0%" /></p>
</div>
</div>
<h2 class="unnumbered" id="packages">Packages</h2>
<p>When using R, most of the functions are not loaded or even installing
automatically. Instead, most functions are in contained in what are
called <strong>packages</strong>.</p>
<p>R comes with about 30 packages (“base R”). There are over 10,000
user-contributed packages; you can discover these packages online. A
prevalent collection of packages is the Tidyverse, which includes
ggplot2, a package for making graphics.</p>
<p>Before being able to use a package, we need to install the package
(using the <code>install.packages</code> function) and load the package
(using the <code>library</code> function). However, a package only needs
to be installed once(!) and can then simply be loaded. When you install
a package, this will likely install several other packages it depends
on. You should have already installed tidyverse before the workshop.</p>
<p>You must load the package in any new R session where you want to use
that package. Below I show what you need to type when you want to
install the <code>tidyverse</code>, the <code>tidytext</code>, the
<code>quanteda</code>, the <code>readxl</code>, and the <code>tm</code>
packages (which are the packages that we will need in this
workshop).</p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidytext&quot;</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;quanteda&quot;</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tm&quot;</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tokenizers&quot;</span>)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;here&quot;</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;flextable&quot;</span>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co"># install klippy for copy-to-clipboard button in code chunks</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;remotes&quot;</span>)</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;rlesur/klippy&quot;</span>)</span></code></pre></div>
</div>
<p>To load these packages, use the <code>library</code> function which
takes the package name as its main argument.</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tm)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tokenizers)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(flextable)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co"># activate klippy for copy-to-clipboard button</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>klippy<span class="sc">::</span><span class="fu">klippy</span>()</span></code></pre></div>
<div class="cell-output-display">
<script>
  addClassKlippyTo("pre.r, pre.markdown");
  addKlippy('left', 'top', 'auto', '1', 'Copy code', 'Copied!');
</script>
</div>
</div>
<p>The session preparation section of your Rmd file will thus also state
which packages a script relies on.</p>
<p>In script editor pane of RStudio, the code blocks that install and
activate packages would look like this:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="https://slcladal.github.io/images/RStudio_packages.png"
style="width:100.0%" /></p>
</div>
</div>
<h2 class="unnumbered" id="getting-help">Getting help</h2>
<p>When working with R, you will encounter issues and face challenges. A
very good thing about R is that it provides various ways to get help or
find information about the issues you face.</p>
<h3 class="unnumbered" id="finding-help-within-r">Finding help within
R</h3>
<p>To get help regrading what functions a package contains, which
arguments a function takes or to get information about how to use a
function, you can use the <code>help</code> function or the
<code>apropos</code>. function or you can simply type a <code>?</code>
before the package or two <code>??</code> if this does not give you any
answers.</p>
<div class="cell">
<div class="sourceCode" id="cb6"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(tidyverse) </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">apropos</span>(<span class="st">&quot;tidyverse&quot;</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>?require</span></code></pre></div>
</div>
<p>There are also other “official” help resources from R/RStudio.</p>
<ul>
<li><p>Read official package documentation, see vignettes, e.g.,
Tidyverse <a href="https://cran.r-project.org/package=tidyverse"
class="uri">https://cran.r-project.org/package=tidyverse</a></p></li>
<li><p>Use the RStudio Cheat Sheets at <a
href="https://www.rstudio.com/resources/cheatsheets/"
class="uri">https://www.rstudio.com/resources/cheatsheets/</a></p></li>
<li><p>Use the RStudio Help viewer by typing <code>?</code> before a
function or package</p></li>
<li><p>Check out the keyboard shortcuts <code>Help</code> under
<code>Tools</code> in RStudio for some good tips</p></li>
</ul>
<h3 class="unnumbered" id="finding-help-online">Finding help online</h3>
<p>One great thing about R is that you can very often find an answer to
your question online.</p>
<ul>
<li>Google your error! See <a
href="http://r4ds.had.co.nz/introduction.html#getting-help-and-learning-more"
class="uri">http://r4ds.had.co.nz/introduction.html#getting-help-and-learning-more</a>
for excellent suggestions on how to find help for a specific question
online.</li>
</ul>
<h1 class="unnumbered" id="working-with-tables">Working with tables</h1>
<p>We will now start working with data in R. As most of the data that we
work with comes in tables, we will focus on this first before moving on
to working with text data.</p>
<h2 class="unnumbered" id="loading-data-from-the-web">Loading data from
the web</h2>
<p>To show, how data can be downloaded from the web, we will download a
tab-separated txt-file. Translated to prose, the code below means
<em>Create an object called </em>icebio <em>and in that object, store
the result of the <code>read.delim</code> function</em>.</p>
<p><code>read.delim</code> stands for <em>read delimited file</em> and
it takes the URL from which to load the data (or the path to the data on
your computer) as its first argument. The <code>sep</code> stand for
separator and the <code>\t</code> stands for tab-separated and
represents the second argument that the <code>read.delim</code> function
takes. The third argument, <code>header</code>, can take either T(RUE)
or F(ALSE) and it tells R if the data has column names (headers) or
not.</p>
<h2 class="unnumbered" id="functions-and-objects">Functions and
Objects</h2>
<p>In R, functions always have the following form:
<code>function(argument1, argument2, ..., argumentN)</code>. Typically a
function does something to an object (e.g. a table), so that the first
argument typically specifies the data to which the function is applied.
Other arguments then allow to add some information. Just as a side note,
functions are also objects that do not contain data but
instructions.</p>
<p>To assign content to an object, we use <code>&lt;-</code> or
<code>=</code> so that the we provide a name for an object, and then
assign some content to it. For example, <code>MyObject &lt;- 1:3</code>
means <em>Create an object called <code>MyObject</code>. this object
should contain the numbers 1 to 3</em>.</p>
<div class="cell">
<div class="sourceCode" id="cb7"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load data</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>icebio <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(<span class="st">&quot;https://slcladal.github.io/data/BiodataIceIreland.txt&quot;</span>, </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="at">header =</span> T)</span></code></pre></div>
</div>
<h2 class="unnumbered" id="inspecting-data">Inspecting data</h2>
<p>There are many ways to inspect data. We will briefly go over the most
common ways to inspect data.</p>
<p>The <code>head</code> function takes the data-object as its first
argument and automatically shows the first 6 elements of an object (or
rows if the data-object has a table format).</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(icebio)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id file.speaker.id text.id spk.ref             zone      date    sex   age
1  1     &lt;S1A-001$A&gt; S1A-001       A northern ireland 1990-1994   male 34-41
2  2     &lt;S1A-001$B&gt; S1A-001       B northern ireland 1990-1994 female 34-41
3  3     &lt;S1A-002$?&gt; S1A-002       ?             &lt;NA&gt;      &lt;NA&gt;   &lt;NA&gt;  &lt;NA&gt;
4  4     &lt;S1A-002$A&gt; S1A-002       A northern ireland 2002-2005 female 26-33
5  5     &lt;S1A-002$B&gt; S1A-002       B northern ireland 2002-2005 female 19-25
6  6     &lt;S1A-002$C&gt; S1A-002       C northern ireland 2002-2005   male   50+
  word.count
1        765
2       1298
3         23
4        391
5         47
6        200</code></pre>
</div>
</div>
<p>We can also use the <code>head</code> function to inspect more or
less elements and we can specify the number of elements (or rows) that
we want to inspect as a second argument. In the example below, the
<code>4</code> tells R that we only want to see the first 4 rows of the
data.</p>
<div class="cell">
<div class="sourceCode" id="cb10"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(icebio, <span class="dv">4</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id file.speaker.id text.id spk.ref             zone      date    sex   age
1  1     &lt;S1A-001$A&gt; S1A-001       A northern ireland 1990-1994   male 34-41
2  2     &lt;S1A-001$B&gt; S1A-001       B northern ireland 1990-1994 female 34-41
3  3     &lt;S1A-002$?&gt; S1A-002       ?             &lt;NA&gt;      &lt;NA&gt;   &lt;NA&gt;  &lt;NA&gt;
4  4     &lt;S1A-002$A&gt; S1A-002       A northern ireland 2002-2005 female 26-33
  word.count
1        765
2       1298
3         23
4        391</code></pre>
</div>
</div>
<hr />
<div class="warning"
style="padding:0.1em; background-color:#51247a; color:#f2f2f2">
<span>
<p style="margin-top:1em; text-align:center">
<b>EXERCISE TIME!</b>
</p>
<p style="margin-left:1em;">
</p>
<p></span></p>
</div>
<div class="question">
<p>`</p>
<ol type="1">
<li>Download and inspect the first 7 rows of the data set that you can
find under this URL:
<code>https://slcladal.github.io/data/lmmdata.txt</code>. Can you guess
what the data is about?</li>
</ol>
<details>
<summary>
Answer
</summary>
<p>::: {.cell}</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>  ex1data <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(<span class="st">&quot;https://slcladal.github.io/data/lmmdata.txt&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(ex1data, <span class="dv">7</span>)</span></code></pre></div>
<p>::: {.cell-output .cell-output-stdout}
<code>Date         Genre    Text Prepositions Region   1 1736       Science   albin       166.01  North   2 1711     Education    anon       139.86  North   3 1808 PrivateLetter  austen       130.78  North   4 1878     Education    bain       151.29  North   5 1743     Education barclay       145.72  North   6 1908     Education  benson       120.77  North   7 1906         Diary  benson       119.17  North</code>
::: :::</p>
The data is about texts and the different columns provide information
about the texts such as when the texts were written (<code>Date</code>),
the genre the texts represent (<code>Genre</code>), the name of the
texts (<code>Text</code>), the relative frequencies of prepositions the
texts contain (<code>Prepositions</code>), and the region where the
author was from (<code>Region</code>).
</details>
</div>
<p>`</p>
<hr />
<h2 class="unnumbered"
id="accessing-individual-cells-in-a-table">Accessing individual cells in
a table</h2>
<p>If you want to access specific cells in a table, you can do so by
typing the name of the object and then specify the rows and columns in
square brackets (i.e. <strong>data[row, column]</strong>). For example,
<code>icebio[2, 4]</code> would show the value of the cell in the second
row and fourth column of the object <code>icebio</code>. We can also use
the colon to define a range (as shown below, where 1:5 means from 1 to 5
and 1:3 means from 1 to 3) The command <code>icebio[1:5, 1:3]</code>
thus means:</p>
<p><em>Show me the first 5 rows and the first 3 columns of the
data-object that is called icebio</em>.</p>
<div class="cell">
<div class="sourceCode" id="cb13"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>icebio[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id file.speaker.id text.id
1  1     &lt;S1A-001$A&gt; S1A-001
2  2     &lt;S1A-001$B&gt; S1A-001
3  3     &lt;S1A-002$?&gt; S1A-002
4  4     &lt;S1A-002$A&gt; S1A-002
5  5     &lt;S1A-002$B&gt; S1A-002</code></pre>
</div>
</div>
<hr />
<div class="warning"
style="padding:0.1em; background-color:#51247a; color:#f2f2f2">
<span>
<p style="margin-top:1em; text-align:center">
<b>EXERCISE TIME!</b>
</p>
<p style="margin-left:1em;">
</p>
<p></span></p>
</div>
<div class="question">
<p>`</p>
<ol type="1">
<li>How would you inspect the content of the cells in 4<sup>th</sup>
column, rows 3 to 5 of the <code>icebio</code> data set?</li>
</ol>
<details>
<summary>
Answer
</summary>
<p>::: {.cell}</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>  icebio[<span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">4</span>]</span></code></pre></div>
<p>::: {.cell-output .cell-output-stdout} <code>[1] "?" "A" "B"</code>
::: :::</p>
</details>
</div>
<p>`</p>
<hr />
<p><strong>Inspecting the structure of data</strong></p>
<p>You can use the <code>str</code> function to inspect the structure of
a data set. This means that this function will show the number of
observations (rows) and variables (columns) and tell you what type of
variables the data consists of</p>
<ul>
<li><strong>int</strong> = integer</li>
<li><strong>chr</strong> = character string</li>
<li><strong>num</strong> = numeric</li>
<li><strong>fct</strong> = factor</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb16"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(icebio)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&#39;data.frame&#39;:   1332 obs. of  9 variables:
 $ id             : int  1 2 3 4 5 6 7 8 9 10 ...
 $ file.speaker.id: chr  &quot;&lt;S1A-001$A&gt;&quot; &quot;&lt;S1A-001$B&gt;&quot; &quot;&lt;S1A-002$?&gt;&quot; &quot;&lt;S1A-002$A&gt;&quot; ...
 $ text.id        : chr  &quot;S1A-001&quot; &quot;S1A-001&quot; &quot;S1A-002&quot; &quot;S1A-002&quot; ...
 $ spk.ref        : chr  &quot;A&quot; &quot;B&quot; &quot;?&quot; &quot;A&quot; ...
 $ zone           : chr  &quot;northern ireland&quot; &quot;northern ireland&quot; NA &quot;northern ireland&quot; ...
 $ date           : chr  &quot;1990-1994&quot; &quot;1990-1994&quot; NA &quot;2002-2005&quot; ...
 $ sex            : chr  &quot;male&quot; &quot;female&quot; NA &quot;female&quot; ...
 $ age            : chr  &quot;34-41&quot; &quot;34-41&quot; NA &quot;26-33&quot; ...
 $ word.count     : int  765 1298 23 391 47 200 464 639 308 78 ...</code></pre>
</div>
</div>
<p>The <code>summary</code> function summarizes the data.</p>
<div class="cell">
<div class="sourceCode" id="cb18"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(icebio)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       id         file.speaker.id      text.id            spk.ref         
 Min.   :   1.0   Length:1332        Length:1332        Length:1332       
 1st Qu.: 333.8   Class :character   Class :character   Class :character  
 Median : 666.5   Mode  :character   Mode  :character   Mode  :character  
 Mean   : 666.5                                                           
 3rd Qu.: 999.2                                                           
 Max.   :1332.0                                                           
     zone               date               sex                age           
 Length:1332        Length:1332        Length:1332        Length:1332       
 Class :character   Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character   Mode  :character  
                                                                            
                                                                            
                                                                            
   word.count    
 Min.   :   0.0  
 1st Qu.:  66.0  
 Median : 240.5  
 Mean   : 449.9  
 3rd Qu.: 638.2  
 Max.   :2565.0  </code></pre>
</div>
</div>
<h2 class="unnumbered" id="tabulating-data">Tabulating data</h2>
<p>We can use the <code>table</code> function to create basic tables
that extract raw frequency information. The following command tells us
how many instances there are of each level of the variable
<code>date</code> in the <code>icebio</code>.</p>
<hr />
<div class="warning"
style="padding:0.1em; background-color:#51247a; color:#f2f2f2">
<span>
<p style="margin-top:1em; text-align:center">
<b>TIP</b>
</p>
<p style="margin-left:1em;">
</p>
<p></span></p>
</div>
<div class="question">
<p>`</p>
<p>In order to access specific columns of a data frame, you can first
type the name of the data set followed by a <code>$</code> symbol and
then the name of the column (or variable).</p>
</div>
<p>`</p>
<hr />
<div class="cell">
<div class="sourceCode" id="cb20"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(icebio<span class="sc">$</span>date) </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
1990-1994 1995-2001 2002-2005 
      905        67       270 </code></pre>
</div>
</div>
<p>Alternatively, you could, of course, index the column by using its
position in the data set like this: <code>icebio[, 6]</code> - the
result of <code>table(icebio[, 6])</code> and
<code>table(icebio$date)</code> are the same! Also note that here we
leave out indexes for rows to tell R that we want all rows.</p>
<p>When you want to cross-tabulate columns, it is often better to use
the <code>ftable</code> function (<code>ftable</code> stands for
<em>frequency table</em>).</p>
<div class="cell">
<div class="sourceCode" id="cb22"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ftable</span>(icebio<span class="sc">$</span>age, icebio<span class="sc">$</span>sex)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       female male
                  
0-18        5    7
19-25     163   65
26-33      83   36
34-41      35   58
42-49      35   97
50+        63  138</code></pre>
</div>
</div>
<hr />
<div class="warning"
style="padding:0.1em; background-color:#51247a; color:#f2f2f2">
<span>
<p style="margin-top:1em; text-align:center">
<b>EXERCISE TIME!</b>
</p>
<p style="margin-left:1em;">
</p>
<p></span></p>
</div>
<div class="question">
<p>`</p>
<ol type="1">
<li>Using the <code>table</code> function, how many women are in the
data collected between 2002 and 2005?</li>
</ol>
<details>
<summary>
Answer
</summary>
<p>::: {.cell}</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>  <span class="fu">table</span>(icebio<span class="sc">$</span>date, icebio<span class="sc">$</span>sex)</span></code></pre></div>
<p>::: {.cell-output .cell-output-stdout} ```</p>
<pre><code>        female male
1990-1994    338  562
1995-2001      4   58
2002-2005    186   84</code></pre>
<pre><code>  :::
  :::

&lt;/details&gt;

2. Using the `ftable` function, how many men are are from northern Ireland in the data collected between 1990 and 1994?

&lt;details&gt;
  &lt;summary&gt;Answer&lt;/summary&gt;

  ::: {.cell}
  
  ```{.r .cell-code}
  ftable(icebio$date, icebio$zone, icebio$sex)</code></pre>
<p>::: {.cell-output .cell-output-stdout} ``` female male</p>
<p>1990-1994 mixed between ni and roi 18 13 non-corpus speaker 7 22
northern ireland 104 289 republic of ireland 209 238 1995-2001 mixed
between ni and roi 0 0 non-corpus speaker 1 1 northern ireland 2 36
republic of ireland 1 21 2002-2005 mixed between ni and roi 19 7
non-corpus speaker 7 9 northern ireland 122 41 republic of ireland 38 27
``` ::: :::</p>
</details>
</div>
<p>`</p>
<hr />
<h2 class="unnumbered" id="saving-data-to-your-computer">Saving data to
your computer</h2>
<p>To save tabular data on your computer, you can use the
<code>write.table</code> function. This function requires the data that
you want to save as its first argument, the location where you want to
save the data as the second argument and the type of delimiter as the
third argument.</p>
<div class="cell">
<div class="sourceCode" id="cb27"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.table</span>(icebio, here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;icebio.txt&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>) </span></code></pre></div>
</div>
<p><strong>A word about paths</strong></p>
<p>In the code chunk above, the sequence
<code>here::here("data", "icebio.txt")</code> is a handy way to define a
path. A path is simply the location where a file is stored on your
computer or on the internet (which typically is a server - which is just
a fancy term for a computer - somewhere on the globe). The
<code>here</code> function from the<code>here</code> package allows to
simply state in which folder a certain file is and what file you are
talking about.</p>
<p>In this case, we want to access the file <code>icebio</code> (which
is a <code>txt</code> file and thus has the appendix <code>.txt</code>)
in the <code>data</code> folder. R will always start looking in the
folder in which your project is stored. If you want to access a file
that is stored somewhere else on your computer, you can also define the
full path to the folder in which the file is. In my case, this would be
<code>D:/Uni/UQ/SLC/LADAL/SLCLADAL.github.io/data</code>. However, as
the <code>data</code> folder in in the folder where my Rproj file is, I
only need to specify that the file is in the <code>data</code> folder
within the folder in which my Rproj file is located.</p>
<p><strong>A word about package naming</strong></p>
<p>Another thing that is notable in the sequence
<code>here::here("data", "icebio.txt")</code> is that I specified that
the <code>here</code> function is part of the <code>here</code> package.
This is what I meant by writing <code>here::here</code> which simply
means use the <code>here</code> function from <code>here</code> package
(<code>package::function</code>). This may appear to be somewhat
redundant but it happens quite frequently, that different packages have
functions that have the same names. In such cases, R will simply choose
the function from the package that was loaded last. To prevent R from
using the wrong function, it makes sense to specify the package AND the
function (as I did in the sequence <code>here::here</code>). I only use
functions without specify the package if the function is part of base
R.</p>
<h2 class="unnumbered" id="loading-data-from-your-computer">Loading data
from your computer</h2>
<p>To load tabular data from within your project folder (if it is in a
tab-separated txt-file) you can also use the <code>read.delim</code>
function. The only difference to loading from the web is that you use a
path instead of a URL. If the txt-file is in the folder called
<em>data</em> in your project folder, you would load the data as shown
below.</p>
<div class="cell">
<div class="sourceCode" id="cb28"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>icebio <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;icebio.txt&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="at">header =</span> T)</span></code></pre></div>
</div>
<p>However, you can always just use the full path (and you must do this
is the data is not in your project folder).</p>
<hr />
<div class="warning"
style="padding:0.1em; background-color:#51247a; color:#f2f2f2">
<span>
<p style="margin-top:1em; text-align:center">
<b>NOTE</b><br>You may have to change the path to the data!
</p>
<p style="margin-left:1em;">
</p>
<p></span></p>
</div>
<hr />
<div class="cell">
<div class="sourceCode" id="cb29"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>icebio <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;icebio.txt&quot;</span>), </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="at">header =</span> T)</span></code></pre></div>
</div>
<p>To if this has worked, we will use the <code>head</code> function to
see first 6 rows of the data</p>
<div class="cell">
<div class="sourceCode" id="cb30"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(icebio)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id file.speaker.id text.id spk.ref             zone      date    sex   age
1  1     &lt;S1A-001$A&gt; S1A-001       A northern ireland 1990-1994   male 34-41
2  2     &lt;S1A-001$B&gt; S1A-001       B northern ireland 1990-1994 female 34-41
3  3     &lt;S1A-002$?&gt; S1A-002       ?             &lt;NA&gt;      &lt;NA&gt;   &lt;NA&gt;  &lt;NA&gt;
4  4     &lt;S1A-002$A&gt; S1A-002       A northern ireland 2002-2005 female 26-33
5  5     &lt;S1A-002$B&gt; S1A-002       B northern ireland 2002-2005 female 19-25
6  6     &lt;S1A-002$C&gt; S1A-002       C northern ireland 2002-2005   male   50+
  word.count
1        765
2       1298
3         23
4        391
5         47
6        200</code></pre>
</div>
</div>
<h2 class="unnumbered" id="loading-excel-data">Loading Excel data</h2>
<p>To load Excel spreadsheets, you can use the <code>read_excel</code>
function from the <code>readxl</code> package as shown below. However,
it may be necessary to install and activate the <code>readxl</code>
package first.</p>
<div class="cell">
<div class="sourceCode" id="cb32"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>icebio <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;ICEdata.xlsx&quot;</span>))</span></code></pre></div>
</div>
<p>We now briefly check column names to see if the loading of the data
has worked.</p>
<div class="cell">
<div class="sourceCode" id="cb33"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(icebio)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] &quot;id&quot;              &quot;file.speaker.id&quot; &quot;text.id&quot;         &quot;spk.ref&quot;        
[5] &quot;zone&quot;            &quot;date&quot;            &quot;sex&quot;             &quot;age&quot;            
[9] &quot;word.count&quot;     </code></pre>
</div>
</div>
<h2 class="unnumbered" id="loading-text-data">Loading text data</h2>
<p>There are many functions that we can use to load text data into R.
For example, we can use the <code>readLines</code> function as shown
below.</p>
<div class="cell">
<div class="sourceCode" id="cb35"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>text <span class="ot">&lt;-</span> <span class="fu">readLines</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;text2.txt&quot;</span>))</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect first text element</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>text[<span class="dv">1</span>]</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] &quot;The book is presented as a manuscript written by its protagonist, a middle-aged man named Harry Haller, who leaves it to a chance acquaintance, the nephew of his landlady. The acquaintance adds a short preface of his own and then has the manuscript published. The title of this \&quot;real\&quot; book-in-the-book is Harry Haller&#39;s Records (For Madmen Only).&quot;</code></pre>
</div>
</div>
<p>To load many texts, we can use a loop to read all texts in a folder
as shown below. In a first step, we define the paths of the texts and
then, we use the <code>sapply</code> function to loop over the paths and
read them into R.</p>
<div class="cell">
<div class="sourceCode" id="cb37"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define paths</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>paths <span class="ot">&lt;-</span> <span class="fu">list.files</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data/testcorpus&quot;</span>), <span class="at">full.names =</span> T)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="co"># load texts</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>texts <span class="ot">&lt;-</span> <span class="fu">sapply</span>(paths, <span class="cf">function</span>(x){ <span class="fu">readLines</span>(x) })</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect first text element</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>texts[<span class="dv">1</span>]</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$`/home/sam/programming/SLCLADAL.github.io/data/testcorpus/linguistics01.txt`
[1] &quot;Linguistics is the scientific study of language. It involves analysing language form language meaning and language in context. The earliest activities in the documentation and description of language have been attributed to the th-century-BC Indian grammarian Pa?ini who wrote a formal description of the Sanskrit language in his A??adhyayi.&quot;                                                                                                                                                                                                                                                                      
[2] &quot;&quot;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
[3] &quot;Linguists traditionally analyse human language by observing an interplay between sound and meaning. Phonetics is the study of speech and non-speech sounds and delves into their acoustic and articulatory properties. The study of language meaning on the other hand deals with how languages encode relations between entities properties and other aspects of the world to convey process and assign meaning as well as manage and resolve ambiguity. While the study of semantics typically concerns itself with truth conditions pragmatics deals with how situational context influences the production of meaning. &quot;</code></pre>
</div>
</div>
<p>A method achieving the same result which uses piping (more on what
that is below) and tidyverse R code is shown below.</p>
<div class="cell">
<div class="sourceCode" id="cb39"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define paths</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>texts <span class="ot">&lt;-</span> <span class="fu">list.files</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data/testcorpus&quot;</span>), <span class="at">full.names =</span> T, <span class="at">pattern =</span> <span class="st">&quot;.*txt&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map_chr</span>(<span class="sc">~</span> readr<span class="sc">::</span><span class="fu">read_file</span>(.))</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect first text element</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>texts[<span class="dv">1</span>]</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] &quot;Linguistics is the scientific study of language. It involves analysing language form language meaning and language in context. The earliest activities in the documentation and description of language have been attributed to the th-century-BC Indian grammarian Pa?ini who wrote a formal description of the Sanskrit language in his A??adhyayi.\n\nLinguists traditionally analyse human language by observing an interplay between sound and meaning. Phonetics is the study of speech and non-speech sounds and delves into their acoustic and articulatory properties. The study of language meaning on the other hand deals with how languages encode relations between entities properties and other aspects of the world to convey process and assign meaning as well as manage and resolve ambiguity. While the study of semantics typically concerns itself with truth conditions pragmatics deals with how situational context influences the production of meaning. &quot;</code></pre>
</div>
</div>
<h2 class="unnumbered" id="renaming-piping-and-filtering">Renaming,
Piping, and Filtering</h2>
<p>To rename existing columns in a table, you can use the
<code>rename</code> command which takes the table as the first argument,
the new name as the second argument, the an equal sign (=), and finally,
the old name es the third argument. For example, renaming a column
<em>OldName</em> as <em>NewName</em> in a table called <em>MyTable</em>
would look like this:
<code>rename(MyTable, NewName = OldName)</code>.</p>
<p>Piping is done using the <code>%&gt;%</code> sequence and it can be
translated as <strong>and then</strong>. In the example below, we create
a new object (icebio_edit) from the existing object (icebio) <em>and
then</em> we rename the columns in the new object. When we use piping,
we do not need to name the data we are using as this is provided by the
previous step.</p>
<div class="cell">
<div class="sourceCode" id="cb41"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>icebio_edit <span class="ot">&lt;-</span> icebio <span class="sc">%&gt;%</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">Id =</span> id,</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">FileSpeakerId =</span> file.speaker.id,</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">File =</span> <span class="fu">colnames</span>(icebio)[<span class="dv">3</span>],</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">Speaker =</span> <span class="fu">colnames</span>(icebio)[<span class="dv">4</span>])</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>icebio_edit[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 6
     Id FileSpeakerId File    Speaker zone             date     
  &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;            &lt;chr&gt;    
1     1 &lt;S1A-001$A&gt;   S1A-001 A       northern ireland 1990-1994
2     2 &lt;S1A-001$B&gt;   S1A-001 B       northern ireland 1990-1994
3     3 &lt;S1A-002$?&gt;   S1A-002 ?       NA               NA       
4     4 &lt;S1A-002$A&gt;   S1A-002 A       northern ireland 2002-2005
5     5 &lt;S1A-002$B&gt;   S1A-002 B       northern ireland 2002-2005</code></pre>
</div>
</div>
<p>A very handy way to rename many columns simultaneously, you can use
the <code>str_to_title</code> function which capitalizes first letter of
a word. In the example below, we capitalize all first letters of the
column names of our current data.</p>
<div class="cell">
<div class="sourceCode" id="cb43"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(icebio_edit) <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_to_title</span>(<span class="fu">colnames</span>(icebio_edit))</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>icebio_edit[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 6
     Id Filespeakerid File    Speaker Zone             Date     
  &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;            &lt;chr&gt;    
1     1 &lt;S1A-001$A&gt;   S1A-001 A       northern ireland 1990-1994
2     2 &lt;S1A-001$B&gt;   S1A-001 B       northern ireland 1990-1994
3     3 &lt;S1A-002$?&gt;   S1A-002 ?       NA               NA       
4     4 &lt;S1A-002$A&gt;   S1A-002 A       northern ireland 2002-2005
5     5 &lt;S1A-002$B&gt;   S1A-002 B       northern ireland 2002-2005</code></pre>
</div>
</div>
<p>To remove rows based on values in columns you can use the
<code>filter</code> function.</p>
<div class="cell">
<div class="sourceCode" id="cb45"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>icebio_edit2 <span class="ot">&lt;-</span> icebio_edit <span class="sc">%&gt;%</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(Speaker <span class="sc">!=</span> <span class="st">&quot;?&quot;</span>,</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>         Zone <span class="sc">!=</span> <span class="fu">is.na</span>(Zone),</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>         Date <span class="sc">==</span> <span class="st">&quot;2002-2005&quot;</span>,</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>         Word.count <span class="sc">&gt;</span> <span class="dv">5</span>)</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(icebio_edit2)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 9
     Id Filespeakerid File    Speaker Zone          Date  Sex   Age   Word.count
  &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;
1     4 &lt;S1A-002$A&gt;   S1A-002 A       northern ire… 2002… fema… 26-33        391
2     5 &lt;S1A-002$B&gt;   S1A-002 B       northern ire… 2002… fema… 19-25         47
3     6 &lt;S1A-002$C&gt;   S1A-002 C       northern ire… 2002… male  50+          200
4     7 &lt;S1A-002$D&gt;   S1A-002 D       northern ire… 2002… fema… 50+          464
5     8 &lt;S1A-002$E&gt;   S1A-002 E       mixed betwee… 2002… male  34-41        639
6     9 &lt;S1A-002$F&gt;   S1A-002 F       northern ire… 2002… fema… 26-33        308</code></pre>
</div>
</div>
<p>To select specific columns you can use the <code>select</code>
function.</p>
<div class="cell">
<div class="sourceCode" id="cb47"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>icebio_selection <span class="ot">&lt;-</span> icebio_edit2 <span class="sc">%&gt;%</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(File, Speaker, Word.count)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(icebio_selection)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  File    Speaker Word.count
  &lt;chr&gt;   &lt;chr&gt;        &lt;dbl&gt;
1 S1A-002 A              391
2 S1A-002 B               47
3 S1A-002 C              200
4 S1A-002 D              464
5 S1A-002 E              639
6 S1A-002 F              308</code></pre>
</div>
</div>
<p>You can also use the <code>select</code> function to remove specific
columns.</p>
<div class="cell">
<div class="sourceCode" id="cb49"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>icebio_selection2 <span class="ot">&lt;-</span> icebio_edit2 <span class="sc">%&gt;%</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>Id, <span class="sc">-</span>File, <span class="sc">-</span>Speaker, <span class="sc">-</span>Date, <span class="sc">-</span>Zone, <span class="sc">-</span>Age)</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(icebio_selection2)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  Filespeakerid Sex    Word.count
  &lt;chr&gt;         &lt;chr&gt;       &lt;dbl&gt;
1 &lt;S1A-002$A&gt;   female        391
2 &lt;S1A-002$B&gt;   female         47
3 &lt;S1A-002$C&gt;   male          200
4 &lt;S1A-002$D&gt;   female        464
5 &lt;S1A-002$E&gt;   male          639
6 &lt;S1A-002$F&gt;   female        308</code></pre>
</div>
</div>
<h2 class="unnumbered" id="ordering-data">Ordering data</h2>
<p>To order data, for instance, in ascending order according to a
specific column you can use the <code>arrange</code> function.</p>
<div class="cell">
<div class="sourceCode" id="cb51"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>icebio_ordered_asc <span class="ot">&lt;-</span> icebio_selection2 <span class="sc">%&gt;%</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(Word.count)</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(icebio_ordered_asc)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  Filespeakerid Sex    Word.count
  &lt;chr&gt;         &lt;chr&gt;       &lt;dbl&gt;
1 &lt;S1B-009$D&gt;   female          6
2 &lt;S1B-005$C&gt;   female          7
3 &lt;S1B-009$C&gt;   male            7
4 &lt;S1B-020$F&gt;   male            7
5 &lt;S1B-006$G&gt;   female          9
6 &lt;S2A-050$B&gt;   male            9</code></pre>
</div>
</div>
<p>To order data in descending order you can also use the
<code>arrange</code> function and simply add a - before the column
according to which you want to order the data.</p>
<div class="cell">
<div class="sourceCode" id="cb53"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>icebio_ordered_desc <span class="ot">&lt;-</span> icebio_selection2 <span class="sc">%&gt;%</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="sc">-</span>Word.count)</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(icebio_ordered_desc)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  Filespeakerid Sex    Word.count
  &lt;chr&gt;         &lt;chr&gt;       &lt;dbl&gt;
1 &lt;S2A-055$A&gt;   female       2355
2 &lt;S2A-047$A&gt;   male         2340
3 &lt;S2A-035$A&gt;   female       2244
4 &lt;S2A-048$A&gt;   male         2200
5 &lt;S2A-015$A&gt;   male         2172
6 &lt;S2A-054$A&gt;   female       2113</code></pre>
</div>
</div>
<p>The output shows that the female speaker in file S2A-005 with the
speaker identity A has the highest word count with 2,355 words.</p>
<hr />
<div class="warning"
style="padding:0.1em; background-color:#51247a; color:#f2f2f2">
<span>
<p style="margin-top:1em; text-align:center">
<b>EXERCISE TIME!</b>
</p>
<p style="margin-left:1em;">
</p>
<p></span></p>
</div>
<div class="question">
<p>`</p>
<ol type="1">
<li>Using the data called <code>icebio</code>, create a new data set
called <code>ICE_Ire_ordered</code> and arrange the data in descending
order by the number of words that each speaker has uttered. Who is the
speaker with the highest word count?</li>
</ol>
<details>
<summary>
Answer
</summary>
<p>::: {.cell}</p>
<div class="sourceCode" id="cb55"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>  ICE_Ire_ordered <span class="ot">&lt;-</span> icebio <span class="sc">%&gt;%</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="sc">-</span>word.count)</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># inspect data</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(ICE_Ire_ordered)</span></code></pre></div>
<p>::: {.cell-output .cell-output-stdout}
<code># A tibble: 6 × 9        id file.speaker.id text.id spk.ref zone        date  sex   age   word.count     &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;   1   956 &lt;S2A-037$A&gt;     S2A-037 A       republic o… 1990… male  NA          2565   2   919 &lt;S2A-016$A&gt;     S2A-016 A       republic o… 1995… fema… 34-41       2482   3   933 &lt;S2A-023$A&gt;     S2A-023 A       northern i… 1990… male  50+         2367   4   992 &lt;S2A-055$A&gt;     S2A-055 A       northern i… 2002… fema… 42-49       2355   5   979 &lt;S2A-047$A&gt;     S2A-047 A       republic o… 2002… male  50+         2340   6   997 &lt;S2A-059$A&gt;     S2A-059 A       republic o… 1990… fema… NA          2305</code>
::: :::</p>
</details>
</div>
<p>`</p>
<hr />
<h2 class="unnumbered" id="creating-and-changing-variables">Creating and
changing variables</h2>
<p>New columns are created, and existing columns can be changed, by
using the <code>mutate</code> function. The <code>mutate</code> function
takes two arguments (if the data does not have to be specified): the
first argument is the (new) name of column that you want to create and
the second is what you want to store in that column. The = tells R that
the new column will contain the result of the second argument.</p>
<p>In the example below, we create a new column called
<em>Texttype</em>.</p>
<p>This new column should contain</p>
<ul>
<li><p>the value <em>PrivateDialoge</em> if <em>Filespeakerid</em>
contains the sequence <em>S1A</em>,</p></li>
<li><p>the value <em>PublicDialogue</em> if <em>Filespeakerid</em>
contains the sequence <em>S1B</em>,</p></li>
<li><p>the value <em>UnscriptedMonologue</em> if <em>Filespeakerid</em>
contains the sequence <em>S2A</em>,</p></li>
<li><p>the value <em>ScriptedMonologue</em> if <em>Filespeakerid</em>
contains the sequence <em>S2B</em>,</p></li>
<li><p>the value of <em>Filespeakerid</em> if <em>Filespeakerid</em>
neither contains <em>S1A</em>, <em>S1B</em>, <em>S2A</em>, nor
<em>S2B</em>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb56"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>icebio_texttype <span class="ot">&lt;-</span> icebio_selection2 <span class="sc">%&gt;%</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">Texttype =</span> </span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>                  dplyr<span class="sc">::</span><span class="fu">case_when</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(Filespeakerid ,<span class="st">&quot;S1A&quot;</span>) <span class="sc">~</span> <span class="st">&quot;PrivateDialoge&quot;</span>,</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>                                   stringr<span class="sc">::</span><span class="fu">str_detect</span>(Filespeakerid ,<span class="st">&quot;S1B&quot;</span>) <span class="sc">~</span> <span class="st">&quot;PublicDialogue&quot;</span>,</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>                                   stringr<span class="sc">::</span><span class="fu">str_detect</span>(Filespeakerid ,<span class="st">&quot;S2A&quot;</span>) <span class="sc">~</span> <span class="st">&quot;UnscriptedMonologue&quot;</span>,</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>                                   stringr<span class="sc">::</span><span class="fu">str_detect</span>(Filespeakerid ,<span class="st">&quot;S2B&quot;</span>) <span class="sc">~</span> <span class="st">&quot;ScriptedMonologue&quot;</span>,</span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>                                   <span class="cn">TRUE</span> <span class="sc">~</span> Filespeakerid))</span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(icebio_texttype)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  Filespeakerid Sex    Word.count Texttype      
  &lt;chr&gt;         &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;         
1 &lt;S1A-002$A&gt;   female        391 PrivateDialoge
2 &lt;S1A-002$B&gt;   female         47 PrivateDialoge
3 &lt;S1A-002$C&gt;   male          200 PrivateDialoge
4 &lt;S1A-002$D&gt;   female        464 PrivateDialoge
5 &lt;S1A-002$E&gt;   male          639 PrivateDialoge
6 &lt;S1A-002$F&gt;   female        308 PrivateDialoge</code></pre>
</div>
</div>
<h2 class="unnumbered" id="if-statements">If-statements</h2>
<p>We should briefly talk about if-statements (or <code>case_when</code>
in the present case). The <code>case_when</code> function is both very
powerful and extremely helpful as it allows you to assign values based
on a test. As such, <code>case_when</code>-statements can be read
as:</p>
<p><em>When/If X is the case, then do A and if X is not the case do
B!</em> (When/If -&gt; Then -&gt; Else)</p>
<p>The nice thing about <code>ifelse</code> or
<code>case_when</code>-statements is that they can be used in succession
as we have done above. This can then be read as:</p>
<p><em>If X is the case, then do A, if Y is the case, then do B, else do
Z</em></p>
<hr />
<div class="warning"
style="padding:0.1em; background-color:#51247a; color:#f2f2f2">
<span>
<p style="margin-top:1em; text-align:center">
<b>EXERCISE TIME!</b>
</p>
<p style="margin-left:1em;">
</p>
<p></span></p>
</div>
<div class="question">
<p>`</p>
<p>1.Using the data called <code>icebio</code>, create a new data set
called <code>ICE_Ire_AgeGroup</code> in which you create a column called
<code>AgeGroup</code> where all speakers who are younger than 42 have
the value <em>young</em> and all speakers aged 42 and over
<em>old</em>.</p>
<p><strong>Tip</strong>: use if-statements to assign the <em>old</em>
and <em>young</em> values.</p>
<details>
<summary>
Answer
</summary>
<div class="cell">
<div class="sourceCode" id="cb58"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>ICE_Ire_AgeGroup <span class="ot">&lt;-</span> icebio <span class="sc">%&gt;%</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">AgeGroup =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(age <span class="sc">==</span> <span class="st">&quot;42-49&quot;</span> <span class="sc">~</span> <span class="st">&quot;old&quot;</span>,</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>                                          age <span class="sc">==</span> <span class="st">&quot;50+&quot;</span> <span class="sc">~</span> <span class="st">&quot;old&quot;</span>, </span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>                                          age <span class="sc">==</span> <span class="st">&quot;0-18&quot;</span> <span class="sc">~</span> <span class="st">&quot;young&quot;</span>,</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>                                          age <span class="sc">==</span> <span class="st">&quot;19-25&quot;</span> <span class="sc">~</span> <span class="st">&quot;young&quot;</span>,</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>                                          age <span class="sc">==</span> <span class="st">&quot;26-33&quot;</span> <span class="sc">~</span> <span class="st">&quot;young&quot;</span>,</span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>                                          age <span class="sc">==</span> <span class="st">&quot;34-41&quot;</span> <span class="sc">~</span> <span class="st">&quot;young&quot;</span>, </span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>                                          <span class="cn">TRUE</span> <span class="sc">~</span>age))</span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ICE_Ire_AgeGroup); <span class="fu">table</span>(ICE_Ire_AgeGroup<span class="sc">$</span>AgeGroup)</span></code></pre></div>
<p>::: {.cell-output .cell-output-stdout}
<code># A tibble: 6 × 10        id file.speaker.id text.id spk.ref zone        date  sex   age   word.count     &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;   1     1 &lt;S1A-001$A&gt;     S1A-001 A       northern i… 1990… male  34-41        765   2     2 &lt;S1A-001$B&gt;     S1A-001 B       northern i… 1990… fema… 34-41       1298   3     3 &lt;S1A-002$?&gt;     S1A-002 ?       NA          NA    NA    NA            23   4     4 &lt;S1A-002$A&gt;     S1A-002 A       northern i… 2002… fema… 26-33        391   5     5 &lt;S1A-002$B&gt;     S1A-002 B       northern i… 2002… fema… 19-25         47   6     6 &lt;S1A-002$C&gt;     S1A-002 C       northern i… 2002… male  50+          200   # … with 1 more variable: AgeGroup &lt;chr&gt;</code>
:::</p>
<p>::: {.cell-output .cell-output-stdout} ```</p>
<pre><code> NA   old young 
547   333   452 </code></pre>
<pre><code>:::
:::

&lt;/details&gt;


&lt;/div&gt;`

***

## Summarizing data{-}

Summarizing is really helpful and can be done using the `summarise` function.


::: {.cell}

```{.r .cell-code}
icebio_summary1 &lt;- icebio_texttype %&gt;%
dplyr::summarise(Words = sum(Word.count))
# inspect data
head(icebio_summary1)</code></pre>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
   Words
   &lt;dbl&gt;
1 141876</code></pre>
</div>
</div>
<p>To get summaries of sub-groups or by variable level, we can use the
<code>group_by</code> function and then use the <code>summarise</code>
function.</p>
<div class="cell">
<div class="sourceCode" id="cb62"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>icebio_summary2 <span class="ot">&lt;-</span> icebio_texttype <span class="sc">%&gt;%</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(Texttype, Sex) <span class="sc">%&gt;%</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">Speakers =</span> <span class="fu">n</span>(),</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">Words =</span> <span class="fu">sum</span>(Word.count))</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(icebio_summary2)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
# Groups:   Texttype [3]
  Texttype            Sex    Speakers Words
  &lt;chr&gt;               &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt;
1 PrivateDialoge      female      105 60024
2 PrivateDialoge      male         18  9628
3 PublicDialogue      female       63 24647
4 PublicDialogue      male         41 16783
5 UnscriptedMonologue female        3  6712
6 UnscriptedMonologue male         16 24082</code></pre>
</div>
</div>
<hr />
<div class="warning"
style="padding:0.1em; background-color:#51247a; color:#f2f2f2">
<span>
<p style="margin-top:1em; text-align:center">
<b>EXERCISE TIME!</b>
</p>
<p style="margin-left:1em;">
</p>
<p></span></p>
</div>
<div class="question">
<p>`</p>
<ol type="1">
<li>Use the <code>icebio</code> and determine the number of words
uttered by female speakers from Northern Ireland above an age of
50.</li>
</ol>
<details>
<summary>
Answer
</summary>
<p>::: {.cell}</p>
<div class="sourceCode" id="cb64"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>  words_fni50 <span class="ot">&lt;-</span> icebio <span class="sc">%&gt;%</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(zone, sex, age, word.count) <span class="sc">%&gt;%</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(zone, sex, age) <span class="sc">%&gt;%</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">Words =</span> <span class="fu">sum</span>(word.count)) <span class="sc">%&gt;%</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(sex <span class="sc">==</span> <span class="st">&quot;female&quot;</span>,</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>         age <span class="sc">==</span> <span class="st">&quot;50+&quot;</span>,</span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>         zone <span class="sc">==</span> <span class="st">&quot;northern ireland&quot;</span>)</span></code></pre></div>
<p>::: {.cell-output .cell-output-stderr}
<code>`summarise()` has grouped output by 'zone', 'sex'. You can override using the   `.groups` argument.</code>
:::</p>
<div class="sourceCode" id="cb65"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># inspect data</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  words_fni50</span></code></pre></div>
<p>::: {.cell-output .cell-output-stdout}
<code># A tibble: 1 × 4   # Groups:   zone, sex [1]     zone             sex    age   Words     &lt;chr&gt;            &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt;   1 northern ireland female 50+   23210</code>
::: :::</p>
</details>
<ol start="2" type="1">
<li>Load the file <em>exercisedata.txt</em> and determine the mean
scores of groups A and B.</li>
</ol>
<p><strong>Tip</strong>: to extract the mean, combine the
<code>summary</code> function with the <code>mean</code> function.</p>
<details>
<summary>
Answer
</summary>
<p>::: {.cell}</p>
<div class="sourceCode" id="cb66"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>  exercisedata <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;exercisedata.txt&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="at">header =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(Group) <span class="sc">%&gt;%</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(Score))</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># inspect data</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>  exercisedata</span></code></pre></div>
<p>::: {.cell-output .cell-output-stdout}
<code># A tibble: 2 × 2     Group  Mean     &lt;chr&gt; &lt;dbl&gt;   1 A      14.9   2 B      11.8</code>
::: :::</p>
</details>
</div>
<p>`</p>
<hr />
<h2 class="unnumbered" id="gathering-and-spreading-data">Gathering and
spreading data</h2>
<p>The <code>tidyr</code> package has two very useful functions for
gathering and spreading data that can be sued to transform data to long
and wide formats (you will see what this means below). The functions are
called <code>gather</code> and <code>spread</code>.</p>
<p>We will use the data set called <code>icebio_summary2</code>, which
we created above, to demonstrate how this works.</p>
<p>We will first check out the <code>spread</code>-function to create
different columns for women and men that show how many of them are
represented in the different text types.</p>
<div class="cell">
<div class="sourceCode" id="cb67"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>icebio_summary_wide <span class="ot">&lt;-</span> icebio_summary2 <span class="sc">%&gt;%</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>Words) <span class="sc">%&gt;%</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">spread</span>(Sex, Speakers)</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>icebio_summary_wide</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
# Groups:   Texttype [3]
  Texttype            female  male
  &lt;chr&gt;                &lt;int&gt; &lt;int&gt;
1 PrivateDialoge         105    18
2 PublicDialogue          63    41
3 UnscriptedMonologue      3    16</code></pre>
</div>
</div>
<p>The data is now in what is called a <code>wide</code>-format as
values are distributed across columns.</p>
<p>To reformat this back to a <code>long</code>-format where each column
represents exactly one variable, we use the
<code>gather</code>-function:</p>
<div class="cell">
<div class="sourceCode" id="cb69"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>icebio_summary_long <span class="ot">&lt;-</span> icebio_summary_wide <span class="sc">%&gt;%</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">gather</span>(Sex, Speakers, female<span class="sc">:</span>male)</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>icebio_summary_long</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
# Groups:   Texttype [3]
  Texttype            Sex    Speakers
  &lt;chr&gt;               &lt;chr&gt;     &lt;int&gt;
1 PrivateDialoge      female      105
2 PublicDialogue      female       63
3 UnscriptedMonologue female        3
4 PrivateDialoge      male         18
5 PublicDialogue      male         41
6 UnscriptedMonologue male         16</code></pre>
</div>
</div>
<h1 class="unnumbered" id="more-on-working-with-text">More on working
with text</h1>
<p>We have now worked though how to load, save, and edit tabulated data.
However, R is also perfectly equipped for working with textual data
which is what we going to concentrate on now.</p>
<h2 class="unnumbered" id="loading-text-data-1">Loading text data</h2>
<p>To load text data from the web, we can use the <code>read_file</code>
function which takes the URL of the text as its first argument. In this
case will will load the 2016 rally speeches Donald Trump.</p>
<div class="cell">
<div class="sourceCode" id="cb71"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>Trump <span class="ot">&lt;-</span>base<span class="sc">::</span><span class="fu">readRDS</span>(<span class="fu">url</span>(<span class="st">&quot;https://slcladal.github.io/data/Trump.rda&quot;</span>, <span class="st">&quot;rb&quot;</span>))</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(Trump)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&#39;data.frame&#39;:   2694 obs. of  1 variable:
 $ SPEECH: chr  &quot;...Thank you so much.  That&#39;s so nice.  Isn&#39;t he a great guy.  He doesn&#39;t get a fair press; he doesn&#39;t get it. &quot;| __truncated__ &quot;With that said, our country is really headed in the wrong direction with a president who is doing an absolutely&quot;| __truncated__ &quot;And I&#39;m a conservative, actually very conservative, and I&#39;m a Republican.  And I&#39;m very disappointed by our Rep&quot;| __truncated__ &quot;You look at Obamacare.  A total catastrophe and by the way it really kicks in in &#39;16 and it is going to be a di&quot;| __truncated__ ...</code></pre>
</div>
</div>
<p>It is very easy to extract frequency information and to create
frequency lists. We can do this by first using the
<code>unnest_tokens</code> function which splits texts into individual
words, an then use the <code>count</code> function to get the raw
frequencies of all word types in a text.</p>
<div class="cell">
<div class="sourceCode" id="cb73"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>Trump <span class="sc">%&gt;%</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(<span class="at">text =</span> SPEECH) <span class="sc">%&gt;%</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, text) <span class="sc">%&gt;%</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>(word, <span class="at">sort=</span>T)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,102 × 2
   word      n
   &lt;chr&gt; &lt;int&gt;
 1 the    5924
 2 to     5460
 3 and    5438
 4 i      4873
 5 a      3592
 6 you    3055
 7 of     2953
 8 we     2565
 9 it     2421
10 that   2317
# … with 6,092 more rows</code></pre>
</div>
</div>
<p>Extracting N-grams is also very easy as the
<code>unnest_tokens</code> function can an argument called
<code>token</code> in which we can specify that we want to extract
n-grams, If we do this, then we need to specify the <code>n</code> as a
separate argument. Below we specify that we want the frequencies of all
4-grams.</p>
<div class="cell">
<div class="sourceCode" id="cb75"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>Trump <span class="sc">%&gt;%</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(<span class="at">text =</span> SPEECH) <span class="sc">%&gt;%</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, text, <span class="at">token=</span><span class="st">&quot;ngrams&quot;</span>, <span class="at">n=</span><span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>(word, <span class="at">sort=</span>T) <span class="sc">%&gt;%</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 2
   word                    n
   &lt;chr&gt;               &lt;int&gt;
 1 and we’re going to     93
 2 we are going to        75
 3 &lt;NA&gt;                   68
 4 it’s going to be       65
 5 we’re going to do      61
 6 we’re going to have    61
 7 not going to happen    60
 8 and by the way         53
 9 thank you very much    52
10 we’re going to win     50</code></pre>
</div>
</div>
<h2 class="unnumbered" id="splitting-up-texts">Splitting-up texts</h2>
<p>We can use the <code>str_split</code> function to split texts.
However, there are two issues when using this (very useful)
function:</p>
<ul>
<li><p>the pattern that we want to split on disappears</p>
<ul>
<li>the output is a list (a special type of data format)</li>
</ul></li>
</ul>
<p>To remedy these issues, we</p>
<ul>
<li><p>combine the <code>str_split</code> function with the
<code>unlist</code> function</p>
<ul>
<li>add something right at the beginning of the pattern that we use to
split the text. To add something to the beginning of the pattern that we
want to split the text by, we use the <code>str_replace_all</code>
function. The <code>str_replace_all</code> function takes three
arguments, 1. the <strong>text</strong>, 2. the <strong>pattern</strong>
that should be replaced, 3. the <strong>replacement</strong>. In the
example below, we add <code>~~~</code> to the sequence
<code>SPEECH</code> and then split on the <code>~~~</code> rather than
on the sequence “SPEECH” (in other words, we replace <code>SPEECH</code>
with <code>~~~SPEECH</code> and then split on <code>~~~</code>).</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb77"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>Trump_split <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">str_split</span>(</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(Trump, <span class="st">&quot;SPEECH&quot;</span>, <span class="st">&quot;~~~SPEECH&quot;</span>),</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">pattern =</span> <span class="st">&quot;~~~&quot;</span>))</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a><span class="fu">nchar</span>(Trump_split)<span class="co">#; str(Trump_split)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  21311  26963   2701   6004   1342  32880  28497 425099   1404 311770
[11]  43776</code></pre>
</div>
</div>
<h2 class="unnumbered" id="cleaning-texts">Cleaning texts</h2>
<p>When working with texts, we usually need to clean the data. Below, we
do some very basic cleaning using a pipeline.</p>
<div class="cell">
<div class="sourceCode" id="cb79"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>Trump_split_clean <span class="ot">&lt;-</span> Trump_split <span class="sc">%&gt;%</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># replace elements</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="fu">fixed</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>), <span class="st">&quot; &quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove strange symbols</span></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">&quot;[^[:alnum:][:punct:]]+&quot;</span>, <span class="st">&quot; &quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># combine contractions</span></span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">&quot; re &quot;</span>, <span class="st">&quot;&#39;re &quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">&quot; ll &quot;</span>, <span class="st">&quot;&#39;ll &quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">&quot; d &quot;</span>, <span class="st">&quot;&#39;d &quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">&quot; m &quot;</span>, <span class="st">&quot;&#39;m &quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">&quot; s &quot;</span>, <span class="st">&quot;&#39;s &quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb79-12"><a href="#cb79-12" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">&quot;n t &quot;</span>, <span class="st">&quot;n&#39;t &quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb79-13"><a href="#cb79-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove \&quot;</span></span>
<span id="cb79-14"><a href="#cb79-14" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_remove_all</span>(<span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st">&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb79-15"><a href="#cb79-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove superfluous white spaces</span></span>
<span id="cb79-16"><a href="#cb79-16" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_squish</span>()</span>
<span id="cb79-17"><a href="#cb79-17" aria-hidden="true" tabindex="-1"></a><span class="co"># remove very short elements</span></span>
<span id="cb79-18"><a href="#cb79-18" aria-hidden="true" tabindex="-1"></a>Trump_split_clean <span class="ot">&lt;-</span> Trump_split_clean[<span class="fu">nchar</span>(Trump_split_clean) <span class="sc">&gt;</span> <span class="dv">5</span>]</span>
<span id="cb79-19"><a href="#cb79-19" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb79-20"><a href="#cb79-20" aria-hidden="true" tabindex="-1"></a><span class="fu">nchar</span>(Trump_split_clean)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  20878  26754   2687   5960   1321  32539  28303 422165   1404 309275
[11]  43477</code></pre>
</div>
</div>
<p>Inspect text</p>
<div class="cell">
<div class="sourceCode" id="cb81"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>Trump_split_clean[<span class="dv">5</span>]</span></code></pre></div>
</div>
<h2 class="unnumbered" id="concordancing-and-kwics">Concordancing and
KWICs</h2>
<p>Creating concordances or key-word-in-context displays is one of the
most common practices when dealing with text data. Fortunately, there
exist ready-made functions that make this a very easy task in R. We will
use the <code>kwic</code> function from the <code>quanteda</code>
package to create kwics here.</p>
<div class="cell">
<div class="sourceCode" id="cb82"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>kwic_multiple <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">kwic</span>(Trump_split_clean, </span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">pattern =</span> <span class="fu">phrase</span>(<span class="st">&quot;great again&quot;</span>),</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">window =</span> <span class="dv">3</span>, </span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">valuetype =</span> <span class="st">&quot;regex&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>()</span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(kwic_multiple)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  docname from   to               pre     keyword            post     pattern
1   text1 3063 3064  make our country great again       . We have great again
2   text1 4502 4503   to make America great again        . We can great again
3   text1 4510 4511 make this country great again . The potential great again
4   text2 5329 5330 will make America great again        . And if great again
5   text4  628  629   to make America great again       , folks , great again
6   text4  643  644   to make America great again         . , And great again</code></pre>
</div>
</div>
<p>We can now also select concordances based on specific features. For
example, we only want those instances of “great again” if the preceding
word was “america”.</p>
<div class="cell">
<div class="sourceCode" id="cb84"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>kwic_multiple_select <span class="ot">&lt;-</span> kwic_multiple <span class="sc">%&gt;%</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># last element before search term is &quot;america&quot;</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">str_detect</span>(pre, <span class="st">&quot;america$&quot;</span>))</span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(kwic_multiple_select)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] docname from    to      pre     keyword post    pattern
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
</div>
<p>Again, we can use the <code>write.table</code> function to save our
kwics to disc.</p>
<div class="cell">
<div class="sourceCode" id="cb86"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.table</span>(kwic_multiple_select, here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;kwic_multiple_select.txt&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>)</span></code></pre></div>
</div>
<p>As most of the data that we use is on out computers (rather than
being somewhere on the web), we now load files with text from your
computer. It is important to note that you need to use <code>\\</code>
when you want to load data from a Windows PC (rather than single
<code>\</code>).</p>
<p>To load many files, we first create a list of all files in a the
directory that we want to load data from and then use the
<code>sapply</code> function (which works just like a loop). The
<code>sapply</code> function takes a a vector of elements and then
performs a sequence of steps on each of these elements. In the example
below, we feed the file locations to the <code>sapply</code> function
and then we scan each text (i.e. we read it into R), then we paste all
the content of one file together.</p>
<hr />
<div class="warning"
style="padding:0.1em; background-color:#51247a; color:#f2f2f2">
<span>
<p style="margin-top:1em; text-align:center">
<b>NOTE</b><br>You may have to change the path to the data!
</p>
<p style="margin-left:1em;">
</p>
<p></span></p>
</div>
<hr />
<div class="cell">
<div class="sourceCode" id="cb87"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;ICEIrelandSample&quot;</span>),</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">pattern =</span> <span class="st">&quot;.txt&quot;</span>, <span class="at">full.names =</span> T)</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>ICE_Ire_sample <span class="ot">&lt;-</span> <span class="fu">sapply</span>(files, <span class="cf">function</span>(x) {</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">scan</span>(x, <span class="at">what =</span> <span class="st">&quot;char&quot;</span>)</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">paste</span>(x, <span class="at">sep =</span> <span class="st">&quot; &quot;</span>, <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(ICE_Ire_sample)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Named chr [1:20] &quot;&lt;S1A-001 Riding&gt; &lt;I&gt; &lt;S1A-001$A&gt; &lt;#&gt; Well how did the riding go tonight &lt;S1A-001$B&gt; &lt;#&gt; It was good so it was &lt;&quot;| __truncated__ ...
 - attr(*, &quot;names&quot;)= chr [1:20] &quot;/home/sam/programming/SLCLADAL.github.io/data/ICEIrelandSample/S1A-001.txt&quot; &quot;/home/sam/programming/SLCLADAL.github.io/data/ICEIrelandSample/S1A-002.txt&quot; &quot;/home/sam/programming/SLCLADAL.github.io/data/ICEIrelandSample/S1A-003.txt&quot; &quot;/home/sam/programming/SLCLADAL.github.io/data/ICEIrelandSample/S1A-004.txt&quot; ...</code></pre>
</div>
</div>
<p>As the texts do not have column names (but simply names), we can
clean these by removing everything before a <code>/</code> and by
removing the .txt.</p>
<div class="cell">
<div class="sourceCode" id="cb89"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(ICE_Ire_sample) <span class="ot">&lt;-</span> <span class="fu">names</span>(ICE_Ire_sample) <span class="sc">%&gt;%</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_remove_all</span>(<span class="st">&quot;.*/&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_remove_all</span>(<span class="st">&quot;.txt&quot;</span>)</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(ICE_Ire_sample)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] &quot;S1A-001&quot; &quot;S1A-002&quot; &quot;S1A-003&quot; &quot;S1A-004&quot; &quot;S1A-005&quot; &quot;S1A-006&quot; &quot;S1A-007&quot;
 [8] &quot;S1A-008&quot; &quot;S1A-009&quot; &quot;S1A-010&quot; &quot;S1A-011&quot; &quot;S1A-012&quot; &quot;S1A-013&quot; &quot;S1A-014&quot;
[15] &quot;S1A-015&quot; &quot;S1A-016&quot; &quot;S1A-017&quot; &quot;S1A-018&quot; &quot;S1A-019&quot; &quot;S1A-020&quot;</code></pre>
</div>
</div>
<h2 class="unnumbered" id="further-splitting-of-texts">Further splitting
of texts</h2>
<p>To split the texts into speech units where each speech unit begins
with the speaker that has uttered it, we again use the
<code>sapply</code> function.</p>
<div class="cell">
<div class="sourceCode" id="cb91"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>ICE_Ire_split <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(<span class="fu">unlist</span>(<span class="fu">sapply</span>(ICE_Ire_sample, <span class="cf">function</span>(x){</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a> x <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(<span class="fu">str_split</span>(<span class="fu">str_replace_all</span>(x, <span class="st">&quot;(&lt;S1A-)&quot;</span>, <span class="st">&quot;~~~</span><span class="sc">\\</span><span class="st">1&quot;</span>), <span class="st">&quot;~~~&quot;</span>))  </span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>})))</span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ICE_Ire_split)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] &quot;&quot;                                                                                                                                                                                    
[2] &quot;&lt;S1A-001 Riding&gt; &lt;I&gt; &quot;                                                                                                                                                               
[3] &quot;&lt;S1A-001$A&gt; &lt;#&gt; Well how did the riding go tonight &quot;                                                                                                                                 
[4] &quot;&lt;S1A-001$B&gt; &lt;#&gt; It was good so it was &lt;#&gt; Just I I couldn&#39;t believe that she was going to let me jump &lt;,&gt; that was only the fourth time you know &lt;#&gt; It was great &lt;&amp;&gt; laughter &lt;/&amp;&gt; &quot;
[5] &quot;&lt;S1A-001$A&gt; &lt;#&gt; What did you call your horse &quot;                                                                                                                                       
[6] &quot;&lt;S1A-001$B&gt; &lt;#&gt; I can&#39;t remember &lt;#&gt; Oh Mary s Town &lt;,&gt; oh\n&quot;                                                                                                                        </code></pre>
</div>
</div>
<h2 class="unnumbered" id="basics-of-regular-expressions">Basics of
regular expressions</h2>
<p>Next, we extract the File and the Speaker and combine Text, File, and
Speaker in a table.</p>
<p>We use this to show the power of <strong>regular expressions</strong>
(to learn more about regular expression, have a look at this very
recommendable <a
href="https://stringr.tidyverse.org/articles/regular-expressions.html">tutorial</a>).
Regular expressions are symbols or sequences of symbols that stand
for</p>
<ul>
<li>symbols or patterns (e.g. <code>[a-z]</code> stands for any
lowercase character)
<ul>
<li>the frequency of symbols or patterns (e.g. <code>{1,3}</code> stands
for between 1 and 3)</li>
<li>classes of symbols (e.g. <code>[:punct:]</code> stands for any
punctuation symbol)</li>
<li>structural properties (e.g. <code>[^[:blank:]]</code> stands for any
non-space character, <code>\t</code> stands for tab-stop and
<code>\n</code> stands for a line break)</li>
</ul></li>
</ul>
<p>We can not go into any detail here and only touch upon the power of
regular expressions.</p>
<p>The symbol <code>.</code> is one of the most powerful and most
universal regular expressions as it represents (literally) any symbol or
character and it thus stands for a pattern. The <code>*</code> is a
regular expression that refers to the frequency of a pattern and it
stands for 0 to an infinite number of instances. Thus, <code>.*</code>
stands for 0 to an infinite number of any character. You can find an
overview of the regular expressions that you can use in R <a
href="https://slcladal.github.io/regularexpressions.html">here</a>.</p>
<p>Also, if you put patterns in round brackets, R will remember the
sequence within brackets and you can paste it back into a string from
memory when you replace something.</p>
<p>When referring to symbols that are used a regular expressions such as
<code>\</code> or <code>\$</code>, you need to inform R that you
actually mean the real symbol and not the regular expression and you do
that by typing two <code>\\</code> before the sequence in question. Have
a look at the example below and try to see what the regular expressions
(<code>.*(S1A-[0-9]{3,3}).*</code>, <code>\n</code>, and
<code>.*\\$([A-Z]{1,2}\\?{0,1})&gt;.*</code>) stand for.</p>
<div class="cell">
<div class="sourceCode" id="cb93"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>ICE_Ire_split_tb <span class="ot">&lt;-</span> ICE_Ire_split <span class="sc">%&gt;%</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>()</span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a><span class="co"># add column names</span></span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(ICE_Ire_split_tb)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">&quot;Text&quot;</span></span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a><span class="co"># add file and speaker</span></span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>ICE_Ire_split_tb <span class="ot">&lt;-</span> ICE_Ire_split_tb <span class="sc">%&gt;%</span></span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(Text, <span class="st">&quot;&lt;I&gt;&quot;</span>),</span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a>         Text <span class="sc">!=</span> <span class="st">&quot;&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb93-9"><a href="#cb93-9" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">File =</span> <span class="fu">str_replace_all</span>(Text, <span class="st">&quot;.*(S1A-[0-9]{3,3}).*&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&quot;</span>),</span>
<span id="cb93-10"><a href="#cb93-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">File =</span> <span class="fu">str_remove_all</span>(File, <span class="st">&quot;</span><span class="sc">\\\n</span><span class="st">&quot;</span>),</span>
<span id="cb93-11"><a href="#cb93-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">Speaker =</span> <span class="fu">str_replace_all</span>(Text, <span class="st">&quot;.*</span><span class="sc">\\</span><span class="st">$([A-Z]{1,2}</span><span class="sc">\\</span><span class="st">?{0,1})&gt;.*&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&quot;</span>),</span>
<span id="cb93-12"><a href="#cb93-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">Speaker =</span> <span class="fu">str_remove_all</span>(Speaker, <span class="st">&quot;</span><span class="sc">\\\n</span><span class="st">&quot;</span>))</span></code></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-77de5d76{table-layout:auto;width:95%;}.cl-77ae53ce{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-77ae541e{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-77aef112{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-77b09062{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-77b090a8{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-77b090bc{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-77b090e4{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-77b09102{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-77b09116{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-77b0913e{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-77b09166{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-77b0917a{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-77b0918e{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-77b091ac{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-77b091c0{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-77de5d76'>
<caption class="Table Caption">
</caption>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-77b091ac"><p class="cl-77aef112"><span class="cl-77ae53ce">Text</span></p></td><td class="cl-77b0918e"><p class="cl-77aef112"><span class="cl-77ae53ce">File</span></p></td><td class="cl-77b091c0"><p class="cl-77aef112"><span class="cl-77ae53ce">Speaker</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-77b090bc"><p class="cl-77aef112"><span class="cl-77ae541e">&lt;S1A-001$A&gt; &lt;#&gt; Well how did the riding go tonight </span></p></td><td class="cl-77b09062"><p class="cl-77aef112"><span class="cl-77ae541e">S1A-001</span></p></td><td class="cl-77b090a8"><p class="cl-77aef112"><span class="cl-77ae541e">A</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-77b0917a"><p class="cl-77aef112"><span class="cl-77ae541e">&lt;S1A-001$B&gt; &lt;#&gt; It was good so it was &lt;#&gt; Just I I couldn't believe that she was going to let me jump &lt;,&gt; that was only the fourth time you know &lt;#&gt; It was great &lt;&amp;&gt; laughter &lt;/&amp;&gt; </span></p></td><td class="cl-77b09166"><p class="cl-77aef112"><span class="cl-77ae541e">S1A-001</span></p></td><td class="cl-77b0913e"><p class="cl-77aef112"><span class="cl-77ae541e">B</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-77b090bc"><p class="cl-77aef112"><span class="cl-77ae541e">&lt;S1A-001$A&gt; &lt;#&gt; What did you call your horse </span></p></td><td class="cl-77b09062"><p class="cl-77aef112"><span class="cl-77ae541e">S1A-001</span></p></td><td class="cl-77b090a8"><p class="cl-77aef112"><span class="cl-77ae541e">A</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-77b0917a"><p class="cl-77aef112"><span class="cl-77ae541e">&lt;S1A-001$B&gt; &lt;#&gt; I can't remember &lt;#&gt; Oh Mary s Town &lt;,&gt; oh</span></p></td><td class="cl-77b09166"><p class="cl-77aef112"><span class="cl-77ae541e">S1A-001</span></p></td><td class="cl-77b0913e"><p class="cl-77aef112"><span class="cl-77ae541e">B</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-77b090bc"><p class="cl-77aef112"><span class="cl-77ae541e">&lt;S1A-001$A&gt; &lt;#&gt; And how did Mabel do</span></p></td><td class="cl-77b09062"><p class="cl-77aef112"><span class="cl-77ae541e">S1A-001</span></p></td><td class="cl-77b090a8"><p class="cl-77aef112"><span class="cl-77ae541e">A</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-77b0917a"><p class="cl-77aef112"><span class="cl-77ae541e">&lt;S1A-001$B&gt; &lt;#&gt; Did you not see her whenever she was going over the jumps &lt;#&gt; There was one time her horse refused and it refused three times &lt;#&gt; And then &lt;,&gt; she got it round and she just lined it up straight and she just kicked it and she hit it with the whip &lt;,&gt; and over it went the last time you know &lt;#&gt; And Stephanie told her she was very determined and very well-ridden &lt;&amp;&gt; laughter &lt;/&amp;&gt; because it had refused the other times you know &lt;#&gt; But Stephanie wouldn t let her give up on it &lt;#&gt; She made her keep coming back and keep coming back &lt;,&gt; until &lt;,&gt; it jumped it you know &lt;#&gt; It was good </span></p></td><td class="cl-77b09166"><p class="cl-77aef112"><span class="cl-77ae541e">S1A-001</span></p></td><td class="cl-77b0913e"><p class="cl-77aef112"><span class="cl-77ae541e">B</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-77b090bc"><p class="cl-77aef112"><span class="cl-77ae541e">&lt;S1A-001$A&gt; &lt;#&gt; Yeah I m not so sure her jumping  s improving that much &lt;#&gt; She uh &lt;,&gt; seemed to be holding the reins very tight </span></p></td><td class="cl-77b09062"><p class="cl-77aef112"><span class="cl-77ae541e">S1A-001</span></p></td><td class="cl-77b090a8"><p class="cl-77aef112"><span class="cl-77ae541e">A</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-77b0917a"><p class="cl-77aef112"><span class="cl-77ae541e">&lt;S1A-001$B&gt; &lt;#&gt; Yeah she was &lt;#&gt; That s what Stephanie said &lt;#&gt; &lt;{&gt; &lt;[&gt; She &lt;/[&gt; needed to &lt;,&gt; give the horse its head</span></p></td><td class="cl-77b09166"><p class="cl-77aef112"><span class="cl-77ae541e">S1A-001</span></p></td><td class="cl-77b0913e"><p class="cl-77aef112"><span class="cl-77ae541e">B</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-77b090bc"><p class="cl-77aef112"><span class="cl-77ae541e">&lt;S1A-001$A&gt; &lt;#&gt; &lt;[&gt; Mm &lt;/[&gt; &lt;/{&gt;</span></p></td><td class="cl-77b09062"><p class="cl-77aef112"><span class="cl-77ae541e">S1A-001</span></p></td><td class="cl-77b090a8"><p class="cl-77aef112"><span class="cl-77ae541e">A</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-77b09116"><p class="cl-77aef112"><span class="cl-77ae541e">&lt;S1A-001$A&gt; &lt;#&gt; She wasn t really getting into the jumping position the way she used to </span></p></td><td class="cl-77b09102"><p class="cl-77aef112"><span class="cl-77ae541e">S1A-001</span></p></td><td class="cl-77b090e4"><p class="cl-77aef112"><span class="cl-77ae541e">A</span></p></td></tr></tbody></table></div>
</div>
</div>
<h2 class="unnumbered" id="combining-tables">Combining tables</h2>
<p>We often want to combine different tables. This is very easy in R and
we will show how it can be done by combining our bio data about speakers
that are represented in the ICE Ireland corpus with the texts themselves
so that we get a table which holds both the text as well as the speaker
information.</p>
<p>Thus, we now join the text data with the bio data by using the
<code>left_join</code> function. We join the text with the bio data
based on the contents of the File and the Speaker columns. In contract
to <code>right_join</code>, and <code>full_join</code>,
<code>left_join</code> will drop all rows from the <em>right</em> table
that are not present in <em>left</em> table (and vice verse for
<code>right_join</code>. In contrast, <code>full_join</code> will retain
all rows from both the left and the right table.</p>
<div class="cell">
<div class="sourceCode" id="cb94"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>ICE_Ire <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">left_join</span>(ICE_Ire_split_tb, icebio_edit, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;File&quot;</span>, <span class="st">&quot;Speaker&quot;</span>))</span></code></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-78a99946{table-layout:auto;width:95%;}.cl-787b13be{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-787b1404{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-787b8290{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-787b82cc{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-787d945e{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-787d9490{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-787d94ae{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-787d94cc{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-787d94e0{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-787d94f4{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-787d9508{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-787d951c{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-787d9530{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-787d954e{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-787d9562{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-787d9576{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-787d958a{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-787d959e{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-787d95bc{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-787d95d0{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-78a99946'>
<caption class="Table Caption">
</caption>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-787d95d0"><p class="cl-787b8290"><span class="cl-787b13be">Text</span></p></td><td class="cl-787d958a"><p class="cl-787b8290"><span class="cl-787b13be">File</span></p></td><td class="cl-787d958a"><p class="cl-787b8290"><span class="cl-787b13be">Speaker</span></p></td><td class="cl-787d959e"><p class="cl-787b82cc"><span class="cl-787b13be">Id</span></p></td><td class="cl-787d958a"><p class="cl-787b8290"><span class="cl-787b13be">Filespeakerid</span></p></td><td class="cl-787d958a"><p class="cl-787b8290"><span class="cl-787b13be">Zone</span></p></td><td class="cl-787d958a"><p class="cl-787b8290"><span class="cl-787b13be">Date</span></p></td><td class="cl-787d958a"><p class="cl-787b8290"><span class="cl-787b13be">Sex</span></p></td><td class="cl-787d958a"><p class="cl-787b8290"><span class="cl-787b13be">Age</span></p></td><td class="cl-787d95bc"><p class="cl-787b82cc"><span class="cl-787b13be">Word.count</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-787d94ae"><p class="cl-787b8290"><span class="cl-787b1404">&lt;S1A-001$A&gt; &lt;#&gt; Well how did the riding go tonight </span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">S1A-001</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">A</span></p></td><td class="cl-787d94cc"><p class="cl-787b82cc"><span class="cl-787b1404">1</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">&lt;S1A-001$A&gt;</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">northern ireland</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">1990-1994</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">male</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">34-41</span></p></td><td class="cl-787d9490"><p class="cl-787b82cc"><span class="cl-787b1404">765</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-787d954e"><p class="cl-787b8290"><span class="cl-787b1404">&lt;S1A-001$B&gt; &lt;#&gt; It was good so it was &lt;#&gt; Just I I couldn't believe that she was going to let me jump &lt;,&gt; that was only the fourth time you know &lt;#&gt; It was great &lt;&amp;&gt; laughter &lt;/&amp;&gt; </span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">S1A-001</span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">B</span></p></td><td class="cl-787d9562"><p class="cl-787b82cc"><span class="cl-787b1404">2</span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">&lt;S1A-001$B&gt;</span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">northern ireland</span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">1990-1994</span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">female</span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">34-41</span></p></td><td class="cl-787d9576"><p class="cl-787b82cc"><span class="cl-787b1404">1,298</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-787d94ae"><p class="cl-787b8290"><span class="cl-787b1404">&lt;S1A-001$A&gt; &lt;#&gt; What did you call your horse </span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">S1A-001</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">A</span></p></td><td class="cl-787d94cc"><p class="cl-787b82cc"><span class="cl-787b1404">1</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">&lt;S1A-001$A&gt;</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">northern ireland</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">1990-1994</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">male</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">34-41</span></p></td><td class="cl-787d9490"><p class="cl-787b82cc"><span class="cl-787b1404">765</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-787d954e"><p class="cl-787b8290"><span class="cl-787b1404">&lt;S1A-001$B&gt; &lt;#&gt; I can't remember &lt;#&gt; Oh Mary s Town &lt;,&gt; oh</span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">S1A-001</span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">B</span></p></td><td class="cl-787d9562"><p class="cl-787b82cc"><span class="cl-787b1404">2</span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">&lt;S1A-001$B&gt;</span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">northern ireland</span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">1990-1994</span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">female</span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">34-41</span></p></td><td class="cl-787d9576"><p class="cl-787b82cc"><span class="cl-787b1404">1,298</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-787d94ae"><p class="cl-787b8290"><span class="cl-787b1404">&lt;S1A-001$A&gt; &lt;#&gt; And how did Mabel do</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">S1A-001</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">A</span></p></td><td class="cl-787d94cc"><p class="cl-787b82cc"><span class="cl-787b1404">1</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">&lt;S1A-001$A&gt;</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">northern ireland</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">1990-1994</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">male</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">34-41</span></p></td><td class="cl-787d9490"><p class="cl-787b82cc"><span class="cl-787b1404">765</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-787d954e"><p class="cl-787b8290"><span class="cl-787b1404">&lt;S1A-001$B&gt; &lt;#&gt; Did you not see her whenever she was going over the jumps &lt;#&gt; There was one time her horse refused and it refused three times &lt;#&gt; And then &lt;,&gt; she got it round and she just lined it up straight and she just kicked it and she hit it with the whip &lt;,&gt; and over it went the last time you know &lt;#&gt; And Stephanie told her she was very determined and very well-ridden &lt;&amp;&gt; laughter &lt;/&amp;&gt; because it had refused the other times you know &lt;#&gt; But Stephanie wouldn t let her give up on it &lt;#&gt; She made her keep coming back and keep coming back &lt;,&gt; until &lt;,&gt; it jumped it you know &lt;#&gt; It was good </span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">S1A-001</span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">B</span></p></td><td class="cl-787d9562"><p class="cl-787b82cc"><span class="cl-787b1404">2</span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">&lt;S1A-001$B&gt;</span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">northern ireland</span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">1990-1994</span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">female</span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">34-41</span></p></td><td class="cl-787d9576"><p class="cl-787b82cc"><span class="cl-787b1404">1,298</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-787d94ae"><p class="cl-787b8290"><span class="cl-787b1404">&lt;S1A-001$A&gt; &lt;#&gt; Yeah I m not so sure her jumping  s improving that much &lt;#&gt; She uh &lt;,&gt; seemed to be holding the reins very tight </span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">S1A-001</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">A</span></p></td><td class="cl-787d94cc"><p class="cl-787b82cc"><span class="cl-787b1404">1</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">&lt;S1A-001$A&gt;</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">northern ireland</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">1990-1994</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">male</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">34-41</span></p></td><td class="cl-787d9490"><p class="cl-787b82cc"><span class="cl-787b1404">765</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-787d954e"><p class="cl-787b8290"><span class="cl-787b1404">&lt;S1A-001$B&gt; &lt;#&gt; Yeah she was &lt;#&gt; That s what Stephanie said &lt;#&gt; &lt;{&gt; &lt;[&gt; She &lt;/[&gt; needed to &lt;,&gt; give the horse its head</span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">S1A-001</span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">B</span></p></td><td class="cl-787d9562"><p class="cl-787b82cc"><span class="cl-787b1404">2</span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">&lt;S1A-001$B&gt;</span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">northern ireland</span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">1990-1994</span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">female</span></p></td><td class="cl-787d9530"><p class="cl-787b8290"><span class="cl-787b1404">34-41</span></p></td><td class="cl-787d9576"><p class="cl-787b82cc"><span class="cl-787b1404">1,298</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-787d94ae"><p class="cl-787b8290"><span class="cl-787b1404">&lt;S1A-001$A&gt; &lt;#&gt; &lt;[&gt; Mm &lt;/[&gt; &lt;/{&gt;</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">S1A-001</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">A</span></p></td><td class="cl-787d94cc"><p class="cl-787b82cc"><span class="cl-787b1404">1</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">&lt;S1A-001$A&gt;</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">northern ireland</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">1990-1994</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">male</span></p></td><td class="cl-787d945e"><p class="cl-787b8290"><span class="cl-787b1404">34-41</span></p></td><td class="cl-787d9490"><p class="cl-787b82cc"><span class="cl-787b1404">765</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-787d951c"><p class="cl-787b8290"><span class="cl-787b1404">&lt;S1A-001$A&gt; &lt;#&gt; She wasn t really getting into the jumping position the way she used to </span></p></td><td class="cl-787d94e0"><p class="cl-787b8290"><span class="cl-787b1404">S1A-001</span></p></td><td class="cl-787d94e0"><p class="cl-787b8290"><span class="cl-787b1404">A</span></p></td><td class="cl-787d94f4"><p class="cl-787b82cc"><span class="cl-787b1404">1</span></p></td><td class="cl-787d94e0"><p class="cl-787b8290"><span class="cl-787b1404">&lt;S1A-001$A&gt;</span></p></td><td class="cl-787d94e0"><p class="cl-787b8290"><span class="cl-787b1404">northern ireland</span></p></td><td class="cl-787d94e0"><p class="cl-787b8290"><span class="cl-787b1404">1990-1994</span></p></td><td class="cl-787d94e0"><p class="cl-787b8290"><span class="cl-787b1404">male</span></p></td><td class="cl-787d94e0"><p class="cl-787b8290"><span class="cl-787b1404">34-41</span></p></td><td class="cl-787d9508"><p class="cl-787b82cc"><span class="cl-787b1404">765</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>You can then perform concordancing on the Text column in the
table.</p>
<div class="cell">
<div class="sourceCode" id="cb95"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>kwic_iceire <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">kwic</span>(ICE_Ire<span class="sc">$</span>Text,</span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">pattern =</span> <span class="fu">phrase</span>(<span class="st">&quot;Irish&quot;</span>),</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">window =</span> <span class="dv">5</span>, </span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">valuetype =</span> <span class="st">&quot;regex&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>()</span></code></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-79c24710{table-layout:auto;width:95%;}.cl-799a3f9a{font-family:'DejaVu Sans';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-799a3fe0{font-family:'DejaVu Sans';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-799aaa20{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-799aaa5c{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-799c2558{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-799c2594{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-799c25b2{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-799c25c6{background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-799c25da{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-799c25e4{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-799c2602{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-799c2616{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-799c262a{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-799c2648{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-799c265c{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-799c267a{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-799c268e{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-799c2698{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-799c26ac{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-799c26c0{background-color:rgba(207, 207, 207, 1.00);vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-79c24710'>
<caption class="Table Caption">
</caption>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-799c268e"><p class="cl-799aaa20"><span class="cl-799a3f9a">docname</span></p></td><td class="cl-799c2698"><p class="cl-799aaa5c"><span class="cl-799a3f9a">from</span></p></td><td class="cl-799c2698"><p class="cl-799aaa5c"><span class="cl-799a3f9a">to</span></p></td><td class="cl-799c26ac"><p class="cl-799aaa20"><span class="cl-799a3f9a">pre</span></p></td><td class="cl-799c26ac"><p class="cl-799aaa20"><span class="cl-799a3f9a">keyword</span></p></td><td class="cl-799c26ac"><p class="cl-799aaa20"><span class="cl-799a3f9a">post</span></p></td><td class="cl-799c26c0"><p class="cl-799aaa20"><span class="cl-799a3f9a">pattern</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-799c25b2"><p class="cl-799aaa20"><span class="cl-799a3fe0">text1430</span></p></td><td class="cl-799c2558"><p class="cl-799aaa5c"><span class="cl-799a3fe0">37</span></p></td><td class="cl-799c2558"><p class="cl-799aaa5c"><span class="cl-799a3fe0">37</span></p></td><td class="cl-799c2594"><p class="cl-799aaa20"><span class="cl-799a3fe0">Ireland you know it was</span></p></td><td class="cl-799c2594"><p class="cl-799aaa20"><span class="cl-799a3fe0">Irish</span></p></td><td class="cl-799c2594"><p class="cl-799aaa20"><span class="cl-799a3fe0">bacon and it was lovely</span></p></td><td class="cl-799c25c6"><p class="cl-799aaa20"><span class="cl-799a3fe0">Irish</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-799c2616"><p class="cl-799aaa20"><span class="cl-799a3fe0">text1760</span></p></td><td class="cl-799c25e4"><p class="cl-799aaa5c"><span class="cl-799a3fe0">62</span></p></td><td class="cl-799c25e4"><p class="cl-799aaa5c"><span class="cl-799a3fe0">62</span></p></td><td class="cl-799c25da"><p class="cl-799aaa20"><span class="cl-799a3fe0">/ &amp; &gt; being good</span></p></td><td class="cl-799c25da"><p class="cl-799aaa20"><span class="cl-799a3fe0">Irish</span></p></td><td class="cl-799c25da"><p class="cl-799aaa20"><span class="cl-799a3fe0">Catholics we always had to</span></p></td><td class="cl-799c2602"><p class="cl-799aaa20"><span class="cl-799a3fe0">Irish</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-799c25b2"><p class="cl-799aaa20"><span class="cl-799a3fe0">text1784</span></p></td><td class="cl-799c2558"><p class="cl-799aaa5c"><span class="cl-799a3fe0">13</span></p></td><td class="cl-799c2558"><p class="cl-799aaa5c"><span class="cl-799a3fe0">13</span></p></td><td class="cl-799c2594"><p class="cl-799aaa20"><span class="cl-799a3fe0">&gt; We should do the</span></p></td><td class="cl-799c2594"><p class="cl-799aaa20"><span class="cl-799a3fe0">Irish</span></p></td><td class="cl-799c2594"><p class="cl-799aaa20"><span class="cl-799a3fe0">&lt; . &gt; ver &lt;</span></p></td><td class="cl-799c25c6"><p class="cl-799aaa20"><span class="cl-799a3fe0">Irish</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-799c262a"><p class="cl-799aaa20"><span class="cl-799a3fe0">text1784</span></p></td><td class="cl-799c2648"><p class="cl-799aaa5c"><span class="cl-799a3fe0">23</span></p></td><td class="cl-799c2648"><p class="cl-799aaa5c"><span class="cl-799a3fe0">23</span></p></td><td class="cl-799c265c"><p class="cl-799aaa20"><span class="cl-799a3fe0">&lt; / . &gt; the</span></p></td><td class="cl-799c265c"><p class="cl-799aaa20"><span class="cl-799a3fe0">Irish</span></p></td><td class="cl-799c265c"><p class="cl-799aaa20"><span class="cl-799a3fe0">version of the Matrix &lt;</span></p></td><td class="cl-799c267a"><p class="cl-799aaa20"><span class="cl-799a3fe0">Irish</span></p></td></tr></tbody></table></div>
</div>
</div>
<h2 class="unnumbered" id="tokenization-and-counting-words">Tokenization
and counting words</h2>
<p>We will now use the <code>tokenize_words</code> function from the
tokenizer package to find out how many words are in each file. Before we
count the words, however, we will clean the data by removing everything
between pointy brackets (e.g. &lt;#&gt;) as well as all punctuation.</p>
<div class="cell">
<div class="sourceCode" id="cb96"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>words <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(<span class="fu">sapply</span>(Trump_split_clean, <span class="cf">function</span>(x){</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> tm<span class="sc">::</span><span class="fu">removeNumbers</span>(x)</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> tm<span class="sc">::</span><span class="fu">removePunctuation</span>(x)</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">tokenize_words</span>(x))</span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">length</span>(x)}))</span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>words</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  3846  4641   521  1119   241  5880  5301 76772   266 56940  7848</code></pre>
</div>
</div>
<p>The nice thing about the tokenizer package is that it also allows to
split texts into sentences. To show this, we return to the rally
speeches by Donald Trump and split the first of his rally speeches into
sentences.</p>
<div class="cell">
<div class="sourceCode" id="cb98"><pre
class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>Sentences <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">tokenize_sentences</span>(Trump_split_clean[<span class="dv">6</span>]))</span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(Sentences)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] &quot;SPEECH 6, Thank you.&quot;                                                                           
[2] &quot;It’s true, and these are the best and the finest.&quot;                                              
[3] &quot;When Mexico sends its people, they’re not sending their best.&quot;                                  
[4] &quot;They’re not sending you.&quot;                                                                       
[5] &quot;They’re not sending you.&quot;                                                                       
[6] &quot;They’re sending people that have lots of problems, and they’re bringing those problems with us.&quot;</code></pre>
</div>
</div>
<p>We now want to find associations between words. To do this, we
convert all characters to lower case, remove (some) non lexical words
(also called stop words), remove punctuation, and superfluous white
spaces and then create a document-term-matrix (DTM) which shows how
often any word occurs in any of the sentences (in this case, the
sentences are treated as documents).</p>
<p>Once we have a DTM, we can then use the <code>findAssocs</code>
function to see which words associate most strongly with target words
that we want to investigate. We can use the argument “corlimit” to show
the terms that are most strongly associated with our target words.</p>
