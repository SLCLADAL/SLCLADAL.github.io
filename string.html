<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Martin Schweinberger" />


<title>String Processing in R</title>

<script src="site_libs/header-attrs-2.14/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/clipboard-1.7.1/clipboard.min.js"></script>
<link href="site_libs/primer-tooltips-1.4.0/build.css" rel="stylesheet" />
<link href="site_libs/klippy-0.0.0.9500/css/klippy.min.css" rel="stylesheet" />
<script src="site_libs/klippy-0.0.0.9500/js/klippy.min.js"></script>
<script src="site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="site_libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="site_libs/str_view-binding-1.4.0/str_view.js"></script>
<link rel="stylesheet" href="styles.css" />

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VSGK4KYDQZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VSGK4KYDQZ');
</script>


<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">



<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  
  <!-- Added by SKC - LADAL image and thicker top with   -->
  <div class="container-fluid navbar-top" >
    <a href="index.html"> <!-- Make entire top row and text clickable home link  -->
        <div class="row">
            <div class="navbar-brand col-md-12">
              <img src="ladal_icon_cas_tran_white_trimed.png" class="navbar-icon" alt="LADAL"/>
              <span class="navbar-title-note navbar-collapse collapse" >Language Technology and Data Analysis Laboratory</span>
            </div>
        </div>
    </a>
  </div>
  
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <!-- SKC removed  navbar brand -->
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">HOME</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    ABOUT LADAL
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="people.html">People | Collabs</a>
    </li>
    <li>
      <a href="news.html">News</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    EVENTS
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="workshops.html">Workshops</a>
    </li>
    <li>
      <a href="webinars2022.html">LADAL Webinar Series 2022</a>
    </li>
    <li>
      <a href="opening.html">LADAL Webinar Series 2021</a>
    </li>
  </ul>
</li>
<li>
  <a href="tutorials.html">TUTORIALS</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    RESOURCES
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="links.html">Links</a>
    </li>
    <li>
      <a href="base.html">Tutorial stylesheet</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    CONTACT
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="contact.html">Contact</a>
    </li>
    <li>
      <a href="services.html">Services</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">String Processing in R</h1>
<h4 class="author">Martin Schweinberger</h4>

</div>


<p><img src="https://slcladal.github.io/images/uq1.jpg" width="100%" /></p>
<div id="introduction" class="section level1 unnumbered">
<h1 class="unnumbered">Introduction</h1>
<p><img src="https://slcladal.github.io/images/gy_chili.jpg" width="15%" style="float:right; padding:10px" /></p>
<p>This tutorial introduces string processing and it is aimed at
beginners and intermediate users of R with the aim of showcasing how to
work with and process textual data using R. The aim is not to provide a
fully-fledged analysis but rather to show and exemplify selected useful
functions and methods associated with text processing.</p>
<div class="warning"
style="padding:0.1em; background-color:#f2f2f2; color:#51247a">
<span>
<p style="margin-top:1em; text-align:center">
The entire R Notebook for the tutorial can be downloaded <a
href="https://slcladal.github.io/string.Rmd"><strong>here</strong></a>.
If you want to render the R Notebook on your machine, i.e. knitting the
document to html or a pdf, you need to make sure that you have R and
RStudio installed and you also need to download the <a
href="https://slcladal.github.io/bibliography.bib"><strong>bibliography
file</strong></a> and store it in the same folder where you store the
Rmd file. <br><br> <strong><a
href="https://colab.research.google.com/drive/1Fefa26MM1DxifPpp1iHtJ3ofL_EFSq6V?usp=sharing">Here</a></strong>
is a <strong>link to an interactive version of this tutorial on Google
Colab</strong>. The interactive tutorial is based on a Jupyter notebook
of this tutorial. This interactive Jupyter notebook allows you to
execute code yourself and - if you copy the Jupyter notebook - you can
also change and edit the notebook, e.g. you can change code and upload
your own data.<br>
</p>
<p style="margin-left:1em;">
</p>
<p></span></p>
</div>
<p><br></p>
<p><strong>Preparation and session set up</strong></p>
<p>This tutorial is based on R. If you have not installed R or are new
to it, you will find an introduction to and more information how to use
R <a href="https://slcladal.github.io/intror.html">here</a>. For this
tutorials, we need to install certain <em>packages</em> from an R
<em>library</em> so that the scripts shown below are executed without
errors. Before turning to the code below, please install the packages by
running the code below this paragraph. If you have already installed the
packages mentioned below, then you can skip ahead ignore this section.
To install the necessary packages, simply run the following code - it
may take some time (between 1 and 5 minutes to install all of the
packages so you do not need to worry if it takes some time).</p>
<pre class="r"><code># install packages
install.packages(&quot;tidyverse&quot;)
install.packages(&quot;htmlwidgets&quot;)
# install klippy for copy-to-clipboard button in code chunks
install.packages(&quot;remotes&quot;)
remotes::install_github(&quot;rlesur/klippy&quot;)</code></pre>
<p>Now that we have installed the packages, we can activate them as
shown below.</p>
<pre class="r"><code># load packages for website
library(tidyverse)
# activate klippy for copy-to-clipboard button
klippy::klippy()</code></pre>
<script>
  addClassKlippyTo("pre.r, pre.markdown");
  addKlippy('left', 'top', 'auto', '1', 'Copy code', 'Copied!');
</script>
<p>Once you have installed RStudio and initiated the session by
executing the code shown above, you are good to go.</p>
<p>Before we start with string processing, we will load some example
texts on which we will perform the processing.</p>
<pre class="r"><code># read in text
exampletext  &lt;- base::readRDS(url(&quot;https://slcladal.github.io/data/tx1.rda&quot;, &quot;rb&quot;))
# inspect
exampletext</code></pre>
<pre><code>## [1] &quot;Grammar is a system of rules which governs the production and use of utterances in a given language. These rules apply to sound as well as meaning, and include componential subsets of rules, such as those pertaining to phonology (the organisation of phonetic sound systems), morphology (the formation and composition of words), and syntax (the formation and composition of phrases and sentences). Many modern theories that deal with the principles of grammar are based on Noam Chomsky&#39;s framework of generative linguistics.&quot;</code></pre>
<p>This first example text represents a paragraph about grammar.</p>
<pre class="r"><code># read in text
splitexampletext  &lt;- base::readRDS(url(&quot;https://slcladal.github.io/data/tx2.rda&quot;, &quot;rb&quot;))
# inspect
splitexampletext</code></pre>
<pre><code>## [1] &quot;Grammar is a system of rules which governs the production and use of utterances in a given language.&quot;                                                                                                                                                                                                   
## [2] &quot;These rules apply to sound as well as meaning, and include componential subsets of rules, such as those pertaining to phonology (the organisation of phonetic sound systems), morphology (the formation and composition of words), and syntax (the formation and composition of phrases and sentences).&quot;
## [3] &quot;Many modern theories that deal with the principles of grammar are based on Noam Chomsky&#39;s framework of generative linguistics.&quot;</code></pre>
<p>This second example text represents the same paragraph about grammar,
but split into individual sentences.</p>
<pre class="r"><code>additionaltext  &lt;- base::readRDS(url(&quot;https://slcladal.github.io/data/tx3.rda&quot;, &quot;rb&quot;))
# inspect
additionaltext</code></pre>
<pre><code>## [1] &quot;In the early 20th century, Ferdinand de Saussure distinguished between the notions of langue and parole in his formulation of structural linguistics. According to him, parole is the specific utterance of speech, whereas langue refers to an abstract phenomenon that theoretically defines the principles and system of rules that govern a language. This distinction resembles the one made by Noam Chomsky between competence and performance in his theory of transformative or generative grammar. According to Chomsky, competence is an individual&#39;s innate capacity and potential for language (like in Saussure&#39;s langue), while performance is the specific way in which it is used by individuals, groups, and communities (i.e., parole, in Saussurean terms). &quot;</code></pre>
<p>The third example text represents a paragraph about Ferdinand de
Saussure - the founder of modern linguistics.</p>
<pre class="r"><code>sentences  &lt;- base::readRDS(url(&quot;https://slcladal.github.io/data/tx4.rda&quot;, &quot;rb&quot;))
# inspect
sentences</code></pre>
<pre><code>## [1] &quot;This is a first sentence.&quot;     &quot;This is a second sentence.&quot;   
## [3] &quot;And this is a third sentence.&quot;</code></pre>
<p>The third example text consist of 3 short plain sentences.</p>
<p>In the following, we will perform various operations on the example
texts.</p>
</div>
<div id="basic-string-processing" class="section level1 unnumbered">
<h1 class="unnumbered">Basic String Processing</h1>
<p>Before turning to functions provided in the <code>stringr</code>, let
us just briefly focus on some base functions that are extremely useful
when working with texts.</p>
<p>A very useful function is, e.g. <code>tolower</code> which converts
everything to lower case.</p>
<pre class="r"><code>tolower(exampletext)</code></pre>
<pre><code>## [1] &quot;grammar is a system of rules which governs the production and use of utterances in a given language. these rules apply to sound as well as meaning, and include componential subsets of rules, such as those pertaining to phonology (the organisation of phonetic sound systems), morphology (the formation and composition of words), and syntax (the formation and composition of phrases and sentences). many modern theories that deal with the principles of grammar are based on noam chomsky&#39;s framework of generative linguistics.&quot;</code></pre>
<p>Conversely, <code>toupper</code> converts everything to upper
case.</p>
<pre class="r"><code>toupper(exampletext)</code></pre>
<pre><code>## [1] &quot;GRAMMAR IS A SYSTEM OF RULES WHICH GOVERNS THE PRODUCTION AND USE OF UTTERANCES IN A GIVEN LANGUAGE. THESE RULES APPLY TO SOUND AS WELL AS MEANING, AND INCLUDE COMPONENTIAL SUBSETS OF RULES, SUCH AS THOSE PERTAINING TO PHONOLOGY (THE ORGANISATION OF PHONETIC SOUND SYSTEMS), MORPHOLOGY (THE FORMATION AND COMPOSITION OF WORDS), AND SYNTAX (THE FORMATION AND COMPOSITION OF PHRASES AND SENTENCES). MANY MODERN THEORIES THAT DEAL WITH THE PRINCIPLES OF GRAMMAR ARE BASED ON NOAM CHOMSKY&#39;S FRAMEWORK OF GENERATIVE LINGUISTICS.&quot;</code></pre>
<p>The <code>stringr</code> package (see <a
href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/stringr.pdf">here</a>
is part of the so-called <em>tidyverse</em> - a collection of packages
that allows to write R code in a readable manner - and it is the most
widely used package for string processing in . The advantage of using
<code>stringr</code> is that it makes string processing very easy. All
<code>stringr</code> functions share a common structure:</p>
<p><code>str_function(string, pattern)</code></p>
<p>The two arguments in the structure of <code>stringr</code> functions
are: <em>string</em> which is the character string to be processed and a
pattern which is either a simple sequence of characters, a regular
expression, or a combination of both. Because the <em>string</em> comes
first, the <code>stringr</code> functions are ideal for piping and thus
use in tidyverse style R.</p>
<p>All function names of <code>stringr</code> begin with str, then an
underscore and then the name of the action to be performed. For example,
to replace the first occurrence of a pattern in a string, we should use
<code>str_replace()</code>. In the following, we will use
<code>stringr</code> functions to perform various operations on the
example text. As we have already loaded the <code>tidyverse</code>
package, we can start right away with using <code>stringr</code>
functions as shown below.</p>
<p>Like <code>nchar</code> in <code>base</code>, <code>str_count</code>
provides the number of characters of a text.</p>
<pre class="r"><code>str_count(splitexampletext)</code></pre>
<pre><code>## [1] 100 295 126</code></pre>
<p>The function <code>str_detect</code> informs about whether a pattern
is present in a text and outputs a logical vector with <em>TRUE</em> if
the pattern occurs and <em>FALSE</em> if it does not.</p>
<pre class="r"><code>str_detect(splitexampletext, &quot;and&quot;)</code></pre>
<pre><code>## [1]  TRUE  TRUE FALSE</code></pre>
<p>The function <code>str_extract</code> extracts the first occurrence
of a pattern, if that pattern is present in a text.</p>
<pre class="r"><code>str_extract(exampletext, &quot;and&quot;)</code></pre>
<pre><code>## [1] &quot;and&quot;</code></pre>
<p>The function <code>str_extract_all</code> extracts all occurrences of
a pattern, if that pattern is present in a text.</p>
<pre class="r"><code>str_extract_all(exampletext, &quot;and&quot;)</code></pre>
<pre><code>## [[1]]
## [1] &quot;and&quot; &quot;and&quot; &quot;and&quot; &quot;and&quot; &quot;and&quot; &quot;and&quot;</code></pre>
<p>The function <code>str_locate</code> provides the start and end
position of the match of the pattern in a text.</p>
<pre class="r"><code>str_locate(exampletext, &quot;and&quot;) </code></pre>
<pre><code>##      start end
## [1,]    59  61</code></pre>
<p>The function <code>str_locate_all</code> provides the start and end
positions of the match of the pattern in a text and displays the result
in matrix-form.</p>
<pre class="r"><code>str_locate_all(exampletext, &quot;and&quot;)</code></pre>
<pre><code>## [[1]]
##      start end
## [1,]    59  61
## [2,]   149 151
## [3,]   302 304
## [4,]   329 331
## [5,]   355 357
## [6,]   382 384</code></pre>
<p>The function <code>str_match</code> extracts the first occurrence of
the pattern in a text.</p>
<pre class="r"><code>str_match(exampletext, &quot;and&quot;) </code></pre>
<pre><code>##      [,1] 
## [1,] &quot;and&quot;</code></pre>
<p>The function <code>str_match_all</code> extracts the all occurrences
of the pattern from a text.</p>
<pre class="r"><code>str_match_all(exampletext, &quot;and&quot;)</code></pre>
<pre><code>## [[1]]
##      [,1] 
## [1,] &quot;and&quot;
## [2,] &quot;and&quot;
## [3,] &quot;and&quot;
## [4,] &quot;and&quot;
## [5,] &quot;and&quot;
## [6,] &quot;and&quot;</code></pre>
<p>The function <code>str_remove</code> removes the first occurrence of
a pattern in a text.</p>
<pre class="r"><code>str_remove(exampletext, &quot;and&quot;) </code></pre>
<pre><code>## [1] &quot;Grammar is a system of rules which governs the production  use of utterances in a given language. These rules apply to sound as well as meaning, and include componential subsets of rules, such as those pertaining to phonology (the organisation of phonetic sound systems), morphology (the formation and composition of words), and syntax (the formation and composition of phrases and sentences). Many modern theories that deal with the principles of grammar are based on Noam Chomsky&#39;s framework of generative linguistics.&quot;</code></pre>
<p>The function <code>str_remove_all</code> removes all occurrences of a
pattern from a text.</p>
<pre class="r"><code>str_remove_all(exampletext, &quot;and&quot;)</code></pre>
<pre><code>## [1] &quot;Grammar is a system of rules which governs the production  use of utterances in a given language. These rules apply to sound as well as meaning,  include componential subsets of rules, such as those pertaining to phonology (the organisation of phonetic sound systems), morphology (the formation  composition of words),  syntax (the formation  composition of phrases  sentences). Many modern theories that deal with the principles of grammar are based on Noam Chomsky&#39;s framework of generative linguistics.&quot;</code></pre>
<p>The function <code>str_replace</code> replaces the first occurrence
of a pattern with something else in a text.</p>
<pre class="r"><code>str_replace(exampletext, &quot;and&quot;, &quot;AND&quot;)</code></pre>
<pre><code>## [1] &quot;Grammar is a system of rules which governs the production AND use of utterances in a given language. These rules apply to sound as well as meaning, and include componential subsets of rules, such as those pertaining to phonology (the organisation of phonetic sound systems), morphology (the formation and composition of words), and syntax (the formation and composition of phrases and sentences). Many modern theories that deal with the principles of grammar are based on Noam Chomsky&#39;s framework of generative linguistics.&quot;</code></pre>
<p>The function <code>str_replace_all</code> replaces all occurrences of
a pattern with something else in a text.</p>
<pre class="r"><code>str_replace_all(exampletext, &quot;and&quot;, &quot;AND&quot;)</code></pre>
<pre><code>## [1] &quot;Grammar is a system of rules which governs the production AND use of utterances in a given language. These rules apply to sound as well as meaning, AND include componential subsets of rules, such as those pertaining to phonology (the organisation of phonetic sound systems), morphology (the formation AND composition of words), AND syntax (the formation AND composition of phrases AND sentences). Many modern theories that deal with the principles of grammar are based on Noam Chomsky&#39;s framework of generative linguistics.&quot;</code></pre>
<p>The function <code>str_starts</code> tests whether a given text
begins with a certain pattern and outputs a logical vector.</p>
<pre class="r"><code>str_starts(exampletext, &quot;and&quot;) </code></pre>
<pre><code>## [1] FALSE</code></pre>
<p>The function <code>str_ends</code> tests whether a text ends with a
certain pattern and outputs a logical vector.</p>
<pre class="r"><code>str_ends(exampletext, &quot;and&quot;)</code></pre>
<pre><code>## [1] FALSE</code></pre>
<p>Like <code>strsplit</code>, the function <code>str_split</code>
splits a text when a given pattern occurs. If no pattern is provided,
then the text is split into individual symbols.</p>
<pre class="r"><code>str_split(exampletext, &quot;and&quot;) </code></pre>
<pre><code>## [[1]]
## [1] &quot;Grammar is a system of rules which governs the production &quot;                                                                                            
## [2] &quot; use of utterances in a given language. These rules apply to sound as well as meaning, &quot;                                                               
## [3] &quot; include componential subsets of rules, such as those pertaining to phonology (the organisation of phonetic sound systems), morphology (the formation &quot;
## [4] &quot; composition of words), &quot;                                                                                                                              
## [5] &quot; syntax (the formation &quot;                                                                                                                               
## [6] &quot; composition of phrases &quot;                                                                                                                              
## [7] &quot; sentences). Many modern theories that deal with the principles of grammar are based on Noam Chomsky&#39;s framework of generative linguistics.&quot;</code></pre>
<p>The function <code>str_split_fixed</code> splits a text when a given
pattern occurs but only so often as is indicated by the argument
<code>n</code>. So, even if the patter occur more often than
<code>n</code>, <code>str_split_fixed</code> will only split the text
<code>n</code> times.</p>
<pre class="r"><code>str_split_fixed(exampletext, &quot;and&quot;, n = 3)</code></pre>
<pre><code>##      [,1]                                                        
## [1,] &quot;Grammar is a system of rules which governs the production &quot;
##      [,2]                                                                                     
## [1,] &quot; use of utterances in a given language. These rules apply to sound as well as meaning, &quot;
##      [,3]                                                                                                                                                                                                                                                                                                                                                                                  
## [1,] &quot; include componential subsets of rules, such as those pertaining to phonology (the organisation of phonetic sound systems), morphology (the formation and composition of words), and syntax (the formation and composition of phrases and sentences). Many modern theories that deal with the principles of grammar are based on Noam Chomsky&#39;s framework of generative linguistics.&quot;</code></pre>
<p>The function <code>str_subset</code> extracts those subsets of a text
that contain a certain pattern.</p>
<pre class="r"><code>str_subset(splitexampletext, &quot;and&quot;) </code></pre>
<pre><code>## [1] &quot;Grammar is a system of rules which governs the production and use of utterances in a given language.&quot;                                                                                                                                                                                                   
## [2] &quot;These rules apply to sound as well as meaning, and include componential subsets of rules, such as those pertaining to phonology (the organisation of phonetic sound systems), morphology (the formation and composition of words), and syntax (the formation and composition of phrases and sentences).&quot;</code></pre>
<p>The function <code>str_which</code> provides a vector with the
indices of the texts that contain a certain pattern.</p>
<pre class="r"><code>str_which(splitexampletext, &quot;and&quot;)</code></pre>
<pre><code>## [1] 1 2</code></pre>
<p>The function <code>str_view</code> shows the locations of the first
instances of a pattern in a text or vector of texts.</p>
<pre class="r"><code>str_view(splitexampletext, &quot;and&quot;)</code></pre>
<div id="htmlwidget-34ba63970e1e9508ad7d" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-34ba63970e1e9508ad7d">{"x":{"html":"<ul>\n  <li>Grammar is a system of rules which governs the production <span class='match'>and<\/span> use of utterances in a given language.<\/li>\n  <li>These rules apply to sound as well as meaning, <span class='match'>and<\/span> include componential subsets of rules, such as those pertaining to phonology (the organisation of phonetic sound systems), morphology (the formation and composition of words), and syntax (the formation and composition of phrases and sentences).<\/li>\n  <li>Many modern theories that deal with the principles of grammar are based on Noam Chomsky's framework of generative linguistics.<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>The function <code>str_view_all</code> shows the locations of all
instances of a pattern in a text or vector of texts.</p>
<pre class="r"><code>str_view_all(exampletext, &quot;and&quot;)</code></pre>
<div id="htmlwidget-92bc1ac4c983398108d8" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-92bc1ac4c983398108d8">{"x":{"html":"<ul>\n  <li>Grammar is a system of rules which governs the production <span class='match'>and<\/span> use of utterances in a given language. These rules apply to sound as well as meaning, <span class='match'>and<\/span> include componential subsets of rules, such as those pertaining to phonology (the organisation of phonetic sound systems), morphology (the formation <span class='match'>and<\/span> composition of words), <span class='match'>and<\/span> syntax (the formation <span class='match'>and<\/span> composition of phrases <span class='match'>and<\/span> sentences). Many modern theories that deal with the principles of grammar are based on Noam Chomsky's framework of generative linguistics.<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>The function <code>str_pad</code> adds white spaces to a text or
vector of texts so that they reach a given number of symbols.</p>
<pre class="r"><code># create text with white spaces
text &lt;- &quot; this    is a    text   &quot;
str_pad(text, width = 30)</code></pre>
<pre><code>## [1] &quot;       this    is a    text   &quot;</code></pre>
<p>The function <code>str_trim</code> removes white spaces from the
beginning(s) and end(s) of a text or vector of texts.</p>
<pre class="r"><code>str_trim(text) </code></pre>
<pre><code>## [1] &quot;this    is a    text&quot;</code></pre>
<p>The function <code>str_squish</code> removes white spaces that occur
within a text or vector of texts.</p>
<pre class="r"><code>str_squish(text)</code></pre>
<pre><code>## [1] &quot;this is a text&quot;</code></pre>
<p>The function <code>str_wrap</code> removes white spaces from the
beginning(s) and end(s) of a text or vector of texts and also those
white spaces that occur within a text or vector of texts.</p>
<pre class="r"><code>str_wrap(text)</code></pre>
<pre><code>## [1] &quot;this is a text&quot;</code></pre>
<p>The function <code>str_order</code> provides a vector that represents
the order of a vector of texts according to the lengths of texts in that
vector.</p>
<pre class="r"><code>str_order(splitexampletext)</code></pre>
<pre><code>## [1] 1 3 2</code></pre>
<p>The function <code>str_sort</code> orders of a vector of texts
according to the lengths of texts in that vector.</p>
<pre class="r"><code>str_sort(splitexampletext)</code></pre>
<pre><code>## [1] &quot;Grammar is a system of rules which governs the production and use of utterances in a given language.&quot;                                                                                                                                                                                                   
## [2] &quot;Many modern theories that deal with the principles of grammar are based on Noam Chomsky&#39;s framework of generative linguistics.&quot;                                                                                                                                                                         
## [3] &quot;These rules apply to sound as well as meaning, and include componential subsets of rules, such as those pertaining to phonology (the organisation of phonetic sound systems), morphology (the formation and composition of words), and syntax (the formation and composition of phrases and sentences).&quot;</code></pre>
<p>The function <code>str_to_upper</code> converts all symbols in a text
or vector of texts to upper case.</p>
<pre class="r"><code>str_to_upper(exampletext) </code></pre>
<pre><code>## [1] &quot;GRAMMAR IS A SYSTEM OF RULES WHICH GOVERNS THE PRODUCTION AND USE OF UTTERANCES IN A GIVEN LANGUAGE. THESE RULES APPLY TO SOUND AS WELL AS MEANING, AND INCLUDE COMPONENTIAL SUBSETS OF RULES, SUCH AS THOSE PERTAINING TO PHONOLOGY (THE ORGANISATION OF PHONETIC SOUND SYSTEMS), MORPHOLOGY (THE FORMATION AND COMPOSITION OF WORDS), AND SYNTAX (THE FORMATION AND COMPOSITION OF PHRASES AND SENTENCES). MANY MODERN THEORIES THAT DEAL WITH THE PRINCIPLES OF GRAMMAR ARE BASED ON NOAM CHOMSKY&#39;S FRAMEWORK OF GENERATIVE LINGUISTICS.&quot;</code></pre>
<p>The function <code>str_to_lower</code> converts all symbols in a text
or vector of texts to lower case.</p>
<pre class="r"><code>str_to_lower(exampletext) </code></pre>
<pre><code>## [1] &quot;grammar is a system of rules which governs the production and use of utterances in a given language. these rules apply to sound as well as meaning, and include componential subsets of rules, such as those pertaining to phonology (the organisation of phonetic sound systems), morphology (the formation and composition of words), and syntax (the formation and composition of phrases and sentences). many modern theories that deal with the principles of grammar are based on noam chomsky&#39;s framework of generative linguistics.&quot;</code></pre>
<p>The function <code>str_c</code> combines texts into one text</p>
<pre class="r"><code>str_c(exampletext, additionaltext)</code></pre>
<pre><code>## [1] &quot;Grammar is a system of rules which governs the production and use of utterances in a given language. These rules apply to sound as well as meaning, and include componential subsets of rules, such as those pertaining to phonology (the organisation of phonetic sound systems), morphology (the formation and composition of words), and syntax (the formation and composition of phrases and sentences). Many modern theories that deal with the principles of grammar are based on Noam Chomsky&#39;s framework of generative linguistics.In the early 20th century, Ferdinand de Saussure distinguished between the notions of langue and parole in his formulation of structural linguistics. According to him, parole is the specific utterance of speech, whereas langue refers to an abstract phenomenon that theoretically defines the principles and system of rules that govern a language. This distinction resembles the one made by Noam Chomsky between competence and performance in his theory of transformative or generative grammar. According to Chomsky, competence is an individual&#39;s innate capacity and potential for language (like in Saussure&#39;s langue), while performance is the specific way in which it is used by individuals, groups, and communities (i.e., parole, in Saussurean terms). &quot;</code></pre>
<p>The function <code>str_conv</code> converts a text into a certain
type of encoding, e.g. into <code>UTF-8</code> or
<code>Latin1</code>.</p>
<pre class="r"><code>str_conv(exampletext, encoding = &quot;UTF-8&quot;)</code></pre>
<pre><code>## [1] &quot;Grammar is a system of rules which governs the production and use of utterances in a given language. These rules apply to sound as well as meaning, and include componential subsets of rules, such as those pertaining to phonology (the organisation of phonetic sound systems), morphology (the formation and composition of words), and syntax (the formation and composition of phrases and sentences). Many modern theories that deal with the principles of grammar are based on Noam Chomsky&#39;s framework of generative linguistics.&quot;</code></pre>
<p>The function <code>str_dup</code> reduplicates a text or a vector of
texts n times.</p>
<pre class="r"><code>str_dup(exampletext, times=2)</code></pre>
<pre><code>## [1] &quot;Grammar is a system of rules which governs the production and use of utterances in a given language. These rules apply to sound as well as meaning, and include componential subsets of rules, such as those pertaining to phonology (the organisation of phonetic sound systems), morphology (the formation and composition of words), and syntax (the formation and composition of phrases and sentences). Many modern theories that deal with the principles of grammar are based on Noam Chomsky&#39;s framework of generative linguistics.Grammar is a system of rules which governs the production and use of utterances in a given language. These rules apply to sound as well as meaning, and include componential subsets of rules, such as those pertaining to phonology (the organisation of phonetic sound systems), morphology (the formation and composition of words), and syntax (the formation and composition of phrases and sentences). Many modern theories that deal with the principles of grammar are based on Noam Chomsky&#39;s framework of generative linguistics.&quot;</code></pre>
<p>The function <code>str_flatten</code> combines a vector of texts into
one text. The argument <code>collapse</code> defines the symbol that
occurs between the combined texts. If the argument <code>collapse</code>
is left out, the texts will be combined without any symbol between the
combined texts.</p>
<pre class="r"><code>str_flatten(sentences, collapse = &quot; &quot;)</code></pre>
<pre><code>## [1] &quot;This is a first sentence. This is a second sentence. And this is a third sentence.&quot;</code></pre>
<p>If the argument <code>collapse</code> is left out, the texts will be
combined without any symbol between the combined texts.</p>
<pre class="r"><code>str_flatten(sentences)</code></pre>
<pre><code>## [1] &quot;This is a first sentence.This is a second sentence.And this is a third sentence.&quot;</code></pre>
<p>The function <code>str_length</code> provides the length of texts in
characters.</p>
<pre class="r"><code>str_length(exampletext)</code></pre>
<pre><code>## [1] 523</code></pre>
<p>The function <code>str_replace_na</code> replaces NA in texts. It is
important to note that NA, if it occurs within a string, is considered
to be the literal string <code>NA</code>.</p>
<pre class="r"><code># create sentences with NA
sentencesna &lt;- c(&quot;Some text&quot;, NA, &quot;Some more text&quot;, &quot;Some NA text&quot;)
# apply str_replace_na function
str_replace_na(sentencesna, replacement = &quot;Something new&quot;)</code></pre>
<pre><code>## [1] &quot;Some text&quot;      &quot;Something new&quot;  &quot;Some more text&quot; &quot;Some NA text&quot;</code></pre>
<p>The function <code>str_trunc</code> ends strings with … after a
certain number of characters.</p>
<pre class="r"><code>str_trunc(sentences, width = 20)</code></pre>
<pre><code>## [1] &quot;This is a first s...&quot; &quot;This is a second ...&quot; &quot;And this is a thi...&quot;</code></pre>
<p>The function <code>str_sub</code> extracts a string from a text from
a start location to an end position (expressed as character
positions).</p>
<pre class="r"><code>str_sub(exampletext, 5, 25)</code></pre>
<pre><code>## [1] &quot;mar is a system of ru&quot;</code></pre>
<p>The function <code>word</code> extracts words from a text (expressed
as word positions).</p>
<pre class="r"><code>word(exampletext, 2:7)</code></pre>
<pre><code>## [1] &quot;is&quot;     &quot;a&quot;      &quot;system&quot; &quot;of&quot;     &quot;rules&quot;  &quot;which&quot;</code></pre>
<p>The function <code>str_glue</code> combines strings and allows to
input variables.</p>
<pre class="r"><code>name &lt;- &quot;Fred&quot;
age &lt;- 50
anniversary &lt;- as.Date(&quot;1991-10-12&quot;)
str_glue(
  &quot;My name is {name}, &quot;,
  &quot;my age next year is {age + 1}, &quot;,
  &quot;and my anniversary is {format(anniversary, &#39;%A, %B %d, %Y&#39;)}.&quot;
)</code></pre>
<pre><code>## My name is Fred, my age next year is 51, and my anniversary is Samstag, Oktober 12, 1991.</code></pre>
<p>The function <code>str_glue_data</code> is particularly useful when
it is used in data pipelines. The data set <code>mtcars</code> is a
build in data set that is loaded automatically when starting R.</p>
<pre class="r"><code>mtcars %&gt;% 
  str_glue_data(&quot;{rownames(.)} has {hp} hp&quot;)</code></pre>
<pre><code>## Mazda RX4 has 110 hp
## Mazda RX4 Wag has 110 hp
## Datsun 710 has 93 hp
## Hornet 4 Drive has 110 hp
## Hornet Sportabout has 175 hp
## Valiant has 105 hp
## Duster 360 has 245 hp
## Merc 240D has 62 hp
## Merc 230 has 95 hp
## Merc 280 has 123 hp
## Merc 280C has 123 hp
## Merc 450SE has 180 hp
## Merc 450SL has 180 hp
## Merc 450SLC has 180 hp
## Cadillac Fleetwood has 205 hp
## Lincoln Continental has 215 hp
## Chrysler Imperial has 230 hp
## Fiat 128 has 66 hp
## Honda Civic has 52 hp
## Toyota Corolla has 65 hp
## Toyota Corona has 97 hp
## Dodge Challenger has 150 hp
## AMC Javelin has 150 hp
## Camaro Z28 has 245 hp
## Pontiac Firebird has 175 hp
## Fiat X1-9 has 66 hp
## Porsche 914-2 has 91 hp
## Lotus Europa has 113 hp
## Ford Pantera L has 264 hp
## Ferrari Dino has 175 hp
## Maserati Bora has 335 hp
## Volvo 142E has 109 hp</code></pre>
<hr />
<div class="warning"
style="padding:0.1em; background-color:#51247a; color:#f2f2f2">
<span>
<p style="margin-top:1em; text-align:center">
<b>EXERCISE TIME!</b>
</p>
<p style="margin-left:1em;">
</p>
<p></span></p>
</div>
<div class="question">
<p>`</p>
<ol style="list-style-type: decimal">
<li>Load the text <code>linguistics04</code>. How many words does the
text consist of?</li>
</ol>
<details>
<summary>
Answer
</summary>
<pre class="r"><code>  readLines(&quot;https://slcladal.github.io/data/testcorpus/linguistics04.txt&quot;) %&gt;%
  paste0(collapse = &quot; &quot;) %&gt;%
  strsplit(&quot; &quot;) %&gt;%
  unlist() %&gt;%
  length()</code></pre>
<pre><code>  ## [1] 101</code></pre>
</details>
<ol start="2" style="list-style-type: decimal">
<li>How many characters does the text consist of?</li>
</ol>
<details>
<summary>
Answer
</summary>
<pre class="r"><code>  readLines(&quot;https://slcladal.github.io/data/testcorpus/linguistics04.txt&quot;) %&gt;%
  paste0(collapse = &quot; &quot;) %&gt;%
  strsplit(&quot;&quot;) %&gt;%
  unlist() %&gt;%
  length()</code></pre>
<pre><code>  ## [1] 673</code></pre>
</details>
</div>
<p>`</p>
<hr />
</div>
<div id="advanced-string-processing" class="section level1 unnumbered">
<h1 class="unnumbered">Advanced String Processing</h1>
<p>Above, we have used functions and regular expressions to extract and
find patters in textual data. Here, we will focus on common methods for
cleaning text data that are applied before implementing certain
methods.</p>
<p>We start by installing and then loading some additional packages,
e.g., the <code>quanteda</code> (see <a
href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/quanteda.pdf">here</a>
for a cheat sheet for the <code>quanteda</code> package), the
<code>tm</code>, and the <code>udpipe</code> package, which are
extremely useful when dealing with more advanced text processing.</p>
<pre class="r"><code>install.packages(&quot;quanteda&quot;)
install.packages(&quot;tm&quot;)
install.packages(&quot;udpipe&quot;)</code></pre>
<pre class="r"><code>library(quanteda)
library(tm)
library(udpipe) </code></pre>
<p>One common procedure is to split texts into sentences which we can do
by using, e.g., the <code>tokenize_sentence</code> function from the
<code>quanteda</code> package. I also unlist the data to have a vector
wot work with (rather than a list).</p>
<pre class="r"><code>et_sent &lt;- quanteda::tokenize_sentence(exampletext) %&gt;%
  unlist()
# inspect
et_sent</code></pre>
<pre><code>## [1] &quot;Grammar is a system of rules which governs the production and use of utterances in a given language.&quot;                                                                                                                                                                                                   
## [2] &quot;These rules apply to sound as well as meaning, and include componential subsets of rules, such as those pertaining to phonology (the organisation of phonetic sound systems), morphology (the formation and composition of words), and syntax (the formation and composition of phrases and sentences).&quot;
## [3] &quot;Many modern theories that deal with the principles of grammar are based on Noam Chomsky&#39;s framework of generative linguistics.&quot;</code></pre>
<p>Another common procedure is to remove stop words, i.e., words that do
not have semantic or referential meaning (like nouns such as
<em>tree</em> or <em>cat</em>, or verbs like <em>sit</em> or
<em>speak</em> or adjectives such as <em>green</em> or <em>loud</em>)
but that indicate syntactic relations, roles, or features.(e.g.,
articles and pronouns). We can remove stopwords using, e.g., the
<code>removeWords</code> function from the <code>tm</code> package</p>
<pre class="r"><code>et_wostop &lt;-  tm::removeWords(exampletext, tm::stopwords(&quot;english&quot;))
# inspect
et_wostop</code></pre>
<pre><code>## [1] &quot;Grammar   system  rules  governs  production  use  utterances   given language. These rules apply  sound  well  meaning,  include componential subsets  rules,    pertaining  phonology ( organisation  phonetic sound systems), morphology ( formation  composition  words),  syntax ( formation  composition  phrases  sentences). Many modern theories  deal   principles  grammar  based  Noam Chomsky&#39;s framework  generative linguistics.&quot;</code></pre>
<p>To remove the superfluous whote spaces, we can use, e.g., the
<code>stripWhitespace</code> function from the <code>tm</code>
package.</p>
<pre class="r"><code>et_wows &lt;-  tm::stripWhitespace(et_wostop)
# inspect
et_wows</code></pre>
<pre><code>## [1] &quot;Grammar system rules governs production use utterances given language. These rules apply sound well meaning, include componential subsets rules, pertaining phonology ( organisation phonetic sound systems), morphology ( formation composition words), syntax ( formation composition phrases sentences). Many modern theories deal principles grammar based Noam Chomsky&#39;s framework generative linguistics.&quot;</code></pre>
<p>It can also be useful to remove numbers. We can do this using, e.g.,
the <code>removeNumbers</code> function from the <code>tm</code>
package.</p>
<pre class="r"><code>et_wonum &lt;-  tm::removeNumbers(&quot;This is the 1 and only sentence I will write in 2022.&quot;)
# inspect
et_wonum</code></pre>
<pre><code>## [1] &quot;This is the  and only sentence I will write in .&quot;</code></pre>
<p>We may also want to remove any type of punctuation using, e.g., the
<code>removePunctuation</code> function from the <code>tm</code>
package.</p>
<pre class="r"><code>et_wopunct &lt;-  tm::removePunctuation(exampletext)
# inspect
et_wopunct</code></pre>
<pre><code>## [1] &quot;Grammar is a system of rules which governs the production and use of utterances in a given language These rules apply to sound as well as meaning and include componential subsets of rules such as those pertaining to phonology the organisation of phonetic sound systems morphology the formation and composition of words and syntax the formation and composition of phrases and sentences Many modern theories that deal with the principles of grammar are based on Noam Chomskys framework of generative linguistics&quot;</code></pre>
<p>We may also want to stem the words in a document, i.e. removing the
ends of words to be able to group together semantically related words
such as <em>walk</em>, <em>walks</em>, <em>walking</em>, <em>walked</em>
which would all be stemmed into <em>walk</em>. We can stem a text using,
e.g., the <code>stemDocument</code> function from the <code>tm</code>
package.</p>
<pre class="r"><code>et_stem &lt;-  tm::stemDocument(exampletext, language = &quot;en&quot;)
# inspect
et_stem</code></pre>
<p><strong>Tokenization, lemmatization, pos-tagging, and dependency
parsing</strong></p>
<p>A far better option than stemming is lemmatization as lemmatization
is based on proper morphological information and vocabularies. For
lemmatization, we can use the <code>udpipe</code> package which also
tokenizes texts, adds part-of-speech tags, and provides information
about dependency relations.</p>
<p>Before we can tokenize, lemmatize, pos-tag and parse though, we need
to download a pre-trained language model.</p>
<pre class="r"><code># download language model
m_eng   &lt;- udpipe::udpipe_download_model(language = &quot;english-ewt&quot;)</code></pre>
<p>If you have downloaded a model once, you can also load the model
directly from the place where you stored it on your computer. In my
case, I have stored the model in a folder called udpipemodels</p>
<pre class="r"><code># load language model from your computer after you have downloaded it once
m_eng &lt;- udpipe_load_model(file = here::here(&quot;udpipemodels&quot;,
                                             &quot;english-ewt-ud-2.5-191206.udpipe&quot;))</code></pre>
<p>We can now use the model to annotate out text.</p>
<pre class="r"><code># tokenise, tag, dependency parsing
text_anndf &lt;- udpipe::udpipe_annotate(m_eng, x = exampletext) %&gt;%
  as.data.frame() %&gt;%
  dplyr::select(-sentence)
# inspect
head(text_anndf, 10)</code></pre>
<pre><code>##    doc_id paragraph_id sentence_id token_id      token      lemma  upos xpos
## 1    doc1            1           1        1    Grammar    Grammar PROPN  NNP
## 2    doc1            1           1        2         is         be   AUX  VBZ
## 3    doc1            1           1        3          a          a   DET   DT
## 4    doc1            1           1        4     system     system  NOUN   NN
## 5    doc1            1           1        5         of         of   ADP   IN
## 6    doc1            1           1        6      rules       rule  NOUN  NNS
## 7    doc1            1           1        7      which      which  PRON  WDT
## 8    doc1            1           1        8    governs     govern  VERB  VBZ
## 9    doc1            1           1        9        the        the   DET   DT
## 10   doc1            1           1       10 production production  NOUN   NN
##                                                    feats head_token_id
## 1                                            Number=Sing             4
## 2  Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin             4
## 3                              Definite=Ind|PronType=Art             4
## 4                                            Number=Sing             0
## 5                                                   &lt;NA&gt;             6
## 6                                            Number=Plur             4
## 7                                           PronType=Rel             8
## 8  Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin             4
## 9                              Definite=Def|PronType=Art            10
## 10                                           Number=Sing             8
##      dep_rel deps misc
## 1      nsubj &lt;NA&gt; &lt;NA&gt;
## 2        cop &lt;NA&gt; &lt;NA&gt;
## 3        det &lt;NA&gt; &lt;NA&gt;
## 4       root &lt;NA&gt; &lt;NA&gt;
## 5       case &lt;NA&gt; &lt;NA&gt;
## 6       nmod &lt;NA&gt; &lt;NA&gt;
## 7      nsubj &lt;NA&gt; &lt;NA&gt;
## 8  acl:relcl &lt;NA&gt; &lt;NA&gt;
## 9        det &lt;NA&gt; &lt;NA&gt;
## 10       obj &lt;NA&gt; &lt;NA&gt;</code></pre>
<p>We could, of course, perform many more manipulations of textual data
but this should suffice to get you started.</p>
</div>
<div id="citation-session-info" class="section level1 unnumbered">
<h1 class="unnumbered">Citation &amp; Session Info</h1>
<p>Schweinberger, Martin. 2022. <em>String processing in R</em>.
Brisbane: The University of Queensland. url: <a
href="https://slcladal.github.io/string.html"
class="uri">https://slcladal.github.io/string.html</a> (Version
2022.05.24).</p>
<pre><code>@manual{schweinberger2022string,
  author = {Schweinberger, Martin},
  title = {String processing in R},
  note = {https://slcladal.github.io/string.html},
  year = {2022},
  organization = {The University of Queensland, School of Languages and Cultures},
  address = {Brisbane},
  edition = {2022.05.24}
}</code></pre>
<pre class="r"><code>sessionInfo()</code></pre>
<pre><code>## R version 4.2.0 (2022-04-22 ucrt)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## Running under: Windows 10 x64 (build 19043)
## 
## Matrix products: default
## 
## locale:
## [1] LC_COLLATE=German_Germany.utf8  LC_CTYPE=German_Germany.utf8   
## [3] LC_MONETARY=German_Germany.utf8 LC_NUMERIC=C                   
## [5] LC_TIME=German_Germany.utf8    
## 
## attached base packages:
## [1] stats     graphics  grDevices datasets  utils     methods   base     
## 
## other attached packages:
##  [1] udpipe_0.8.9    tm_0.7-8        NLP_0.2-1       quanteda_3.2.1 
##  [5] forcats_0.5.1   stringr_1.4.0   dplyr_1.0.9     purrr_0.3.4    
##  [9] readr_2.1.2     tidyr_1.2.0     tibble_3.1.7    ggplot2_3.3.6  
## [13] tidyverse_1.3.1
## 
## loaded via a namespace (and not attached):
##  [1] httr_1.4.3         sass_0.4.1         jsonlite_1.8.0     here_1.0.1        
##  [5] modelr_0.1.8       bslib_0.3.1        RcppParallel_5.1.5 assertthat_0.2.1  
##  [9] highr_0.9          renv_0.15.4        cellranger_1.1.0   yaml_2.3.5        
## [13] slam_0.1-50        pillar_1.7.0       backports_1.4.1    lattice_0.20-45   
## [17] glue_1.6.2         digest_0.6.29      rvest_1.0.2        colorspace_2.0-3  
## [21] htmltools_0.5.2    Matrix_1.4-1       pkgconfig_2.0.3    broom_0.8.0       
## [25] haven_2.5.0        scales_1.2.0       tzdb_0.3.0         generics_0.1.2    
## [29] ellipsis_0.3.2     withr_2.5.0        klippy_0.0.0.9500  cli_3.3.0         
## [33] magrittr_2.0.3     crayon_1.5.1       readxl_1.4.0       evaluate_0.15     
## [37] stopwords_2.3      fs_1.5.2           fansi_1.0.3        xml2_1.3.3        
## [41] tools_4.2.0        data.table_1.14.2  hms_1.1.1          lifecycle_1.0.1   
## [45] munsell_0.5.0      reprex_2.0.1       compiler_4.2.0     jquerylib_0.1.4   
## [49] rlang_1.0.2        grid_4.2.0         rstudioapi_0.13    htmlwidgets_1.5.4 
## [53] rmarkdown_2.14     gtable_0.3.0       DBI_1.1.2          R6_2.5.1          
## [57] lubridate_1.8.0    knitr_1.39         fastmap_1.1.0      utf8_1.2.2        
## [61] rprojroot_2.0.3    fastmatch_1.1-3    stringi_1.7.6      parallel_4.2.0    
## [65] Rcpp_1.0.8.3       vctrs_0.4.1        dbplyr_2.1.1       tidyselect_1.1.2  
## [69] xfun_0.30</code></pre>
<hr />
<p><a href="#introduction">Back to top</a></p>
<p><a href="https://slcladal.github.io/index.html">Back to HOME</a></p>
<hr />
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="unnumbered">References</h1>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
